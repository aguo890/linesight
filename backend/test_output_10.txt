============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\19803\business\FactoryExcelManager\backend\venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\19803\business\FactoryExcelManager\backend
configfile: pytest.ini
plugins: anyio-4.12.1, Faker-40.1.0, langsmith-0.6.1, asyncio-1.3.0, cov-7.0.0, mock-3.15.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1 item

tests/test_mapping_intelligence.py::test_mapping_engine_intelligence {"timestamp": "2026-01-09T20:39:41.637024Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'Prod Date' -> 'production_date' (Conf: 1.0)"}
{"timestamp": "2026-01-09T20:39:41.637189Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'Qty' -> 'actual_qty' (Conf: 1.0)"}
{"timestamp": "2026-01-09T20:39:41.637692Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'Style#' -> 'style_number' (Score: 100)"}
FAILED

================================== FAILURES ===================================
______________________ test_mapping_engine_intelligence _______________________
tests\test_mapping_intelligence.py:36: in test_mapping_engine_intelligence
    results: list[ColumnMappingResult] = await engine.match_columns(headers, sample_data)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: object list can't be used in 'await' expression
------------------------------ Captured log call ------------------------------
INFO     app.services.matching.engine:engine.py:163 MATCH [Hash]: 'Prod Date' -> 'production_date' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:163 MATCH [Hash]: 'Qty' -> 'actual_qty' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:171 MATCH [Fuzzy]: 'Style#' -> 'style_number' (Score: 100)
=========================== short test summary info ===========================
FAILED tests/test_mapping_intelligence.py::test_mapping_engine_intelligence
============================== 1 failed in 1.63s ==============================
