"≡ƒº¬ Running Tests (in Docker)..."
docker compose exec backend pytest
time="2026-02-16T04:49:10-05:00" level=warning msg="C:\\Users\\19803\\Projects\\FactoryExcelManager\\docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /usr/local/bin/python3.11
cachedir: .pytest_cache
rootdir: /app
configfile: pytest.ini
testpaths: tests
plugins: asyncio-1.3.0, Faker-40.4.0, langsmith-0.7.1, cov-7.0.0, anyio-4.12.1, mock-3.15.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 224 items

tests/api/test_analytics_flaws.py::test_hourly_production_no_events_returns_zeros PASSED [  0%]
tests/api/test_analytics_flaws.py::test_midnight_boundary_respects_timezone PASSED [  0%]
tests/api/v1/test_factory_settings.py::test_factory_settings_localization_and_snapshot PASSED [  1%]
tests/api/v1/test_team.py::test_assign_user_to_line PASSED               [  1%]
tests/api/v1/test_users.py::test_get_user_me PASSED                      [  2%]
tests/api/v1/test_users.py::test_update_user_me PASSED                   [  2%]
tests/api/v1/test_users.py::test_update_user_invalid_timezone PASSED     [  3%]
tests/api/v1/test_users.py::test_update_user_partial_preferences PASSED  [  3%]
tests/api/v1/test_users.py::test_update_user_invalid_preference_type PASSED [  4%]
tests/e2e/test_excel_to_dashboard.py::test_e2e_excel_ingestion_and_dashboard FAILED [  4%]
tests/test_api/test_ai_decisions.py::test_list_ai_decisions PASSED       [  4%]
tests/test_api/test_ai_decisions.py::test_list_ai_decisions_with_filters PASSED [  5%]
tests/test_api/test_ai_decisions.py::test_get_ai_decision_by_id PASSED   [  5%]
tests/test_api/test_ai_decisions.py::test_get_ai_decision_not_found PASSED [  6%]
tests/test_api/test_ai_decisions.py::test_get_data_source_ai_decisions PASSED [  6%]
tests/test_api/test_ai_decisions.py::test_ai_decisions_pagination PASSED [  7%]
tests/test_api/test_ai_decisions.py::test_ai_decisions_require_auth PASSED [  7%]
tests/test_api/test_analytics_real.py::test_get_overview_stats_real PASSED [  8%]
tests/test_api/test_analytics_real.py::test_get_production_chart_real PASSED [  8%]
tests/test_api/test_analytics_real.py::test_get_lowest_performers_real PASSED [  8%]
tests/test_api/test_analytics_real.py::test_get_discrepancies_real PASSED [  9%]
tests/test_api/test_auth.py::test_login_success PASSED                   [  9%]
tests/test_api/test_auth.py::test_login_invalid_password PASSED          [ 10%]
tests/test_api/test_auth.py::test_login_user_not_found PASSED            [ 10%]
tests/test_api/test_auth.py::test_register_success PASSED                [ 11%]
tests/test_api/test_dashboard_creation_flow.py::test_complete_dashboard_creation_flow PASSED [ 11%]
tests/test_api/test_dashboard_creation_flow.py::test_dashboard_creation_blocked_by_factory_quota PASSED [ 12%]
tests/test_api/test_dashboard_creation_flow.py::test_dashboard_creation_blocked_by_line_quota SKIPPED [ 12%]
tests/test_api/test_dashboard_creation_flow.py::test_multiple_dashboards_same_data_source PASSED [ 12%]
tests/test_api/test_dashboard_creation_flow.py::test_list_dashboards_filtered_by_factory PASSED [ 13%]
tests/test_api/test_dashboard_flow.py::test_edit_configuration FAILED    [ 13%]
tests/test_api/test_dashboard_flow.py::test_view_uploaded_files PASSED   [ 14%]
tests/test_api/test_dashboard_flow.py::test_upload_history_isolation PASSED [ 14%]
tests/test_api/test_dashboard_flow.py::test_upload_history_simple_endpoint PASSED [ 15%]
tests/test_api/test_dashboard_widgets.py::test_get_dhu_quality_trend PASSED [ 15%]
tests/test_api/test_dashboard_widgets.py::test_get_style_progress PASSED [ 16%]
tests/test_api/test_data_pipeline_robust.py::test_value_preservation_through_pipeline PASSED [ 16%]
tests/test_api/test_data_pipeline_robust.py::test_date_format_handling PASSED [ 16%]
tests/test_api/test_data_pipeline_robust.py::test_efficiency_normalization PASSED [ 17%]
tests/test_api/test_data_pipeline_robust.py::test_null_handling PASSED   [ 17%]
tests/test_api/test_data_pipeline_robust.py::test_data_integrity_across_multiple_rows PASSED [ 18%]
tests/test_api/test_data_pipeline_robust.py::test_style_and_order_creation PASSED [ 18%]
tests/test_api/test_data_pipeline_robust.py::test_duplicate_upload_handling PASSED [ 19%]
tests/test_api/test_data_pipeline_robust.py::test_multiple_widgets_receive_correct_data PASSED [ 19%]
tests/test_api/test_data_pipeline_robust.py::test_invalid_data_handling PASSED [ 20%]
tests/test_api/test_data_pipeline_robust.py::test_analytics_sum_matches_database PASSED [ 20%]
tests/test_api/test_datasource.py::test_create_data_source PASSED        [ 20%]
tests/test_api/test_datasource.py::test_get_data_source PASSED           [ 21%]
tests/test_api/test_datasource.py::test_get_data_source_by_line PASSED   [ 21%]
tests/test_api/test_datasource.py::test_update_schema_mapping PASSED     [ 22%]
tests/test_api/test_datasource.py::test_create_duplicate_data_source_fails PASSED [ 22%]
tests/test_api/test_datasources_by_line.py::test_get_datasource_by_line_exists PASSED [ 23%]
tests/test_api/test_demo_pipeline.py::test_demo_full_pipeline_with_excel_file PASSED [ 23%]
tests/test_api/test_demo_pipeline.py::test_demo_data_values_integrity PASSED [ 24%]
tests/test_api/test_destructive_flows.py::test_delete_datasource_cascade PASSED [ 24%]
tests/test_api/test_destructive_flows.py::test_permissions_restricted_delete PASSED [ 25%]
tests/test_api/test_dry_run_flow.py::test_dry_run_preview_structure PASSED [ 25%]
tests/test_api/test_dry_run_flow.py::test_date_auto_fixing_detection PASSED [ 25%]
tests/test_api/test_dry_run_flow.py::test_efficiency_percentage_cleaning PASSED [ 26%]
tests/test_api/test_dry_run_flow.py::test_decimal_field_handling PASSED  [ 26%]
tests/test_api/test_dry_run_flow.py::test_integer_field_cleaning PASSED  [ 27%]
tests/test_api/test_dry_run_flow.py::test_column_mapping_application PASSED [ 27%]
tests/test_api/test_dry_run_flow.py::test_overall_status_with_warnings PASSED [ 28%]
tests/test_api/test_dry_run_flow.py::test_overall_status_all_valid PASSED [ 28%]
tests/test_api/test_dry_run_flow.py::test_promotion_after_dry_run_approval PASSED [ 29%]
tests/test_api/test_dry_run_flow.py::test_dry_run_with_missing_schema_mapping PASSED [ 29%]
tests/test_api/test_dry_run_flow.py::test_dry_run_limits_to_20_rows PASSED [ 29%]
tests/test_api/test_dry_run_flow.py::test_raw_data_preserved_in_preview PASSED [ 30%]
tests/test_api/test_error_handling.py::test_404_json_response PASSED     [ 30%]
tests/test_api/test_error_handling.py::test_validation_error_json_response PASSED [ 31%]
tests/test_api/test_error_handling.py::test_upload_bad_file_json_response PASSED [ 31%]
tests/test_api/test_error_handling.py::test_delete_204_response PASSED   [ 32%]
tests/test_api/test_excel_to_widget_integrity.py::test_golden_master_excel_to_overview_widget PASSED [ 32%]
tests/test_api/test_excel_to_widget_integrity.py::test_golden_master_physics_validation_triggers PASSED [ 33%]
tests/test_api/test_factories.py::test_create_factory PASSED             [ 33%]
tests/test_api/test_factories.py::test_list_factories PASSED             [ 33%]
tests/test_api/test_factories.py::test_production_line_crud PASSED       [ 34%]
tests/test_api/test_fallback_logic.py::test_overview_fallback PASSED     [ 34%]
tests/test_api/test_fallback_logic.py::test_production_chart_fallback PASSED [ 35%]
tests/test_api/test_fallback_logic.py::test_sam_performance_fallback PASSED [ 35%]
tests/test_api/test_fallback_logic.py::test_hourly_fallback PASSED       [ 36%]
tests/test_api/test_individual_widgets.py::test_get_hourly_production PASSED [ 36%]
tests/test_api/test_individual_widgets.py::test_get_sam_performance PASSED [ 37%]
tests/test_api/test_individual_widgets.py::test_get_workforce_stats PASSED [ 37%]
tests/test_api/test_individual_widgets.py::test_get_dhu_history PASSED   [ 37%]
tests/test_api/test_individual_widgets.py::test_get_speed_vs_quality PASSED [ 38%]
tests/test_api/test_individual_widgets.py::test_get_complexity_impact PASSED [ 38%]
tests/test_api/test_individual_widgets.py::test_get_downtime_reasons PASSED [ 39%]
tests/test_api/test_ingestion_deduplication.py::test_ingestion_deduplication PASSED [ 39%]
tests/test_api/test_ingestion_deduplication.py::test_mapping_state_endpoint PASSED [ 40%]
tests/test_api/test_ingestion_deduplication.py::test_process_idempotency PASSED [ 40%]
tests/test_api/test_ingestion_flow.py::test_full_ingestion_flow PASSED   [ 41%]
tests/test_api/test_ingestion_flow.py::test_schema_evolution PASSED      [ 41%]
tests/test_api/test_integrity.py::test_pydantic_validation PASSED        [ 41%]
tests/test_api/test_integrity.py::test_canonical_mapping_validation PASSED [ 42%]
tests/test_api/test_integrity.py::test_order_hybrid_property PASSED      [ 42%]
tests/test_api/test_integrity.py::test_production_run_constraints PASSED [ 43%]
tests/test_api/test_line_management.py::test_reset_schema_configuration PASSED [ 43%]
tests/test_api/test_line_management.py::test_clear_upload_history PASSED [ 44%]
tests/test_api/test_organizations.py::test_get_my_organization PASSED    [ 44%]
tests/test_api/test_organizations.py::test_update_my_organization PASSED [ 45%]
tests/test_api/test_organizations.py::test_get_organization_by_id PASSED [ 45%]
tests/test_api/test_preview.py::test_preview_endpoint_success PASSED     [ 45%]
tests/test_api/test_preview.py::test_list_uploads_includes_datasource_id PASSED [ 46%]
tests/test_api/test_preview_dry_run_endpoint.py::test_preview_dry_run_endpoint PASSED [ 46%]
tests/test_api/test_production.py::test_production_run_lifecycle PASSED  [ 47%]
tests/test_api/test_production.py::test_create_run_factory_mismatch PASSED [ 47%]
tests/test_api/test_promotion.py::test_promotion_logic_full_cycle PASSED [ 48%]
tests/test_api/test_quality_constraints.py::test_quality_inspection_allows_different_types_per_run PASSED [ 48%]
tests/test_api/test_quality_constraints.py::test_quality_inspection_rejects_duplicate_type_per_run PASSED [ 49%]
tests/test_api/test_quality_import.py::test_quality_data_promotion PASSED [ 49%]
tests/test_api/test_quota_enforcement.py::test_factory_quota_enforced PASSED [ 50%]
tests/test_api/test_quota_enforcement.py::test_line_quota_enforced PASSED [ 50%]
tests/test_api/test_quota_enforcement.py::test_soft_deleted_factories_not_counted PASSED [ 50%]
tests/test_api/test_quota_enforcement.py::test_quota_status_endpoint PASSED [ 51%]
tests/test_api/test_quota_enforcement.py::test_enterprise_tier_quotas PASSED [ 51%]
tests/test_api/test_quota_enforcement.py::test_quota_at_exact_limit PASSED [ 52%]
tests/test_api/test_quota_enforcement.py::test_zero_quota_blocks_creation PASSED [ 52%]
tests/test_api/test_repro_500.py::test_list_dashboards_by_factory_id_crash PASSED [ 53%]
tests/test_api/test_samples.py::test_list_sample_files PASSED            [ 53%]
tests/test_api/test_samples.py::test_download_sample_file PASSED         [ 54%]
tests/test_api/test_samples.py::test_download_csv_sample_file PASSED     [ 54%]
tests/test_api/test_samples.py::test_download_nonexistent_file PASSED    [ 54%]
tests/test_api/test_samples.py::test_download_with_path_traversal_attempt PASSED [ 55%]
tests/test_api/test_samples.py::test_sample_files_have_descriptions PASSED [ 55%]
tests/test_api/test_schema_config.py::test_schema_configuration_flow PASSED [ 56%]
tests/test_api/test_schema_mapping_reuse.py::test_confirm_mapping_deactivates_previous PASSED [ 56%]
tests/test_api/test_schema_mapping_reuse.py::test_schema_mapping_version_increments_correctly PASSED [ 57%]
tests/test_api/test_storage_separation.py::test_storage_segmentation PASSED [ 57%]
tests/test_api/test_style_progress.py::test_get_style_progress_with_pending_orders PASSED [ 58%]
tests/test_api/test_upload.py::TestUploadEndpoints::test_upload_endpoint_requires_auth PASSED [ 58%]
tests/test_api/test_upload.py::TestUploadEndpoints::test_upload_rejects_non_excel PASSED [ 58%]
tests/test_api/test_upload.py::TestUploadEndpoints::test_upload_accepts_xlsx PASSED [ 59%]
tests/test_api/test_upload_history.py::test_upload_history_segmentation PASSED [ 59%]
tests/test_api/test_upload_preview.py::test_upload_csv_file PASSED       [ 60%]
tests/test_api/test_upload_preview.py::test_preview_csv_file PASSED      [ 60%]
tests/test_api/test_upload_preview.py::test_preview_excel_file PASSED    [ 61%]
tests/test_api/test_upload_preview.py::test_preview_nonexistent_file PASSED [ 61%]
tests/test_api/test_upload_preview.py::test_upload_invalid_file_extension PASSED [ 62%]
tests/test_api/test_verification_cascade.py::test_factory_deletion_cascade_behavior PASSED [ 62%]
tests/test_api/test_widget_data_e2e.py::test_full_widget_data_flow PASSED [ 62%]
tests/test_api/test_widget_data_e2e.py::test_widget_endpoint_with_line_filter SKIPPED [ 63%]
tests/test_async_flow.py::test_datasource_lifecycle PASSED               [ 63%]
tests/test_datasource_flow.py::test_datasource_flow PASSED               [ 64%]
tests/test_ingestion/test_full_flow.py::test_full_data_flow PASSED       [ 64%]
tests/test_mapping_intelligence.py::test_mapping_engine_intelligence PASSED [ 65%]
tests/test_sequential_ingestion.py::test_jan_feb_march_continuity PASSED [ 65%]
tests/test_services/test_ai_decision_logging.py::test_ai_decision_creation PASSED [ 66%]
tests/test_services/test_ai_decision_logging.py::test_schema_inference_logging PASSED [ 66%]
tests/test_services/test_ai_decision_logging.py::test_code_generation_logging PASSED [ 66%]
tests/test_services/test_ai_decision_logging.py::test_ai_decision_without_db_session PASSED [ 67%]
tests/test_services/test_ai_decision_logging.py::test_ai_decision_data_source_relationship PASSED [ 67%]
tests/test_services/test_ai_decision_logging.py::test_ai_decision_confidence_calculation PASSED [ 68%]
tests/test_services/test_ai_decision_logging.py::test_ai_decision_metadata_completeness PASSED [ 68%]
tests/test_services/test_analytics_service.py::test_get_aggregated_stats_standard PASSED [ 69%]
tests/test_services/test_analytics_service.py::test_get_aggregated_stats_weighted_check PASSED [ 69%]
tests/test_services/test_analytics_service.py::test_validate_production_physics_rules PASSED [ 70%]
tests/test_services/test_date_parser.py::TestDateParser::test_native_types PASSED [ 70%]
tests/test_services/test_date_parser.py::TestDateParser::test_format_spec PASSED [ 70%]
tests/test_services/test_date_parser.py::TestDateParser::test_excel_serials PASSED [ 71%]
tests/test_services/test_date_parser.py::TestDateParser::test_heuristics_dayfirst PASSED [ 71%]
tests/test_services/test_date_parser.py::TestDateParser::test_diagnostics_return PASSED [ 72%]
tests/test_services/test_date_parser.py::TestDateParser::test_invalid_inputs PASSED [ 72%]
tests/test_services/test_excel_parser.py::TestFlexibleExcelParser::test_fuzzy_column_matching_qty PASSED [ 73%]
tests/test_services/test_excel_parser.py::TestFlexibleExcelParser::test_fuzzy_column_matching_po PASSED [ 73%]
tests/test_services/test_excel_parser.py::TestFlexibleExcelParser::test_header_scoring PASSED [ 74%]
tests/test_services/test_excel_parser.py::TestFlexibleExcelParser::test_clean_column_name PASSED [ 74%]
tests/test_services/test_excel_parser.py::TestFlexibleExcelParser::test_empty_columns_filtered PASSED [ 75%]
tests/test_services/test_file_processor.py::TestFileProcessorDryRun::test_dry_run_preview_basic PASSED [ 75%]
tests/test_services/test_file_processor.py::TestFileProcessorDryRun::test_dry_run_detects_date_warnings PASSED [ 75%]
tests/test_services/test_file_processor.py::TestFileProcessorDryRun::test_dry_run_shows_before_after PASSED [ 76%]
tests/test_services/test_file_processor.py::TestFileProcessorDryRun::test_dry_run_no_warnings_for_clean_data PASSED [ 76%]
tests/test_services/test_file_processor.py::TestFileProcessorDryRun::test_dry_run_limits_to_20_rows PASSED [ 77%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_date_messy_format PASSED [ 77%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_date_full_format PASSED [ 78%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_integer_fields PASSED [ 78%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_decimal_fields PASSED [ 79%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_efficiency_percentage PASSED [ 79%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_none_values PASSED [ 79%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_string_fields PASSED [ 80%]
tests/test_services/test_file_processor.py::TestProductionRunInsertion::test_promote_delegates_to_orchestrator PASSED [ 80%]
tests/test_services/test_file_processor.py::TestProductionRunInsertion::test_promote_handles_already_promoted PASSED [ 81%]
tests/test_services/test_fuzzy_matcher_optimized.py::test_fuzzy_matcher_wratio_handling PASSED [ 81%]
tests/test_services/test_fuzzy_matcher_optimized.py::test_short_word_protection PASSED [ 82%]
tests/test_services/test_fuzzy_matcher_optimized.py::test_industry_variations PASSED [ 82%]
tests/test_services/test_fuzzy_matcher_optimized.py::test_match_with_alternatives_deduplication PASSED [ 83%]
tests/test_services/test_fuzzy_matcher_optimized.py::test_performance_cached_keys PASSED [ 83%]
tests/test_services/test_matching_engine_new.py::test_hash_matcher_exact PASSED [ 83%]
tests/test_services/test_matching_engine_new.py::test_hash_matcher_alias PASSED [ 84%]
tests/test_services/test_matching_engine_new.py::test_fuzzy_matcher PASSED [ 84%]
tests/test_services/test_matching_engine_new.py::test_unmatched_column PASSED [ 85%]
tests/test_services/test_matching_engine_new.py::test_case_insensitivity PASSED [ 85%]
tests/test_services/test_matching_engine_new.py::test_operator_plurality_mismatch PASSED [ 86%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_parse_mm_dd_format PASSED [ 86%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_parse_mm_slash_dd_format PASSED [ 87%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_parse_full_date_format PASSED [ 87%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_parse_date_object PASSED [ 87%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_target_qty_alias PASSED [ 88%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_planned_qty_direct PASSED [ 88%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_invalid_date_format PASSED [ 89%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_optional_fields PASSED [ 89%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_default_values PASSED [ 90%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_edge_case_dates PASSED [ 90%]
tests/test_timezone_chaos.py::test_timezone_chaos_midnight_boundary PASSED [ 91%]
tests/test_widget_judge.py::test_judge_workforce_integrity_and_scope PASSED [ 91%]
tests/test_widget_judge.py::test_judge_overview_timezone_and_scope PASSED [ 91%]
tests/test_widget_judge.py::test_judge_no_fake_simulation PASSED         [ 92%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_detects_iso_when_last_exceeds_12 PASSED [ 92%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_detects_swap_when_middle_exceeds_12 PASSED [ 93%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_early_exit_on_first_proof PASSED [ 93%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_ambiguous_when_all_values_under_12 PASSED [ 94%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_single_ambiguous_value PASSED [ 94%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_impossible_date_both_exceed_12 PASSED [ 95%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_mixed_constraint_violations PASSED [ 95%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_february_30_invalid PASSED [ 95%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_empty_list PASSED [ 96%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_none_values_skipped PASSED [ 96%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_non_date_strings_skipped PASSED [ 97%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_slash_separator PASSED [ 97%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_dot_separator PASSED [ 98%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_mixed_separators PASSED [ 98%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_respects_max_sample PASSED [ 99%]
tests/unit/services/ingestion/test_date_profiler.py::TestProfileDateColumn::test_returns_dict_with_expected_keys PASSED [ 99%]
tests/unit/services/ingestion/test_date_profiler.py::TestProfileDateColumn::test_profile_matches_detect_result PASSED [100%]

=================================== FAILURES ===================================
____________________ test_e2e_excel_ingestion_and_dashboard ____________________
tests/e2e/test_excel_to_dashboard.py:243: in test_e2e_excel_ingestion_and_dashboard
    assert stats["total_output"] == 8, (
E   AssertionError: Expected 8 total output (Day 5), got 0
E   assert 0 == 8
----------------------------- Captured stdout call -----------------------------
{"timestamp": "2026-02-16T09:49:25.255211Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://test/api/v1/ingestion/upload?factory_id=9d611437-8107-48c1-ac1c-4861883a8a30&production_line_id=776ea66b-968c-49a9-b5aa-0ecc129eda19 \"HTTP/1.1 200 OK\""}
{"timestamp": "2026-02-16T09:49:25.519522Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'production_date' -> 'production_date' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520008Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'shift' -> 'shift' (Score: 100)"}
{"timestamp": "2026-02-16T09:49:25.520096Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'style_number' -> 'style_number' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520244Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'style_description' -> 'style_number' (Score: 90)"}
{"timestamp": "2026-02-16T09:49:25.520287Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'po_number' -> 'po_number' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520323Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'buyer' -> 'buyer' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520355Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'season' -> 'season' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520393Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'quantity' -> 'actual_qty' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520431Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'sam' -> 'sam' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520465Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'planned_qty' -> 'planned_qty' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520495Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'actual_qty' -> 'actual_qty' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520526Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'operators_present' -> 'operators_present' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520558Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'helpers_present' -> 'helpers_present' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520664Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'worked_minutes' -> 'worked_minutes' (Score: 100)"}
{"timestamp": "2026-02-16T09:49:25.520780Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'downtime_minutes' -> 'downtime_minutes' (Score: 100)"}
{"timestamp": "2026-02-16T09:49:25.520895Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'downtime_reason' -> 'downtime_reason' (Score: 100)"}
{"timestamp": "2026-02-16T09:49:25.520944Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'defects' -> 'defects' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.520989Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'dhu' -> 'dhu' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:49:25.534266Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://test/api/v1/ingestion/process/de0b8eec-a543-49f4-9f28-521f776b0c2c?factory_id=9d611437-8107-48c1-ac1c-4861883a8a30 \"HTTP/1.1 200 OK\""}
{"timestamp": "2026-02-16T09:49:25.578596Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://test/api/v1/ingestion/preview-dry-run/de0b8eec-a543-49f4-9f28-521f776b0c2c \"HTTP/1.1 200 OK\""}
{"timestamp": "2026-02-16T09:49:25.594310Z", "level": "INFO", "logger": "ingestion.promote", "message": "============================================================"}
{"timestamp": "2026-02-16T09:49:25.594407Z", "level": "INFO", "logger": "ingestion.promote", "message": "PROMOTE ENDPOINT CALLED"}
{"timestamp": "2026-02-16T09:49:25.594448Z", "level": "INFO", "logger": "ingestion.promote", "message": "  raw_import_id: de0b8eec-a543-49f4-9f28-521f776b0c2c"}
{"timestamp": "2026-02-16T09:49:25.594472Z", "level": "INFO", "logger": "ingestion.promote", "message": "============================================================"}
{"timestamp": "2026-02-16T09:49:25.595625Z", "level": "INFO", "logger": "ingestion.promote", "message": "  raw_import.status: confirmed"}
{"timestamp": "2026-02-16T09:49:25.595726Z", "level": "INFO", "logger": "ingestion.promote", "message": "  raw_import.factory_id: 9d611437-8107-48c1-ac1c-4861883a8a30"}
{"timestamp": "2026-02-16T09:49:25.595760Z", "level": "INFO", "logger": "ingestion.promote", "message": "  raw_import.production_line_id: 776ea66b-968c-49a9-b5aa-0ecc129eda19"}
{"timestamp": "2026-02-16T09:49:25.595785Z", "level": "INFO", "logger": "ingestion.promote", "message": "  raw_import.data_source_id: d521f16b-542e-4ebb-81bf-3c7e20120d5e"}
{"timestamp": "2026-02-16T09:49:25.595809Z", "level": "INFO", "logger": "ingestion.promote", "message": "Creating FileProcessingService..."}
{"timestamp": "2026-02-16T09:49:25.595903Z", "level": "INFO", "logger": "ingestion.promote", "message": "Calling promote_to_production..."}

==================================================
≡ƒÜÇ DEBUG: promote_to_production CALLED
≡ƒåö raw_import_id: de0b8eec-a543-49f4-9f28-521f776b0c2c
≡ƒöè SQL Logging Enabled
==================================================

{"timestamp": "2026-02-16T09:49:25.596101Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "ORCHESTRATOR: promote_to_production for de0b8eec-a543-49f4-9f28-521f776b0c2c"}
{"timestamp": "2026-02-16T09:49:25.602492Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "DEBUG: Checking mappings for DS d521f16b-542e-4ebb-81bf-3c7e20120d5e"}
{"timestamp": "2026-02-16T09:49:25.602600Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "DEBUG: Mapping 1423cf25-1408-49e8-9a1b-24f861e197b7 | Ver: 1 | Active: True"}
{"timestamp": "2026-02-16T09:49:25.607930Z", "level": "WARNING", "logger": "app.services.ingestion.date_profiler", "message": "AMBIGUOUS DATE COLUMN: All 6 sampled values could be YYYY-MM-DD or YYYY-DD-MM. Defaulting to ISO 8601 (YYYY-MM-DD). Consider configuring explicit format in data source settings."}
{"timestamp": "2026-02-16T09:49:25.608024Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "DATE COLUMN PROFILED: 'production_date' -> YYYY-MM-DD (confidence: 50%)"}
{"timestamp": "2026-02-16T09:49:25.608057Z", "level": "WARNING", "logger": "app.services.ingestion.orchestrator", "message": "AMBIGUOUS DATE COLUMN 'production_date': All sampled values could be YYYY-MM-DD or YYYY-DD-MM. Defaulting to ISO 8601. Consider configuring explicit format."}
{"timestamp": "2026-02-16T09:49:25.614969Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "Resolving existing runs for differential calculation..."}
{"timestamp": "2026-02-16T09:49:25.618003Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "Found 0 existing runs to update."}
{"timestamp": "2026-02-16T09:49:25.618389Z", "level": "INFO", "logger": "app.services.ingestion.writer", "message": "Inserting/Upserting 6 runs..."}
{"timestamp": "2026-02-16T09:49:25.630804Z", "level": "INFO", "logger": "app.services.ingestion.writer", "message": "Flushing ProductionRun writes before inserting children..."}
{"timestamp": "2026-02-16T09:49:25.631010Z", "level": "INFO", "logger": "app.services.ingestion.writer", "message": "Inserting 6 events..."}
{"timestamp": "2026-02-16T09:49:25.633507Z", "level": "INFO", "logger": "app.services.ingestion.writer", "message": "Upserting 6 efficiency metrics..."}
{"timestamp": "2026-02-16T09:49:25.636377Z", "level": "INFO", "logger": "app.services.ingestion.writer", "message": "Upserting 6 quality inspections..."}
{"timestamp": "2026-02-16T09:49:25.796875Z", "level": "INFO", "logger": "ingestion.promote", "message": "Promotion SUCCESS: {'status': 'promoted', 'inserted': 6, 'updated': 0, 'events': 6, 'errors': 0}"}
{"timestamp": "2026-02-16T09:49:25.797300Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://test/api/v1/ingestion/promote/de0b8eec-a543-49f4-9f28-521f776b0c2c \"HTTP/1.1 200 OK\""}
{"timestamp": "2026-02-16T09:49:25.813751Z", "level": "INFO", "logger": "app.api.v1.endpoints.analytics", "message": "[DIAG] get_overview_stats called with line_id=776ea66b-968c-49a9-b5aa-0ecc129eda19"}
2026-02-16 09:49:25,814 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:25.814938Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:25,816 INFO sqlalchemy.engine.Engine SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at 
FROM production_runs 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?
{"timestamp": "2026-02-16T09:49:25.816531Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at \nFROM production_runs \nWHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?"}
2026-02-16 09:49:25,816 INFO sqlalchemy.engine.Engine [generated in 0.00033s] ('2025-01-05', '2025-01-05', '776ea66b-968c-49a9-b5aa-0ecc129eda19')
{"timestamp": "2026-02-16T09:49:25.816667Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00033s] ('2025-01-05', '2025-01-05', '776ea66b-968c-49a9-b5aa-0ecc129eda19')"}
2026-02-16 09:49:25,818 INFO sqlalchemy.engine.Engine SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at 
FROM production_runs 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?
{"timestamp": "2026-02-16T09:49:25.818412Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at \nFROM production_runs \nWHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?"}
2026-02-16 09:49:25,818 INFO sqlalchemy.engine.Engine [cached since 0.002188s ago] ('2025-01-04', '2025-01-04', '776ea66b-968c-49a9-b5aa-0ecc129eda19')
{"timestamp": "2026-02-16T09:49:25.818510Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.002188s ago] ('2025-01-04', '2025-01-04', '776ea66b-968c-49a9-b5aa-0ecc129eda19')"}
2026-02-16 09:49:25,820 INFO sqlalchemy.engine.Engine SELECT count(data_sources.id) AS total, sum(CASE WHEN data_sources.is_active THEN ? ELSE ? END) AS active 
FROM data_sources
{"timestamp": "2026-02-16T09:49:25.820095Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT count(data_sources.id) AS total, sum(CASE WHEN data_sources.is_active THEN ? ELSE ? END) AS active \nFROM data_sources"}
2026-02-16 09:49:25,820 INFO sqlalchemy.engine.Engine [generated in 0.00015s] (1, 0)
{"timestamp": "2026-02-16T09:49:25.820172Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00015s] (1, 0)"}
2026-02-16 09:49:25,821 INFO sqlalchemy.engine.Engine SELECT count(traceability_records.id) AS count_1 
FROM traceability_records 
WHERE traceability_records.verification_status != ?
{"timestamp": "2026-02-16T09:49:25.821370Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT count(traceability_records.id) AS count_1 \nFROM traceability_records \nWHERE traceability_records.verification_status != ?"}
2026-02-16 09:49:25,821 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('VERIFIED',)
{"timestamp": "2026-02-16T09:49:25.821452Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00016s] ('VERIFIED',)"}
{"timestamp": "2026-02-16T09:49:25.822222Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://test/api/v1/analytics/overview?line_id=776ea66b-968c-49a9-b5aa-0ecc129eda19&date_from=2025-01-05&date_to=2025-01-05 \"HTTP/1.1 200 OK\""}
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/ingestion/upload?factory_id=9d611437-8107-48c1-ac1c-4861883a8a30&production_line_id=776ea66b-968c-49a9-b5aa-0ecc129eda19 "HTTP/1.1 200 OK"
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'production_date' -> 'production_date' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:175 MATCH [Fuzzy]: 'shift' -> 'shift' (Score: 100)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'style_number' -> 'style_number' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:175 MATCH [Fuzzy]: 'style_description' -> 'style_number' (Score: 90)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'po_number' -> 'po_number' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'buyer' -> 'buyer' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'season' -> 'season' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'quantity' -> 'actual_qty' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'sam' -> 'sam' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'planned_qty' -> 'planned_qty' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'actual_qty' -> 'actual_qty' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'operators_present' -> 'operators_present' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'helpers_present' -> 'helpers_present' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:175 MATCH [Fuzzy]: 'worked_minutes' -> 'worked_minutes' (Score: 100)
INFO     app.services.matching.engine:engine.py:175 MATCH [Fuzzy]: 'downtime_minutes' -> 'downtime_minutes' (Score: 100)
INFO     app.services.matching.engine:engine.py:175 MATCH [Fuzzy]: 'downtime_reason' -> 'downtime_reason' (Score: 100)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'defects' -> 'defects' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'dhu' -> 'dhu' (Conf: 1.0)
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/ingestion/process/de0b8eec-a543-49f4-9f28-521f776b0c2c?factory_id=9d611437-8107-48c1-ac1c-4861883a8a30 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1740 HTTP Request: GET http://test/api/v1/ingestion/preview-dry-run/de0b8eec-a543-49f4-9f28-521f776b0c2c "HTTP/1.1 200 OK"
INFO     ingestion.promote:ingestion.py:1044 ============================================================
INFO     ingestion.promote:ingestion.py:1045 PROMOTE ENDPOINT CALLED
INFO     ingestion.promote:ingestion.py:1046   raw_import_id: de0b8eec-a543-49f4-9f28-521f776b0c2c
INFO     ingestion.promote:ingestion.py:1047 ============================================================
INFO     ingestion.promote:ingestion.py:1059   raw_import.status: confirmed
INFO     ingestion.promote:ingestion.py:1060   raw_import.factory_id: 9d611437-8107-48c1-ac1c-4861883a8a30
INFO     ingestion.promote:ingestion.py:1061   raw_import.production_line_id: 776ea66b-968c-49a9-b5aa-0ecc129eda19
INFO     ingestion.promote:ingestion.py:1062   raw_import.data_source_id: d521f16b-542e-4ebb-81bf-3c7e20120d5e
INFO     ingestion.promote:ingestion.py:1072 Creating FileProcessingService...
INFO     ingestion.promote:ingestion.py:1074 Calling promote_to_production...
INFO     app.services.ingestion.orchestrator:orchestrator.py:92 ORCHESTRATOR: promote_to_production for de0b8eec-a543-49f4-9f28-521f776b0c2c
INFO     app.services.ingestion.orchestrator:orchestrator.py:109 DEBUG: Checking mappings for DS d521f16b-542e-4ebb-81bf-3c7e20120d5e
INFO     app.services.ingestion.orchestrator:orchestrator.py:112 DEBUG: Mapping 1423cf25-1408-49e8-9a1b-24f861e197b7 | Ver: 1 | Active: True
WARNING  app.services.ingestion.date_profiler:date_profiler.py:147 AMBIGUOUS DATE COLUMN: All 6 sampled values could be YYYY-MM-DD or YYYY-DD-MM. Defaulting to ISO 8601 (YYYY-MM-DD). Consider configuring explicit format in data source settings.
INFO     app.services.ingestion.orchestrator:orchestrator.py:258 DATE COLUMN PROFILED: 'production_date' -> YYYY-MM-DD (confidence: 50%)
WARNING  app.services.ingestion.orchestrator:orchestrator.py:265 AMBIGUOUS DATE COLUMN 'production_date': All sampled values could be YYYY-MM-DD or YYYY-DD-MM. Defaulting to ISO 8601. Consider configuring explicit format.
INFO     app.services.ingestion.orchestrator:orchestrator.py:161 Resolving existing runs for differential calculation...
INFO     app.services.ingestion.orchestrator:orchestrator.py:165 Found 0 existing runs to update.
INFO     app.services.ingestion.writer:writer.py:380 Inserting/Upserting 6 runs...
INFO     app.services.ingestion.writer:writer.py:446 Flushing ProductionRun writes before inserting children...
INFO     app.services.ingestion.writer:writer.py:467 Inserting 6 events...
INFO     app.services.ingestion.writer:writer.py:480 Upserting 6 efficiency metrics...
INFO     app.services.ingestion.writer:writer.py:504 Upserting 6 quality inspections...
INFO     ingestion.promote:ingestion.py:1076 Promotion SUCCESS: {'status': 'promoted', 'inserted': 6, 'updated': 0, 'events': 6, 'errors': 0}
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/ingestion/promote/de0b8eec-a543-49f4-9f28-521f776b0c2c "HTTP/1.1 200 OK"
INFO     app.api.v1.endpoints.analytics:analytics.py:73 [DIAG] get_overview_stats called with line_id=776ea66b-968c-49a9-b5aa-0ecc129eda19
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at 
FROM production_runs 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00033s] ('2025-01-05', '2025-01-05', '776ea66b-968c-49a9-b5aa-0ecc129eda19')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at 
FROM production_runs 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.002188s ago] ('2025-01-04', '2025-01-04', '776ea66b-968c-49a9-b5aa-0ecc129eda19')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(data_sources.id) AS total, sum(CASE WHEN data_sources.is_active THEN ? ELSE ? END) AS active 
FROM data_sources
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00015s] (1, 0)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(traceability_records.id) AS count_1 
FROM traceability_records 
WHERE traceability_records.verification_status != ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00016s] ('VERIFIED',)
INFO     httpx:_client.py:1740 HTTP Request: GET http://test/api/v1/analytics/overview?line_id=776ea66b-968c-49a9-b5aa-0ecc129eda19&date_from=2025-01-05&date_to=2025-01-05 "HTTP/1.1 200 OK"
--------------------------- Captured stdout teardown ---------------------------
2026-02-16 09:49:27,554 INFO sqlalchemy.engine.Engine ROLLBACK
{"timestamp": "2026-02-16T09:49:27.554751Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK"}
2026-02-16 09:49:27,555 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:27.555303Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:27,555 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:49:27.555489Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 09:49:27,555 INFO sqlalchemy.engine.Engine [cached since 6.039s ago] ()
{"timestamp": "2026-02-16T09:49:27.555554Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.039s ago] ()"}
2026-02-16 09:49:27,556 INFO sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table'
{"timestamp": "2026-02-16T09:49:27.556100Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT name FROM sqlite_master WHERE type='table'"}
2026-02-16 09:49:27,556 INFO sqlalchemy.engine.Engine [cached since 5.589s ago] ()
{"timestamp": "2026-02-16T09:49:27.556171Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.589s ago] ()"}
2026-02-16 09:49:27,556 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "ai_decisions"
{"timestamp": "2026-02-16T09:49:27.556896Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"ai_decisions\""}
2026-02-16 09:49:27,556 INFO sqlalchemy.engine.Engine [cached since 5.589s ago] ()
{"timestamp": "2026-02-16T09:49:27.556999Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.589s ago] ()"}
2026-02-16 09:49:27,557 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "alias_mappings"
{"timestamp": "2026-02-16T09:49:27.557540Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"alias_mappings\""}
2026-02-16 09:49:27,557 INFO sqlalchemy.engine.Engine [cached since 5.589s ago] ()
{"timestamp": "2026-02-16T09:49:27.557610Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.589s ago] ()"}
2026-02-16 09:49:27,558 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "efficiency_metrics"
{"timestamp": "2026-02-16T09:49:27.558270Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"efficiency_metrics\""}
2026-02-16 09:49:27,558 INFO sqlalchemy.engine.Engine [cached since 5.589s ago] ()
{"timestamp": "2026-02-16T09:49:27.558337Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.589s ago] ()"}
2026-02-16 09:49:27,559 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dhu_reports"
{"timestamp": "2026-02-16T09:49:27.559428Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dhu_reports\""}
2026-02-16 09:49:27,559 INFO sqlalchemy.engine.Engine [cached since 5.59s ago] ()
{"timestamp": "2026-02-16T09:49:27.559509Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.59s ago] ()"}
2026-02-16 09:49:27,560 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dashboards"
{"timestamp": "2026-02-16T09:49:27.560117Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dashboards\""}
2026-02-16 09:49:27,560 INFO sqlalchemy.engine.Engine [cached since 5.59s ago] ()
{"timestamp": "2026-02-16T09:49:27.560210Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.59s ago] ()"}
2026-02-16 09:49:27,560 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_quality_issues"
{"timestamp": "2026-02-16T09:49:27.560824Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_quality_issues\""}
2026-02-16 09:49:27,560 INFO sqlalchemy.engine.Engine [cached since 5.59s ago] ()
{"timestamp": "2026-02-16T09:49:27.560885Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.59s ago] ()"}
2026-02-16 09:49:27,561 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_sources"
{"timestamp": "2026-02-16T09:49:27.561438Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_sources\""}
2026-02-16 09:49:27,561 INFO sqlalchemy.engine.Engine [cached since 5.59s ago] ()
{"timestamp": "2026-02-16T09:49:27.561513Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.59s ago] ()"}
2026-02-16 09:49:27,562 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "schema_mappings"
{"timestamp": "2026-02-16T09:49:27.562103Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"schema_mappings\""}
2026-02-16 09:49:27,562 INFO sqlalchemy.engine.Engine [cached since 5.59s ago] ()
{"timestamp": "2026-02-16T09:49:27.562218Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.59s ago] ()"}
2026-02-16 09:49:27,562 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_events"
{"timestamp": "2026-02-16T09:49:27.562797Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_events\""}
2026-02-16 09:49:27,562 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.562861Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,563 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "factories"
{"timestamp": "2026-02-16T09:49:27.563452Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"factories\""}
2026-02-16 09:49:27,563 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.563512Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,563 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "styles"
{"timestamp": "2026-02-16T09:49:27.564016Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"styles\""}
2026-02-16 09:49:27,564 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.564073Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,564 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "orders"
{"timestamp": "2026-02-16T09:49:27.564589Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"orders\""}
2026-02-16 09:49:27,564 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.564654Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,565 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_runs"
{"timestamp": "2026-02-16T09:49:27.565199Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_runs\""}
2026-02-16 09:49:27,565 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.565261Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,565 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "quality_inspections"
{"timestamp": "2026-02-16T09:49:27.565862Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"quality_inspections\""}
2026-02-16 09:49:27,565 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.565921Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,566 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "defects"
{"timestamp": "2026-02-16T09:49:27.566459Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"defects\""}
2026-02-16 09:49:27,566 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.566531Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,567 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "raw_imports"
{"timestamp": "2026-02-16T09:49:27.567053Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"raw_imports\""}
2026-02-16 09:49:27,567 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.567107Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,567 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "staging_records"
{"timestamp": "2026-02-16T09:49:27.567800Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"staging_records\""}
2026-02-16 09:49:27,567 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.567863Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,568 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "organizations"
{"timestamp": "2026-02-16T09:49:27.568334Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"organizations\""}
2026-02-16 09:49:27,568 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.568393Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,568 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "users"
{"timestamp": "2026-02-16T09:49:27.568883Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"users\""}
2026-02-16 09:49:27,568 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.568969Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,569 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "user_scopes"
{"timestamp": "2026-02-16T09:49:27.569461Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"user_scopes\""}
2026-02-16 09:49:27,569 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.569526Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,569 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "waitlist"
{"timestamp": "2026-02-16T09:49:27.570009Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"waitlist\""}
2026-02-16 09:49:27,570 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.570093Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,570 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "workers"
{"timestamp": "2026-02-16T09:49:27.570513Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"workers\""}
2026-02-16 09:49:27,570 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.570567Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,571 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_skills"
{"timestamp": "2026-02-16T09:49:27.571074Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_skills\""}
2026-02-16 09:49:27,571 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.571135Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,571 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_attendances"
{"timestamp": "2026-02-16T09:49:27.571582Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_attendances\""}
2026-02-16 09:49:27,571 INFO sqlalchemy.engine.Engine [cached since 5.591s ago] ()
{"timestamp": "2026-02-16T09:49:27.571644Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.591s ago] ()"}
2026-02-16 09:49:27,572 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_outputs"
{"timestamp": "2026-02-16T09:49:27.572115Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_outputs\""}
2026-02-16 09:49:27,572 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.572170Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,572 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "fabric_lots"
{"timestamp": "2026-02-16T09:49:27.572658Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"fabric_lots\""}
2026-02-16 09:49:27,572 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.572711Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,573 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cut_tickets"
{"timestamp": "2026-02-16T09:49:27.573262Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cut_tickets\""}
2026-02-16 09:49:27,573 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.573328Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,573 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "packing_lists"
{"timestamp": "2026-02-16T09:49:27.573835Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"packing_lists\""}
2026-02-16 09:49:27,573 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.573896Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,574 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cartons"
{"timestamp": "2026-02-16T09:49:27.574392Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cartons\""}
2026-02-16 09:49:27,574 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.574449Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,574 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "traceability_records"
{"timestamp": "2026-02-16T09:49:27.574981Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"traceability_records\""}
2026-02-16 09:49:27,575 INFO sqlalchemy.engine.Engine [cached since 5.592s ago] ()
{"timestamp": "2026-02-16T09:49:27.575070Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.592s ago] ()"}
2026-02-16 09:49:27,576 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:49:27.576083Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 09:49:27,576 INFO sqlalchemy.engine.Engine [cached since 5.983s ago] ()
{"timestamp": "2026-02-16T09:49:27.576289Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.983s ago] ()"}
2026-02-16 09:49:27,576 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:49:27.576852Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.039s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT name FROM sqlite_master WHERE type='table'
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.589s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "ai_decisions"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.589s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "alias_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.589s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "efficiency_metrics"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.589s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dhu_reports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.59s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dashboards"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.59s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_quality_issues"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.59s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_sources"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.59s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "schema_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.59s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_events"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "factories"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "styles"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "orders"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_runs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "quality_inspections"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "defects"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "raw_imports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "staging_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "organizations"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "users"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "user_scopes"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "waitlist"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "workers"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_skills"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_attendances"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.591s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_outputs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "fabric_lots"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cut_tickets"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "packing_lists"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cartons"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "traceability_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.592s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.983s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
___________________________ test_edit_configuration ____________________________
tests/test_api/test_dashboard_flow.py:94: in test_edit_configuration
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stdout setup -----------------------------
2026-02-16 09:49:35,824 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:35.824159Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:35,824 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:49:35.824318Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 09:49:35,824 INFO sqlalchemy.engine.Engine [cached since 14.31s ago] ()
{"timestamp": "2026-02-16T09:49:35.824376Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.31s ago] ()"}
2026-02-16 09:49:35,824 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:49:35.824929Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"ai_decisions\")"}
2026-02-16 09:49:35,824 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.825009Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,825 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:49:35.825539Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"ai_decisions\")"}
2026-02-16 09:49:35,825 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.825601Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,826 INFO sqlalchemy.engine.Engine 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


{"timestamp": "2026-02-16T09:49:35.826398Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE ai_decisions (\n\tdata_source_id VARCHAR(36), \n\tagent_type VARCHAR(16) NOT NULL, \n\tmodel_used VARCHAR(50) NOT NULL, \n\tinput_summary TEXT NOT NULL, \n\toutput_summary TEXT NOT NULL, \n\tconfidence FLOAT, \n\treasoning JSON, \n\tperformance_metadata JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id)\n)\n\n"}
2026-02-16 09:49:35,826 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.826465Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,826 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
{"timestamp": "2026-02-16T09:49:35.826965Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)"}
2026-02-16 09:49:35,827 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.827025Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,827 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
{"timestamp": "2026-02-16T09:49:35.827524Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)"}
2026-02-16 09:49:35,827 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.827589Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,828 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:49:35.828043Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"alias_mappings\")"}
2026-02-16 09:49:35,828 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.828106Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,828 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:49:35.828592Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"alias_mappings\")"}
2026-02-16 09:49:35,828 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.828648Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,829 INFO sqlalchemy.engine.Engine 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.829396Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE alias_mappings (\n\tscope VARCHAR(50) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tsource_alias VARCHAR(255) NOT NULL, \n\tsource_alias_normalized VARCHAR(255) NOT NULL, \n\tcanonical_field VARCHAR(100) NOT NULL, \n\tusage_count INTEGER NOT NULL, \n\tlast_used_at DATETIME NOT NULL, \n\tcreated_by_id CHAR(36), \n\tcorrection_count INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,829 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.829465Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,829 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
{"timestamp": "2026-02-16T09:49:35.830010Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)"}
2026-02-16 09:49:35,830 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.830071Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,830 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
{"timestamp": "2026-02-16T09:49:35.830608Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)"}
2026-02-16 09:49:35,830 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.830676Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,831 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
{"timestamp": "2026-02-16T09:49:35.831098Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)"}
2026-02-16 09:49:35,831 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.831163Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,831 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
{"timestamp": "2026-02-16T09:49:35.831791Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)"}
2026-02-16 09:49:35,831 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.831856Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,832 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
{"timestamp": "2026-02-16T09:49:35.832391Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)"}
2026-02-16 09:49:35,832 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:49:35.832457Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:49:35,833 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
{"timestamp": "2026-02-16T09:49:35.833665Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)"}
2026-02-16 09:49:35,833 INFO sqlalchemy.engine.Engine [no key 0.00019s] ()
{"timestamp": "2026-02-16T09:49:35.833756Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00019s] ()"}
2026-02-16 09:49:35,834 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:49:35.834324Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"efficiency_metrics\")"}
2026-02-16 09:49:35,834 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.834393Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,834 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:49:35.834909Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"efficiency_metrics\")"}
2026-02-16 09:49:35,834 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.834973Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,835 INFO sqlalchemy.engine.Engine 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.835749Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE efficiency_metrics (\n\tproduction_run_id CHAR(36) NOT NULL, \n\tefficiency_pct NUMERIC(6, 2), \n\tsam_target NUMERIC(10, 2), \n\tsam_actual NUMERIC(10, 2), \n\tsam_variance NUMERIC(8, 2), \n\tsam_variance_pct NUMERIC(6, 2), \n\tcapacity_utilization_pct NUMERIC(6, 2), \n\tperformance_tier VARCHAR(12), \n\tfactory_avg_efficiency NUMERIC(6, 2), \n\tline_avg_efficiency NUMERIC(6, 2), \n\tcalculated_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,835 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.835820Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,836 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
{"timestamp": "2026-02-16T09:49:35.836406Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)"}
2026-02-16 09:49:35,836 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:49:35.836507Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:49:35,837 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:49:35.837144Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dhu_reports\")"}
2026-02-16 09:49:35,837 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.837203Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,837 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:49:35.837674Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dhu_reports\")"}
2026-02-16 09:49:35,837 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.837738Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,838 INFO sqlalchemy.engine.Engine 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.838541Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dhu_reports (\n\tfactory_id CHAR(36) NOT NULL, \n\treport_date DATE NOT NULL, \n\tperiod_type VARCHAR(7) NOT NULL, \n\tavg_dhu NUMERIC(6, 2), \n\tmin_dhu NUMERIC(6, 2), \n\tmax_dhu NUMERIC(6, 2), \n\ttotal_inspected INTEGER, \n\ttotal_defects INTEGER, \n\ttotal_rejected INTEGER, \n\ttop_defects TEXT, \n\ttop_operations TEXT, \n\ttop_lines TEXT, \n\tdhu_change_pct NUMERIC(6, 2), \n\ttrend_direction VARCHAR(20), \n\trecommendations TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,838 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:49:35.838612Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:49:35,839 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
{"timestamp": "2026-02-16T09:49:35.839113Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)"}
2026-02-16 09:49:35,839 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.839171Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,839 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
{"timestamp": "2026-02-16T09:49:35.839718Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)"}
2026-02-16 09:49:35,839 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.839771Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,840 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dashboards")
{"timestamp": "2026-02-16T09:49:35.840288Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dashboards\")"}
2026-02-16 09:49:35,840 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.840344Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,840 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dashboards")
{"timestamp": "2026-02-16T09:49:35.840773Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dashboards\")"}
2026-02-16 09:49:35,840 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.840842Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,841 INFO sqlalchemy.engine.Engine 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.841515Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dashboards (\n\tuser_id CHAR(36) NOT NULL, \n\tname VARCHAR(200) NOT NULL, \n\tdescription TEXT, \n\tdata_source_id CHAR(36), \n\twidget_config TEXT, \n\tlayout_config TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tCONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,841 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.841583Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,842 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
{"timestamp": "2026-02-16T09:49:35.842063Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)"}
2026-02-16 09:49:35,842 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.842157Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,842 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
{"timestamp": "2026-02-16T09:49:35.842551Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)"}
2026-02-16 09:49:35,842 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.842614Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,843 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:49:35.843302Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_quality_issues\")"}
2026-02-16 09:49:35,843 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.843376Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,843 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:49:35.843912Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_quality_issues\")"}
2026-02-16 09:49:35,843 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.843965Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,844 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.844558Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_quality_issues (\n\traw_import_id VARCHAR(36) NOT NULL, \n\trow_number INTEGER, \n\tissue_type VARCHAR(50) NOT NULL, \n\tseverity VARCHAR(20) NOT NULL, \n\tmessage TEXT NOT NULL, \n\tfield_name VARCHAR(100), \n\tfield_value VARCHAR(500), \n\tresolved_at DATETIME, \n\tresolved_by_user_id VARCHAR(36), \n\tresolution_notes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, \n\tFOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,844 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.844619Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,845 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
{"timestamp": "2026-02-16T09:49:35.845156Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)"}
2026-02-16 09:49:35,845 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.845217Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,845 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
{"timestamp": "2026-02-16T09:49:35.845657Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)"}
2026-02-16 09:49:35,845 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.845710Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,846 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
{"timestamp": "2026-02-16T09:49:35.846191Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)"}
2026-02-16 09:49:35,846 INFO sqlalchemy.engine.Engine [no key 0.00006s] ()
{"timestamp": "2026-02-16T09:49:35.846241Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00006s] ()"}
2026-02-16 09:49:35,846 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_sources")
{"timestamp": "2026-02-16T09:49:35.846677Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_sources\")"}
2026-02-16 09:49:35,846 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.846739Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,847 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_sources")
{"timestamp": "2026-02-16T09:49:35.847217Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_sources\")"}
2026-02-16 09:49:35,847 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.847281Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,847 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.848031Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_sources (\n\tfactory_id CHAR(36), \n\tname VARCHAR(100) NOT NULL, \n\tcode VARCHAR(50), \n\ttarget_operators INTEGER, \n\ttarget_efficiency_pct INTEGER, \n\tsettings JSON, \n\tspecialty VARCHAR(100), \n\tsupervisor_id CHAR(36), \n\tproduction_line_id CHAR(36), \n\tsource_name VARCHAR(255), \n\tdescription TEXT, \n\ttime_column VARCHAR(100), \n\ttime_format VARCHAR(50), \n\tschema_config JSON, \n\tparent_data_source_id CHAR(36), \n\tis_segment BOOLEAN NOT NULL, \n\tdate_range_start DATE, \n\tdate_range_end DATE, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, \n\tFOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,848 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.848100Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,848 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
{"timestamp": "2026-02-16T09:49:35.848701Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)"}
2026-02-16 09:49:35,848 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.848763Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,849 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
{"timestamp": "2026-02-16T09:49:35.849319Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)"}
2026-02-16 09:49:35,849 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.849384Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,849 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:49:35.849798Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"schema_mappings\")"}
2026-02-16 09:49:35,849 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.849862Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,850 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:49:35.850292Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"schema_mappings\")"}
2026-02-16 09:49:35,850 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.850343Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,850 INFO sqlalchemy.engine.Engine 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.850871Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE schema_mappings (\n\tdata_source_id CHAR(36) NOT NULL, \n\tversion INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tcolumn_map JSON NOT NULL, \n\textraction_rules JSON, \n\treviewed_by_user BOOLEAN NOT NULL, \n\tuser_notes TEXT, \n\tmatching_tier VARCHAR(20), \n\ttier_confidence FLOAT, \n\ttier_breakdown JSON, \n\tfuzzy_scores JSON, \n\tuser_corrected BOOLEAN NOT NULL, \n\tcorrection_count INTEGER, \n\tcorrection_history JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,850 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.850933Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,851 INFO sqlalchemy.engine.Engine CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
{"timestamp": "2026-02-16T09:49:35.851359Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)"}
2026-02-16 09:49:35,851 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.851413Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,851 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_events")
{"timestamp": "2026-02-16T09:49:35.851784Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_events\")"}
2026-02-16 09:49:35,851 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.851837Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,852 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_events")
{"timestamp": "2026-02-16T09:49:35.852181Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_events\")"}
2026-02-16 09:49:35,852 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.852229Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,852 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.852761Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_events (\n\ttimestamp DATETIME NOT NULL, \n\tevent_type VARCHAR(17) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tstyle_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36), \n\tsource_import_id VARCHAR(36), \n\traw_data JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,852 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.852821Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,853 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
{"timestamp": "2026-02-16T09:49:35.853266Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)"}
2026-02-16 09:49:35,853 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.853317Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,853 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
{"timestamp": "2026-02-16T09:49:35.853756Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)"}
2026-02-16 09:49:35,853 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.853806Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,854 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
{"timestamp": "2026-02-16T09:49:35.854175Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)"}
2026-02-16 09:49:35,854 INFO sqlalchemy.engine.Engine [no key 0.00006s] ()
{"timestamp": "2026-02-16T09:49:35.854224Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00006s] ()"}
2026-02-16 09:49:35,854 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_style_id ON production_events (style_id)
{"timestamp": "2026-02-16T09:49:35.854534Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_style_id ON production_events (style_id)"}
2026-02-16 09:49:35,854 INFO sqlalchemy.engine.Engine [no key 0.00006s] ()
{"timestamp": "2026-02-16T09:49:35.854581Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00006s] ()"}
2026-02-16 09:49:35,854 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
{"timestamp": "2026-02-16T09:49:35.854891Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)"}
2026-02-16 09:49:35,854 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.854945Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,855 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_order_id ON production_events (order_id)
{"timestamp": "2026-02-16T09:49:35.855272Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_order_id ON production_events (order_id)"}
2026-02-16 09:49:35,855 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.855321Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,855 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("factories")
{"timestamp": "2026-02-16T09:49:35.855683Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"factories\")"}
2026-02-16 09:49:35,855 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.855734Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,856 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("factories")
{"timestamp": "2026-02-16T09:49:35.856072Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"factories\")"}
2026-02-16 09:49:35,856 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.856119Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,856 INFO sqlalchemy.engine.Engine 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:49:35.856647Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE factories (\n\torganization_id CHAR(36) NOT NULL, \n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50) NOT NULL, \n\tcountry VARCHAR(100) NOT NULL, \n\tcity VARCHAR(100), \n\taddress TEXT, \n\ttimezone VARCHAR(50) NOT NULL, \n\ttotal_lines INTEGER, \n\ttotal_workers INTEGER, \n\tdaily_capacity_units INTEGER, \n\tcertifications TEXT, \n\tsettings JSON, \n\tlocale VARCHAR(20) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 09:49:35,856 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.856707Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,857 INFO sqlalchemy.engine.Engine CREATE INDEX ix_factories_organization_id ON factories (organization_id)
{"timestamp": "2026-02-16T09:49:35.857196Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_factories_organization_id ON factories (organization_id)"}
2026-02-16 09:49:35,857 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.857248Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,857 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("styles")
{"timestamp": "2026-02-16T09:49:35.857614Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"styles\")"}
2026-02-16 09:49:35,857 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.857670Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,857 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("styles")
{"timestamp": "2026-02-16T09:49:35.858010Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"styles\")"}
2026-02-16 09:49:35,858 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.858057Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,858 INFO sqlalchemy.engine.Engine 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.858547Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE styles (\n\tfactory_id VARCHAR(36) NOT NULL, \n\tstyle_number VARCHAR(100) NOT NULL, \n\tstyle_name VARCHAR(255), \n\tdescription VARCHAR(500), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tcategory VARCHAR(100), \n\tbase_sam NUMERIC(12, 4), \n\tcomplexity_rating VARCHAR(20), \n\tbom_summary JSON, \n\ttech_pack_url VARCHAR(500), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,858 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.858604Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,858 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_style_number ON styles (style_number)
{"timestamp": "2026-02-16T09:49:35.859003Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_style_number ON styles (style_number)"}
2026-02-16 09:49:35,859 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.859052Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,859 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_buyer ON styles (buyer)
{"timestamp": "2026-02-16T09:49:35.859384Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_buyer ON styles (buyer)"}
2026-02-16 09:49:35,859 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.859440Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,859 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_factory_id ON styles (factory_id)
{"timestamp": "2026-02-16T09:49:35.859749Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_factory_id ON styles (factory_id)"}
2026-02-16 09:49:35,859 INFO sqlalchemy.engine.Engine [no key 0.00006s] ()
{"timestamp": "2026-02-16T09:49:35.859795Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00006s] ()"}
2026-02-16 09:49:35,860 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("orders")
{"timestamp": "2026-02-16T09:49:35.860124Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"orders\")"}
2026-02-16 09:49:35,860 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.860175Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,860 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("orders")
{"timestamp": "2026-02-16T09:49:35.860591Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"orders\")"}
2026-02-16 09:49:35,860 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.860669Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,861 INFO sqlalchemy.engine.Engine 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.861323Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE orders (\n\tstyle_id VARCHAR(36) NOT NULL, \n\tpo_number VARCHAR(100) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tsize_breakdown JSON, \n\tuom VARCHAR(20) NOT NULL, \n\tcolor VARCHAR(100), \n\torder_date DATETIME, \n\tplanned_cut_date DATETIME, \n\tplanned_sew_date DATETIME, \n\tex_factory_date DATETIME, \n\tactual_ship_date DATETIME, \n\tstatus VARCHAR(20) NOT NULL, \n\tpriority VARCHAR(20) NOT NULL, \n\tqty_cut INTEGER NOT NULL, \n\tqty_sewn INTEGER NOT NULL, \n\tqty_packed INTEGER NOT NULL, \n\tqty_shipped INTEGER NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_style_po UNIQUE (style_id, po_number), \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,861 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:49:35.861426Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 09:49:35,862 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_style_id ON orders (style_id)
{"timestamp": "2026-02-16T09:49:35.862503Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_style_id ON orders (style_id)"}
2026-02-16 09:49:35,862 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:49:35.862596Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:49:35,863 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_status ON orders (status)
{"timestamp": "2026-02-16T09:49:35.863053Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_status ON orders (status)"}
2026-02-16 09:49:35,863 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.863108Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,863 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_po_number ON orders (po_number)
{"timestamp": "2026-02-16T09:49:35.863980Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_po_number ON orders (po_number)"}
2026-02-16 09:49:35,864 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:49:35.864062Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:49:35,864 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_runs")
{"timestamp": "2026-02-16T09:49:35.865105Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_runs\")"}
2026-02-16 09:49:35,865 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.865224Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,865 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_runs")
{"timestamp": "2026-02-16T09:49:35.865961Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_runs\")"}
2026-02-16 09:49:35,866 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.866041Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,867 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.867435Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_runs (\n\tfactory_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\tsource_import_id VARCHAR(36), \n\tproduction_date DATETIME, \n\tinspection_date DATETIME, \n\tshift VARCHAR(20) NOT NULL, \n\tplanned_qty INTEGER, \n\tactual_qty INTEGER NOT NULL, \n\twip_start INTEGER, \n\twip_end INTEGER, \n\tlot_number VARCHAR(50), \n\tshade_band VARCHAR(10), \n\tbatch_number VARCHAR(50), \n\tdowntime_minutes INTEGER, \n\tdowntime_reason VARCHAR(255), \n\tsam NUMERIC(12, 4), \n\toperators_present INTEGER NOT NULL, \n\thelpers_present INTEGER NOT NULL, \n\tworked_minutes NUMERIC(12, 4) NOT NULL, \n\tearned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), \n\tefficiency NUMERIC(10, 2) GENERATED ALWAYS AS (\n            CASE\n                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL\n                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100\n                ELSE 0\n            END\n            ), \n\tnotes TEXT, \n\tstart_time TIME, \n\tend_time TIME, \n\tstyle_number VARCHAR(100), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tpo_number VARCHAR(100), \n\tcolor VARCHAR(100), \n\tsize VARCHAR(50), \n\tdefects INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tline_efficiency NUMERIC(10, 2), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT check_positive_qty CHECK (actual_qty >= 0), \n\tCONSTRAINT check_positive_operators CHECK (operators_present >= 0), \n\tCONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), \n\tCONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), \n\tCONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), \n\tCONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), \n\tCONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,867 INFO sqlalchemy.engine.Engine [no key 0.00023s] ()
{"timestamp": "2026-02-16T09:49:35.867561Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00023s] ()"}
2026-02-16 09:49:35,868 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
{"timestamp": "2026-02-16T09:49:35.868564Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)"}
2026-02-16 09:49:35,868 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:49:35.868664Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 09:49:35,869 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
{"timestamp": "2026-02-16T09:49:35.869536Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)"}
2026-02-16 09:49:35,869 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:49:35.869615Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:49:35,870 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
{"timestamp": "2026-02-16T09:49:35.870111Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)"}
2026-02-16 09:49:35,870 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.870175Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,870 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
{"timestamp": "2026-02-16T09:49:35.870659Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)"}
2026-02-16 09:49:35,870 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.870726Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,871 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
{"timestamp": "2026-02-16T09:49:35.871216Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)"}
2026-02-16 09:49:35,871 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.871294Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,871 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
{"timestamp": "2026-02-16T09:49:35.871853Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)"}
2026-02-16 09:49:35,871 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.871909Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,872 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
{"timestamp": "2026-02-16T09:49:35.872436Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)"}
2026-02-16 09:49:35,872 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.872498Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,872 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
{"timestamp": "2026-02-16T09:49:35.872958Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)"}
2026-02-16 09:49:35,872 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.873018Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,873 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:49:35.873462Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"quality_inspections\")"}
2026-02-16 09:49:35,873 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.873516Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,873 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:49:35.873973Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"quality_inspections\")"}
2026-02-16 09:49:35,874 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.874024Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,874 INFO sqlalchemy.engine.Engine 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.874667Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE quality_inspections (\n\tproduction_run_id VARCHAR(36) NOT NULL, \n\tinspector_id VARCHAR(36), \n\tinspection_type VARCHAR(7) NOT NULL, \n\tunits_checked INTEGER NOT NULL, \n\tdefects_found INTEGER NOT NULL, \n\tunits_rejected INTEGER NOT NULL, \n\tunits_reworked INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\taql_level VARCHAR(20), \n\taql_result VARCHAR(7), \n\tinspected_at DATETIME NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,874 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.874742Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,875 INFO sqlalchemy.engine.Engine CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
{"timestamp": "2026-02-16T09:49:35.875244Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)"}
2026-02-16 09:49:35,875 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.875308Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,875 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("defects")
{"timestamp": "2026-02-16T09:49:35.875795Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"defects\")"}
2026-02-16 09:49:35,875 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.875850Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,876 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("defects")
{"timestamp": "2026-02-16T09:49:35.876339Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"defects\")"}
2026-02-16 09:49:35,876 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.876404Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,877 INFO sqlalchemy.engine.Engine 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.877049Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE defects (\n\tinspection_id VARCHAR(36) NOT NULL, \n\tworker_id VARCHAR(36), \n\tdefect_type VARCHAR(100) NOT NULL, \n\tdefect_code VARCHAR(20), \n\tdefect_category VARCHAR(100), \n\toperation VARCHAR(100), \n\tseverity VARCHAR(8) NOT NULL, \n\tis_reworkable BOOLEAN NOT NULL, \n\tis_reworked BOOLEAN NOT NULL, \n\troot_cause VARCHAR(255), \n\tmachine_id VARCHAR(50), \n\timage_url VARCHAR(500), \n\tcount INTEGER NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,877 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:49:35.877124Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:49:35,877 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_worker_id ON defects (worker_id)
{"timestamp": "2026-02-16T09:49:35.877665Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_worker_id ON defects (worker_id)"}
2026-02-16 09:49:35,877 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.877739Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,878 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
{"timestamp": "2026-02-16T09:49:35.878465Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)"}
2026-02-16 09:49:35,878 INFO sqlalchemy.engine.Engine [no key 0.00022s] ()
{"timestamp": "2026-02-16T09:49:35.878582Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00022s] ()"}
2026-02-16 09:49:35,879 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_defect_type ON defects (defect_type)
{"timestamp": "2026-02-16T09:49:35.879102Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_defect_type ON defects (defect_type)"}
2026-02-16 09:49:35,879 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.879157Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,879 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("raw_imports")
{"timestamp": "2026-02-16T09:49:35.879685Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"raw_imports\")"}
2026-02-16 09:49:35,879 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.879748Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,880 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("raw_imports")
{"timestamp": "2026-02-16T09:49:35.880343Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"raw_imports\")"}
2026-02-16 09:49:35,880 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.880411Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,881 INFO sqlalchemy.engine.Engine 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.881247Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE raw_imports (\n\tuploaded_by_id VARCHAR(36), \n\tfactory_id VARCHAR(36), \n\tproduction_line_id VARCHAR(36), \n\tdata_source_id VARCHAR(36), \n\ttime_column_used VARCHAR(100), \n\toriginal_filename VARCHAR(500) NOT NULL, \n\tfile_path VARCHAR(1000) NOT NULL, \n\tfile_size_bytes INTEGER NOT NULL, \n\tfile_hash VARCHAR(64) NOT NULL, \n\tmime_type VARCHAR(100), \n\tencoding_detected VARCHAR(50), \n\tsheet_count INTEGER NOT NULL, \n\tsheet_names TEXT, \n\trow_count INTEGER, \n\tcolumn_count INTEGER, \n\theader_row_detected INTEGER, \n\traw_headers TEXT, \n\tsample_data TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tprocessing_error TEXT, \n\tprocessed_at DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,881 INFO sqlalchemy.engine.Engine [no key 0.00019s] ()
{"timestamp": "2026-02-16T09:49:35.881374Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00019s] ()"}
2026-02-16 09:49:35,882 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
{"timestamp": "2026-02-16T09:49:35.882073Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)"}
2026-02-16 09:49:35,882 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.882136Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,882 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
{"timestamp": "2026-02-16T09:49:35.882735Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)"}
2026-02-16 09:49:35,882 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.882794Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,883 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
{"timestamp": "2026-02-16T09:49:35.883315Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)"}
2026-02-16 09:49:35,883 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.883395Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,884 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
{"timestamp": "2026-02-16T09:49:35.884328Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)"}
2026-02-16 09:49:35,884 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:49:35.884415Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 09:49:35,885 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("staging_records")
{"timestamp": "2026-02-16T09:49:35.885067Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"staging_records\")"}
2026-02-16 09:49:35,885 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.885135Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,885 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("staging_records")
{"timestamp": "2026-02-16T09:49:35.885745Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"staging_records\")"}
2026-02-16 09:49:35,885 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.885867Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,886 INFO sqlalchemy.engine.Engine 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.886641Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE staging_records (\n\traw_import_id VARCHAR(36) NOT NULL, \n\tsource_row_number INTEGER NOT NULL, \n\tstatus VARCHAR(50) NOT NULL, \n\tvalidation_errors TEXT, \n\tvalidation_warnings TEXT, \n\trecord_data TEXT NOT NULL, \n\tnormalized_data TEXT, \n\tquality_score FLOAT, \n\tnull_field_count INTEGER, \n\tpromoted_at DATETIME, \n\tpromoted_to_table VARCHAR(100), \n\tpromoted_record_id VARCHAR(36), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,886 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:49:35.886711Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:49:35,887 INFO sqlalchemy.engine.Engine CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
{"timestamp": "2026-02-16T09:49:35.887295Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)"}
2026-02-16 09:49:35,887 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.887369Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,887 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("organizations")
{"timestamp": "2026-02-16T09:49:35.887926Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"organizations\")"}
2026-02-16 09:49:35,887 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.887992Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,888 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("organizations")
{"timestamp": "2026-02-16T09:49:35.888405Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"organizations\")"}
2026-02-16 09:49:35,888 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.888509Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,889 INFO sqlalchemy.engine.Engine 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:49:35.889226Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE organizations (\n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50), \n\tsubscription_tier VARCHAR(10) NOT NULL, \n\tsettings TEXT, \n\tmax_factories INTEGER NOT NULL, \n\tmax_lines_per_factory INTEGER NOT NULL, \n\tprimary_email VARCHAR(255), \n\tprimary_phone VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 09:49:35,889 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.889294Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,889 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
{"timestamp": "2026-02-16T09:49:35.889917Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"users\")"}
2026-02-16 09:49:35,889 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.889987Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,890 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("users")
{"timestamp": "2026-02-16T09:49:35.890493Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"users\")"}
2026-02-16 09:49:35,890 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.890546Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,891 INFO sqlalchemy.engine.Engine 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


{"timestamp": "2026-02-16T09:49:35.891298Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE users (\n\torganization_id CHAR(36) NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\thashed_password VARCHAR(255) NOT NULL, \n\tfull_name VARCHAR(255), \n\tavatar_url VARCHAR(500), \n\ttimezone VARCHAR(50), \n\tpreferences TEXT, \n\trole VARCHAR(15) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tis_verified BOOLEAN NOT NULL, \n\tlast_login DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (email)\n)\n\n"}
2026-02-16 09:49:35,891 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.891365Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,891 INFO sqlalchemy.engine.Engine CREATE INDEX ix_users_organization_id ON users (organization_id)
{"timestamp": "2026-02-16T09:49:35.891922Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_users_organization_id ON users (organization_id)"}
2026-02-16 09:49:35,891 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:49:35.891994Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:49:35,892 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_scopes")
{"timestamp": "2026-02-16T09:49:35.892510Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"user_scopes\")"}
2026-02-16 09:49:35,892 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.892563Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,893 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("user_scopes")
{"timestamp": "2026-02-16T09:49:35.893101Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"user_scopes\")"}
2026-02-16 09:49:35,893 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.893162Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,893 INFO sqlalchemy.engine.Engine 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.893932Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE user_scopes (\n\tuser_id CHAR(36) NOT NULL, \n\tscope_type VARCHAR(12) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tdata_source_id CHAR(36), \n\trole VARCHAR(15) NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,893 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:49:35.894001Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:49:35,894 INFO sqlalchemy.engine.Engine CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
{"timestamp": "2026-02-16T09:49:35.894492Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)"}
2026-02-16 09:49:35,894 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:49:35.894580Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:49:35,895 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("waitlist")
{"timestamp": "2026-02-16T09:49:35.895076Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"waitlist\")"}
2026-02-16 09:49:35,895 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.895142Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,895 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("waitlist")
{"timestamp": "2026-02-16T09:49:35.895617Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"waitlist\")"}
2026-02-16 09:49:35,895 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.895681Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,896 INFO sqlalchemy.engine.Engine 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


{"timestamp": "2026-02-16T09:49:35.896228Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE waitlist (\n\tid INTEGER NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\treferral_code VARCHAR(8) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n"}
2026-02-16 09:49:35,896 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.896288Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,896 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
{"timestamp": "2026-02-16T09:49:35.896780Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)"}
2026-02-16 09:49:35,896 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.896844Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,897 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
{"timestamp": "2026-02-16T09:49:35.897321Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)"}
2026-02-16 09:49:35,897 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.897391Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,898 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("workers")
{"timestamp": "2026-02-16T09:49:35.898218Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"workers\")"}
2026-02-16 09:49:35,898 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.898326Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,898 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("workers")
{"timestamp": "2026-02-16T09:49:35.898948Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"workers\")"}
2026-02-16 09:49:35,899 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.899022Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,899 INFO sqlalchemy.engine.Engine 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.899808Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE workers (\n\tfactory_id VARCHAR(36) NOT NULL, \n\temployee_id VARCHAR(50) NOT NULL, \n\tfull_name VARCHAR(255) NOT NULL, \n\tdepartment VARCHAR(100), \n\tjob_title VARCHAR(100), \n\tprimary_skill VARCHAR(100), \n\tdata_source_id VARCHAR(36), \n\thire_date DATE, \n\ttermination_date DATE, \n\thourly_rate NUMERIC(10, 2), \n\tcurrency VARCHAR(3), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,899 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:49:35.899881Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:49:35,900 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_employee_id ON workers (employee_id)
{"timestamp": "2026-02-16T09:49:35.900444Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_employee_id ON workers (employee_id)"}
2026-02-16 09:49:35,900 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.900502Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,901 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_factory_id ON workers (factory_id)
{"timestamp": "2026-02-16T09:49:35.901133Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_factory_id ON workers (factory_id)"}
2026-02-16 09:49:35,901 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.901192Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,901 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_skills")
{"timestamp": "2026-02-16T09:49:35.901697Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_skills\")"}
2026-02-16 09:49:35,901 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.901760Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,902 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_skills")
{"timestamp": "2026-02-16T09:49:35.902327Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_skills\")"}
2026-02-16 09:49:35,902 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.902390Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,903 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.903091Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_skills (\n\tworker_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\toperation_category VARCHAR(100), \n\tproficiency_pct NUMERIC(5, 2), \n\tsam_achieved NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\tpieces_lifetime INTEGER, \n\tpieces_30d INTEGER, \n\tis_certified BOOLEAN NOT NULL, \n\tcertification_date DATE, \n\tlast_assessed DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,903 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.903156Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,903 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
{"timestamp": "2026-02-16T09:49:35.903650Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)"}
2026-02-16 09:49:35,903 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.903705Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,904 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
{"timestamp": "2026-02-16T09:49:35.904220Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)"}
2026-02-16 09:49:35,904 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.904276Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,904 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:49:35.904753Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_attendances\")"}
2026-02-16 09:49:35,904 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.904810Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,905 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:49:35.905324Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_attendances\")"}
2026-02-16 09:49:35,905 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.905396Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,906 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.906146Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_attendances (\n\tworker_id VARCHAR(36) NOT NULL, \n\twork_date DATE NOT NULL, \n\tclock_in TIME, \n\tclock_out TIME, \n\thours_regular NUMERIC(4, 2), \n\thours_overtime NUMERIC(4, 2), \n\thours_total NUMERIC(4, 2), \n\tis_present BOOLEAN NOT NULL, \n\tabsence_reason VARCHAR(100), \n\tis_approved BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,906 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.906208Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,906 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
{"timestamp": "2026-02-16T09:49:35.906691Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)"}
2026-02-16 09:49:35,906 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.906745Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,907 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
{"timestamp": "2026-02-16T09:49:35.907246Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)"}
2026-02-16 09:49:35,907 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.907309Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,907 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_outputs")
{"timestamp": "2026-02-16T09:49:35.907764Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_outputs\")"}
2026-02-16 09:49:35,907 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.907821Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,908 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_outputs")
{"timestamp": "2026-02-16T09:49:35.908342Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_outputs\")"}
2026-02-16 09:49:35,908 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.908404Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,909 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.909173Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_outputs (\n\tworker_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\tpieces_completed INTEGER NOT NULL, \n\tsam_earned NUMERIC(10, 2), \n\tminutes_worked NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\trecorded_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,909 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.909236Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,909 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
{"timestamp": "2026-02-16T09:49:35.909698Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)"}
2026-02-16 09:49:35,909 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.909752Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,910 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
{"timestamp": "2026-02-16T09:49:35.910193Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)"}
2026-02-16 09:49:35,910 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.910260Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,910 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:49:35.910748Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"fabric_lots\")"}
2026-02-16 09:49:35,910 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.910810Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,911 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:49:35.911251Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"fabric_lots\")"}
2026-02-16 09:49:35,911 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.911306Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,911 INFO sqlalchemy.engine.Engine 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.911956Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE fabric_lots (\n\tfactory_id CHAR(36) NOT NULL, \n\tlot_number VARCHAR(100) NOT NULL, \n\tfabric_type VARCHAR(100), \n\tcomposition VARCHAR(255), \n\twidth_cm INTEGER, \n\tgsm INTEGER, \n\tcolor VARCHAR(100), \n\tsupplier VARCHAR(255), \n\torigin_country VARCHAR(100), \n\tmill_name VARCHAR(255), \n\treceived_date DATE, \n\tinitial_meters NUMERIC(12, 2), \n\tavailable_meters NUMERIC(12, 2), \n\treserved_meters NUMERIC(12, 2), \n\tunit_cost NUMERIC(10, 4), \n\tcurrency VARCHAR(3), \n\tcertifications TEXT, \n\tinspection_status VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,912 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.912021Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,912 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
{"timestamp": "2026-02-16T09:49:35.912591Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)"}
2026-02-16 09:49:35,912 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.912650Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,913 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
{"timestamp": "2026-02-16T09:49:35.913099Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)"}
2026-02-16 09:49:35,913 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.913156Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,913 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
{"timestamp": "2026-02-16T09:49:35.913655Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)"}
2026-02-16 09:49:35,913 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.913722Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,914 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
{"timestamp": "2026-02-16T09:49:35.914219Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)"}
2026-02-16 09:49:35,914 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.914285Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,915 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:49:35.915387Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cut_tickets\")"}
2026-02-16 09:49:35,915 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.915471Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,916 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:49:35.916101Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cut_tickets\")"}
2026-02-16 09:49:35,916 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.916175Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,917 INFO sqlalchemy.engine.Engine 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.917061Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cut_tickets (\n\tfabric_lot_id CHAR(36) NOT NULL, \n\torder_id CHAR(36) NOT NULL, \n\tticket_number VARCHAR(100) NOT NULL, \n\tcut_date DATE, \n\tplies INTEGER, \n\tmarker_length_cm INTEGER, \n\tconsumption_meters NUMERIC(10, 2), \n\twastage_pct NUMERIC(5, 2), \n\tsize_ratio TEXT, \n\tbundle_count INTEGER, \n\ttotal_pieces INTEGER, \n\tcutter_id CHAR(36), \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,917 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:49:35.917142Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:49:35,917 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
{"timestamp": "2026-02-16T09:49:35.917765Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)"}
2026-02-16 09:49:35,917 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:49:35.917831Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:49:35,918 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
{"timestamp": "2026-02-16T09:49:35.918379Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)"}
2026-02-16 09:49:35,918 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.918465Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,918 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
{"timestamp": "2026-02-16T09:49:35.918972Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)"}
2026-02-16 09:49:35,919 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.919037Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,919 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("packing_lists")
{"timestamp": "2026-02-16T09:49:35.919580Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"packing_lists\")"}
2026-02-16 09:49:35,919 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.919639Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,920 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("packing_lists")
{"timestamp": "2026-02-16T09:49:35.920141Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"packing_lists\")"}
2026-02-16 09:49:35,920 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.920202Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,920 INFO sqlalchemy.engine.Engine 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.920850Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE packing_lists (\n\torder_id CHAR(36) NOT NULL, \n\tpacking_list_number VARCHAR(100) NOT NULL, \n\tship_date DATE, \n\tdestination VARCHAR(255), \n\tship_to_address TEXT, \n\tcarrier VARCHAR(100), \n\ttracking_number VARCHAR(255), \n\tcontainer_number VARCHAR(100), \n\ttotal_cartons INTEGER, \n\ttotal_units INTEGER, \n\ttotal_net_weight_kg NUMERIC(10, 2), \n\ttotal_gross_weight_kg NUMERIC(10, 2), \n\ttotal_cbm NUMERIC(8, 3), \n\tstatus VARCHAR(10) NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,920 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.920938Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,921 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
{"timestamp": "2026-02-16T09:49:35.921413Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)"}
2026-02-16 09:49:35,921 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.921469Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,921 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
{"timestamp": "2026-02-16T09:49:35.921917Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)"}
2026-02-16 09:49:35,921 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.921975Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,922 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cartons")
{"timestamp": "2026-02-16T09:49:35.922495Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cartons\")"}
2026-02-16 09:49:35,922 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.922556Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,922 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cartons")
{"timestamp": "2026-02-16T09:49:35.923006Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cartons\")"}
2026-02-16 09:49:35,923 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.923070Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,923 INFO sqlalchemy.engine.Engine 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:49:35.923689Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cartons (\n\tpacking_list_id CHAR(36) NOT NULL, \n\tcarton_number VARCHAR(50) NOT NULL, \n\tsize_breakdown TEXT, \n\tcolor VARCHAR(100), \n\ttotal_units INTEGER, \n\tnet_weight_kg NUMERIC(8, 2), \n\tgross_weight_kg NUMERIC(8, 2), \n\tdimensions_cm TEXT, \n\tlength_cm INTEGER, \n\twidth_cm INTEGER, \n\theight_cm INTEGER, \n\tbarcode VARCHAR(100), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:49:35,923 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.923752Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,924 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
{"timestamp": "2026-02-16T09:49:35.924198Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)"}
2026-02-16 09:49:35,924 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
{"timestamp": "2026-02-16T09:49:35.924251Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00007s] ()"}
2026-02-16 09:49:35,924 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("traceability_records")
{"timestamp": "2026-02-16T09:49:35.924743Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"traceability_records\")"}
2026-02-16 09:49:35,924 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.924800Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,925 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("traceability_records")
{"timestamp": "2026-02-16T09:49:35.925343Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"traceability_records\")"}
2026-02-16 09:49:35,925 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:49:35.925421Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:49:35,926 INFO sqlalchemy.engine.Engine 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:49:35.926117Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE traceability_records (\n\tcarton_id CHAR(36), \n\tfabric_lot_id CHAR(36), \n\tcut_ticket_id CHAR(36), \n\tproduction_run_id CHAR(36), \n\tcompliance_standard VARCHAR(8) NOT NULL, \n\tchain_of_custody TEXT, \n\tsupporting_documents TEXT, \n\tverification_status VARCHAR(8) NOT NULL, \n\tverified_by_id CHAR(36), \n\tverified_at DATETIME, \n\trisk_score VARCHAR(20), \n\trisk_notes TEXT, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, \n\tFOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, \n\tFOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:49:35,926 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:49:35.926189Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:49:35,926 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
{"timestamp": "2026-02-16T09:49:35.926646Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)"}
2026-02-16 09:49:35,926 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:49:35.926709Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:49:35,927 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
{"timestamp": "2026-02-16T09:49:35.927150Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)"}
2026-02-16 09:49:35,927 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.927211Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,927 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
{"timestamp": "2026-02-16T09:49:35.927673Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)"}
2026-02-16 09:49:35,927 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
{"timestamp": "2026-02-16T09:49:35.927729Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00008s] ()"}
2026-02-16 09:49:35,928 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:49:35.928356Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 09:49:35,928 INFO sqlalchemy.engine.Engine [cached since 14.34s ago] ()
{"timestamp": "2026-02-16T09:49:35.928424Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.34s ago] ()"}
2026-02-16 09:49:35,928 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:49:35.928943Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:49:35,929 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:35.929994Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:35,930 INFO sqlalchemy.engine.Engine INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:49:35.930222Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:49:35,930 INFO sqlalchemy.engine.Engine [cached since 14.27s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '29148cc8-ff61-480a-8c75-b9f3a7fa8a53', '2026-02-16 09:49:35.930163', '2026-02-16 09:49:35.930166', 0, None)
{"timestamp": "2026-02-16T09:49:35.930287Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.27s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '29148cc8-ff61-480a-8c75-b9f3a7fa8a53', '2026-02-16 09:49:35.930163', '2026-02-16 09:49:35.930166', 0, None)"}
2026-02-16 09:49:35,930 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:49:35.930967Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:49:35,931 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:35.931983Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:35,932 INFO sqlalchemy.engine.Engine SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
{"timestamp": "2026-02-16T09:49:35.932221Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at \nFROM organizations \nWHERE organizations.id = ?"}
2026-02-16 09:49:35,932 INFO sqlalchemy.engine.Engine [cached since 14.26s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53',)
{"timestamp": "2026-02-16T09:49:35.932285Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.26s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53',)"}
2026-02-16 09:49:35,933 INFO sqlalchemy.engine.Engine SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
{"timestamp": "2026-02-16T09:49:35.933467Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at \nFROM factories \nWHERE ? = factories.organization_id"}
2026-02-16 09:49:35,933 INFO sqlalchemy.engine.Engine [cached since 14.26s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53',)
{"timestamp": "2026-02-16T09:49:35.933547Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.26s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53',)"}
2026-02-16 09:49:35,934 INFO sqlalchemy.engine.Engine SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
{"timestamp": "2026-02-16T09:49:35.934604Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at \nFROM users \nWHERE ? = users.organization_id"}
2026-02-16 09:49:35,934 INFO sqlalchemy.engine.Engine [cached since 14.26s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53',)
{"timestamp": "2026-02-16T09:49:35.934715Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.26s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53',)"}
2026-02-16 09:49:35,936 INFO sqlalchemy.engine.Engine INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:49:35.936660Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:49:35,936 INFO sqlalchemy.engine.Engine [cached since 4.726s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53', 'Dash Factory', 'DF1', 'US', None, None, 'UTC', None, None, None, None, 'en-US', 1, 'f30d401d-34f3-4d4c-88e4-b8d466d8be9f', '2026-02-16 09:49:35.936560', '2026-02-16 09:49:35.936564')
{"timestamp": "2026-02-16T09:49:35.936750Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.726s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53', 'Dash Factory', 'DF1', 'US', None, None, 'UTC', None, None, None, None, 'en-US', 1, 'f30d401d-34f3-4d4c-88e4-b8d466d8be9f', '2026-02-16 09:49:35.936560', '2026-02-16 09:49:35.936564')"}
2026-02-16 09:49:35,937 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:49:35.937447Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:49:35,937 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:35.937956Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:35,938 INFO sqlalchemy.engine.Engine SELECT factories.organization_id, factories.name, factories.code, factories.country, factories.city, factories.address, factories.timezone, factories.total_lines, factories.total_workers, factories.daily_capacity_units, factories.certifications, factories.settings, factories.locale, factories.is_active, factories.id, factories.created_at, factories.updated_at 
FROM factories 
WHERE factories.id = ?
{"timestamp": "2026-02-16T09:49:35.938130Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT factories.organization_id, factories.name, factories.code, factories.country, factories.city, factories.address, factories.timezone, factories.total_lines, factories.total_workers, factories.daily_capacity_units, factories.certifications, factories.settings, factories.locale, factories.is_active, factories.id, factories.created_at, factories.updated_at \nFROM factories \nWHERE factories.id = ?"}
2026-02-16 09:49:35,938 INFO sqlalchemy.engine.Engine [cached since 14.05s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)
{"timestamp": "2026-02-16T09:49:35.938197Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.05s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)"}
2026-02-16 09:49:35,939 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.factory_id
{"timestamp": "2026-02-16T09:49:35.939074Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at \nFROM data_sources \nWHERE ? = data_sources.factory_id"}
2026-02-16 09:49:35,939 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)
{"timestamp": "2026-02-16T09:49:35.939144Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)"}
2026-02-16 09:49:35,939 INFO sqlalchemy.engine.Engine SELECT styles.factory_id AS styles_factory_id, styles.style_number AS styles_style_number, styles.style_name AS styles_style_name, styles.description AS styles_description, styles.buyer AS styles_buyer, styles.season AS styles_season, styles.category AS styles_category, styles.base_sam AS styles_base_sam, styles.complexity_rating AS styles_complexity_rating, styles.bom_summary AS styles_bom_summary, styles.tech_pack_url AS styles_tech_pack_url, styles.is_active AS styles_is_active, styles.id AS styles_id, styles.created_at AS styles_created_at, styles.updated_at AS styles_updated_at 
FROM styles 
WHERE ? = styles.factory_id
{"timestamp": "2026-02-16T09:49:35.939989Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT styles.factory_id AS styles_factory_id, styles.style_number AS styles_style_number, styles.style_name AS styles_style_name, styles.description AS styles_description, styles.buyer AS styles_buyer, styles.season AS styles_season, styles.category AS styles_category, styles.base_sam AS styles_base_sam, styles.complexity_rating AS styles_complexity_rating, styles.bom_summary AS styles_bom_summary, styles.tech_pack_url AS styles_tech_pack_url, styles.is_active AS styles_is_active, styles.id AS styles_id, styles.created_at AS styles_created_at, styles.updated_at AS styles_updated_at \nFROM styles \nWHERE ? = styles.factory_id"}
2026-02-16 09:49:35,940 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)
{"timestamp": "2026-02-16T09:49:35.940095Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)"}
2026-02-16 09:49:35,940 INFO sqlalchemy.engine.Engine SELECT workers.factory_id AS workers_factory_id, workers.employee_id AS workers_employee_id, workers.full_name AS workers_full_name, workers.department AS workers_department, workers.job_title AS workers_job_title, workers.primary_skill AS workers_primary_skill, workers.data_source_id AS workers_data_source_id, workers.hire_date AS workers_hire_date, workers.termination_date AS workers_termination_date, workers.hourly_rate AS workers_hourly_rate, workers.currency AS workers_currency, workers.is_active AS workers_is_active, workers.id AS workers_id, workers.created_at AS workers_created_at, workers.updated_at AS workers_updated_at, workers.is_deleted AS workers_is_deleted, workers.deleted_at AS workers_deleted_at 
FROM workers 
WHERE ? = workers.factory_id
{"timestamp": "2026-02-16T09:49:35.940837Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT workers.factory_id AS workers_factory_id, workers.employee_id AS workers_employee_id, workers.full_name AS workers_full_name, workers.department AS workers_department, workers.job_title AS workers_job_title, workers.primary_skill AS workers_primary_skill, workers.data_source_id AS workers_data_source_id, workers.hire_date AS workers_hire_date, workers.termination_date AS workers_termination_date, workers.hourly_rate AS workers_hourly_rate, workers.currency AS workers_currency, workers.is_active AS workers_is_active, workers.id AS workers_id, workers.created_at AS workers_created_at, workers.updated_at AS workers_updated_at, workers.is_deleted AS workers_is_deleted, workers.deleted_at AS workers_deleted_at \nFROM workers \nWHERE ? = workers.factory_id"}
2026-02-16 09:49:35,940 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)
{"timestamp": "2026-02-16T09:49:35.940903Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)"}
2026-02-16 09:49:35,941 INFO sqlalchemy.engine.Engine SELECT dhu_reports.factory_id AS dhu_reports_factory_id, dhu_reports.report_date AS dhu_reports_report_date, dhu_reports.period_type AS dhu_reports_period_type, dhu_reports.avg_dhu AS dhu_reports_avg_dhu, dhu_reports.min_dhu AS dhu_reports_min_dhu, dhu_reports.max_dhu AS dhu_reports_max_dhu, dhu_reports.total_inspected AS dhu_reports_total_inspected, dhu_reports.total_defects AS dhu_reports_total_defects, dhu_reports.total_rejected AS dhu_reports_total_rejected, dhu_reports.top_defects AS dhu_reports_top_defects, dhu_reports.top_operations AS dhu_reports_top_operations, dhu_reports.top_lines AS dhu_reports_top_lines, dhu_reports.dhu_change_pct AS dhu_reports_dhu_change_pct, dhu_reports.trend_direction AS dhu_reports_trend_direction, dhu_reports.recommendations AS dhu_reports_recommendations, dhu_reports.id AS dhu_reports_id, dhu_reports.created_at AS dhu_reports_created_at, dhu_reports.updated_at AS dhu_reports_updated_at 
FROM dhu_reports 
WHERE ? = dhu_reports.factory_id
{"timestamp": "2026-02-16T09:49:35.941669Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dhu_reports.factory_id AS dhu_reports_factory_id, dhu_reports.report_date AS dhu_reports_report_date, dhu_reports.period_type AS dhu_reports_period_type, dhu_reports.avg_dhu AS dhu_reports_avg_dhu, dhu_reports.min_dhu AS dhu_reports_min_dhu, dhu_reports.max_dhu AS dhu_reports_max_dhu, dhu_reports.total_inspected AS dhu_reports_total_inspected, dhu_reports.total_defects AS dhu_reports_total_defects, dhu_reports.total_rejected AS dhu_reports_total_rejected, dhu_reports.top_defects AS dhu_reports_top_defects, dhu_reports.top_operations AS dhu_reports_top_operations, dhu_reports.top_lines AS dhu_reports_top_lines, dhu_reports.dhu_change_pct AS dhu_reports_dhu_change_pct, dhu_reports.trend_direction AS dhu_reports_trend_direction, dhu_reports.recommendations AS dhu_reports_recommendations, dhu_reports.id AS dhu_reports_id, dhu_reports.created_at AS dhu_reports_created_at, dhu_reports.updated_at AS dhu_reports_updated_at \nFROM dhu_reports \nWHERE ? = dhu_reports.factory_id"}
2026-02-16 09:49:35,941 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)
{"timestamp": "2026-02-16T09:49:35.941738Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)"}
2026-02-16 09:49:35,942 INFO sqlalchemy.engine.Engine INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:49:35.942763Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:49:35,942 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f', 'Line 1', None, None, None, None, None, None, None, None, None, None, None, 0, None, None, 1, 'a0b634f8-751c-4fec-bc9e-ae773d7e7813', '2026-02-16 09:49:35.942673', '2026-02-16 09:49:35.942675')
{"timestamp": "2026-02-16T09:49:35.942851Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f', 'Line 1', None, None, None, None, None, None, None, None, None, None, None, 0, None, None, 1, 'a0b634f8-751c-4fec-bc9e-ae773d7e7813', '2026-02-16 09:49:35.942673', '2026-02-16 09:49:35.942675')"}
2026-02-16 09:49:35,943 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:49:35.943507Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:49:35,943 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:35.943995Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:35,944 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
{"timestamp": "2026-02-16T09:49:35.944171Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at \nFROM data_sources \nWHERE data_sources.id = ?"}
2026-02-16 09:49:35,944 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
{"timestamp": "2026-02-16T09:49:35.944231Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)"}
2026-02-16 09:49:35,945 INFO sqlalchemy.engine.Engine SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE ? = schema_mappings.data_source_id
{"timestamp": "2026-02-16T09:49:35.945100Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at \nFROM schema_mappings \nWHERE ? = schema_mappings.data_source_id"}
2026-02-16 09:49:35,945 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
{"timestamp": "2026-02-16T09:49:35.945161Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)"}
2026-02-16 09:49:35,945 INFO sqlalchemy.engine.Engine SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE ? = production_runs.data_source_id
{"timestamp": "2026-02-16T09:49:35.945827Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at \nFROM production_runs \nWHERE ? = production_runs.data_source_id"}
2026-02-16 09:49:35,945 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
{"timestamp": "2026-02-16T09:49:35.945933Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)"}
2026-02-16 09:49:35,946 INFO sqlalchemy.engine.Engine SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ? = ai_decisions.data_source_id
{"timestamp": "2026-02-16T09:49:35.946793Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at \nFROM ai_decisions \nWHERE ? = ai_decisions.data_source_id"}
2026-02-16 09:49:35,946 INFO sqlalchemy.engine.Engine [cached since 14.03s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
{"timestamp": "2026-02-16T09:49:35.946869Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.03s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)"}
2026-02-16 09:49:35,947 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.data_source_id
{"timestamp": "2026-02-16T09:49:35.947826Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.data_source_id"}
2026-02-16 09:49:35,947 INFO sqlalchemy.engine.Engine [cached since 14.03s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
{"timestamp": "2026-02-16T09:49:35.947935Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.03s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)"}
2026-02-16 09:49:35,948 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.parent_data_source_id
{"timestamp": "2026-02-16T09:49:35.948849Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at \nFROM data_sources \nWHERE ? = data_sources.parent_data_source_id"}
2026-02-16 09:49:35,948 INFO sqlalchemy.engine.Engine [cached since 14.03s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
{"timestamp": "2026-02-16T09:49:35.948966Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.03s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)"}
2026-02-16 09:49:35,950 INFO sqlalchemy.engine.Engine INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:49:35.950581Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:49:35,950 INFO sqlalchemy.engine.Engine [cached since 10.77s ago] (None, 'Unnamed Line', None, None, None, None, None, 'a0b634f8-751c-4fec-bc9e-ae773d7e7813', 'Production Data', 'Main production data source', 'Date', None, None, 0, None, None, 1, '46aa7940-9f27-4a33-b09a-bcfd80637dc8', '2026-02-16 09:49:35.950429', '2026-02-16 09:49:35.950433')
{"timestamp": "2026-02-16T09:49:35.950701Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.77s ago] (None, 'Unnamed Line', None, None, None, None, None, 'a0b634f8-751c-4fec-bc9e-ae773d7e7813', 'Production Data', 'Main production data source', 'Date', None, None, 0, None, None, 1, '46aa7940-9f27-4a33-b09a-bcfd80637dc8', '2026-02-16 09:49:35.950429', '2026-02-16 09:49:35.950433')"}
2026-02-16 09:49:35,951 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:49:35.951413Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:49:35,952 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:35.952187Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:35,952 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
{"timestamp": "2026-02-16T09:49:35.952389Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at \nFROM data_sources \nWHERE data_sources.id = ?"}
2026-02-16 09:49:35,952 INFO sqlalchemy.engine.Engine [cached since 14.05s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
{"timestamp": "2026-02-16T09:49:35.952450Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.05s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)"}
2026-02-16 09:49:35,953 INFO sqlalchemy.engine.Engine SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE ? = schema_mappings.data_source_id
{"timestamp": "2026-02-16T09:49:35.953293Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at \nFROM schema_mappings \nWHERE ? = schema_mappings.data_source_id"}
2026-02-16 09:49:35,953 INFO sqlalchemy.engine.Engine [cached since 14.05s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
{"timestamp": "2026-02-16T09:49:35.953382Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.05s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)"}
2026-02-16 09:49:35,954 INFO sqlalchemy.engine.Engine SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE ? = production_runs.data_source_id
{"timestamp": "2026-02-16T09:49:35.954048Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at \nFROM production_runs \nWHERE ? = production_runs.data_source_id"}
2026-02-16 09:49:35,954 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
{"timestamp": "2026-02-16T09:49:35.954133Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)"}
2026-02-16 09:49:35,954 INFO sqlalchemy.engine.Engine SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ? = ai_decisions.data_source_id
{"timestamp": "2026-02-16T09:49:35.954878Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at \nFROM ai_decisions \nWHERE ? = ai_decisions.data_source_id"}
2026-02-16 09:49:35,954 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
{"timestamp": "2026-02-16T09:49:35.954948Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)"}
2026-02-16 09:49:35,955 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.data_source_id
{"timestamp": "2026-02-16T09:49:35.955682Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.data_source_id"}
2026-02-16 09:49:35,955 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
{"timestamp": "2026-02-16T09:49:35.955752Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)"}
2026-02-16 09:49:35,956 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.parent_data_source_id
{"timestamp": "2026-02-16T09:49:35.956447Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at \nFROM data_sources \nWHERE ? = data_sources.parent_data_source_id"}
2026-02-16 09:49:35,956 INFO sqlalchemy.engine.Engine [cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
{"timestamp": "2026-02-16T09:49:35.956510Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)"}
2026-02-16 09:49:35,957 INFO sqlalchemy.engine.Engine INSERT INTO raw_imports (uploaded_by_id, factory_id, production_line_id, data_source_id, time_column_used, original_filename, file_path, file_size_bytes, file_hash, mime_type, encoding_detected, sheet_count, sheet_names, row_count, column_count, header_row_detected, raw_headers, sample_data, status, processing_error, processed_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:49:35.957967Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO raw_imports (uploaded_by_id, factory_id, production_line_id, data_source_id, time_column_used, original_filename, file_path, file_size_bytes, file_hash, mime_type, encoding_detected, sheet_count, sheet_names, row_count, column_count, header_row_detected, raw_headers, sample_data, status, processing_error, processed_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:49:35,958 INFO sqlalchemy.engine.Engine [generated in 0.00021s] (None, 'f30d401d-34f3-4d4c-88e4-b8d466d8be9f', 'a0b634f8-751c-4fec-bc9e-ae773d7e7813', None, None, 'prod_jan.xlsx', '/tmp/prod_jan.xlsx', 1024, 'abc123', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', None, 1, None, 100, 10, None, '["Date", "Product", "Quantity"]', '[["2024-01-01", "Widget", 100]]', 'processed', None, None, '75fd72ef-5703-44a7-aeaf-94d3e50f4528', '2026-02-16 09:49:35.957879', '2026-02-16 09:49:35.957881')
{"timestamp": "2026-02-16T09:49:35.958043Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] (None, 'f30d401d-34f3-4d4c-88e4-b8d466d8be9f', 'a0b634f8-751c-4fec-bc9e-ae773d7e7813', None, None, 'prod_jan.xlsx', '/tmp/prod_jan.xlsx', 1024, 'abc123', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', None, 1, None, 100, 10, None, '[\"Date\", \"Product\", \"Quantity\"]', '[[\"2024-01-01\", \"Widget\", 100]]', 'processed', None, None, '75fd72ef-5703-44a7-aeaf-94d3e50f4528', '2026-02-16 09:49:35.957879', '2026-02-16 09:49:35.957881')"}
2026-02-16 09:49:35,958 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:49:35.958605Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:49:35,959 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:35.959069Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:35,959 INFO sqlalchemy.engine.Engine SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.id = ?
{"timestamp": "2026-02-16T09:49:35.959228Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at \nFROM raw_imports \nWHERE raw_imports.id = ?"}
2026-02-16 09:49:35,959 INFO sqlalchemy.engine.Engine [cached since 10.71s ago] ('75fd72ef-5703-44a7-aeaf-94d3e50f4528',)
{"timestamp": "2026-02-16T09:49:35.959294Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.71s ago] ('75fd72ef-5703-44a7-aeaf-94d3e50f4528',)"}
2026-02-16 09:49:36,146 INFO sqlalchemy.engine.Engine INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:49:36.146831Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:49:36,146 INFO sqlalchemy.engine.Engine [cached since 14.27s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53', 'test@example.com', '$2b$12$jx4OtFtGv.Kskv.FjvxlkON975J//ZGX/FwLC09eowyCW7LG4keX2', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '6792474a-5123-4b3f-9460-222f9d2025e2', '2026-02-16 09:49:36.146611', '2026-02-16 09:49:36.146617', 0, None)
{"timestamp": "2026-02-16T09:49:36.146953Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.27s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53', 'test@example.com', '$2b$12$jx4OtFtGv.Kskv.FjvxlkON975J//ZGX/FwLC09eowyCW7LG4keX2', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '6792474a-5123-4b3f-9460-222f9d2025e2', '2026-02-16 09:49:36.146611', '2026-02-16 09:49:36.146617', 0, None)"}
2026-02-16 09:49:36,148 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:49:36.148177Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:49:36,148 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:36.149019Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:36,149 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
{"timestamp": "2026-02-16T09:49:36.149287Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ?"}
2026-02-16 09:49:36,149 INFO sqlalchemy.engine.Engine [cached since 14.27s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
{"timestamp": "2026-02-16T09:49:36.149365Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.27s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)"}
2026-02-16 09:49:36,150 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
{"timestamp": "2026-02-16T09:49:36.150590Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.user_id"}
2026-02-16 09:49:36,150 INFO sqlalchemy.engine.Engine [cached since 14.27s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
{"timestamp": "2026-02-16T09:49:36.150760Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.27s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)"}
2026-02-16 09:49:36,151 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
{"timestamp": "2026-02-16T09:49:36.151727Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE ? = user_scopes.user_id"}
2026-02-16 09:49:36,151 INFO sqlalchemy.engine.Engine [cached since 14.27s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
{"timestamp": "2026-02-16T09:49:36.151809Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.27s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)"}
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.31s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00019s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_style_id ON production_events (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_order_id ON production_events (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_factories_organization_id ON factories (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_style_number ON styles (style_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_buyer ON styles (buyer)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_factory_id ON styles (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00006s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_style_id ON orders (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_status ON orders (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_po_number ON orders (po_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00023s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_worker_id ON defects (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00022s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_defect_type ON defects (defect_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00019s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_users_organization_id ON users (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_employee_id ON workers (employee_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_factory_id ON workers (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.34s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.27s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '29148cc8-ff61-480a-8c75-b9f3a7fa8a53', '2026-02-16 09:49:35.930163', '2026-02-16 09:49:35.930166', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.26s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.26s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.26s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 4.726s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53', 'Dash Factory', 'DF1', 'US', None, None, 'UTC', None, None, None, None, 'en-US', 1, 'f30d401d-34f3-4d4c-88e4-b8d466d8be9f', '2026-02-16 09:49:35.936560', '2026-02-16 09:49:35.936564')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT factories.organization_id, factories.name, factories.code, factories.country, factories.city, factories.address, factories.timezone, factories.total_lines, factories.total_workers, factories.daily_capacity_units, factories.certifications, factories.settings, factories.locale, factories.is_active, factories.id, factories.created_at, factories.updated_at 
FROM factories 
WHERE factories.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.05s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.factory_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT styles.factory_id AS styles_factory_id, styles.style_number AS styles_style_number, styles.style_name AS styles_style_name, styles.description AS styles_description, styles.buyer AS styles_buyer, styles.season AS styles_season, styles.category AS styles_category, styles.base_sam AS styles_base_sam, styles.complexity_rating AS styles_complexity_rating, styles.bom_summary AS styles_bom_summary, styles.tech_pack_url AS styles_tech_pack_url, styles.is_active AS styles_is_active, styles.id AS styles_id, styles.created_at AS styles_created_at, styles.updated_at AS styles_updated_at 
FROM styles 
WHERE ? = styles.factory_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT workers.factory_id AS workers_factory_id, workers.employee_id AS workers_employee_id, workers.full_name AS workers_full_name, workers.department AS workers_department, workers.job_title AS workers_job_title, workers.primary_skill AS workers_primary_skill, workers.data_source_id AS workers_data_source_id, workers.hire_date AS workers_hire_date, workers.termination_date AS workers_termination_date, workers.hourly_rate AS workers_hourly_rate, workers.currency AS workers_currency, workers.is_active AS workers_is_active, workers.id AS workers_id, workers.created_at AS workers_created_at, workers.updated_at AS workers_updated_at, workers.is_deleted AS workers_is_deleted, workers.deleted_at AS workers_deleted_at 
FROM workers 
WHERE ? = workers.factory_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dhu_reports.factory_id AS dhu_reports_factory_id, dhu_reports.report_date AS dhu_reports_report_date, dhu_reports.period_type AS dhu_reports_period_type, dhu_reports.avg_dhu AS dhu_reports_avg_dhu, dhu_reports.min_dhu AS dhu_reports_min_dhu, dhu_reports.max_dhu AS dhu_reports_max_dhu, dhu_reports.total_inspected AS dhu_reports_total_inspected, dhu_reports.total_defects AS dhu_reports_total_defects, dhu_reports.total_rejected AS dhu_reports_total_rejected, dhu_reports.top_defects AS dhu_reports_top_defects, dhu_reports.top_operations AS dhu_reports_top_operations, dhu_reports.top_lines AS dhu_reports_top_lines, dhu_reports.dhu_change_pct AS dhu_reports_dhu_change_pct, dhu_reports.trend_direction AS dhu_reports_trend_direction, dhu_reports.recommendations AS dhu_reports_recommendations, dhu_reports.id AS dhu_reports_id, dhu_reports.created_at AS dhu_reports_created_at, dhu_reports.updated_at AS dhu_reports_updated_at 
FROM dhu_reports 
WHERE ? = dhu_reports.factory_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('f30d401d-34f3-4d4c-88e4-b8d466d8be9f', 'Line 1', None, None, None, None, None, None, None, None, None, None, None, 0, None, None, 1, 'a0b634f8-751c-4fec-bc9e-ae773d7e7813', '2026-02-16 09:49:35.942673', '2026-02-16 09:49:35.942675')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE ? = schema_mappings.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE ? = production_runs.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ? = ai_decisions.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.03s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.03s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.parent_data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.03s ago] ('a0b634f8-751c-4fec-bc9e-ae773d7e7813',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 10.77s ago] (None, 'Unnamed Line', None, None, None, None, None, 'a0b634f8-751c-4fec-bc9e-ae773d7e7813', 'Production Data', 'Main production data source', 'Date', None, None, 0, None, None, 1, '46aa7940-9f27-4a33-b09a-bcfd80637dc8', '2026-02-16 09:49:35.950429', '2026-02-16 09:49:35.950433')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.05s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE ? = schema_mappings.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.05s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE ? = production_runs.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ? = ai_decisions.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.parent_data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.04s ago] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO raw_imports (uploaded_by_id, factory_id, production_line_id, data_source_id, time_column_used, original_filename, file_path, file_size_bytes, file_hash, mime_type, encoding_detected, sheet_count, sheet_names, row_count, column_count, header_row_detected, raw_headers, sample_data, status, processing_error, processed_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00021s] (None, 'f30d401d-34f3-4d4c-88e4-b8d466d8be9f', 'a0b634f8-751c-4fec-bc9e-ae773d7e7813', None, None, 'prod_jan.xlsx', '/tmp/prod_jan.xlsx', 1024, 'abc123', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', None, 1, None, 100, 10, None, '["Date", "Product", "Quantity"]', '[["2024-01-01", "Widget", 100]]', 'processed', None, None, '75fd72ef-5703-44a7-aeaf-94d3e50f4528', '2026-02-16 09:49:35.957879', '2026-02-16 09:49:35.957881')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 10.71s ago] ('75fd72ef-5703-44a7-aeaf-94d3e50f4528',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.27s ago] ('29148cc8-ff61-480a-8c75-b9f3a7fa8a53', 'test@example.com', '$2b$12$jx4OtFtGv.Kskv.FjvxlkON975J//ZGX/FwLC09eowyCW7LG4keX2', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '6792474a-5123-4b3f-9460-222f9d2025e2', '2026-02-16 09:49:36.146611', '2026-02-16 09:49:36.146617', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.27s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.27s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.27s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
----------------------------- Captured stdout call -----------------------------
2026-02-16 09:49:36,170 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ? AND users.is_active = 1
{"timestamp": "2026-02-16T09:49:36.170356Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ? AND users.is_active = 1"}
2026-02-16 09:49:36,170 INFO sqlalchemy.engine.Engine [cached since 14.22s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
{"timestamp": "2026-02-16T09:49:36.170464Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.22s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)"}
2026-02-16 09:49:36,171 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.user_id IN (?)
{"timestamp": "2026-02-16T09:49:36.171636Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE dashboards.user_id IN (?)"}
2026-02-16 09:49:36,171 INFO sqlalchemy.engine.Engine [cached since 14.22s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
{"timestamp": "2026-02-16T09:49:36.171715Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.22s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)"}
2026-02-16 09:49:36,172 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE user_scopes.user_id IN (?)
{"timestamp": "2026-02-16T09:49:36.172594Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE user_scopes.user_id IN (?)"}
2026-02-16 09:49:36,172 INFO sqlalchemy.engine.Engine [cached since 14.22s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
{"timestamp": "2026-02-16T09:49:36.172669Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.22s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)"}
2026-02-16 09:49:36,174 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources JOIN factories ON data_sources.factory_id = factories.id 
WHERE data_sources.id = ? AND factories.organization_id = ?
{"timestamp": "2026-02-16T09:49:36.174282Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at \nFROM data_sources JOIN factories ON data_sources.factory_id = factories.id \nWHERE data_sources.id = ? AND factories.organization_id = ?"}
2026-02-16 09:49:36,174 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8', '29148cc8-ff61-480a-8c75-b9f3a7fa8a53')
{"timestamp": "2026-02-16T09:49:36.174356Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00015s] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8', '29148cc8-ff61-480a-8c75-b9f3a7fa8a53')"}
{"timestamp": "2026-02-16T09:49:36.175268Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: PUT http://test/api/v1/data-sources/46aa7940-9f27-4a33-b09a-bcfd80637dc8 \"HTTP/1.1 404 Not Found\""}
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ? AND users.is_active = 1
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.22s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.user_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.22s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE user_scopes.user_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.22s ago] ('6792474a-5123-4b3f-9460-222f9d2025e2',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources JOIN factories ON data_sources.factory_id = factories.id 
WHERE data_sources.id = ? AND factories.organization_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00015s] ('46aa7940-9f27-4a33-b09a-bcfd80637dc8', '29148cc8-ff61-480a-8c75-b9f3a7fa8a53')
INFO     httpx:_client.py:1740 HTTP Request: PUT http://test/api/v1/data-sources/46aa7940-9f27-4a33-b09a-bcfd80637dc8 "HTTP/1.1 404 Not Found"
--------------------------- Captured stdout teardown ---------------------------
2026-02-16 09:49:36,204 INFO sqlalchemy.engine.Engine ROLLBACK
{"timestamp": "2026-02-16T09:49:36.205094Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK"}
2026-02-16 09:49:36,205 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:49:36.205626Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:49:36,205 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:49:36.205811Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 09:49:36,205 INFO sqlalchemy.engine.Engine [cached since 14.69s ago] ()
{"timestamp": "2026-02-16T09:49:36.205874Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.69s ago] ()"}
2026-02-16 09:49:36,206 INFO sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table'
{"timestamp": "2026-02-16T09:49:36.206437Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT name FROM sqlite_master WHERE type='table'"}
2026-02-16 09:49:36,206 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.206498Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,207 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "ai_decisions"
{"timestamp": "2026-02-16T09:49:36.207276Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"ai_decisions\""}
2026-02-16 09:49:36,207 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.207340Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,207 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "alias_mappings"
{"timestamp": "2026-02-16T09:49:36.207907Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"alias_mappings\""}
2026-02-16 09:49:36,207 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.207973Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,208 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "efficiency_metrics"
{"timestamp": "2026-02-16T09:49:36.208768Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"efficiency_metrics\""}
2026-02-16 09:49:36,208 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.208864Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,209 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dhu_reports"
{"timestamp": "2026-02-16T09:49:36.209515Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dhu_reports\""}
2026-02-16 09:49:36,209 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.209576Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,210 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dashboards"
{"timestamp": "2026-02-16T09:49:36.210105Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dashboards\""}
2026-02-16 09:49:36,210 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.210168Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,210 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_quality_issues"
{"timestamp": "2026-02-16T09:49:36.210693Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_quality_issues\""}
2026-02-16 09:49:36,210 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.210756Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,211 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_sources"
{"timestamp": "2026-02-16T09:49:36.211365Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_sources\""}
2026-02-16 09:49:36,211 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.211432Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,211 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "schema_mappings"
{"timestamp": "2026-02-16T09:49:36.211951Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"schema_mappings\""}
2026-02-16 09:49:36,211 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.212011Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,212 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_events"
{"timestamp": "2026-02-16T09:49:36.212499Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_events\""}
2026-02-16 09:49:36,212 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.212560Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,213 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "factories"
{"timestamp": "2026-02-16T09:49:36.213191Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"factories\""}
2026-02-16 09:49:36,213 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.213284Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,214 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "styles"
{"timestamp": "2026-02-16T09:49:36.214083Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"styles\""}
2026-02-16 09:49:36,214 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.214154Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,214 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "orders"
{"timestamp": "2026-02-16T09:49:36.214693Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"orders\""}
2026-02-16 09:49:36,214 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.214782Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,215 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_runs"
{"timestamp": "2026-02-16T09:49:36.215335Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_runs\""}
2026-02-16 09:49:36,215 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.215404Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,216 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "quality_inspections"
{"timestamp": "2026-02-16T09:49:36.216142Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"quality_inspections\""}
2026-02-16 09:49:36,216 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.216206Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,216 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "defects"
{"timestamp": "2026-02-16T09:49:36.216779Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"defects\""}
2026-02-16 09:49:36,216 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.216854Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,217 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "raw_imports"
{"timestamp": "2026-02-16T09:49:36.217406Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"raw_imports\""}
2026-02-16 09:49:36,217 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.217470Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,218 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "staging_records"
{"timestamp": "2026-02-16T09:49:36.218046Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"staging_records\""}
2026-02-16 09:49:36,218 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.218106Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,218 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "organizations"
{"timestamp": "2026-02-16T09:49:36.218589Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"organizations\""}
2026-02-16 09:49:36,218 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.218653Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,219 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "users"
{"timestamp": "2026-02-16T09:49:36.219139Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"users\""}
2026-02-16 09:49:36,219 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.219192Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,219 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "user_scopes"
{"timestamp": "2026-02-16T09:49:36.219686Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"user_scopes\""}
2026-02-16 09:49:36,219 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.219749Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,220 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "waitlist"
{"timestamp": "2026-02-16T09:49:36.220264Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"waitlist\""}
2026-02-16 09:49:36,220 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.220321Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,220 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "workers"
{"timestamp": "2026-02-16T09:49:36.220788Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"workers\""}
2026-02-16 09:49:36,220 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.220856Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,221 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_skills"
{"timestamp": "2026-02-16T09:49:36.221533Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_skills\""}
2026-02-16 09:49:36,221 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.221644Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,222 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_attendances"
{"timestamp": "2026-02-16T09:49:36.222197Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_attendances\""}
2026-02-16 09:49:36,222 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.222267Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,222 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_outputs"
{"timestamp": "2026-02-16T09:49:36.222777Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_outputs\""}
2026-02-16 09:49:36,222 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.222833Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,223 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "fabric_lots"
{"timestamp": "2026-02-16T09:49:36.223361Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"fabric_lots\""}
2026-02-16 09:49:36,223 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.223419Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,223 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cut_tickets"
{"timestamp": "2026-02-16T09:49:36.224001Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cut_tickets\""}
2026-02-16 09:49:36,224 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.224071Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,224 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "packing_lists"
{"timestamp": "2026-02-16T09:49:36.224581Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"packing_lists\""}
2026-02-16 09:49:36,224 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.224645Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,225 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cartons"
{"timestamp": "2026-02-16T09:49:36.225198Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cartons\""}
2026-02-16 09:49:36,225 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.225264Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,225 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "traceability_records"
{"timestamp": "2026-02-16T09:49:36.225819Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"traceability_records\""}
2026-02-16 09:49:36,225 INFO sqlalchemy.engine.Engine [cached since 14.24s ago] ()
{"timestamp": "2026-02-16T09:49:36.225886Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.24s ago] ()"}
2026-02-16 09:49:36,226 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:49:36.226367Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 09:49:36,226 INFO sqlalchemy.engine.Engine [cached since 14.63s ago] ()
{"timestamp": "2026-02-16T09:49:36.226427Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14.63s ago] ()"}
2026-02-16 09:49:36,226 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:49:36.226943Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.69s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT name FROM sqlite_master WHERE type='table'
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "ai_decisions"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "alias_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "efficiency_metrics"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dhu_reports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dashboards"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_quality_issues"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_sources"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "schema_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_events"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "factories"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "styles"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "orders"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_runs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "quality_inspections"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "defects"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "raw_imports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "staging_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "organizations"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "users"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "user_scopes"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "waitlist"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "workers"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_skills"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_attendances"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_outputs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "fabric_lots"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cut_tickets"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "packing_lists"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cartons"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "traceability_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 14.63s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
=========================== short test summary info ============================
FAILED tests/e2e/test_excel_to_dashboard.py::test_e2e_excel_ingestion_and_dashboard
FAILED tests/test_api/test_dashboard_flow.py::test_edit_configuration - asser...
============= 2 failed, 220 passed, 2 skipped in 64.83s (0:01:04) ==============
make: *** [Makefile:200: test] Error 1
