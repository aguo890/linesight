============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-9.0.2, pluggy-1.6.0 -- C:\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\19803\Projects\FactoryExcelManager\backend
configfile: pytest.ini
plugins: anyio-4.12.0, Faker-40.1.0, langsmith-0.5.1, locust-2.43.0, asyncio-1.3.0, cov-7.0.0, mock-3.15.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 19 items

backend\tests\test_api\test_data_pipeline_robust.py::test_value_preservation_through_pipeline PASSED [  5%]
backend\tests\test_api\test_data_pipeline_robust.py::test_date_format_handling PASSED [ 10%]
backend\tests\test_api\test_data_pipeline_robust.py::test_efficiency_normalization PASSED [ 15%]
backend\tests\test_api\test_data_pipeline_robust.py::test_null_handling PASSED [ 21%]
backend\tests\test_api\test_data_pipeline_robust.py::test_data_integrity_across_multiple_rows PASSED [ 26%]
backend\tests\test_api\test_data_pipeline_robust.py::test_style_and_order_creation PASSED [ 31%]
backend\tests\test_api\test_data_pipeline_robust.py::test_duplicate_upload_handling PASSED [ 36%]
backend\tests\test_api\test_data_pipeline_robust.py::test_multiple_widgets_receive_correct_data PASSED [ 42%]
backend\tests\test_api\test_data_pipeline_robust.py::test_invalid_data_handling PASSED [ 47%]
backend\tests\test_api\test_data_pipeline_robust.py::test_analytics_sum_matches_database PASSED [ 52%]
backend\tests\test_api\test_individual_widgets.py::test_get_hourly_production FAILED [ 57%]
backend\tests\test_api\test_individual_widgets.py::test_get_sam_performance FAILED [ 63%]
backend\tests\test_api\test_individual_widgets.py::test_get_workforce_stats PASSED [ 68%]
backend\tests\test_api\test_individual_widgets.py::test_get_dhu_history FAILED [ 73%]
backend\tests\test_api\test_individual_widgets.py::test_get_speed_vs_quality FAILED [ 78%]
backend\tests\test_api\test_individual_widgets.py::test_get_complexity_impact PASSED [ 84%]
backend\tests\test_api\test_individual_widgets.py::test_get_downtime_reasons PASSED [ 89%]
backend\tests\test_api\test_ingestion_flow.py::test_full_ingestion_flow PASSED [ 94%]
backend\tests\test_api\test_ingestion_flow.py::test_schema_evolution FAILED [100%]

================================== FAILURES ===================================
_________________________ test_get_hourly_production __________________________
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\default.py:952: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:340: in _handle_exception
    raise error
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\core.py:160: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\core.py:63: in _connection_worker_thread
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: factories.country

The above exception was the direct cause of the following exception:
backend\tests\test_api\test_individual_widgets.py:193: in test_get_hourly_production
    await db_session.flush()
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\ext\asyncio\session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:527: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\default.py:952: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:340: in _handle_exception
    raise error
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\core.py:160: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\core.py:63: in _connection_worker_thread
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: factories.country
E   [SQL: INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('980cebab-315d-41f9-b963-9f81b2994a9b', 'Hourly Factory', 'HF-01', None, None, None, 'UTC', None, None, None, None, 'en-US', 1, '54cd764d-c7a9-4e08-9004-bc12d7783139', '2026-02-16 09:17:44.790791', '2026-02-16 09:17:44.790792')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
---------------------------- Captured stdout setup ----------------------------
2026-02-16 04:17:44,454 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:44.454233Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:44,454 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:17:44.454490Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 04:17:44,454 INFO sqlalchemy.engine.Engine [cached since 47.41s ago] ()
{"timestamp": "2026-02-16T09:17:44.454597Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.41s ago] ()"}
2026-02-16 04:17:44,455 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:17:44.455078Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"ai_decisions\")"}
2026-02-16 04:17:44,455 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.455175Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,455 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:17:44.455783Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"ai_decisions\")"}
2026-02-16 04:17:44,455 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.455862Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,456 INFO sqlalchemy.engine.Engine 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


{"timestamp": "2026-02-16T09:17:44.456604Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE ai_decisions (\n\tdata_source_id VARCHAR(36), \n\tagent_type VARCHAR(16) NOT NULL, \n\tmodel_used VARCHAR(50) NOT NULL, \n\tinput_summary TEXT NOT NULL, \n\toutput_summary TEXT NOT NULL, \n\tconfidence FLOAT, \n\treasoning JSON, \n\tperformance_metadata JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id)\n)\n\n"}
2026-02-16 04:17:44,456 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:44.456702Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:44,457 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
{"timestamp": "2026-02-16T09:17:44.457319Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)"}
2026-02-16 04:17:44,457 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.457397Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,457 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
{"timestamp": "2026-02-16T09:17:44.457937Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)"}
2026-02-16 04:17:44,457 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.458009Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,458 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:17:44.458582Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"alias_mappings\")"}
2026-02-16 04:17:44,458 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.458771Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,459 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:17:44.459452Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"alias_mappings\")"}
2026-02-16 04:17:44,459 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.459531Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,460 INFO sqlalchemy.engine.Engine 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.460296Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE alias_mappings (\n\tscope VARCHAR(50) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tsource_alias VARCHAR(255) NOT NULL, \n\tsource_alias_normalized VARCHAR(255) NOT NULL, \n\tcanonical_field VARCHAR(100) NOT NULL, \n\tusage_count INTEGER NOT NULL, \n\tlast_used_at DATETIME NOT NULL, \n\tcreated_by_id CHAR(36), \n\tcorrection_count INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,460 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.460393Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,460 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
{"timestamp": "2026-02-16T09:17:44.460977Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)"}
2026-02-16 04:17:44,461 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.461056Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,461 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
{"timestamp": "2026-02-16T09:17:44.461605Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)"}
2026-02-16 04:17:44,461 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:44.461743Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:44,462 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
{"timestamp": "2026-02-16T09:17:44.462267Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)"}
2026-02-16 04:17:44,462 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:44.462385Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:44,462 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
{"timestamp": "2026-02-16T09:17:44.462933Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)"}
2026-02-16 04:17:44,462 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.463028Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,463 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
{"timestamp": "2026-02-16T09:17:44.463555Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)"}
2026-02-16 04:17:44,463 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:44.463659Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:44,464 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
{"timestamp": "2026-02-16T09:17:44.464341Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)"}
2026-02-16 04:17:44,464 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.464424Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,464 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:17:44.464941Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"efficiency_metrics\")"}
2026-02-16 04:17:44,464 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.465023Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,465 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:17:44.465541Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"efficiency_metrics\")"}
2026-02-16 04:17:44,465 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.465623Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,466 INFO sqlalchemy.engine.Engine 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.466383Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE efficiency_metrics (\n\tproduction_run_id CHAR(36) NOT NULL, \n\tefficiency_pct NUMERIC(6, 2), \n\tsam_target NUMERIC(10, 2), \n\tsam_actual NUMERIC(10, 2), \n\tsam_variance NUMERIC(8, 2), \n\tsam_variance_pct NUMERIC(6, 2), \n\tcapacity_utilization_pct NUMERIC(6, 2), \n\tperformance_tier VARCHAR(12), \n\tfactory_avg_efficiency NUMERIC(6, 2), \n\tline_avg_efficiency NUMERIC(6, 2), \n\tcalculated_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,466 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.466470Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,466 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
{"timestamp": "2026-02-16T09:17:44.467056Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)"}
2026-02-16 04:17:44,467 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:44.467159Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:44,467 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:17:44.467753Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dhu_reports\")"}
2026-02-16 04:17:44,467 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.467872Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,468 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:17:44.468477Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dhu_reports\")"}
2026-02-16 04:17:44,468 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.468560Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,469 INFO sqlalchemy.engine.Engine 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.469373Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dhu_reports (\n\tfactory_id CHAR(36) NOT NULL, \n\treport_date DATE NOT NULL, \n\tperiod_type VARCHAR(7) NOT NULL, \n\tavg_dhu NUMERIC(6, 2), \n\tmin_dhu NUMERIC(6, 2), \n\tmax_dhu NUMERIC(6, 2), \n\ttotal_inspected INTEGER, \n\ttotal_defects INTEGER, \n\ttotal_rejected INTEGER, \n\ttop_defects TEXT, \n\ttop_operations TEXT, \n\ttop_lines TEXT, \n\tdhu_change_pct NUMERIC(6, 2), \n\ttrend_direction VARCHAR(20), \n\trecommendations TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,469 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:44.469472Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:44,470 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
{"timestamp": "2026-02-16T09:17:44.470044Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)"}
2026-02-16 04:17:44,470 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.470114Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,470 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
{"timestamp": "2026-02-16T09:17:44.470648Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)"}
2026-02-16 04:17:44,470 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:44.470777Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:44,471 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dashboards")
{"timestamp": "2026-02-16T09:17:44.471339Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dashboards\")"}
2026-02-16 04:17:44,471 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.471412Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,471 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dashboards")
{"timestamp": "2026-02-16T09:17:44.471906Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dashboards\")"}
2026-02-16 04:17:44,471 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.472043Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,472 INFO sqlalchemy.engine.Engine 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.472822Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dashboards (\n\tuser_id CHAR(36) NOT NULL, \n\tname VARCHAR(200) NOT NULL, \n\tdescription TEXT, \n\tdata_source_id CHAR(36), \n\twidget_config TEXT, \n\tlayout_config TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tCONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,472 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:44.472933Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:44,473 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
{"timestamp": "2026-02-16T09:17:44.473490Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)"}
2026-02-16 04:17:44,473 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.473566Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,474 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
{"timestamp": "2026-02-16T09:17:44.474062Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)"}
2026-02-16 04:17:44,474 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.474145Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,474 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:17:44.474667Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_quality_issues\")"}
2026-02-16 04:17:44,474 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.474745Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,475 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:17:44.475264Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_quality_issues\")"}
2026-02-16 04:17:44,475 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.475409Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,476 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.476317Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_quality_issues (\n\traw_import_id VARCHAR(36) NOT NULL, \n\trow_number INTEGER, \n\tissue_type VARCHAR(50) NOT NULL, \n\tseverity VARCHAR(20) NOT NULL, \n\tmessage TEXT NOT NULL, \n\tfield_name VARCHAR(100), \n\tfield_value VARCHAR(500), \n\tresolved_at DATETIME, \n\tresolved_by_user_id VARCHAR(36), \n\tresolution_notes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, \n\tFOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,476 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.476398Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,476 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
{"timestamp": "2026-02-16T09:17:44.476963Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)"}
2026-02-16 04:17:44,477 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.477046Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,477 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
{"timestamp": "2026-02-16T09:17:44.477572Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)"}
2026-02-16 04:17:44,477 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.477662Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,478 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
{"timestamp": "2026-02-16T09:17:44.478164Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)"}
2026-02-16 04:17:44,478 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.478280Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,478 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_sources")
{"timestamp": "2026-02-16T09:17:44.478775Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_sources\")"}
2026-02-16 04:17:44,478 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.478848Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,479 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_sources")
{"timestamp": "2026-02-16T09:17:44.479328Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_sources\")"}
2026-02-16 04:17:44,479 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.479406Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,480 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.480173Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_sources (\n\tfactory_id CHAR(36), \n\tname VARCHAR(100) NOT NULL, \n\tcode VARCHAR(50), \n\ttarget_operators INTEGER, \n\ttarget_efficiency_pct INTEGER, \n\tsettings JSON, \n\tspecialty VARCHAR(100), \n\tsupervisor_id CHAR(36), \n\tproduction_line_id CHAR(36), \n\tsource_name VARCHAR(255), \n\tdescription TEXT, \n\ttime_column VARCHAR(100), \n\ttime_format VARCHAR(50), \n\tschema_config JSON, \n\tparent_data_source_id CHAR(36), \n\tis_segment BOOLEAN NOT NULL, \n\tdate_range_start DATE, \n\tdate_range_end DATE, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, \n\tFOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,480 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.480263Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,480 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
{"timestamp": "2026-02-16T09:17:44.480803Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)"}
2026-02-16 04:17:44,480 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.480877Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,481 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
{"timestamp": "2026-02-16T09:17:44.481414Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)"}
2026-02-16 04:17:44,481 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:44.481491Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:44,481 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:17:44.482046Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"schema_mappings\")"}
2026-02-16 04:17:44,482 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.482129Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,482 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:17:44.482618Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"schema_mappings\")"}
2026-02-16 04:17:44,482 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.482711Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,483 INFO sqlalchemy.engine.Engine 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.483412Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE schema_mappings (\n\tdata_source_id CHAR(36) NOT NULL, \n\tversion INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tcolumn_map JSON NOT NULL, \n\textraction_rules JSON, \n\treviewed_by_user BOOLEAN NOT NULL, \n\tuser_notes TEXT, \n\tmatching_tier VARCHAR(20), \n\ttier_confidence FLOAT, \n\ttier_breakdown JSON, \n\tfuzzy_scores JSON, \n\tuser_corrected BOOLEAN NOT NULL, \n\tcorrection_count INTEGER, \n\tcorrection_history JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,483 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.483497Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,483 INFO sqlalchemy.engine.Engine CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
{"timestamp": "2026-02-16T09:17:44.484042Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)"}
2026-02-16 04:17:44,484 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.484122Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,484 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_events")
{"timestamp": "2026-02-16T09:17:44.484625Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_events\")"}
2026-02-16 04:17:44,484 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.484703Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,485 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_events")
{"timestamp": "2026-02-16T09:17:44.485221Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_events\")"}
2026-02-16 04:17:44,485 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.485300Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,485 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.486007Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_events (\n\ttimestamp DATETIME NOT NULL, \n\tevent_type VARCHAR(17) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tstyle_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36), \n\tsource_import_id VARCHAR(36), \n\traw_data JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,486 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.486092Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,486 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
{"timestamp": "2026-02-16T09:17:44.486623Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)"}
2026-02-16 04:17:44,486 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:44.486694Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:44,487 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
{"timestamp": "2026-02-16T09:17:44.487178Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)"}
2026-02-16 04:17:44,487 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.487264Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,487 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
{"timestamp": "2026-02-16T09:17:44.487793Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)"}
2026-02-16 04:17:44,487 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.487874Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,488 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
{"timestamp": "2026-02-16T09:17:44.488368Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)"}
2026-02-16 04:17:44,488 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.488448Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,488 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_style_id ON production_events (style_id)
{"timestamp": "2026-02-16T09:17:44.488945Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_style_id ON production_events (style_id)"}
2026-02-16 04:17:44,488 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.489024Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,489 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_order_id ON production_events (order_id)
{"timestamp": "2026-02-16T09:17:44.489486Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_order_id ON production_events (order_id)"}
2026-02-16 04:17:44,489 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.489569Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,490 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("factories")
{"timestamp": "2026-02-16T09:17:44.490085Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"factories\")"}
2026-02-16 04:17:44,490 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.490163Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,490 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("factories")
{"timestamp": "2026-02-16T09:17:44.490671Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"factories\")"}
2026-02-16 04:17:44,490 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.490745Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,491 INFO sqlalchemy.engine.Engine 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:17:44.491452Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE factories (\n\torganization_id CHAR(36) NOT NULL, \n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50) NOT NULL, \n\tcountry VARCHAR(100) NOT NULL, \n\tcity VARCHAR(100), \n\taddress TEXT, \n\ttimezone VARCHAR(50) NOT NULL, \n\ttotal_lines INTEGER, \n\ttotal_workers INTEGER, \n\tdaily_capacity_units INTEGER, \n\tcertifications TEXT, \n\tsettings JSON, \n\tlocale VARCHAR(20) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 04:17:44,491 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:44.491547Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:44,492 INFO sqlalchemy.engine.Engine CREATE INDEX ix_factories_organization_id ON factories (organization_id)
{"timestamp": "2026-02-16T09:17:44.492101Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_factories_organization_id ON factories (organization_id)"}
2026-02-16 04:17:44,492 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.492194Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,492 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("styles")
{"timestamp": "2026-02-16T09:17:44.492875Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"styles\")"}
2026-02-16 04:17:44,492 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.492962Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,493 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("styles")
{"timestamp": "2026-02-16T09:17:44.493521Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"styles\")"}
2026-02-16 04:17:44,493 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.493602Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,494 INFO sqlalchemy.engine.Engine 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.494374Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE styles (\n\tfactory_id VARCHAR(36) NOT NULL, \n\tstyle_number VARCHAR(100) NOT NULL, \n\tstyle_name VARCHAR(255), \n\tdescription VARCHAR(500), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tcategory VARCHAR(100), \n\tbase_sam NUMERIC(12, 4), \n\tcomplexity_rating VARCHAR(20), \n\tbom_summary JSON, \n\ttech_pack_url VARCHAR(500), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,494 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:44.494513Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:44,495 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_factory_id ON styles (factory_id)
{"timestamp": "2026-02-16T09:17:44.495129Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_factory_id ON styles (factory_id)"}
2026-02-16 04:17:44,495 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:44.495257Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:44,495 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_buyer ON styles (buyer)
{"timestamp": "2026-02-16T09:17:44.495803Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_buyer ON styles (buyer)"}
2026-02-16 04:17:44,495 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.495922Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,496 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_style_number ON styles (style_number)
{"timestamp": "2026-02-16T09:17:44.496459Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_style_number ON styles (style_number)"}
2026-02-16 04:17:44,496 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:44.496628Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:44,497 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("orders")
{"timestamp": "2026-02-16T09:17:44.497164Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"orders\")"}
2026-02-16 04:17:44,497 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.497243Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,497 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("orders")
{"timestamp": "2026-02-16T09:17:44.497724Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"orders\")"}
2026-02-16 04:17:44,497 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.497791Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,498 INFO sqlalchemy.engine.Engine 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.498481Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE orders (\n\tstyle_id VARCHAR(36) NOT NULL, \n\tpo_number VARCHAR(100) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tsize_breakdown JSON, \n\tuom VARCHAR(20) NOT NULL, \n\tcolor VARCHAR(100), \n\torder_date DATETIME, \n\tplanned_cut_date DATETIME, \n\tplanned_sew_date DATETIME, \n\tex_factory_date DATETIME, \n\tactual_ship_date DATETIME, \n\tstatus VARCHAR(20) NOT NULL, \n\tpriority VARCHAR(20) NOT NULL, \n\tqty_cut INTEGER NOT NULL, \n\tqty_sewn INTEGER NOT NULL, \n\tqty_packed INTEGER NOT NULL, \n\tqty_shipped INTEGER NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_style_po UNIQUE (style_id, po_number), \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,498 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.498563Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,499 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_po_number ON orders (po_number)
{"timestamp": "2026-02-16T09:17:44.499132Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_po_number ON orders (po_number)"}
2026-02-16 04:17:44,499 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.499212Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,499 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_status ON orders (status)
{"timestamp": "2026-02-16T09:17:44.499754Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_status ON orders (status)"}
2026-02-16 04:17:44,499 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.499877Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,500 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_style_id ON orders (style_id)
{"timestamp": "2026-02-16T09:17:44.500432Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_style_id ON orders (style_id)"}
2026-02-16 04:17:44,500 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.500502Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,500 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_runs")
{"timestamp": "2026-02-16T09:17:44.501041Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_runs\")"}
2026-02-16 04:17:44,501 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.501116Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,501 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_runs")
{"timestamp": "2026-02-16T09:17:44.501663Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_runs\")"}
2026-02-16 04:17:44,501 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.501742Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,502 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.502734Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_runs (\n\tfactory_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\tsource_import_id VARCHAR(36), \n\tproduction_date DATETIME, \n\tinspection_date DATETIME, \n\tshift VARCHAR(20) NOT NULL, \n\tplanned_qty INTEGER, \n\tactual_qty INTEGER NOT NULL, \n\twip_start INTEGER, \n\twip_end INTEGER, \n\tlot_number VARCHAR(50), \n\tshade_band VARCHAR(10), \n\tbatch_number VARCHAR(50), \n\tdowntime_minutes INTEGER, \n\tdowntime_reason VARCHAR(255), \n\tsam NUMERIC(12, 4), \n\toperators_present INTEGER NOT NULL, \n\thelpers_present INTEGER NOT NULL, \n\tworked_minutes NUMERIC(12, 4) NOT NULL, \n\tearned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), \n\tefficiency NUMERIC(10, 2) GENERATED ALWAYS AS (\n            CASE\n                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL\n                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100\n                ELSE 0\n            END\n            ), \n\tnotes TEXT, \n\tstart_time TIME, \n\tend_time TIME, \n\tstyle_number VARCHAR(100), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tpo_number VARCHAR(100), \n\tcolor VARCHAR(100), \n\tsize VARCHAR(50), \n\tdefects INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tline_efficiency NUMERIC(10, 2), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT check_positive_qty CHECK (actual_qty >= 0), \n\tCONSTRAINT check_positive_operators CHECK (operators_present >= 0), \n\tCONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), \n\tCONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), \n\tCONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), \n\tCONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), \n\tCONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,502 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:44.502840Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:44,503 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
{"timestamp": "2026-02-16T09:17:44.503463Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)"}
2026-02-16 04:17:44,503 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.503543Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,504 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
{"timestamp": "2026-02-16T09:17:44.504106Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)"}
2026-02-16 04:17:44,504 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:44.504193Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:44,504 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
{"timestamp": "2026-02-16T09:17:44.504761Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)"}
2026-02-16 04:17:44,504 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.504840Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,505 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
{"timestamp": "2026-02-16T09:17:44.505403Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)"}
2026-02-16 04:17:44,505 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.505490Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,505 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
{"timestamp": "2026-02-16T09:17:44.505994Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)"}
2026-02-16 04:17:44,506 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.506075Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,506 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
{"timestamp": "2026-02-16T09:17:44.506618Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)"}
2026-02-16 04:17:44,506 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:44.506741Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:44,507 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
{"timestamp": "2026-02-16T09:17:44.507253Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)"}
2026-02-16 04:17:44,507 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.507376Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,507 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
{"timestamp": "2026-02-16T09:17:44.507974Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)"}
2026-02-16 04:17:44,508 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.508058Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,508 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:17:44.508651Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"quality_inspections\")"}
2026-02-16 04:17:44,508 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.508757Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,509 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:17:44.509406Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"quality_inspections\")"}
2026-02-16 04:17:44,509 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.509489Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,510 INFO sqlalchemy.engine.Engine 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.510329Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE quality_inspections (\n\tproduction_run_id VARCHAR(36) NOT NULL, \n\tinspector_id VARCHAR(36), \n\tinspection_type VARCHAR(7) NOT NULL, \n\tunits_checked INTEGER NOT NULL, \n\tdefects_found INTEGER NOT NULL, \n\tunits_rejected INTEGER NOT NULL, \n\tunits_reworked INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\taql_level VARCHAR(20), \n\taql_result VARCHAR(7), \n\tinspected_at DATETIME NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,510 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:44.510485Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:44,511 INFO sqlalchemy.engine.Engine CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
{"timestamp": "2026-02-16T09:17:44.511099Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)"}
2026-02-16 04:17:44,511 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.511182Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,511 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("defects")
{"timestamp": "2026-02-16T09:17:44.511739Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"defects\")"}
2026-02-16 04:17:44,511 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.511817Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,512 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("defects")
{"timestamp": "2026-02-16T09:17:44.512284Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"defects\")"}
2026-02-16 04:17:44,512 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.512364Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,512 INFO sqlalchemy.engine.Engine 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.513018Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE defects (\n\tinspection_id VARCHAR(36) NOT NULL, \n\tworker_id VARCHAR(36), \n\tdefect_type VARCHAR(100) NOT NULL, \n\tdefect_code VARCHAR(20), \n\tdefect_category VARCHAR(100), \n\toperation VARCHAR(100), \n\tseverity VARCHAR(8) NOT NULL, \n\tis_reworkable BOOLEAN NOT NULL, \n\tis_reworked BOOLEAN NOT NULL, \n\troot_cause VARCHAR(255), \n\tmachine_id VARCHAR(50), \n\timage_url VARCHAR(500), \n\tcount INTEGER NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,513 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.513097Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,513 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_defect_type ON defects (defect_type)
{"timestamp": "2026-02-16T09:17:44.513634Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_defect_type ON defects (defect_type)"}
2026-02-16 04:17:44,513 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:44.513767Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:44,514 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_worker_id ON defects (worker_id)
{"timestamp": "2026-02-16T09:17:44.514273Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_worker_id ON defects (worker_id)"}
2026-02-16 04:17:44,514 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.514351Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,514 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
{"timestamp": "2026-02-16T09:17:44.514831Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)"}
2026-02-16 04:17:44,514 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.514958Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,515 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("raw_imports")
{"timestamp": "2026-02-16T09:17:44.515488Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"raw_imports\")"}
2026-02-16 04:17:44,515 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.515560Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,516 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("raw_imports")
{"timestamp": "2026-02-16T09:17:44.516077Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"raw_imports\")"}
2026-02-16 04:17:44,516 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.516153Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,516 INFO sqlalchemy.engine.Engine 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.516793Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE raw_imports (\n\tuploaded_by_id VARCHAR(36), \n\tfactory_id VARCHAR(36), \n\tproduction_line_id VARCHAR(36), \n\tdata_source_id VARCHAR(36), \n\ttime_column_used VARCHAR(100), \n\toriginal_filename VARCHAR(500) NOT NULL, \n\tfile_path VARCHAR(1000) NOT NULL, \n\tfile_size_bytes INTEGER NOT NULL, \n\tfile_hash VARCHAR(64) NOT NULL, \n\tmime_type VARCHAR(100), \n\tencoding_detected VARCHAR(50), \n\tsheet_count INTEGER NOT NULL, \n\tsheet_names TEXT, \n\trow_count INTEGER, \n\tcolumn_count INTEGER, \n\theader_row_detected INTEGER, \n\traw_headers TEXT, \n\tsample_data TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tprocessing_error TEXT, \n\tprocessed_at DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,516 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.516880Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,517 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
{"timestamp": "2026-02-16T09:17:44.517441Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)"}
2026-02-16 04:17:44,517 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.517512Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,517 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
{"timestamp": "2026-02-16T09:17:44.518033Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)"}
2026-02-16 04:17:44,518 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.518114Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,518 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
{"timestamp": "2026-02-16T09:17:44.518599Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)"}
2026-02-16 04:17:44,518 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.518679Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,519 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
{"timestamp": "2026-02-16T09:17:44.519224Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)"}
2026-02-16 04:17:44,519 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.519307Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,519 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("staging_records")
{"timestamp": "2026-02-16T09:17:44.519834Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"staging_records\")"}
2026-02-16 04:17:44,519 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.519911Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,520 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("staging_records")
{"timestamp": "2026-02-16T09:17:44.520483Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"staging_records\")"}
2026-02-16 04:17:44,520 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.520563Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,521 INFO sqlalchemy.engine.Engine 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.521221Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE staging_records (\n\traw_import_id VARCHAR(36) NOT NULL, \n\tsource_row_number INTEGER NOT NULL, \n\tstatus VARCHAR(50) NOT NULL, \n\tvalidation_errors TEXT, \n\tvalidation_warnings TEXT, \n\trecord_data TEXT NOT NULL, \n\tnormalized_data TEXT, \n\tquality_score FLOAT, \n\tnull_field_count INTEGER, \n\tpromoted_at DATETIME, \n\tpromoted_to_table VARCHAR(100), \n\tpromoted_record_id VARCHAR(36), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,521 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.521304Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,521 INFO sqlalchemy.engine.Engine CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
{"timestamp": "2026-02-16T09:17:44.521890Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)"}
2026-02-16 04:17:44,521 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.521970Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,522 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("organizations")
{"timestamp": "2026-02-16T09:17:44.522502Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"organizations\")"}
2026-02-16 04:17:44,522 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.522659Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,523 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("organizations")
{"timestamp": "2026-02-16T09:17:44.523230Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"organizations\")"}
2026-02-16 04:17:44,523 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.523313Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,523 INFO sqlalchemy.engine.Engine 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:17:44.524033Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE organizations (\n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50), \n\tsubscription_tier VARCHAR(10) NOT NULL, \n\tsettings TEXT, \n\tmax_factories INTEGER NOT NULL, \n\tmax_lines_per_factory INTEGER NOT NULL, \n\tprimary_email VARCHAR(255), \n\tprimary_phone VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 04:17:44,524 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.524156Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,524 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
{"timestamp": "2026-02-16T09:17:44.524768Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"users\")"}
2026-02-16 04:17:44,524 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.524851Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,525 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("users")
{"timestamp": "2026-02-16T09:17:44.525456Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"users\")"}
2026-02-16 04:17:44,525 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.525534Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,526 INFO sqlalchemy.engine.Engine 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


{"timestamp": "2026-02-16T09:17:44.526392Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE users (\n\torganization_id CHAR(36) NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\thashed_password VARCHAR(255) NOT NULL, \n\tfull_name VARCHAR(255), \n\tavatar_url VARCHAR(500), \n\ttimezone VARCHAR(50), \n\tpreferences TEXT, \n\trole VARCHAR(15) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tis_verified BOOLEAN NOT NULL, \n\tlast_login DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (email)\n)\n\n"}
2026-02-16 04:17:44,526 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.526478Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,527 INFO sqlalchemy.engine.Engine CREATE INDEX ix_users_organization_id ON users (organization_id)
{"timestamp": "2026-02-16T09:17:44.527122Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_users_organization_id ON users (organization_id)"}
2026-02-16 04:17:44,527 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.527208Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,527 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_scopes")
{"timestamp": "2026-02-16T09:17:44.527757Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"user_scopes\")"}
2026-02-16 04:17:44,527 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.527865Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,528 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("user_scopes")
{"timestamp": "2026-02-16T09:17:44.528372Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"user_scopes\")"}
2026-02-16 04:17:44,528 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.528444Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,529 INFO sqlalchemy.engine.Engine 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.529141Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE user_scopes (\n\tuser_id CHAR(36) NOT NULL, \n\tscope_type VARCHAR(12) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tdata_source_id CHAR(36), \n\trole VARCHAR(15) NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,529 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:44.529235Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:44,529 INFO sqlalchemy.engine.Engine CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
{"timestamp": "2026-02-16T09:17:44.529778Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)"}
2026-02-16 04:17:44,529 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.529857Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,530 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("waitlist")
{"timestamp": "2026-02-16T09:17:44.530387Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"waitlist\")"}
2026-02-16 04:17:44,530 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.530475Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,530 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("waitlist")
{"timestamp": "2026-02-16T09:17:44.531034Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"waitlist\")"}
2026-02-16 04:17:44,531 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.531110Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,531 INFO sqlalchemy.engine.Engine 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


{"timestamp": "2026-02-16T09:17:44.531769Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE waitlist (\n\tid INTEGER NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\treferral_code VARCHAR(8) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n"}
2026-02-16 04:17:44,531 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.531853Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,532 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
{"timestamp": "2026-02-16T09:17:44.532374Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)"}
2026-02-16 04:17:44,532 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.532459Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,532 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
{"timestamp": "2026-02-16T09:17:44.532966Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)"}
2026-02-16 04:17:44,533 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.533044Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,533 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("workers")
{"timestamp": "2026-02-16T09:17:44.533505Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"workers\")"}
2026-02-16 04:17:44,533 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.533570Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,534 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("workers")
{"timestamp": "2026-02-16T09:17:44.534056Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"workers\")"}
2026-02-16 04:17:44,534 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.534138Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,534 INFO sqlalchemy.engine.Engine 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.534905Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE workers (\n\tfactory_id VARCHAR(36) NOT NULL, \n\temployee_id VARCHAR(50) NOT NULL, \n\tfull_name VARCHAR(255) NOT NULL, \n\tdepartment VARCHAR(100), \n\tjob_title VARCHAR(100), \n\tprimary_skill VARCHAR(100), \n\tdata_source_id VARCHAR(36), \n\thire_date DATE, \n\ttermination_date DATE, \n\thourly_rate NUMERIC(10, 2), \n\tcurrency VARCHAR(3), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,534 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.534995Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,535 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_factory_id ON workers (factory_id)
{"timestamp": "2026-02-16T09:17:44.535549Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_factory_id ON workers (factory_id)"}
2026-02-16 04:17:44,535 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.535631Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,536 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_employee_id ON workers (employee_id)
{"timestamp": "2026-02-16T09:17:44.536153Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_employee_id ON workers (employee_id)"}
2026-02-16 04:17:44,536 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.536235Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,536 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_skills")
{"timestamp": "2026-02-16T09:17:44.536767Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_skills\")"}
2026-02-16 04:17:44,536 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.536849Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,537 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_skills")
{"timestamp": "2026-02-16T09:17:44.537384Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_skills\")"}
2026-02-16 04:17:44,537 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.537465Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,538 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.538189Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_skills (\n\tworker_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\toperation_category VARCHAR(100), \n\tproficiency_pct NUMERIC(5, 2), \n\tsam_achieved NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\tpieces_lifetime INTEGER, \n\tpieces_30d INTEGER, \n\tis_certified BOOLEAN NOT NULL, \n\tcertification_date DATE, \n\tlast_assessed DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,538 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.538283Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,538 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
{"timestamp": "2026-02-16T09:17:44.538838Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)"}
2026-02-16 04:17:44,538 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:44.538943Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:44,539 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
{"timestamp": "2026-02-16T09:17:44.539488Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)"}
2026-02-16 04:17:44,539 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.539564Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,540 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:17:44.540096Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_attendances\")"}
2026-02-16 04:17:44,540 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.540179Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,540 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:17:44.540697Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_attendances\")"}
2026-02-16 04:17:44,540 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.540784Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,541 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.541469Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_attendances (\n\tworker_id VARCHAR(36) NOT NULL, \n\twork_date DATE NOT NULL, \n\tclock_in TIME, \n\tclock_out TIME, \n\thours_regular NUMERIC(4, 2), \n\thours_overtime NUMERIC(4, 2), \n\thours_total NUMERIC(4, 2), \n\tis_present BOOLEAN NOT NULL, \n\tabsence_reason VARCHAR(100), \n\tis_approved BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,541 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.541554Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,542 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
{"timestamp": "2026-02-16T09:17:44.542236Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)"}
2026-02-16 04:17:44,542 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.542320Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,542 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
{"timestamp": "2026-02-16T09:17:44.542900Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)"}
2026-02-16 04:17:44,542 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.542981Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,543 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_outputs")
{"timestamp": "2026-02-16T09:17:44.543501Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_outputs\")"}
2026-02-16 04:17:44,543 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.543592Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,544 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_outputs")
{"timestamp": "2026-02-16T09:17:44.544157Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_outputs\")"}
2026-02-16 04:17:44,544 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.544234Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,544 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.544880Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_outputs (\n\tworker_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\tpieces_completed INTEGER NOT NULL, \n\tsam_earned NUMERIC(10, 2), \n\tminutes_worked NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\trecorded_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,544 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.544968Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,545 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
{"timestamp": "2026-02-16T09:17:44.545510Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)"}
2026-02-16 04:17:44,545 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.545590Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,546 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
{"timestamp": "2026-02-16T09:17:44.546155Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)"}
2026-02-16 04:17:44,546 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.546235Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,546 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:17:44.546797Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"fabric_lots\")"}
2026-02-16 04:17:44,546 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.546876Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,547 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:17:44.547452Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"fabric_lots\")"}
2026-02-16 04:17:44,547 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.547553Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,548 INFO sqlalchemy.engine.Engine 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.548312Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE fabric_lots (\n\tfactory_id CHAR(36) NOT NULL, \n\tlot_number VARCHAR(100) NOT NULL, \n\tfabric_type VARCHAR(100), \n\tcomposition VARCHAR(255), \n\twidth_cm INTEGER, \n\tgsm INTEGER, \n\tcolor VARCHAR(100), \n\tsupplier VARCHAR(255), \n\torigin_country VARCHAR(100), \n\tmill_name VARCHAR(255), \n\treceived_date DATE, \n\tinitial_meters NUMERIC(12, 2), \n\tavailable_meters NUMERIC(12, 2), \n\treserved_meters NUMERIC(12, 2), \n\tunit_cost NUMERIC(10, 4), \n\tcurrency VARCHAR(3), \n\tcertifications TEXT, \n\tinspection_status VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,548 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.548403Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,548 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
{"timestamp": "2026-02-16T09:17:44.549027Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)"}
2026-02-16 04:17:44,549 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.549116Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,549 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
{"timestamp": "2026-02-16T09:17:44.549640Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)"}
2026-02-16 04:17:44,549 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.549720Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,550 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
{"timestamp": "2026-02-16T09:17:44.550264Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)"}
2026-02-16 04:17:44,550 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.550346Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,550 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
{"timestamp": "2026-02-16T09:17:44.550913Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)"}
2026-02-16 04:17:44,551 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:44.551044Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:44,551 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:17:44.551664Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cut_tickets\")"}
2026-02-16 04:17:44,551 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.551749Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,552 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:17:44.552351Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cut_tickets\")"}
2026-02-16 04:17:44,552 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.552431Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,553 INFO sqlalchemy.engine.Engine 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.553125Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cut_tickets (\n\tfabric_lot_id CHAR(36) NOT NULL, \n\torder_id CHAR(36) NOT NULL, \n\tticket_number VARCHAR(100) NOT NULL, \n\tcut_date DATE, \n\tplies INTEGER, \n\tmarker_length_cm INTEGER, \n\tconsumption_meters NUMERIC(10, 2), \n\twastage_pct NUMERIC(5, 2), \n\tsize_ratio TEXT, \n\tbundle_count INTEGER, \n\ttotal_pieces INTEGER, \n\tcutter_id CHAR(36), \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,553 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.553210Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,553 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
{"timestamp": "2026-02-16T09:17:44.553745Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)"}
2026-02-16 04:17:44,553 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.553826Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,554 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
{"timestamp": "2026-02-16T09:17:44.554344Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)"}
2026-02-16 04:17:44,554 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.554432Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,554 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
{"timestamp": "2026-02-16T09:17:44.554934Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)"}
2026-02-16 04:17:44,554 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.555015Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,555 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("packing_lists")
{"timestamp": "2026-02-16T09:17:44.555526Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"packing_lists\")"}
2026-02-16 04:17:44,555 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.555610Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,556 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("packing_lists")
{"timestamp": "2026-02-16T09:17:44.556135Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"packing_lists\")"}
2026-02-16 04:17:44,556 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.556267Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,556 INFO sqlalchemy.engine.Engine 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.556978Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE packing_lists (\n\torder_id CHAR(36) NOT NULL, \n\tpacking_list_number VARCHAR(100) NOT NULL, \n\tship_date DATE, \n\tdestination VARCHAR(255), \n\tship_to_address TEXT, \n\tcarrier VARCHAR(100), \n\ttracking_number VARCHAR(255), \n\tcontainer_number VARCHAR(100), \n\ttotal_cartons INTEGER, \n\ttotal_units INTEGER, \n\ttotal_net_weight_kg NUMERIC(10, 2), \n\ttotal_gross_weight_kg NUMERIC(10, 2), \n\ttotal_cbm NUMERIC(8, 3), \n\tstatus VARCHAR(10) NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,557 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.557066Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,557 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
{"timestamp": "2026-02-16T09:17:44.557684Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)"}
2026-02-16 04:17:44,557 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.557765Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,558 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
{"timestamp": "2026-02-16T09:17:44.558284Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)"}
2026-02-16 04:17:44,558 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.558362Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,558 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cartons")
{"timestamp": "2026-02-16T09:17:44.558918Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cartons\")"}
2026-02-16 04:17:44,558 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.559002Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,559 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cartons")
{"timestamp": "2026-02-16T09:17:44.559487Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cartons\")"}
2026-02-16 04:17:44,559 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.559581Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,560 INFO sqlalchemy.engine.Engine 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:44.560281Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cartons (\n\tpacking_list_id CHAR(36) NOT NULL, \n\tcarton_number VARCHAR(50) NOT NULL, \n\tsize_breakdown TEXT, \n\tcolor VARCHAR(100), \n\ttotal_units INTEGER, \n\tnet_weight_kg NUMERIC(8, 2), \n\tgross_weight_kg NUMERIC(8, 2), \n\tdimensions_cm TEXT, \n\tlength_cm INTEGER, \n\twidth_cm INTEGER, \n\theight_cm INTEGER, \n\tbarcode VARCHAR(100), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:44,560 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:44.560368Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:44,560 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
{"timestamp": "2026-02-16T09:17:44.560946Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)"}
2026-02-16 04:17:44,561 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.561032Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,561 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("traceability_records")
{"timestamp": "2026-02-16T09:17:44.561583Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"traceability_records\")"}
2026-02-16 04:17:44,561 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.561661Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,562 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("traceability_records")
{"timestamp": "2026-02-16T09:17:44.562579Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"traceability_records\")"}
2026-02-16 04:17:44,562 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:44.562661Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:44,563 INFO sqlalchemy.engine.Engine 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:44.563337Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE traceability_records (\n\tcarton_id CHAR(36), \n\tfabric_lot_id CHAR(36), \n\tcut_ticket_id CHAR(36), \n\tproduction_run_id CHAR(36), \n\tcompliance_standard VARCHAR(8) NOT NULL, \n\tchain_of_custody TEXT, \n\tsupporting_documents TEXT, \n\tverification_status VARCHAR(8) NOT NULL, \n\tverified_by_id CHAR(36), \n\tverified_at DATETIME, \n\trisk_score VARCHAR(20), \n\trisk_notes TEXT, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, \n\tFOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, \n\tFOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:44,563 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.563421Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,563 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
{"timestamp": "2026-02-16T09:17:44.563989Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)"}
2026-02-16 04:17:44,564 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:44.564077Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:44,564 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
{"timestamp": "2026-02-16T09:17:44.564547Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)"}
2026-02-16 04:17:44,564 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:44.564622Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:44,565 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
{"timestamp": "2026-02-16T09:17:44.565065Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)"}
2026-02-16 04:17:44,565 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:44.565132Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:44,565 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:17:44.565605Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 04:17:44,565 INFO sqlalchemy.engine.Engine [cached since 47.45s ago] ()
{"timestamp": "2026-02-16T09:17:44.565681Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.45s ago] ()"}
2026-02-16 04:17:44,566 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:44.566068Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:44,566 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:44.567018Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:44,567 INFO sqlalchemy.engine.Engine INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:44.567243Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:44,567 INFO sqlalchemy.engine.Engine [cached since 47.28s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '980cebab-315d-41f9-b963-9f81b2994a9b', '2026-02-16 09:17:44.567168', '2026-02-16 09:17:44.567171', 0, None)
{"timestamp": "2026-02-16T09:17:44.567328Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.28s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '980cebab-315d-41f9-b963-9f81b2994a9b', '2026-02-16 09:17:44.567168', '2026-02-16 09:17:44.567171', 0, None)"}
2026-02-16 04:17:44,567 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:44.567848Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:44,568 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:44.568416Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:44,568 INFO sqlalchemy.engine.Engine SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
{"timestamp": "2026-02-16T09:17:44.568620Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at \nFROM organizations \nWHERE organizations.id = ?"}
2026-02-16 04:17:44,568 INFO sqlalchemy.engine.Engine [cached since 47.28s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b',)
{"timestamp": "2026-02-16T09:17:44.568695Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.28s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b',)"}
2026-02-16 04:17:44,570 INFO sqlalchemy.engine.Engine SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
{"timestamp": "2026-02-16T09:17:44.570083Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at \nFROM users \nWHERE ? = users.organization_id"}
2026-02-16 04:17:44,570 INFO sqlalchemy.engine.Engine [cached since 47.28s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b',)
{"timestamp": "2026-02-16T09:17:44.570184Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.28s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b',)"}
2026-02-16 04:17:44,570 INFO sqlalchemy.engine.Engine SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
{"timestamp": "2026-02-16T09:17:44.570971Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at \nFROM factories \nWHERE ? = factories.organization_id"}
2026-02-16 04:17:44,571 INFO sqlalchemy.engine.Engine [cached since 47.28s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b',)
{"timestamp": "2026-02-16T09:17:44.571062Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.28s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b',)"}
2026-02-16 04:17:44,785 INFO sqlalchemy.engine.Engine INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:44.785236Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:44,785 INFO sqlalchemy.engine.Engine [cached since 47.26s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b', 'test@example.com', '$2b$12$RGLRC91EukpAIbPPqPehL.auibtYRIKqpNhvcG.TEDSjxlMkK/1vW', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, 'ea775dcf-585b-4b09-b2b1-1047cf6e265f', '2026-02-16 09:17:44.785087', '2026-02-16 09:17:44.785090', 0, None)
{"timestamp": "2026-02-16T09:17:44.785356Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.26s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b', 'test@example.com', '$2b$12$RGLRC91EukpAIbPPqPehL.auibtYRIKqpNhvcG.TEDSjxlMkK/1vW', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, 'ea775dcf-585b-4b09-b2b1-1047cf6e265f', '2026-02-16 09:17:44.785087', '2026-02-16 09:17:44.785090', 0, None)"}
2026-02-16 04:17:44,785 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:44.786054Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:44,786 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:44.786654Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:44,786 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
{"timestamp": "2026-02-16T09:17:44.786866Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ?"}
2026-02-16 04:17:44,786 INFO sqlalchemy.engine.Engine [cached since 47.26s ago] ('ea775dcf-585b-4b09-b2b1-1047cf6e265f',)
{"timestamp": "2026-02-16T09:17:44.786997Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.26s ago] ('ea775dcf-585b-4b09-b2b1-1047cf6e265f',)"}
2026-02-16 04:17:44,787 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
{"timestamp": "2026-02-16T09:17:44.787837Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.user_id"}
2026-02-16 04:17:44,787 INFO sqlalchemy.engine.Engine [cached since 47.26s ago] ('ea775dcf-585b-4b09-b2b1-1047cf6e265f',)
{"timestamp": "2026-02-16T09:17:44.787926Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.26s ago] ('ea775dcf-585b-4b09-b2b1-1047cf6e265f',)"}
2026-02-16 04:17:44,788 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
{"timestamp": "2026-02-16T09:17:44.788692Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE ? = user_scopes.user_id"}
2026-02-16 04:17:44,788 INFO sqlalchemy.engine.Engine [cached since 47.25s ago] ('ea775dcf-585b-4b09-b2b1-1047cf6e265f',)
{"timestamp": "2026-02-16T09:17:44.788779Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.25s ago] ('ea775dcf-585b-4b09-b2b1-1047cf6e265f',)"}
----------------------------- Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.41s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_style_id ON production_events (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_order_id ON production_events (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_factories_organization_id ON factories (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_factory_id ON styles (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_buyer ON styles (buyer)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_style_number ON styles (style_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_po_number ON orders (po_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_status ON orders (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_style_id ON orders (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_defect_type ON defects (defect_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_worker_id ON defects (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_users_organization_id ON users (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_factory_id ON workers (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_employee_id ON workers (employee_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.45s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.28s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '980cebab-315d-41f9-b963-9f81b2994a9b', '2026-02-16 09:17:44.567168', '2026-02-16 09:17:44.567171', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.28s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.28s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.28s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.26s ago] ('980cebab-315d-41f9-b963-9f81b2994a9b', 'test@example.com', '$2b$12$RGLRC91EukpAIbPPqPehL.auibtYRIKqpNhvcG.TEDSjxlMkK/1vW', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, 'ea775dcf-585b-4b09-b2b1-1047cf6e265f', '2026-02-16 09:17:44.785087', '2026-02-16 09:17:44.785090', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.26s ago] ('ea775dcf-585b-4b09-b2b1-1047cf6e265f',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.26s ago] ('ea775dcf-585b-4b09-b2b1-1047cf6e265f',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.25s ago] ('ea775dcf-585b-4b09-b2b1-1047cf6e265f',)
---------------------------- Captured stdout call -----------------------------
2026-02-16 04:17:44,790 INFO sqlalchemy.engine.Engine INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:44.790991Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:44,791 INFO sqlalchemy.engine.Engine [generated in 0.00032s] ('980cebab-315d-41f9-b963-9f81b2994a9b', 'Hourly Factory', 'HF-01', None, None, None, 'UTC', None, None, None, None, 'en-US', 1, '54cd764d-c7a9-4e08-9004-bc12d7783139', '2026-02-16 09:17:44.790791', '2026-02-16 09:17:44.790792')
{"timestamp": "2026-02-16T09:17:44.791102Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00032s] ('980cebab-315d-41f9-b963-9f81b2994a9b', 'Hourly Factory', 'HF-01', None, None, None, 'UTC', None, None, None, None, 'en-US', 1, '54cd764d-c7a9-4e08-9004-bc12d7783139', '2026-02-16 09:17:44.790791', '2026-02-16 09:17:44.790792')"}
2026-02-16 04:17:44,792 INFO sqlalchemy.engine.Engine ROLLBACK
{"timestamp": "2026-02-16T09:17:44.792310Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK"}
------------------------------ Captured log call ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00032s] ('980cebab-315d-41f9-b963-9f81b2994a9b', 'Hourly Factory', 'HF-01', None, None, None, 'UTC', None, None, None, None, 'en-US', 1, '54cd764d-c7a9-4e08-9004-bc12d7783139', '2026-02-16 09:17:44.790791', '2026-02-16 09:17:44.790792')
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
-------------------------- Captured stdout teardown ---------------------------
2026-02-16 04:17:45,339 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:45.339866Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:45,340 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:17:45.340083Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 04:17:45,340 INFO sqlalchemy.engine.Engine [cached since 48.3s ago] ()
{"timestamp": "2026-02-16T09:17:45.340162Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.3s ago] ()"}
2026-02-16 04:17:45,340 INFO sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table'
{"timestamp": "2026-02-16T09:17:45.340708Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT name FROM sqlite_master WHERE type='table'"}
2026-02-16 04:17:45,340 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.340792Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,341 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "ai_decisions"
{"timestamp": "2026-02-16T09:17:45.341506Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"ai_decisions\""}
2026-02-16 04:17:45,341 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.341605Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,342 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "alias_mappings"
{"timestamp": "2026-02-16T09:17:45.342206Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"alias_mappings\""}
2026-02-16 04:17:45,342 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.342304Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,342 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "efficiency_metrics"
{"timestamp": "2026-02-16T09:17:45.342845Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"efficiency_metrics\""}
2026-02-16 04:17:45,342 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.342917Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,343 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dhu_reports"
{"timestamp": "2026-02-16T09:17:45.343466Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dhu_reports\""}
2026-02-16 04:17:45,343 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.343549Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,344 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dashboards"
{"timestamp": "2026-02-16T09:17:45.344098Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dashboards\""}
2026-02-16 04:17:45,344 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.344183Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,344 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_quality_issues"
{"timestamp": "2026-02-16T09:17:45.344712Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_quality_issues\""}
2026-02-16 04:17:45,344 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.344785Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,345 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_sources"
{"timestamp": "2026-02-16T09:17:45.345299Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_sources\""}
2026-02-16 04:17:45,345 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.345390Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,345 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "schema_mappings"
{"timestamp": "2026-02-16T09:17:45.345924Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"schema_mappings\""}
2026-02-16 04:17:45,345 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.346027Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,346 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_events"
{"timestamp": "2026-02-16T09:17:45.346532Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_events\""}
2026-02-16 04:17:45,346 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.346613Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,347 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "factories"
{"timestamp": "2026-02-16T09:17:45.347467Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"factories\""}
2026-02-16 04:17:45,347 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.347552Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,348 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "styles"
{"timestamp": "2026-02-16T09:17:45.348122Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"styles\""}
2026-02-16 04:17:45,348 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.348204Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,348 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "orders"
{"timestamp": "2026-02-16T09:17:45.348794Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"orders\""}
2026-02-16 04:17:45,348 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.348882Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,349 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_runs"
{"timestamp": "2026-02-16T09:17:45.349532Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_runs\""}
2026-02-16 04:17:45,349 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.349641Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,350 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "quality_inspections"
{"timestamp": "2026-02-16T09:17:45.350317Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"quality_inspections\""}
2026-02-16 04:17:45,350 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.350425Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,350 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "defects"
{"timestamp": "2026-02-16T09:17:45.350945Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"defects\""}
2026-02-16 04:17:45,350 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.351013Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,351 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "raw_imports"
{"timestamp": "2026-02-16T09:17:45.351604Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"raw_imports\""}
2026-02-16 04:17:45,351 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.351688Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,352 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "staging_records"
{"timestamp": "2026-02-16T09:17:45.352208Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"staging_records\""}
2026-02-16 04:17:45,352 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.352282Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,353 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "organizations"
{"timestamp": "2026-02-16T09:17:45.353138Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"organizations\""}
2026-02-16 04:17:45,353 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.353214Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,353 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "users"
{"timestamp": "2026-02-16T09:17:45.353720Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"users\""}
2026-02-16 04:17:45,353 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.353797Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,354 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "user_scopes"
{"timestamp": "2026-02-16T09:17:45.354288Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"user_scopes\""}
2026-02-16 04:17:45,354 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.354360Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,354 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "waitlist"
{"timestamp": "2026-02-16T09:17:45.354834Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"waitlist\""}
2026-02-16 04:17:45,354 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.354903Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,355 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "workers"
{"timestamp": "2026-02-16T09:17:45.355369Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"workers\""}
2026-02-16 04:17:45,355 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.355455Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,355 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_skills"
{"timestamp": "2026-02-16T09:17:45.356005Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_skills\""}
2026-02-16 04:17:45,356 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.356255Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,356 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_attendances"
{"timestamp": "2026-02-16T09:17:45.356909Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_attendances\""}
2026-02-16 04:17:45,356 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.356990Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,357 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_outputs"
{"timestamp": "2026-02-16T09:17:45.357532Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_outputs\""}
2026-02-16 04:17:45,357 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.357603Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,358 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "fabric_lots"
{"timestamp": "2026-02-16T09:17:45.358164Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"fabric_lots\""}
2026-02-16 04:17:45,358 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.358247Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,358 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cut_tickets"
{"timestamp": "2026-02-16T09:17:45.358783Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cut_tickets\""}
2026-02-16 04:17:45,358 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.358864Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,359 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "packing_lists"
{"timestamp": "2026-02-16T09:17:45.359344Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"packing_lists\""}
2026-02-16 04:17:45,359 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.359412Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,359 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cartons"
{"timestamp": "2026-02-16T09:17:45.359918Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cartons\""}
2026-02-16 04:17:45,359 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.360008Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,360 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "traceability_records"
{"timestamp": "2026-02-16T09:17:45.360503Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"traceability_records\""}
2026-02-16 04:17:45,360 INFO sqlalchemy.engine.Engine [cached since 46.55s ago] ()
{"timestamp": "2026-02-16T09:17:45.360583Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 46.55s ago] ()"}
2026-02-16 04:17:45,361 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:17:45.361060Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 04:17:45,361 INFO sqlalchemy.engine.Engine [cached since 48.24s ago] ()
{"timestamp": "2026-02-16T09:17:45.361129Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.24s ago] ()"}
2026-02-16 04:17:45,361 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:45.361569Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
---------------------------- Captured log teardown ----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.3s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT name FROM sqlite_master WHERE type='table'
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "ai_decisions"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "alias_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "efficiency_metrics"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dhu_reports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dashboards"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_quality_issues"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_sources"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "schema_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_events"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "factories"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "styles"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "orders"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_runs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "quality_inspections"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "defects"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "raw_imports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "staging_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "organizations"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "users"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "user_scopes"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "waitlist"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "workers"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_skills"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_attendances"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_outputs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "fabric_lots"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cut_tickets"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "packing_lists"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cartons"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "traceability_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 46.55s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.24s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
__________________________ test_get_sam_performance ___________________________
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\default.py:952: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:340: in _handle_exception
    raise error
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\core.py:160: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\core.py:63: in _connection_worker_thread
    result = function()
             ^^^^^^^^^^
E   sqlite3.IntegrityError: NOT NULL constraint failed: factories.country

The above exception was the direct cause of the following exception:
backend\tests\test_api\test_individual_widgets.py:238: in test_get_sam_performance
    await db_session.flush()
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\ext\asyncio\session.py:787: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\sql\elements.py:527: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:2363: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\engine\default.py:952: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:180: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:340: in _handle_exception
    raise error
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:162: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\cursor.py:40: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\cursor.py:32: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\core.py:160: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\aiosqlite\core.py:63: in _connection_worker_thread
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: factories.country
E   [SQL: INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79', 'SAM Factory', 'SF-01', None, None, None, 'UTC', None, None, None, None, 'en-US', 1, '4ee35fa7-4a20-4d7e-a1a5-eb9514141a82', '2026-02-16 09:17:45.705244', '2026-02-16 09:17:45.705247')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
---------------------------- Captured stdout setup ----------------------------
2026-02-16 04:17:45,365 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:45.365126Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:45,365 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:17:45.365313Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 04:17:45,365 INFO sqlalchemy.engine.Engine [cached since 48.32s ago] ()
{"timestamp": "2026-02-16T09:17:45.365390Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.32s ago] ()"}
2026-02-16 04:17:45,365 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:17:45.365941Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"ai_decisions\")"}
2026-02-16 04:17:45,365 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.366011Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,366 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:17:45.366558Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"ai_decisions\")"}
2026-02-16 04:17:45,366 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.366624Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,367 INFO sqlalchemy.engine.Engine 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


{"timestamp": "2026-02-16T09:17:45.367440Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE ai_decisions (\n\tdata_source_id VARCHAR(36), \n\tagent_type VARCHAR(16) NOT NULL, \n\tmodel_used VARCHAR(50) NOT NULL, \n\tinput_summary TEXT NOT NULL, \n\toutput_summary TEXT NOT NULL, \n\tconfidence FLOAT, \n\treasoning JSON, \n\tperformance_metadata JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id)\n)\n\n"}
2026-02-16 04:17:45,367 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:45.367533Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:45,368 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
{"timestamp": "2026-02-16T09:17:45.368138Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)"}
2026-02-16 04:17:45,368 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.368219Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,368 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
{"timestamp": "2026-02-16T09:17:45.368750Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)"}
2026-02-16 04:17:45,368 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.368823Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,369 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:17:45.369310Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"alias_mappings\")"}
2026-02-16 04:17:45,369 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.369395Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,369 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:17:45.369951Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"alias_mappings\")"}
2026-02-16 04:17:45,370 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.370031Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,370 INFO sqlalchemy.engine.Engine 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.370819Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE alias_mappings (\n\tscope VARCHAR(50) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tsource_alias VARCHAR(255) NOT NULL, \n\tsource_alias_normalized VARCHAR(255) NOT NULL, \n\tcanonical_field VARCHAR(100) NOT NULL, \n\tusage_count INTEGER NOT NULL, \n\tlast_used_at DATETIME NOT NULL, \n\tcreated_by_id CHAR(36), \n\tcorrection_count INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,370 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.370923Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,371 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
{"timestamp": "2026-02-16T09:17:45.371575Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)"}
2026-02-16 04:17:45,371 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.371651Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,372 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
{"timestamp": "2026-02-16T09:17:45.372167Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)"}
2026-02-16 04:17:45,372 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:45.372235Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:45,372 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
{"timestamp": "2026-02-16T09:17:45.372767Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)"}
2026-02-16 04:17:45,372 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.372863Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,373 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
{"timestamp": "2026-02-16T09:17:45.373432Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)"}
2026-02-16 04:17:45,373 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.373515Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,373 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
{"timestamp": "2026-02-16T09:17:45.374015Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)"}
2026-02-16 04:17:45,374 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.374101Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,374 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
{"timestamp": "2026-02-16T09:17:45.374631Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)"}
2026-02-16 04:17:45,374 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.374713Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,375 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:17:45.375232Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"efficiency_metrics\")"}
2026-02-16 04:17:45,375 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.375307Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,375 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:17:45.375791Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"efficiency_metrics\")"}
2026-02-16 04:17:45,375 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.375872Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,376 INFO sqlalchemy.engine.Engine 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.376557Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE efficiency_metrics (\n\tproduction_run_id CHAR(36) NOT NULL, \n\tefficiency_pct NUMERIC(6, 2), \n\tsam_target NUMERIC(10, 2), \n\tsam_actual NUMERIC(10, 2), \n\tsam_variance NUMERIC(8, 2), \n\tsam_variance_pct NUMERIC(6, 2), \n\tcapacity_utilization_pct NUMERIC(6, 2), \n\tperformance_tier VARCHAR(12), \n\tfactory_avg_efficiency NUMERIC(6, 2), \n\tline_avg_efficiency NUMERIC(6, 2), \n\tcalculated_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,376 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.376664Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,377 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
{"timestamp": "2026-02-16T09:17:45.377215Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)"}
2026-02-16 04:17:45,377 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.377308Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,377 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:17:45.377967Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dhu_reports\")"}
2026-02-16 04:17:45,378 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.378054Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,378 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:17:45.378559Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dhu_reports\")"}
2026-02-16 04:17:45,378 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.378631Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,379 INFO sqlalchemy.engine.Engine 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.379370Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dhu_reports (\n\tfactory_id CHAR(36) NOT NULL, \n\treport_date DATE NOT NULL, \n\tperiod_type VARCHAR(7) NOT NULL, \n\tavg_dhu NUMERIC(6, 2), \n\tmin_dhu NUMERIC(6, 2), \n\tmax_dhu NUMERIC(6, 2), \n\ttotal_inspected INTEGER, \n\ttotal_defects INTEGER, \n\ttotal_rejected INTEGER, \n\ttop_defects TEXT, \n\ttop_operations TEXT, \n\ttop_lines TEXT, \n\tdhu_change_pct NUMERIC(6, 2), \n\ttrend_direction VARCHAR(20), \n\trecommendations TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,379 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:45.379469Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:45,380 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
{"timestamp": "2026-02-16T09:17:45.380049Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)"}
2026-02-16 04:17:45,380 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.380126Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,380 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
{"timestamp": "2026-02-16T09:17:45.380624Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)"}
2026-02-16 04:17:45,380 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.380693Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,381 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dashboards")
{"timestamp": "2026-02-16T09:17:45.381209Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dashboards\")"}
2026-02-16 04:17:45,381 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.381287Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,381 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dashboards")
{"timestamp": "2026-02-16T09:17:45.381841Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dashboards\")"}
2026-02-16 04:17:45,381 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.381922Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,382 INFO sqlalchemy.engine.Engine 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.382541Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dashboards (\n\tuser_id CHAR(36) NOT NULL, \n\tname VARCHAR(200) NOT NULL, \n\tdescription TEXT, \n\tdata_source_id CHAR(36), \n\twidget_config TEXT, \n\tlayout_config TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tCONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,382 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.382623Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,383 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
{"timestamp": "2026-02-16T09:17:45.383129Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)"}
2026-02-16 04:17:45,383 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.383202Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,383 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
{"timestamp": "2026-02-16T09:17:45.383657Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)"}
2026-02-16 04:17:45,383 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.383733Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,384 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:17:45.384232Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_quality_issues\")"}
2026-02-16 04:17:45,384 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.384306Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,384 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:17:45.384814Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_quality_issues\")"}
2026-02-16 04:17:45,384 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.384893Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,385 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.385585Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_quality_issues (\n\traw_import_id VARCHAR(36) NOT NULL, \n\trow_number INTEGER, \n\tissue_type VARCHAR(50) NOT NULL, \n\tseverity VARCHAR(20) NOT NULL, \n\tmessage TEXT NOT NULL, \n\tfield_name VARCHAR(100), \n\tfield_value VARCHAR(500), \n\tresolved_at DATETIME, \n\tresolved_by_user_id VARCHAR(36), \n\tresolution_notes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, \n\tFOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,385 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:45.385677Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:45,386 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
{"timestamp": "2026-02-16T09:17:45.386238Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)"}
2026-02-16 04:17:45,386 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:45.386307Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:45,386 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
{"timestamp": "2026-02-16T09:17:45.386870Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)"}
2026-02-16 04:17:45,386 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:45.386942Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:45,387 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
{"timestamp": "2026-02-16T09:17:45.387412Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)"}
2026-02-16 04:17:45,387 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.387494Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,387 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_sources")
{"timestamp": "2026-02-16T09:17:45.387988Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_sources\")"}
2026-02-16 04:17:45,388 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.388081Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,388 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_sources")
{"timestamp": "2026-02-16T09:17:45.388527Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_sources\")"}
2026-02-16 04:17:45,388 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.388593Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,389 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.389469Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_sources (\n\tfactory_id CHAR(36), \n\tname VARCHAR(100) NOT NULL, \n\tcode VARCHAR(50), \n\ttarget_operators INTEGER, \n\ttarget_efficiency_pct INTEGER, \n\tsettings JSON, \n\tspecialty VARCHAR(100), \n\tsupervisor_id CHAR(36), \n\tproduction_line_id CHAR(36), \n\tsource_name VARCHAR(255), \n\tdescription TEXT, \n\ttime_column VARCHAR(100), \n\ttime_format VARCHAR(50), \n\tschema_config JSON, \n\tparent_data_source_id CHAR(36), \n\tis_segment BOOLEAN NOT NULL, \n\tdate_range_start DATE, \n\tdate_range_end DATE, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, \n\tFOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,389 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:45.389566Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:45,390 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
{"timestamp": "2026-02-16T09:17:45.390200Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)"}
2026-02-16 04:17:45,390 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.390284Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,390 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
{"timestamp": "2026-02-16T09:17:45.390806Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)"}
2026-02-16 04:17:45,390 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.390891Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,391 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:17:45.391416Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"schema_mappings\")"}
2026-02-16 04:17:45,391 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.391496Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,391 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:17:45.392033Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"schema_mappings\")"}
2026-02-16 04:17:45,392 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.392187Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,392 INFO sqlalchemy.engine.Engine 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.392864Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE schema_mappings (\n\tdata_source_id CHAR(36) NOT NULL, \n\tversion INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tcolumn_map JSON NOT NULL, \n\textraction_rules JSON, \n\treviewed_by_user BOOLEAN NOT NULL, \n\tuser_notes TEXT, \n\tmatching_tier VARCHAR(20), \n\ttier_confidence FLOAT, \n\ttier_breakdown JSON, \n\tfuzzy_scores JSON, \n\tuser_corrected BOOLEAN NOT NULL, \n\tcorrection_count INTEGER, \n\tcorrection_history JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,392 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.392942Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,393 INFO sqlalchemy.engine.Engine CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
{"timestamp": "2026-02-16T09:17:45.393456Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)"}
2026-02-16 04:17:45,393 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.393533Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,393 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_events")
{"timestamp": "2026-02-16T09:17:45.394008Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_events\")"}
2026-02-16 04:17:45,394 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.394085Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,394 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_events")
{"timestamp": "2026-02-16T09:17:45.394552Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_events\")"}
2026-02-16 04:17:45,394 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.394634Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,395 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.395248Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_events (\n\ttimestamp DATETIME NOT NULL, \n\tevent_type VARCHAR(17) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tstyle_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36), \n\tsource_import_id VARCHAR(36), \n\traw_data JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,395 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.395327Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,395 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
{"timestamp": "2026-02-16T09:17:45.395943Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)"}
2026-02-16 04:17:45,395 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.396025Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,396 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
{"timestamp": "2026-02-16T09:17:45.396484Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)"}
2026-02-16 04:17:45,396 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.396572Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,396 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
{"timestamp": "2026-02-16T09:17:45.396996Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)"}
2026-02-16 04:17:45,397 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.397074Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,397 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
{"timestamp": "2026-02-16T09:17:45.397630Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)"}
2026-02-16 04:17:45,397 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:45.397766Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:45,398 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_style_id ON production_events (style_id)
{"timestamp": "2026-02-16T09:17:45.398324Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_style_id ON production_events (style_id)"}
2026-02-16 04:17:45,398 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.398414Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,398 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_order_id ON production_events (order_id)
{"timestamp": "2026-02-16T09:17:45.398898Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_order_id ON production_events (order_id)"}
2026-02-16 04:17:45,398 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.398980Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,399 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("factories")
{"timestamp": "2026-02-16T09:17:45.399475Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"factories\")"}
2026-02-16 04:17:45,399 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.399546Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,399 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("factories")
{"timestamp": "2026-02-16T09:17:45.400001Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"factories\")"}
2026-02-16 04:17:45,400 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.400069Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,400 INFO sqlalchemy.engine.Engine 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:17:45.400702Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE factories (\n\torganization_id CHAR(36) NOT NULL, \n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50) NOT NULL, \n\tcountry VARCHAR(100) NOT NULL, \n\tcity VARCHAR(100), \n\taddress TEXT, \n\ttimezone VARCHAR(50) NOT NULL, \n\ttotal_lines INTEGER, \n\ttotal_workers INTEGER, \n\tdaily_capacity_units INTEGER, \n\tcertifications TEXT, \n\tsettings JSON, \n\tlocale VARCHAR(20) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 04:17:45,400 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.400780Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,401 INFO sqlalchemy.engine.Engine CREATE INDEX ix_factories_organization_id ON factories (organization_id)
{"timestamp": "2026-02-16T09:17:45.401340Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_factories_organization_id ON factories (organization_id)"}
2026-02-16 04:17:45,401 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.401423Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,401 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("styles")
{"timestamp": "2026-02-16T09:17:45.401950Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"styles\")"}
2026-02-16 04:17:45,402 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.402033Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,402 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("styles")
{"timestamp": "2026-02-16T09:17:45.402502Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"styles\")"}
2026-02-16 04:17:45,402 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.402573Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,403 INFO sqlalchemy.engine.Engine 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.403234Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE styles (\n\tfactory_id VARCHAR(36) NOT NULL, \n\tstyle_number VARCHAR(100) NOT NULL, \n\tstyle_name VARCHAR(255), \n\tdescription VARCHAR(500), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tcategory VARCHAR(100), \n\tbase_sam NUMERIC(12, 4), \n\tcomplexity_rating VARCHAR(20), \n\tbom_summary JSON, \n\ttech_pack_url VARCHAR(500), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,403 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.403314Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,403 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_factory_id ON styles (factory_id)
{"timestamp": "2026-02-16T09:17:45.403938Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_factory_id ON styles (factory_id)"}
2026-02-16 04:17:45,403 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.404024Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,404 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_buyer ON styles (buyer)
{"timestamp": "2026-02-16T09:17:45.404648Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_buyer ON styles (buyer)"}
2026-02-16 04:17:45,404 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:45.404736Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:45,405 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_style_number ON styles (style_number)
{"timestamp": "2026-02-16T09:17:45.405302Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_style_number ON styles (style_number)"}
2026-02-16 04:17:45,405 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.405386Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,406 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("orders")
{"timestamp": "2026-02-16T09:17:45.406152Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"orders\")"}
2026-02-16 04:17:45,406 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.406335Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,406 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("orders")
{"timestamp": "2026-02-16T09:17:45.407029Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"orders\")"}
2026-02-16 04:17:45,407 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.407104Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,408 INFO sqlalchemy.engine.Engine 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.408205Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE orders (\n\tstyle_id VARCHAR(36) NOT NULL, \n\tpo_number VARCHAR(100) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tsize_breakdown JSON, \n\tuom VARCHAR(20) NOT NULL, \n\tcolor VARCHAR(100), \n\torder_date DATETIME, \n\tplanned_cut_date DATETIME, \n\tplanned_sew_date DATETIME, \n\tex_factory_date DATETIME, \n\tactual_ship_date DATETIME, \n\tstatus VARCHAR(20) NOT NULL, \n\tpriority VARCHAR(20) NOT NULL, \n\tqty_cut INTEGER NOT NULL, \n\tqty_sewn INTEGER NOT NULL, \n\tqty_packed INTEGER NOT NULL, \n\tqty_shipped INTEGER NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_style_po UNIQUE (style_id, po_number), \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,408 INFO sqlalchemy.engine.Engine [no key 0.00023s] ()
{"timestamp": "2026-02-16T09:17:45.408406Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00023s] ()"}
2026-02-16 04:17:45,409 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_po_number ON orders (po_number)
{"timestamp": "2026-02-16T09:17:45.409207Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_po_number ON orders (po_number)"}
2026-02-16 04:17:45,409 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.409294Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,409 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_status ON orders (status)
{"timestamp": "2026-02-16T09:17:45.409883Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_status ON orders (status)"}
2026-02-16 04:17:45,409 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.409963Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,410 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_style_id ON orders (style_id)
{"timestamp": "2026-02-16T09:17:45.410479Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_style_id ON orders (style_id)"}
2026-02-16 04:17:45,410 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.410551Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,410 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_runs")
{"timestamp": "2026-02-16T09:17:45.411038Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_runs\")"}
2026-02-16 04:17:45,411 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.411112Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,411 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_runs")
{"timestamp": "2026-02-16T09:17:45.411644Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_runs\")"}
2026-02-16 04:17:45,411 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.411709Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,412 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.412973Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_runs (\n\tfactory_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\tsource_import_id VARCHAR(36), \n\tproduction_date DATETIME, \n\tinspection_date DATETIME, \n\tshift VARCHAR(20) NOT NULL, \n\tplanned_qty INTEGER, \n\tactual_qty INTEGER NOT NULL, \n\twip_start INTEGER, \n\twip_end INTEGER, \n\tlot_number VARCHAR(50), \n\tshade_band VARCHAR(10), \n\tbatch_number VARCHAR(50), \n\tdowntime_minutes INTEGER, \n\tdowntime_reason VARCHAR(255), \n\tsam NUMERIC(12, 4), \n\toperators_present INTEGER NOT NULL, \n\thelpers_present INTEGER NOT NULL, \n\tworked_minutes NUMERIC(12, 4) NOT NULL, \n\tearned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), \n\tefficiency NUMERIC(10, 2) GENERATED ALWAYS AS (\n            CASE\n                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL\n                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100\n                ELSE 0\n            END\n            ), \n\tnotes TEXT, \n\tstart_time TIME, \n\tend_time TIME, \n\tstyle_number VARCHAR(100), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tpo_number VARCHAR(100), \n\tcolor VARCHAR(100), \n\tsize VARCHAR(50), \n\tdefects INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tline_efficiency NUMERIC(10, 2), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT check_positive_qty CHECK (actual_qty >= 0), \n\tCONSTRAINT check_positive_operators CHECK (operators_present >= 0), \n\tCONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), \n\tCONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), \n\tCONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), \n\tCONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), \n\tCONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,413 INFO sqlalchemy.engine.Engine [no key 0.00022s] ()
{"timestamp": "2026-02-16T09:17:45.413169Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00022s] ()"}
2026-02-16 04:17:45,413 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
{"timestamp": "2026-02-16T09:17:45.413968Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)"}
2026-02-16 04:17:45,414 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.414051Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,414 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
{"timestamp": "2026-02-16T09:17:45.414561Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)"}
2026-02-16 04:17:45,414 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.414644Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,415 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
{"timestamp": "2026-02-16T09:17:45.415251Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)"}
2026-02-16 04:17:45,415 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.415327Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,415 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
{"timestamp": "2026-02-16T09:17:45.415876Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)"}
2026-02-16 04:17:45,415 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:45.415959Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:45,416 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
{"timestamp": "2026-02-16T09:17:45.416497Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)"}
2026-02-16 04:17:45,416 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.416584Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,416 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
{"timestamp": "2026-02-16T09:17:45.417044Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)"}
2026-02-16 04:17:45,417 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.417119Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,417 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
{"timestamp": "2026-02-16T09:17:45.417573Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)"}
2026-02-16 04:17:45,417 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:45.417641Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:45,418 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
{"timestamp": "2026-02-16T09:17:45.418129Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)"}
2026-02-16 04:17:45,418 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.418211Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,418 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:17:45.418705Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"quality_inspections\")"}
2026-02-16 04:17:45,418 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.418776Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,419 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:17:45.419244Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"quality_inspections\")"}
2026-02-16 04:17:45,419 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.419324Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,419 INFO sqlalchemy.engine.Engine 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.420030Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE quality_inspections (\n\tproduction_run_id VARCHAR(36) NOT NULL, \n\tinspector_id VARCHAR(36), \n\tinspection_type VARCHAR(7) NOT NULL, \n\tunits_checked INTEGER NOT NULL, \n\tdefects_found INTEGER NOT NULL, \n\tunits_rejected INTEGER NOT NULL, \n\tunits_reworked INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\taql_level VARCHAR(20), \n\taql_result VARCHAR(7), \n\tinspected_at DATETIME NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,420 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.420111Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,420 INFO sqlalchemy.engine.Engine CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
{"timestamp": "2026-02-16T09:17:45.420648Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)"}
2026-02-16 04:17:45,420 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.420728Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,421 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("defects")
{"timestamp": "2026-02-16T09:17:45.421254Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"defects\")"}
2026-02-16 04:17:45,421 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.421321Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,421 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("defects")
{"timestamp": "2026-02-16T09:17:45.421788Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"defects\")"}
2026-02-16 04:17:45,421 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.421869Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,422 INFO sqlalchemy.engine.Engine 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.422889Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE defects (\n\tinspection_id VARCHAR(36) NOT NULL, \n\tworker_id VARCHAR(36), \n\tdefect_type VARCHAR(100) NOT NULL, \n\tdefect_code VARCHAR(20), \n\tdefect_category VARCHAR(100), \n\toperation VARCHAR(100), \n\tseverity VARCHAR(8) NOT NULL, \n\tis_reworkable BOOLEAN NOT NULL, \n\tis_reworked BOOLEAN NOT NULL, \n\troot_cause VARCHAR(255), \n\tmachine_id VARCHAR(50), \n\timage_url VARCHAR(500), \n\tcount INTEGER NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,423 INFO sqlalchemy.engine.Engine [no key 0.00033s] ()
{"timestamp": "2026-02-16T09:17:45.423110Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00033s] ()"}
2026-02-16 04:17:45,423 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_defect_type ON defects (defect_type)
{"timestamp": "2026-02-16T09:17:45.423845Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_defect_type ON defects (defect_type)"}
2026-02-16 04:17:45,423 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:45.423980Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:45,424 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_worker_id ON defects (worker_id)
{"timestamp": "2026-02-16T09:17:45.424570Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_worker_id ON defects (worker_id)"}
2026-02-16 04:17:45,424 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.424655Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,425 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
{"timestamp": "2026-02-16T09:17:45.425111Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)"}
2026-02-16 04:17:45,425 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.425194Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,425 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("raw_imports")
{"timestamp": "2026-02-16T09:17:45.425735Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"raw_imports\")"}
2026-02-16 04:17:45,425 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.425811Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,426 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("raw_imports")
{"timestamp": "2026-02-16T09:17:45.426393Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"raw_imports\")"}
2026-02-16 04:17:45,426 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.426471Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,427 INFO sqlalchemy.engine.Engine 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.427262Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE raw_imports (\n\tuploaded_by_id VARCHAR(36), \n\tfactory_id VARCHAR(36), \n\tproduction_line_id VARCHAR(36), \n\tdata_source_id VARCHAR(36), \n\ttime_column_used VARCHAR(100), \n\toriginal_filename VARCHAR(500) NOT NULL, \n\tfile_path VARCHAR(1000) NOT NULL, \n\tfile_size_bytes INTEGER NOT NULL, \n\tfile_hash VARCHAR(64) NOT NULL, \n\tmime_type VARCHAR(100), \n\tencoding_detected VARCHAR(50), \n\tsheet_count INTEGER NOT NULL, \n\tsheet_names TEXT, \n\trow_count INTEGER, \n\tcolumn_count INTEGER, \n\theader_row_detected INTEGER, \n\traw_headers TEXT, \n\tsample_data TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tprocessing_error TEXT, \n\tprocessed_at DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,427 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:45.427365Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:45,427 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
{"timestamp": "2026-02-16T09:17:45.427935Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)"}
2026-02-16 04:17:45,427 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.428033Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,428 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
{"timestamp": "2026-02-16T09:17:45.428516Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)"}
2026-02-16 04:17:45,428 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.428599Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,429 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
{"timestamp": "2026-02-16T09:17:45.429070Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)"}
2026-02-16 04:17:45,429 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.429156Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,429 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
{"timestamp": "2026-02-16T09:17:45.429633Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)"}
2026-02-16 04:17:45,429 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.429714Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,430 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("staging_records")
{"timestamp": "2026-02-16T09:17:45.430226Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"staging_records\")"}
2026-02-16 04:17:45,430 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.430308Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,430 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("staging_records")
{"timestamp": "2026-02-16T09:17:45.430901Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"staging_records\")"}
2026-02-16 04:17:45,430 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.430986Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,431 INFO sqlalchemy.engine.Engine 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.431684Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE staging_records (\n\traw_import_id VARCHAR(36) NOT NULL, \n\tsource_row_number INTEGER NOT NULL, \n\tstatus VARCHAR(50) NOT NULL, \n\tvalidation_errors TEXT, \n\tvalidation_warnings TEXT, \n\trecord_data TEXT NOT NULL, \n\tnormalized_data TEXT, \n\tquality_score FLOAT, \n\tnull_field_count INTEGER, \n\tpromoted_at DATETIME, \n\tpromoted_to_table VARCHAR(100), \n\tpromoted_record_id VARCHAR(36), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,431 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.431774Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,432 INFO sqlalchemy.engine.Engine CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
{"timestamp": "2026-02-16T09:17:45.432262Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)"}
2026-02-16 04:17:45,432 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.432335Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,432 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("organizations")
{"timestamp": "2026-02-16T09:17:45.432762Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"organizations\")"}
2026-02-16 04:17:45,432 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.432832Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,433 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("organizations")
{"timestamp": "2026-02-16T09:17:45.433263Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"organizations\")"}
2026-02-16 04:17:45,433 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.433326Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,433 INFO sqlalchemy.engine.Engine 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:17:45.433862Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE organizations (\n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50), \n\tsubscription_tier VARCHAR(10) NOT NULL, \n\tsettings TEXT, \n\tmax_factories INTEGER NOT NULL, \n\tmax_lines_per_factory INTEGER NOT NULL, \n\tprimary_email VARCHAR(255), \n\tprimary_phone VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 04:17:45,433 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:45.433934Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:45,434 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
{"timestamp": "2026-02-16T09:17:45.434352Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"users\")"}
2026-02-16 04:17:45,434 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.434422Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,434 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("users")
{"timestamp": "2026-02-16T09:17:45.434968Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"users\")"}
2026-02-16 04:17:45,435 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.435052Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,435 INFO sqlalchemy.engine.Engine 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


{"timestamp": "2026-02-16T09:17:45.435642Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE users (\n\torganization_id CHAR(36) NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\thashed_password VARCHAR(255) NOT NULL, \n\tfull_name VARCHAR(255), \n\tavatar_url VARCHAR(500), \n\ttimezone VARCHAR(50), \n\tpreferences TEXT, \n\trole VARCHAR(15) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tis_verified BOOLEAN NOT NULL, \n\tlast_login DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (email)\n)\n\n"}
2026-02-16 04:17:45,435 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.435724Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,436 INFO sqlalchemy.engine.Engine CREATE INDEX ix_users_organization_id ON users (organization_id)
{"timestamp": "2026-02-16T09:17:45.436187Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_users_organization_id ON users (organization_id)"}
2026-02-16 04:17:45,436 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:45.436255Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:45,436 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_scopes")
{"timestamp": "2026-02-16T09:17:45.436724Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"user_scopes\")"}
2026-02-16 04:17:45,436 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.436790Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,437 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("user_scopes")
{"timestamp": "2026-02-16T09:17:45.437267Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"user_scopes\")"}
2026-02-16 04:17:45,437 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.437334Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,438 INFO sqlalchemy.engine.Engine 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.438118Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE user_scopes (\n\tuser_id CHAR(36) NOT NULL, \n\tscope_type VARCHAR(12) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tdata_source_id CHAR(36), \n\trole VARCHAR(15) NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,438 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:45.438246Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:45,438 INFO sqlalchemy.engine.Engine CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
{"timestamp": "2026-02-16T09:17:45.438815Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)"}
2026-02-16 04:17:45,438 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.438899Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,439 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("waitlist")
{"timestamp": "2026-02-16T09:17:45.439531Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"waitlist\")"}
2026-02-16 04:17:45,439 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.439620Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,440 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("waitlist")
{"timestamp": "2026-02-16T09:17:45.440205Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"waitlist\")"}
2026-02-16 04:17:45,440 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.440286Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,440 INFO sqlalchemy.engine.Engine 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


{"timestamp": "2026-02-16T09:17:45.440879Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE waitlist (\n\tid INTEGER NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\treferral_code VARCHAR(8) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n"}
2026-02-16 04:17:45,440 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.440957Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,441 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
{"timestamp": "2026-02-16T09:17:45.441533Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)"}
2026-02-16 04:17:45,441 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.441614Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,442 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
{"timestamp": "2026-02-16T09:17:45.442175Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)"}
2026-02-16 04:17:45,442 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.442265Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,442 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("workers")
{"timestamp": "2026-02-16T09:17:45.442864Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"workers\")"}
2026-02-16 04:17:45,442 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.442942Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,443 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("workers")
{"timestamp": "2026-02-16T09:17:45.443400Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"workers\")"}
2026-02-16 04:17:45,443 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.443465Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,444 INFO sqlalchemy.engine.Engine 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.444079Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE workers (\n\tfactory_id VARCHAR(36) NOT NULL, \n\temployee_id VARCHAR(50) NOT NULL, \n\tfull_name VARCHAR(255) NOT NULL, \n\tdepartment VARCHAR(100), \n\tjob_title VARCHAR(100), \n\tprimary_skill VARCHAR(100), \n\tdata_source_id VARCHAR(36), \n\thire_date DATE, \n\ttermination_date DATE, \n\thourly_rate NUMERIC(10, 2), \n\tcurrency VARCHAR(3), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,444 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.444152Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,444 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_factory_id ON workers (factory_id)
{"timestamp": "2026-02-16T09:17:45.444694Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_factory_id ON workers (factory_id)"}
2026-02-16 04:17:45,444 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.444766Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,445 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_employee_id ON workers (employee_id)
{"timestamp": "2026-02-16T09:17:45.445228Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_employee_id ON workers (employee_id)"}
2026-02-16 04:17:45,445 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:45.445296Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:45,445 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_skills")
{"timestamp": "2026-02-16T09:17:45.445706Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_skills\")"}
2026-02-16 04:17:45,445 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.445771Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,446 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_skills")
{"timestamp": "2026-02-16T09:17:45.446340Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_skills\")"}
2026-02-16 04:17:45,446 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.446409Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,447 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.447104Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_skills (\n\tworker_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\toperation_category VARCHAR(100), \n\tproficiency_pct NUMERIC(5, 2), \n\tsam_achieved NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\tpieces_lifetime INTEGER, \n\tpieces_30d INTEGER, \n\tis_certified BOOLEAN NOT NULL, \n\tcertification_date DATE, \n\tlast_assessed DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,447 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.447192Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,447 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
{"timestamp": "2026-02-16T09:17:45.447887Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)"}
2026-02-16 04:17:45,447 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.447972Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,448 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
{"timestamp": "2026-02-16T09:17:45.448540Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)"}
2026-02-16 04:17:45,448 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.448646Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,449 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:17:45.449244Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_attendances\")"}
2026-02-16 04:17:45,449 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.449327Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,449 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:17:45.449872Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_attendances\")"}
2026-02-16 04:17:45,449 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.449963Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,450 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.450664Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_attendances (\n\tworker_id VARCHAR(36) NOT NULL, \n\twork_date DATE NOT NULL, \n\tclock_in TIME, \n\tclock_out TIME, \n\thours_regular NUMERIC(4, 2), \n\thours_overtime NUMERIC(4, 2), \n\thours_total NUMERIC(4, 2), \n\tis_present BOOLEAN NOT NULL, \n\tabsence_reason VARCHAR(100), \n\tis_approved BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,450 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:45.450756Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:45,451 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
{"timestamp": "2026-02-16T09:17:45.451377Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)"}
2026-02-16 04:17:45,451 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.451460Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,451 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
{"timestamp": "2026-02-16T09:17:45.451951Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)"}
2026-02-16 04:17:45,452 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.452047Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,452 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_outputs")
{"timestamp": "2026-02-16T09:17:45.452538Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_outputs\")"}
2026-02-16 04:17:45,452 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.452610Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,453 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_outputs")
{"timestamp": "2026-02-16T09:17:45.453092Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_outputs\")"}
2026-02-16 04:17:45,453 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.453160Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,453 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.453814Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_outputs (\n\tworker_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\tpieces_completed INTEGER NOT NULL, \n\tsam_earned NUMERIC(10, 2), \n\tminutes_worked NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\trecorded_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,453 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.453903Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,454 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
{"timestamp": "2026-02-16T09:17:45.454456Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)"}
2026-02-16 04:17:45,454 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.454527Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,454 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
{"timestamp": "2026-02-16T09:17:45.454964Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)"}
2026-02-16 04:17:45,455 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:17:45.455034Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:17:45,455 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:17:45.455547Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"fabric_lots\")"}
2026-02-16 04:17:45,455 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.455674Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,456 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:17:45.456298Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"fabric_lots\")"}
2026-02-16 04:17:45,456 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.456382Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,457 INFO sqlalchemy.engine.Engine 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.457184Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE fabric_lots (\n\tfactory_id CHAR(36) NOT NULL, \n\tlot_number VARCHAR(100) NOT NULL, \n\tfabric_type VARCHAR(100), \n\tcomposition VARCHAR(255), \n\twidth_cm INTEGER, \n\tgsm INTEGER, \n\tcolor VARCHAR(100), \n\tsupplier VARCHAR(255), \n\torigin_country VARCHAR(100), \n\tmill_name VARCHAR(255), \n\treceived_date DATE, \n\tinitial_meters NUMERIC(12, 2), \n\tavailable_meters NUMERIC(12, 2), \n\treserved_meters NUMERIC(12, 2), \n\tunit_cost NUMERIC(10, 4), \n\tcurrency VARCHAR(3), \n\tcertifications TEXT, \n\tinspection_status VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,457 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:45.457280Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:45,457 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
{"timestamp": "2026-02-16T09:17:45.457892Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)"}
2026-02-16 04:17:45,457 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.457982Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,458 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
{"timestamp": "2026-02-16T09:17:45.458483Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)"}
2026-02-16 04:17:45,458 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.458567Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,459 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
{"timestamp": "2026-02-16T09:17:45.459090Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)"}
2026-02-16 04:17:45,459 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.459171Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,459 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
{"timestamp": "2026-02-16T09:17:45.459644Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)"}
2026-02-16 04:17:45,459 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.459717Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,460 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:17:45.460242Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cut_tickets\")"}
2026-02-16 04:17:45,460 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.460320Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,460 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:17:45.460835Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cut_tickets\")"}
2026-02-16 04:17:45,460 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.460913Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,461 INFO sqlalchemy.engine.Engine 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.461539Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cut_tickets (\n\tfabric_lot_id CHAR(36) NOT NULL, \n\torder_id CHAR(36) NOT NULL, \n\tticket_number VARCHAR(100) NOT NULL, \n\tcut_date DATE, \n\tplies INTEGER, \n\tmarker_length_cm INTEGER, \n\tconsumption_meters NUMERIC(10, 2), \n\twastage_pct NUMERIC(5, 2), \n\tsize_ratio TEXT, \n\tbundle_count INTEGER, \n\ttotal_pieces INTEGER, \n\tcutter_id CHAR(36), \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,461 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.461620Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,462 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
{"timestamp": "2026-02-16T09:17:45.462199Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)"}
2026-02-16 04:17:45,462 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.462284Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,462 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
{"timestamp": "2026-02-16T09:17:45.462789Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)"}
2026-02-16 04:17:45,462 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.462861Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,463 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
{"timestamp": "2026-02-16T09:17:45.463315Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)"}
2026-02-16 04:17:45,463 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.463388Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,463 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("packing_lists")
{"timestamp": "2026-02-16T09:17:45.463820Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"packing_lists\")"}
2026-02-16 04:17:45,463 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.463884Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,464 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("packing_lists")
{"timestamp": "2026-02-16T09:17:45.464283Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"packing_lists\")"}
2026-02-16 04:17:45,464 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.464367Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,465 INFO sqlalchemy.engine.Engine 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.465104Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE packing_lists (\n\torder_id CHAR(36) NOT NULL, \n\tpacking_list_number VARCHAR(100) NOT NULL, \n\tship_date DATE, \n\tdestination VARCHAR(255), \n\tship_to_address TEXT, \n\tcarrier VARCHAR(100), \n\ttracking_number VARCHAR(255), \n\tcontainer_number VARCHAR(100), \n\ttotal_cartons INTEGER, \n\ttotal_units INTEGER, \n\ttotal_net_weight_kg NUMERIC(10, 2), \n\ttotal_gross_weight_kg NUMERIC(10, 2), \n\ttotal_cbm NUMERIC(8, 3), \n\tstatus VARCHAR(10) NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,465 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.465194Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,465 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
{"timestamp": "2026-02-16T09:17:45.465745Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)"}
2026-02-16 04:17:45,465 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.465827Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,466 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
{"timestamp": "2026-02-16T09:17:45.466256Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)"}
2026-02-16 04:17:45,466 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.466333Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,466 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cartons")
{"timestamp": "2026-02-16T09:17:45.466854Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cartons\")"}
2026-02-16 04:17:45,466 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.466921Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,467 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cartons")
{"timestamp": "2026-02-16T09:17:45.467460Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cartons\")"}
2026-02-16 04:17:45,467 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.467550Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,468 INFO sqlalchemy.engine.Engine 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:45.468250Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cartons (\n\tpacking_list_id CHAR(36) NOT NULL, \n\tcarton_number VARCHAR(50) NOT NULL, \n\tsize_breakdown TEXT, \n\tcolor VARCHAR(100), \n\ttotal_units INTEGER, \n\tnet_weight_kg NUMERIC(8, 2), \n\tgross_weight_kg NUMERIC(8, 2), \n\tdimensions_cm TEXT, \n\tlength_cm INTEGER, \n\twidth_cm INTEGER, \n\theight_cm INTEGER, \n\tbarcode VARCHAR(100), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:45,468 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.468336Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,468 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
{"timestamp": "2026-02-16T09:17:45.468961Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)"}
2026-02-16 04:17:45,469 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.469045Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,469 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("traceability_records")
{"timestamp": "2026-02-16T09:17:45.469564Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"traceability_records\")"}
2026-02-16 04:17:45,469 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.469634Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,470 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("traceability_records")
{"timestamp": "2026-02-16T09:17:45.470103Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"traceability_records\")"}
2026-02-16 04:17:45,470 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:45.470187Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:45,470 INFO sqlalchemy.engine.Engine 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:45.470810Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE traceability_records (\n\tcarton_id CHAR(36), \n\tfabric_lot_id CHAR(36), \n\tcut_ticket_id CHAR(36), \n\tproduction_run_id CHAR(36), \n\tcompliance_standard VARCHAR(8) NOT NULL, \n\tchain_of_custody TEXT, \n\tsupporting_documents TEXT, \n\tverification_status VARCHAR(8) NOT NULL, \n\tverified_by_id CHAR(36), \n\tverified_at DATETIME, \n\trisk_score VARCHAR(20), \n\trisk_notes TEXT, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, \n\tFOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, \n\tFOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:45,470 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:45.470900Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:45,471 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
{"timestamp": "2026-02-16T09:17:45.471463Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)"}
2026-02-16 04:17:45,471 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:45.471537Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:45,472 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
{"timestamp": "2026-02-16T09:17:45.472073Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)"}
2026-02-16 04:17:45,472 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:45.472197Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:45,472 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
{"timestamp": "2026-02-16T09:17:45.472743Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)"}
2026-02-16 04:17:45,472 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:45.472827Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:45,473 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:17:45.473395Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 04:17:45,473 INFO sqlalchemy.engine.Engine [cached since 48.35s ago] ()
{"timestamp": "2026-02-16T09:17:45.473479Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.35s ago] ()"}
2026-02-16 04:17:45,473 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:45.473921Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:45,474 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:45.474898Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:45,475 INFO sqlalchemy.engine.Engine INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:45.475116Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:45,475 INFO sqlalchemy.engine.Engine [cached since 48.19s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, 'a45a1309-b6b7-461c-9d2a-c50a89eb5e79', '2026-02-16 09:17:45.475046', '2026-02-16 09:17:45.475048', 0, None)
{"timestamp": "2026-02-16T09:17:45.475196Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.19s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, 'a45a1309-b6b7-461c-9d2a-c50a89eb5e79', '2026-02-16 09:17:45.475046', '2026-02-16 09:17:45.475048', 0, None)"}
2026-02-16 04:17:45,475 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:45.475722Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:45,476 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:45.476224Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:45,476 INFO sqlalchemy.engine.Engine SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
{"timestamp": "2026-02-16T09:17:45.476423Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at \nFROM organizations \nWHERE organizations.id = ?"}
2026-02-16 04:17:45,476 INFO sqlalchemy.engine.Engine [cached since 48.19s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79',)
{"timestamp": "2026-02-16T09:17:45.476501Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.19s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79',)"}
2026-02-16 04:17:45,477 INFO sqlalchemy.engine.Engine SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
{"timestamp": "2026-02-16T09:17:45.477570Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at \nFROM users \nWHERE ? = users.organization_id"}
2026-02-16 04:17:45,477 INFO sqlalchemy.engine.Engine [cached since 48.19s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79',)
{"timestamp": "2026-02-16T09:17:45.477659Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.19s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79',)"}
2026-02-16 04:17:45,478 INFO sqlalchemy.engine.Engine SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
{"timestamp": "2026-02-16T09:17:45.478479Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at \nFROM factories \nWHERE ? = factories.organization_id"}
2026-02-16 04:17:45,478 INFO sqlalchemy.engine.Engine [cached since 48.18s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79',)
{"timestamp": "2026-02-16T09:17:45.478573Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.18s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79',)"}
2026-02-16 04:17:45,699 INFO sqlalchemy.engine.Engine INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:45.699383Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:45,699 INFO sqlalchemy.engine.Engine [cached since 48.17s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79', 'test@example.com', '$2b$12$Z5rpfhPBRFRLnvoMpBl0NuvTQVELwSYl.502r8avVBZRuUcN4dnzO', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, 'e5923abf-fd3b-4b39-a7b8-59802eae914e', '2026-02-16 09:17:45.699233', '2026-02-16 09:17:45.699235', 0, None)
{"timestamp": "2026-02-16T09:17:45.699505Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.17s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79', 'test@example.com', '$2b$12$Z5rpfhPBRFRLnvoMpBl0NuvTQVELwSYl.502r8avVBZRuUcN4dnzO', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, 'e5923abf-fd3b-4b39-a7b8-59802eae914e', '2026-02-16 09:17:45.699233', '2026-02-16 09:17:45.699235', 0, None)"}
2026-02-16 04:17:45,700 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:45.700250Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:45,700 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:45.700835Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:45,701 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
{"timestamp": "2026-02-16T09:17:45.701054Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ?"}
2026-02-16 04:17:45,701 INFO sqlalchemy.engine.Engine [cached since 48.17s ago] ('e5923abf-fd3b-4b39-a7b8-59802eae914e',)
{"timestamp": "2026-02-16T09:17:45.701188Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.17s ago] ('e5923abf-fd3b-4b39-a7b8-59802eae914e',)"}
2026-02-16 04:17:45,702 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
{"timestamp": "2026-02-16T09:17:45.702074Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.user_id"}
2026-02-16 04:17:45,702 INFO sqlalchemy.engine.Engine [cached since 48.17s ago] ('e5923abf-fd3b-4b39-a7b8-59802eae914e',)
{"timestamp": "2026-02-16T09:17:45.702168Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.17s ago] ('e5923abf-fd3b-4b39-a7b8-59802eae914e',)"}
2026-02-16 04:17:45,702 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
{"timestamp": "2026-02-16T09:17:45.703038Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE ? = user_scopes.user_id"}
2026-02-16 04:17:45,703 INFO sqlalchemy.engine.Engine [cached since 48.17s ago] ('e5923abf-fd3b-4b39-a7b8-59802eae914e',)
{"timestamp": "2026-02-16T09:17:45.703137Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.17s ago] ('e5923abf-fd3b-4b39-a7b8-59802eae914e',)"}
----------------------------- Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.32s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_style_id ON production_events (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_order_id ON production_events (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_factories_organization_id ON factories (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_factory_id ON styles (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_buyer ON styles (buyer)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_style_number ON styles (style_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00023s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_po_number ON orders (po_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_status ON orders (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_style_id ON orders (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00022s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00033s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_defect_type ON defects (defect_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_worker_id ON defects (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_users_organization_id ON users (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_factory_id ON workers (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_employee_id ON workers (employee_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.35s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.19s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, 'a45a1309-b6b7-461c-9d2a-c50a89eb5e79', '2026-02-16 09:17:45.475046', '2026-02-16 09:17:45.475048', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.19s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.19s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.18s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.17s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79', 'test@example.com', '$2b$12$Z5rpfhPBRFRLnvoMpBl0NuvTQVELwSYl.502r8avVBZRuUcN4dnzO', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, 'e5923abf-fd3b-4b39-a7b8-59802eae914e', '2026-02-16 09:17:45.699233', '2026-02-16 09:17:45.699235', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.17s ago] ('e5923abf-fd3b-4b39-a7b8-59802eae914e',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.17s ago] ('e5923abf-fd3b-4b39-a7b8-59802eae914e',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.17s ago] ('e5923abf-fd3b-4b39-a7b8-59802eae914e',)
---------------------------- Captured stdout call -----------------------------
2026-02-16 04:17:45,705 INFO sqlalchemy.engine.Engine INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:45.705457Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:45,705 INFO sqlalchemy.engine.Engine [cached since 0.9148s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79', 'SAM Factory', 'SF-01', None, None, None, 'UTC', None, None, None, None, 'en-US', 1, '4ee35fa7-4a20-4d7e-a1a5-eb9514141a82', '2026-02-16 09:17:45.705244', '2026-02-16 09:17:45.705247')
{"timestamp": "2026-02-16T09:17:45.705638Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.9148s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79', 'SAM Factory', 'SF-01', None, None, None, 'UTC', None, None, None, None, 'en-US', 1, '4ee35fa7-4a20-4d7e-a1a5-eb9514141a82', '2026-02-16 09:17:45.705244', '2026-02-16 09:17:45.705247')"}
2026-02-16 04:17:45,706 INFO sqlalchemy.engine.Engine ROLLBACK
{"timestamp": "2026-02-16T09:17:45.706200Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK"}
------------------------------ Captured log call ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.9148s ago] ('a45a1309-b6b7-461c-9d2a-c50a89eb5e79', 'SAM Factory', 'SF-01', None, None, None, 'UTC', None, None, None, None, 'en-US', 1, '4ee35fa7-4a20-4d7e-a1a5-eb9514141a82', '2026-02-16 09:17:45.705244', '2026-02-16 09:17:45.705247')
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
-------------------------- Captured stdout teardown ---------------------------
2026-02-16 04:17:45,993 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:45.994114Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:45,994 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:17:45.994353Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 04:17:45,994 INFO sqlalchemy.engine.Engine [cached since 48.95s ago] ()
{"timestamp": "2026-02-16T09:17:45.994437Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.95s ago] ()"}
2026-02-16 04:17:45,995 INFO sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table'
{"timestamp": "2026-02-16T09:17:45.995083Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT name FROM sqlite_master WHERE type='table'"}
2026-02-16 04:17:45,995 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:45.995168Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:45,995 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "ai_decisions"
{"timestamp": "2026-02-16T09:17:45.995963Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"ai_decisions\""}
2026-02-16 04:17:45,996 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:45.996056Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:45,996 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "alias_mappings"
{"timestamp": "2026-02-16T09:17:45.996593Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"alias_mappings\""}
2026-02-16 04:17:45,996 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:45.996680Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:45,997 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "efficiency_metrics"
{"timestamp": "2026-02-16T09:17:45.997251Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"efficiency_metrics\""}
2026-02-16 04:17:45,997 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:45.997445Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:45,997 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dhu_reports"
{"timestamp": "2026-02-16T09:17:45.998022Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dhu_reports\""}
2026-02-16 04:17:45,998 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:45.998103Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:45,998 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dashboards"
{"timestamp": "2026-02-16T09:17:45.998652Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dashboards\""}
2026-02-16 04:17:45,998 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:45.998728Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:45,999 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_quality_issues"
{"timestamp": "2026-02-16T09:17:45.999259Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_quality_issues\""}
2026-02-16 04:17:45,999 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:45.999343Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:45,999 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_sources"
{"timestamp": "2026-02-16T09:17:45.999870Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_sources\""}
2026-02-16 04:17:45,999 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:45.999961Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,000 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "schema_mappings"
{"timestamp": "2026-02-16T09:17:46.000457Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"schema_mappings\""}
2026-02-16 04:17:46,000 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.000535Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,001 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_events"
{"timestamp": "2026-02-16T09:17:46.001092Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_events\""}
2026-02-16 04:17:46,001 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.001174Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,001 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "factories"
{"timestamp": "2026-02-16T09:17:46.001757Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"factories\""}
2026-02-16 04:17:46,001 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.001843Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,002 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "styles"
{"timestamp": "2026-02-16T09:17:46.002394Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"styles\""}
2026-02-16 04:17:46,002 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.002484Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,002 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "orders"
{"timestamp": "2026-02-16T09:17:46.003007Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"orders\""}
2026-02-16 04:17:46,003 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.003083Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,003 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_runs"
{"timestamp": "2026-02-16T09:17:46.003663Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_runs\""}
2026-02-16 04:17:46,003 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.003884Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,004 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "quality_inspections"
{"timestamp": "2026-02-16T09:17:46.004997Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"quality_inspections\""}
2026-02-16 04:17:46,005 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.005096Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,005 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "defects"
{"timestamp": "2026-02-16T09:17:46.005908Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"defects\""}
2026-02-16 04:17:46,005 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.006006Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,006 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "raw_imports"
{"timestamp": "2026-02-16T09:17:46.006652Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"raw_imports\""}
2026-02-16 04:17:46,006 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.006739Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,007 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "staging_records"
{"timestamp": "2026-02-16T09:17:46.007355Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"staging_records\""}
2026-02-16 04:17:46,007 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.007441Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,007 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "organizations"
{"timestamp": "2026-02-16T09:17:46.007991Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"organizations\""}
2026-02-16 04:17:46,008 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.008091Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,008 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "users"
{"timestamp": "2026-02-16T09:17:46.008735Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"users\""}
2026-02-16 04:17:46,008 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.008823Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,009 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "user_scopes"
{"timestamp": "2026-02-16T09:17:46.009323Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"user_scopes\""}
2026-02-16 04:17:46,009 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.009407Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,009 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "waitlist"
{"timestamp": "2026-02-16T09:17:46.009997Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"waitlist\""}
2026-02-16 04:17:46,010 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.010074Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,010 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "workers"
{"timestamp": "2026-02-16T09:17:46.010550Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"workers\""}
2026-02-16 04:17:46,010 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.010621Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,011 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_skills"
{"timestamp": "2026-02-16T09:17:46.011106Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_skills\""}
2026-02-16 04:17:46,011 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.011177Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,011 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_attendances"
{"timestamp": "2026-02-16T09:17:46.011715Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_attendances\""}
2026-02-16 04:17:46,011 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.011787Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,012 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_outputs"
{"timestamp": "2026-02-16T09:17:46.012271Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_outputs\""}
2026-02-16 04:17:46,012 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.012352Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,012 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "fabric_lots"
{"timestamp": "2026-02-16T09:17:46.012998Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"fabric_lots\""}
2026-02-16 04:17:46,013 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.013077Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,013 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cut_tickets"
{"timestamp": "2026-02-16T09:17:46.013670Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cut_tickets\""}
2026-02-16 04:17:46,013 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.013758Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,014 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "packing_lists"
{"timestamp": "2026-02-16T09:17:46.014275Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"packing_lists\""}
2026-02-16 04:17:46,014 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.014369Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,014 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cartons"
{"timestamp": "2026-02-16T09:17:46.014926Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cartons\""}
2026-02-16 04:17:46,014 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.015003Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,015 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "traceability_records"
{"timestamp": "2026-02-16T09:17:46.015582Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"traceability_records\""}
2026-02-16 04:17:46,015 INFO sqlalchemy.engine.Engine [cached since 47.21s ago] ()
{"timestamp": "2026-02-16T09:17:46.015685Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.21s ago] ()"}
2026-02-16 04:17:46,016 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:17:46.016283Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 04:17:46,016 INFO sqlalchemy.engine.Engine [cached since 48.9s ago] ()
{"timestamp": "2026-02-16T09:17:46.016373Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.9s ago] ()"}
2026-02-16 04:17:46,016 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:46.016813Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
---------------------------- Captured log teardown ----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.95s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT name FROM sqlite_master WHERE type='table'
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "ai_decisions"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "alias_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "efficiency_metrics"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dhu_reports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dashboards"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_quality_issues"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_sources"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "schema_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_events"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "factories"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "styles"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "orders"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_runs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "quality_inspections"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "defects"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "raw_imports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "staging_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "organizations"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "users"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "user_scopes"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "waitlist"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "workers"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_skills"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_attendances"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_outputs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "fabric_lots"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cut_tickets"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "packing_lists"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cartons"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "traceability_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 47.21s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.9s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
____________________________ test_get_dhu_history _____________________________
backend\tests\test_api\test_individual_widgets.py:324: in test_get_dhu_history
    assert float(today_point["dhu"]) == 2.5
E   AssertionError: assert 0.0 == 2.5
E    +  where 0.0 = float('0')
---------------------------- Captured stdout setup ----------------------------
2026-02-16 04:17:46,469 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:46.470401Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:46,470 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:17:46.470688Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 04:17:46,470 INFO sqlalchemy.engine.Engine [cached since 49.43s ago] ()
{"timestamp": "2026-02-16T09:17:46.470783Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.43s ago] ()"}
2026-02-16 04:17:46,471 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:17:46.471466Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"ai_decisions\")"}
2026-02-16 04:17:46,471 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.471628Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,472 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:17:46.472452Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"ai_decisions\")"}
2026-02-16 04:17:46,472 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.472540Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,473 INFO sqlalchemy.engine.Engine 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


{"timestamp": "2026-02-16T09:17:46.473572Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE ai_decisions (\n\tdata_source_id VARCHAR(36), \n\tagent_type VARCHAR(16) NOT NULL, \n\tmodel_used VARCHAR(50) NOT NULL, \n\tinput_summary TEXT NOT NULL, \n\toutput_summary TEXT NOT NULL, \n\tconfidence FLOAT, \n\treasoning JSON, \n\tperformance_metadata JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id)\n)\n\n"}
2026-02-16 04:17:46,473 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.473703Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,474 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
{"timestamp": "2026-02-16T09:17:46.474520Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)"}
2026-02-16 04:17:46,474 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:46.474616Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:46,475 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
{"timestamp": "2026-02-16T09:17:46.475233Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)"}
2026-02-16 04:17:46,475 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.475325Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,476 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:17:46.476416Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"alias_mappings\")"}
2026-02-16 04:17:46,476 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.476516Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,477 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:17:46.477146Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"alias_mappings\")"}
2026-02-16 04:17:46,477 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.477247Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,478 INFO sqlalchemy.engine.Engine 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.478309Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE alias_mappings (\n\tscope VARCHAR(50) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tsource_alias VARCHAR(255) NOT NULL, \n\tsource_alias_normalized VARCHAR(255) NOT NULL, \n\tcanonical_field VARCHAR(100) NOT NULL, \n\tusage_count INTEGER NOT NULL, \n\tlast_used_at DATETIME NOT NULL, \n\tcreated_by_id CHAR(36), \n\tcorrection_count INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,478 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.478409Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,479 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
{"timestamp": "2026-02-16T09:17:46.479117Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)"}
2026-02-16 04:17:46,479 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.479210Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,479 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
{"timestamp": "2026-02-16T09:17:46.479826Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)"}
2026-02-16 04:17:46,479 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.479912Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,480 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
{"timestamp": "2026-02-16T09:17:46.480656Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)"}
2026-02-16 04:17:46,480 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.480744Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,481 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
{"timestamp": "2026-02-16T09:17:46.481334Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)"}
2026-02-16 04:17:46,481 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:46.481409Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:46,481 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
{"timestamp": "2026-02-16T09:17:46.481989Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)"}
2026-02-16 04:17:46,482 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:46.482068Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:46,482 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
{"timestamp": "2026-02-16T09:17:46.482674Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)"}
2026-02-16 04:17:46,482 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.482774Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,483 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:17:46.483475Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"efficiency_metrics\")"}
2026-02-16 04:17:46,483 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.483569Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,484 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:17:46.484282Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"efficiency_metrics\")"}
2026-02-16 04:17:46,484 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.484371Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,485 INFO sqlalchemy.engine.Engine 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.485177Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE efficiency_metrics (\n\tproduction_run_id CHAR(36) NOT NULL, \n\tefficiency_pct NUMERIC(6, 2), \n\tsam_target NUMERIC(10, 2), \n\tsam_actual NUMERIC(10, 2), \n\tsam_variance NUMERIC(8, 2), \n\tsam_variance_pct NUMERIC(6, 2), \n\tcapacity_utilization_pct NUMERIC(6, 2), \n\tperformance_tier VARCHAR(12), \n\tfactory_avg_efficiency NUMERIC(6, 2), \n\tline_avg_efficiency NUMERIC(6, 2), \n\tcalculated_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,485 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.485283Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,485 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
{"timestamp": "2026-02-16T09:17:46.486042Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)"}
2026-02-16 04:17:46,486 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:46.486149Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:46,486 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:17:46.486958Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dhu_reports\")"}
2026-02-16 04:17:46,487 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.487048Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,487 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:17:46.487823Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dhu_reports\")"}
2026-02-16 04:17:46,487 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.488044Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,489 INFO sqlalchemy.engine.Engine 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.489221Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dhu_reports (\n\tfactory_id CHAR(36) NOT NULL, \n\treport_date DATE NOT NULL, \n\tperiod_type VARCHAR(7) NOT NULL, \n\tavg_dhu NUMERIC(6, 2), \n\tmin_dhu NUMERIC(6, 2), \n\tmax_dhu NUMERIC(6, 2), \n\ttotal_inspected INTEGER, \n\ttotal_defects INTEGER, \n\ttotal_rejected INTEGER, \n\ttop_defects TEXT, \n\ttop_operations TEXT, \n\ttop_lines TEXT, \n\tdhu_change_pct NUMERIC(6, 2), \n\ttrend_direction VARCHAR(20), \n\trecommendations TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,489 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.489326Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,490 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
{"timestamp": "2026-02-16T09:17:46.490142Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)"}
2026-02-16 04:17:46,490 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.490241Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,490 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
{"timestamp": "2026-02-16T09:17:46.490887Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)"}
2026-02-16 04:17:46,490 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.490982Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,491 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dashboards")
{"timestamp": "2026-02-16T09:17:46.491751Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dashboards\")"}
2026-02-16 04:17:46,491 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.491949Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,492 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dashboards")
{"timestamp": "2026-02-16T09:17:46.492726Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dashboards\")"}
2026-02-16 04:17:46,492 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.492816Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,493 INFO sqlalchemy.engine.Engine 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.493662Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dashboards (\n\tuser_id CHAR(36) NOT NULL, \n\tname VARCHAR(200) NOT NULL, \n\tdescription TEXT, \n\tdata_source_id CHAR(36), \n\twidget_config TEXT, \n\tlayout_config TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tCONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,493 INFO sqlalchemy.engine.Engine [no key 0.00022s] ()
{"timestamp": "2026-02-16T09:17:46.493877Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00022s] ()"}
2026-02-16 04:17:46,494 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
{"timestamp": "2026-02-16T09:17:46.494699Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)"}
2026-02-16 04:17:46,494 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:46.494781Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:46,495 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
{"timestamp": "2026-02-16T09:17:46.495376Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)"}
2026-02-16 04:17:46,495 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.495465Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,496 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:17:46.496096Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_quality_issues\")"}
2026-02-16 04:17:46,496 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.496188Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,496 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:17:46.496939Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_quality_issues\")"}
2026-02-16 04:17:46,497 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.497129Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,498 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.498096Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_quality_issues (\n\traw_import_id VARCHAR(36) NOT NULL, \n\trow_number INTEGER, \n\tissue_type VARCHAR(50) NOT NULL, \n\tseverity VARCHAR(20) NOT NULL, \n\tmessage TEXT NOT NULL, \n\tfield_name VARCHAR(100), \n\tfield_value VARCHAR(500), \n\tresolved_at DATETIME, \n\tresolved_by_user_id VARCHAR(36), \n\tresolution_notes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, \n\tFOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,498 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:46.498206Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:46,498 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
{"timestamp": "2026-02-16T09:17:46.499024Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)"}
2026-02-16 04:17:46,499 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.499116Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,499 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
{"timestamp": "2026-02-16T09:17:46.499735Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)"}
2026-02-16 04:17:46,499 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.499832Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,500 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
{"timestamp": "2026-02-16T09:17:46.500439Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)"}
2026-02-16 04:17:46,500 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:46.500524Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:46,501 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_sources")
{"timestamp": "2026-02-16T09:17:46.501262Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_sources\")"}
2026-02-16 04:17:46,501 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.501447Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,502 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_sources")
{"timestamp": "2026-02-16T09:17:46.502222Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_sources\")"}
2026-02-16 04:17:46,502 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.502350Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,503 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.503674Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_sources (\n\tfactory_id CHAR(36), \n\tname VARCHAR(100) NOT NULL, \n\tcode VARCHAR(50), \n\ttarget_operators INTEGER, \n\ttarget_efficiency_pct INTEGER, \n\tsettings JSON, \n\tspecialty VARCHAR(100), \n\tsupervisor_id CHAR(36), \n\tproduction_line_id CHAR(36), \n\tsource_name VARCHAR(255), \n\tdescription TEXT, \n\ttime_column VARCHAR(100), \n\ttime_format VARCHAR(50), \n\tschema_config JSON, \n\tparent_data_source_id CHAR(36), \n\tis_segment BOOLEAN NOT NULL, \n\tdate_range_start DATE, \n\tdate_range_end DATE, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, \n\tFOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,503 INFO sqlalchemy.engine.Engine [no key 0.00033s] ()
{"timestamp": "2026-02-16T09:17:46.503845Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00033s] ()"}
2026-02-16 04:17:46,504 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
{"timestamp": "2026-02-16T09:17:46.504694Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)"}
2026-02-16 04:17:46,504 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:46.504797Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:46,505 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
{"timestamp": "2026-02-16T09:17:46.505691Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)"}
2026-02-16 04:17:46,505 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:46.505802Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:46,506 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:17:46.506514Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"schema_mappings\")"}
2026-02-16 04:17:46,506 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.506613Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,507 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:17:46.507255Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"schema_mappings\")"}
2026-02-16 04:17:46,507 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.507351Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,508 INFO sqlalchemy.engine.Engine 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.508240Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE schema_mappings (\n\tdata_source_id CHAR(36) NOT NULL, \n\tversion INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tcolumn_map JSON NOT NULL, \n\textraction_rules JSON, \n\treviewed_by_user BOOLEAN NOT NULL, \n\tuser_notes TEXT, \n\tmatching_tier VARCHAR(20), \n\ttier_confidence FLOAT, \n\ttier_breakdown JSON, \n\tfuzzy_scores JSON, \n\tuser_corrected BOOLEAN NOT NULL, \n\tcorrection_count INTEGER, \n\tcorrection_history JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,508 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.508342Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,508 INFO sqlalchemy.engine.Engine CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
{"timestamp": "2026-02-16T09:17:46.508997Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)"}
2026-02-16 04:17:46,509 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.509078Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,509 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_events")
{"timestamp": "2026-02-16T09:17:46.509751Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_events\")"}
2026-02-16 04:17:46,509 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.509874Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,510 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_events")
{"timestamp": "2026-02-16T09:17:46.510524Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_events\")"}
2026-02-16 04:17:46,510 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.510611Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,511 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.511797Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_events (\n\ttimestamp DATETIME NOT NULL, \n\tevent_type VARCHAR(17) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tstyle_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36), \n\tsource_import_id VARCHAR(36), \n\traw_data JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,511 INFO sqlalchemy.engine.Engine [no key 0.00026s] ()
{"timestamp": "2026-02-16T09:17:46.512041Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00026s] ()"}
2026-02-16 04:17:46,512 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
{"timestamp": "2026-02-16T09:17:46.512711Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)"}
2026-02-16 04:17:46,512 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.512814Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,513 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
{"timestamp": "2026-02-16T09:17:46.513508Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)"}
2026-02-16 04:17:46,513 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.513605Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,514 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
{"timestamp": "2026-02-16T09:17:46.514288Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)"}
2026-02-16 04:17:46,514 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.514372Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,514 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
{"timestamp": "2026-02-16T09:17:46.515044Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)"}
2026-02-16 04:17:46,515 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.515141Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,515 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_style_id ON production_events (style_id)
{"timestamp": "2026-02-16T09:17:46.515800Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_style_id ON production_events (style_id)"}
2026-02-16 04:17:46,515 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.515900Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,516 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_order_id ON production_events (order_id)
{"timestamp": "2026-02-16T09:17:46.516528Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_order_id ON production_events (order_id)"}
2026-02-16 04:17:46,516 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:17:46.516671Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 04:17:46,517 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("factories")
{"timestamp": "2026-02-16T09:17:46.517388Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"factories\")"}
2026-02-16 04:17:46,517 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.517478Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,518 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("factories")
{"timestamp": "2026-02-16T09:17:46.518103Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"factories\")"}
2026-02-16 04:17:46,518 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.518201Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,519 INFO sqlalchemy.engine.Engine 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:17:46.519557Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE factories (\n\torganization_id CHAR(36) NOT NULL, \n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50) NOT NULL, \n\tcountry VARCHAR(100) NOT NULL, \n\tcity VARCHAR(100), \n\taddress TEXT, \n\ttimezone VARCHAR(50) NOT NULL, \n\ttotal_lines INTEGER, \n\ttotal_workers INTEGER, \n\tdaily_capacity_units INTEGER, \n\tcertifications TEXT, \n\tsettings JSON, \n\tlocale VARCHAR(20) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 04:17:46,519 INFO sqlalchemy.engine.Engine [no key 0.00028s] ()
{"timestamp": "2026-02-16T09:17:46.519831Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00028s] ()"}
2026-02-16 04:17:46,521 INFO sqlalchemy.engine.Engine CREATE INDEX ix_factories_organization_id ON factories (organization_id)
{"timestamp": "2026-02-16T09:17:46.521190Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_factories_organization_id ON factories (organization_id)"}
2026-02-16 04:17:46,521 INFO sqlalchemy.engine.Engine [no key 0.00028s] ()
{"timestamp": "2026-02-16T09:17:46.521354Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00028s] ()"}
2026-02-16 04:17:46,522 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("styles")
{"timestamp": "2026-02-16T09:17:46.522222Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"styles\")"}
2026-02-16 04:17:46,522 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.522339Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,523 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("styles")
{"timestamp": "2026-02-16T09:17:46.523090Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"styles\")"}
2026-02-16 04:17:46,523 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.523192Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,524 INFO sqlalchemy.engine.Engine 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.524193Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE styles (\n\tfactory_id VARCHAR(36) NOT NULL, \n\tstyle_number VARCHAR(100) NOT NULL, \n\tstyle_name VARCHAR(255), \n\tdescription VARCHAR(500), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tcategory VARCHAR(100), \n\tbase_sam NUMERIC(12, 4), \n\tcomplexity_rating VARCHAR(20), \n\tbom_summary JSON, \n\ttech_pack_url VARCHAR(500), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,524 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:46.524298Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:46,525 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_factory_id ON styles (factory_id)
{"timestamp": "2026-02-16T09:17:46.525270Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_factory_id ON styles (factory_id)"}
2026-02-16 04:17:46,525 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:17:46.525413Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 04:17:46,526 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_buyer ON styles (buyer)
{"timestamp": "2026-02-16T09:17:46.526172Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_buyer ON styles (buyer)"}
2026-02-16 04:17:46,526 INFO sqlalchemy.engine.Engine [no key 0.00019s] ()
{"timestamp": "2026-02-16T09:17:46.526317Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00019s] ()"}
2026-02-16 04:17:46,526 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_style_number ON styles (style_number)
{"timestamp": "2026-02-16T09:17:46.526964Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_style_number ON styles (style_number)"}
2026-02-16 04:17:46,527 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.527052Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,527 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("orders")
{"timestamp": "2026-02-16T09:17:46.527784Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"orders\")"}
2026-02-16 04:17:46,527 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.527890Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,528 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("orders")
{"timestamp": "2026-02-16T09:17:46.528698Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"orders\")"}
2026-02-16 04:17:46,528 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.528812Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,529 INFO sqlalchemy.engine.Engine 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.529709Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE orders (\n\tstyle_id VARCHAR(36) NOT NULL, \n\tpo_number VARCHAR(100) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tsize_breakdown JSON, \n\tuom VARCHAR(20) NOT NULL, \n\tcolor VARCHAR(100), \n\torder_date DATETIME, \n\tplanned_cut_date DATETIME, \n\tplanned_sew_date DATETIME, \n\tex_factory_date DATETIME, \n\tactual_ship_date DATETIME, \n\tstatus VARCHAR(20) NOT NULL, \n\tpriority VARCHAR(20) NOT NULL, \n\tqty_cut INTEGER NOT NULL, \n\tqty_sewn INTEGER NOT NULL, \n\tqty_packed INTEGER NOT NULL, \n\tqty_shipped INTEGER NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_style_po UNIQUE (style_id, po_number), \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,529 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.529810Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,530 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_po_number ON orders (po_number)
{"timestamp": "2026-02-16T09:17:46.530569Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_po_number ON orders (po_number)"}
2026-02-16 04:17:46,530 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.530679Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,531 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_status ON orders (status)
{"timestamp": "2026-02-16T09:17:46.531314Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_status ON orders (status)"}
2026-02-16 04:17:46,531 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.531406Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,532 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_style_id ON orders (style_id)
{"timestamp": "2026-02-16T09:17:46.532087Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_style_id ON orders (style_id)"}
2026-02-16 04:17:46,532 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.532183Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,532 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_runs")
{"timestamp": "2026-02-16T09:17:46.532799Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_runs\")"}
2026-02-16 04:17:46,532 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.532894Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,533 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_runs")
{"timestamp": "2026-02-16T09:17:46.533486Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_runs\")"}
2026-02-16 04:17:46,533 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.533570Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,534 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.534638Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_runs (\n\tfactory_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\tsource_import_id VARCHAR(36), \n\tproduction_date DATETIME, \n\tinspection_date DATETIME, \n\tshift VARCHAR(20) NOT NULL, \n\tplanned_qty INTEGER, \n\tactual_qty INTEGER NOT NULL, \n\twip_start INTEGER, \n\twip_end INTEGER, \n\tlot_number VARCHAR(50), \n\tshade_band VARCHAR(10), \n\tbatch_number VARCHAR(50), \n\tdowntime_minutes INTEGER, \n\tdowntime_reason VARCHAR(255), \n\tsam NUMERIC(12, 4), \n\toperators_present INTEGER NOT NULL, \n\thelpers_present INTEGER NOT NULL, \n\tworked_minutes NUMERIC(12, 4) NOT NULL, \n\tearned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), \n\tefficiency NUMERIC(10, 2) GENERATED ALWAYS AS (\n            CASE\n                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL\n                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100\n                ELSE 0\n            END\n            ), \n\tnotes TEXT, \n\tstart_time TIME, \n\tend_time TIME, \n\tstyle_number VARCHAR(100), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tpo_number VARCHAR(100), \n\tcolor VARCHAR(100), \n\tsize VARCHAR(50), \n\tdefects INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tline_efficiency NUMERIC(10, 2), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT check_positive_qty CHECK (actual_qty >= 0), \n\tCONSTRAINT check_positive_operators CHECK (operators_present >= 0), \n\tCONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), \n\tCONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), \n\tCONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), \n\tCONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), \n\tCONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,534 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:46.534752Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:46,535 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
{"timestamp": "2026-02-16T09:17:46.535662Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)"}
2026-02-16 04:17:46,535 INFO sqlalchemy.engine.Engine [no key 0.00026s] ()
{"timestamp": "2026-02-16T09:17:46.535862Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00026s] ()"}
2026-02-16 04:17:46,536 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
{"timestamp": "2026-02-16T09:17:46.536994Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)"}
2026-02-16 04:17:46,537 INFO sqlalchemy.engine.Engine [no key 0.00027s] ()
{"timestamp": "2026-02-16T09:17:46.537155Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00027s] ()"}
2026-02-16 04:17:46,537 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
{"timestamp": "2026-02-16T09:17:46.537905Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)"}
2026-02-16 04:17:46,537 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.538002Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,538 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
{"timestamp": "2026-02-16T09:17:46.538681Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)"}
2026-02-16 04:17:46,538 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:46.538819Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:46,539 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
{"timestamp": "2026-02-16T09:17:46.539552Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)"}
2026-02-16 04:17:46,539 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.539656Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,540 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
{"timestamp": "2026-02-16T09:17:46.540241Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)"}
2026-02-16 04:17:46,540 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.540327Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,540 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
{"timestamp": "2026-02-16T09:17:46.540924Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)"}
2026-02-16 04:17:46,540 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.541014Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,541 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
{"timestamp": "2026-02-16T09:17:46.541633Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)"}
2026-02-16 04:17:46,541 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.541718Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,542 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:17:46.542371Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"quality_inspections\")"}
2026-02-16 04:17:46,542 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.542480Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,543 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:17:46.543108Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"quality_inspections\")"}
2026-02-16 04:17:46,543 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.543183Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,544 INFO sqlalchemy.engine.Engine 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.544079Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE quality_inspections (\n\tproduction_run_id VARCHAR(36) NOT NULL, \n\tinspector_id VARCHAR(36), \n\tinspection_type VARCHAR(7) NOT NULL, \n\tunits_checked INTEGER NOT NULL, \n\tdefects_found INTEGER NOT NULL, \n\tunits_rejected INTEGER NOT NULL, \n\tunits_reworked INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\taql_level VARCHAR(20), \n\taql_result VARCHAR(7), \n\tinspected_at DATETIME NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,544 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:46.544187Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:46,544 INFO sqlalchemy.engine.Engine CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
{"timestamp": "2026-02-16T09:17:46.544908Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)"}
2026-02-16 04:17:46,544 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.545001Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,545 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("defects")
{"timestamp": "2026-02-16T09:17:46.545654Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"defects\")"}
2026-02-16 04:17:46,545 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.545755Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,546 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("defects")
{"timestamp": "2026-02-16T09:17:46.546513Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"defects\")"}
2026-02-16 04:17:46,546 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.546632Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,547 INFO sqlalchemy.engine.Engine 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.547504Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE defects (\n\tinspection_id VARCHAR(36) NOT NULL, \n\tworker_id VARCHAR(36), \n\tdefect_type VARCHAR(100) NOT NULL, \n\tdefect_code VARCHAR(20), \n\tdefect_category VARCHAR(100), \n\toperation VARCHAR(100), \n\tseverity VARCHAR(8) NOT NULL, \n\tis_reworkable BOOLEAN NOT NULL, \n\tis_reworked BOOLEAN NOT NULL, \n\troot_cause VARCHAR(255), \n\tmachine_id VARCHAR(50), \n\timage_url VARCHAR(500), \n\tcount INTEGER NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,547 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:46.547606Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:46,548 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_defect_type ON defects (defect_type)
{"timestamp": "2026-02-16T09:17:46.548235Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_defect_type ON defects (defect_type)"}
2026-02-16 04:17:46,548 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:17:46.548388Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 04:17:46,549 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_worker_id ON defects (worker_id)
{"timestamp": "2026-02-16T09:17:46.549171Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_worker_id ON defects (worker_id)"}
2026-02-16 04:17:46,549 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.549268Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,549 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
{"timestamp": "2026-02-16T09:17:46.549890Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)"}
2026-02-16 04:17:46,549 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.549979Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,550 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("raw_imports")
{"timestamp": "2026-02-16T09:17:46.550613Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"raw_imports\")"}
2026-02-16 04:17:46,550 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.550703Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,551 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("raw_imports")
{"timestamp": "2026-02-16T09:17:46.551261Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"raw_imports\")"}
2026-02-16 04:17:46,551 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.551349Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,552 INFO sqlalchemy.engine.Engine 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.552620Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE raw_imports (\n\tuploaded_by_id VARCHAR(36), \n\tfactory_id VARCHAR(36), \n\tproduction_line_id VARCHAR(36), \n\tdata_source_id VARCHAR(36), \n\ttime_column_used VARCHAR(100), \n\toriginal_filename VARCHAR(500) NOT NULL, \n\tfile_path VARCHAR(1000) NOT NULL, \n\tfile_size_bytes INTEGER NOT NULL, \n\tfile_hash VARCHAR(64) NOT NULL, \n\tmime_type VARCHAR(100), \n\tencoding_detected VARCHAR(50), \n\tsheet_count INTEGER NOT NULL, \n\tsheet_names TEXT, \n\trow_count INTEGER, \n\tcolumn_count INTEGER, \n\theader_row_detected INTEGER, \n\traw_headers TEXT, \n\tsample_data TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tprocessing_error TEXT, \n\tprocessed_at DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,552 INFO sqlalchemy.engine.Engine [no key 0.00033s] ()
{"timestamp": "2026-02-16T09:17:46.552908Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00033s] ()"}
2026-02-16 04:17:46,554 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
{"timestamp": "2026-02-16T09:17:46.554185Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)"}
2026-02-16 04:17:46,554 INFO sqlalchemy.engine.Engine [no key 0.00022s] ()
{"timestamp": "2026-02-16T09:17:46.554339Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00022s] ()"}
2026-02-16 04:17:46,555 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
{"timestamp": "2026-02-16T09:17:46.555088Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)"}
2026-02-16 04:17:46,555 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.555176Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,555 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
{"timestamp": "2026-02-16T09:17:46.555842Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)"}
2026-02-16 04:17:46,555 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:46.555976Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:46,556 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
{"timestamp": "2026-02-16T09:17:46.556633Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)"}
2026-02-16 04:17:46,556 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.556726Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,557 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("staging_records")
{"timestamp": "2026-02-16T09:17:46.557421Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"staging_records\")"}
2026-02-16 04:17:46,557 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.557549Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,558 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("staging_records")
{"timestamp": "2026-02-16T09:17:46.558122Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"staging_records\")"}
2026-02-16 04:17:46,558 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.558202Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,559 INFO sqlalchemy.engine.Engine 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.559193Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE staging_records (\n\traw_import_id VARCHAR(36) NOT NULL, \n\tsource_row_number INTEGER NOT NULL, \n\tstatus VARCHAR(50) NOT NULL, \n\tvalidation_errors TEXT, \n\tvalidation_warnings TEXT, \n\trecord_data TEXT NOT NULL, \n\tnormalized_data TEXT, \n\tquality_score FLOAT, \n\tnull_field_count INTEGER, \n\tpromoted_at DATETIME, \n\tpromoted_to_table VARCHAR(100), \n\tpromoted_record_id VARCHAR(36), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,559 INFO sqlalchemy.engine.Engine [no key 0.00019s] ()
{"timestamp": "2026-02-16T09:17:46.559301Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00019s] ()"}
2026-02-16 04:17:46,560 INFO sqlalchemy.engine.Engine CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
{"timestamp": "2026-02-16T09:17:46.560117Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)"}
2026-02-16 04:17:46,560 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.560207Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,560 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("organizations")
{"timestamp": "2026-02-16T09:17:46.560864Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"organizations\")"}
2026-02-16 04:17:46,560 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.560955Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,561 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("organizations")
{"timestamp": "2026-02-16T09:17:46.561519Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"organizations\")"}
2026-02-16 04:17:46,561 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.561602Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,562 INFO sqlalchemy.engine.Engine 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:17:46.562487Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE organizations (\n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50), \n\tsubscription_tier VARCHAR(10) NOT NULL, \n\tsettings TEXT, \n\tmax_factories INTEGER NOT NULL, \n\tmax_lines_per_factory INTEGER NOT NULL, \n\tprimary_email VARCHAR(255), \n\tprimary_phone VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 04:17:46,562 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:46.562589Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:46,563 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
{"timestamp": "2026-02-16T09:17:46.563302Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"users\")"}
2026-02-16 04:17:46,563 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.563446Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,564 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("users")
{"timestamp": "2026-02-16T09:17:46.564133Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"users\")"}
2026-02-16 04:17:46,564 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.564321Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,565 INFO sqlalchemy.engine.Engine 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


{"timestamp": "2026-02-16T09:17:46.565188Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE users (\n\torganization_id CHAR(36) NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\thashed_password VARCHAR(255) NOT NULL, \n\tfull_name VARCHAR(255), \n\tavatar_url VARCHAR(500), \n\ttimezone VARCHAR(50), \n\tpreferences TEXT, \n\trole VARCHAR(15) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tis_verified BOOLEAN NOT NULL, \n\tlast_login DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (email)\n)\n\n"}
2026-02-16 04:17:46,565 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.565284Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,565 INFO sqlalchemy.engine.Engine CREATE INDEX ix_users_organization_id ON users (organization_id)
{"timestamp": "2026-02-16T09:17:46.565973Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_users_organization_id ON users (organization_id)"}
2026-02-16 04:17:46,566 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.566064Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,566 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_scopes")
{"timestamp": "2026-02-16T09:17:46.566650Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"user_scopes\")"}
2026-02-16 04:17:46,566 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.566740Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,567 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("user_scopes")
{"timestamp": "2026-02-16T09:17:46.567280Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"user_scopes\")"}
2026-02-16 04:17:46,567 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.567369Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,568 INFO sqlalchemy.engine.Engine 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.568195Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE user_scopes (\n\tuser_id CHAR(36) NOT NULL, \n\tscope_type VARCHAR(12) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tdata_source_id CHAR(36), \n\trole VARCHAR(15) NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,568 INFO sqlalchemy.engine.Engine [no key 0.00020s] ()
{"timestamp": "2026-02-16T09:17:46.568322Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00020s] ()"}
2026-02-16 04:17:46,569 INFO sqlalchemy.engine.Engine CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
{"timestamp": "2026-02-16T09:17:46.569191Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)"}
2026-02-16 04:17:46,569 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:17:46.569300Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 04:17:46,570 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("waitlist")
{"timestamp": "2026-02-16T09:17:46.570252Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"waitlist\")"}
2026-02-16 04:17:46,570 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.570408Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,571 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("waitlist")
{"timestamp": "2026-02-16T09:17:46.571166Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"waitlist\")"}
2026-02-16 04:17:46,571 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.571251Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,571 INFO sqlalchemy.engine.Engine 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


{"timestamp": "2026-02-16T09:17:46.572040Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE waitlist (\n\tid INTEGER NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\treferral_code VARCHAR(8) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n"}
2026-02-16 04:17:46,572 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.572141Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,572 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
{"timestamp": "2026-02-16T09:17:46.572792Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)"}
2026-02-16 04:17:46,572 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.572884Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,573 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
{"timestamp": "2026-02-16T09:17:46.573538Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)"}
2026-02-16 04:17:46,573 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:17:46.573686Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 04:17:46,574 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("workers")
{"timestamp": "2026-02-16T09:17:46.574348Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"workers\")"}
2026-02-16 04:17:46,574 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.574439Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,575 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("workers")
{"timestamp": "2026-02-16T09:17:46.575074Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"workers\")"}
2026-02-16 04:17:46,575 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.575167Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,575 INFO sqlalchemy.engine.Engine 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.576017Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE workers (\n\tfactory_id VARCHAR(36) NOT NULL, \n\temployee_id VARCHAR(50) NOT NULL, \n\tfull_name VARCHAR(255) NOT NULL, \n\tdepartment VARCHAR(100), \n\tjob_title VARCHAR(100), \n\tprimary_skill VARCHAR(100), \n\tdata_source_id VARCHAR(36), \n\thire_date DATE, \n\ttermination_date DATE, \n\thourly_rate NUMERIC(10, 2), \n\tcurrency VARCHAR(3), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,576 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.576125Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,576 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_factory_id ON workers (factory_id)
{"timestamp": "2026-02-16T09:17:46.576861Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_factory_id ON workers (factory_id)"}
2026-02-16 04:17:46,577 INFO sqlalchemy.engine.Engine [no key 0.00022s] ()
{"timestamp": "2026-02-16T09:17:46.577065Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00022s] ()"}
2026-02-16 04:17:46,577 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_employee_id ON workers (employee_id)
{"timestamp": "2026-02-16T09:17:46.577774Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_employee_id ON workers (employee_id)"}
2026-02-16 04:17:46,577 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.577875Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,578 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_skills")
{"timestamp": "2026-02-16T09:17:46.578611Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_skills\")"}
2026-02-16 04:17:46,578 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.578721Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,579 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_skills")
{"timestamp": "2026-02-16T09:17:46.579357Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_skills\")"}
2026-02-16 04:17:46,579 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.579450Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,580 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.580523Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_skills (\n\tworker_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\toperation_category VARCHAR(100), \n\tproficiency_pct NUMERIC(5, 2), \n\tsam_achieved NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\tpieces_lifetime INTEGER, \n\tpieces_30d INTEGER, \n\tis_certified BOOLEAN NOT NULL, \n\tcertification_date DATE, \n\tlast_assessed DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,580 INFO sqlalchemy.engine.Engine [no key 0.00022s] ()
{"timestamp": "2026-02-16T09:17:46.580665Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00022s] ()"}
2026-02-16 04:17:46,581 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
{"timestamp": "2026-02-16T09:17:46.581495Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)"}
2026-02-16 04:17:46,581 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.581592Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,582 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
{"timestamp": "2026-02-16T09:17:46.582256Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)"}
2026-02-16 04:17:46,582 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.582354Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,583 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:17:46.583069Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_attendances\")"}
2026-02-16 04:17:46,583 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.583175Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,583 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:17:46.583815Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_attendances\")"}
2026-02-16 04:17:46,583 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.583984Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,584 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.584863Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_attendances (\n\tworker_id VARCHAR(36) NOT NULL, \n\twork_date DATE NOT NULL, \n\tclock_in TIME, \n\tclock_out TIME, \n\thours_regular NUMERIC(4, 2), \n\thours_overtime NUMERIC(4, 2), \n\thours_total NUMERIC(4, 2), \n\tis_present BOOLEAN NOT NULL, \n\tabsence_reason VARCHAR(100), \n\tis_approved BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,584 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.584967Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,585 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
{"timestamp": "2026-02-16T09:17:46.585754Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)"}
2026-02-16 04:17:46,585 INFO sqlalchemy.engine.Engine [no key 0.00020s] ()
{"timestamp": "2026-02-16T09:17:46.585920Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00020s] ()"}
2026-02-16 04:17:46,586 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
{"timestamp": "2026-02-16T09:17:46.586771Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)"}
2026-02-16 04:17:46,586 INFO sqlalchemy.engine.Engine [no key 0.00023s] ()
{"timestamp": "2026-02-16T09:17:46.586966Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00023s] ()"}
2026-02-16 04:17:46,587 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_outputs")
{"timestamp": "2026-02-16T09:17:46.587744Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_outputs\")"}
2026-02-16 04:17:46,587 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.587837Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,588 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_outputs")
{"timestamp": "2026-02-16T09:17:46.588645Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_outputs\")"}
2026-02-16 04:17:46,588 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.588825Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,589 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.589745Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_outputs (\n\tworker_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\tpieces_completed INTEGER NOT NULL, \n\tsam_earned NUMERIC(10, 2), \n\tminutes_worked NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\trecorded_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,589 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.589849Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,590 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
{"timestamp": "2026-02-16T09:17:46.590510Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)"}
2026-02-16 04:17:46,590 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.590601Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,591 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
{"timestamp": "2026-02-16T09:17:46.591142Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)"}
2026-02-16 04:17:46,591 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.591232Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,591 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:17:46.591756Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"fabric_lots\")"}
2026-02-16 04:17:46,591 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.591835Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,592 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:17:46.592473Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"fabric_lots\")"}
2026-02-16 04:17:46,592 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.592571Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,593 INFO sqlalchemy.engine.Engine 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.593455Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE fabric_lots (\n\tfactory_id CHAR(36) NOT NULL, \n\tlot_number VARCHAR(100) NOT NULL, \n\tfabric_type VARCHAR(100), \n\tcomposition VARCHAR(255), \n\twidth_cm INTEGER, \n\tgsm INTEGER, \n\tcolor VARCHAR(100), \n\tsupplier VARCHAR(255), \n\torigin_country VARCHAR(100), \n\tmill_name VARCHAR(255), \n\treceived_date DATE, \n\tinitial_meters NUMERIC(12, 2), \n\tavailable_meters NUMERIC(12, 2), \n\treserved_meters NUMERIC(12, 2), \n\tunit_cost NUMERIC(10, 4), \n\tcurrency VARCHAR(3), \n\tcertifications TEXT, \n\tinspection_status VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,593 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.593556Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,594 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
{"timestamp": "2026-02-16T09:17:46.594201Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)"}
2026-02-16 04:17:46,594 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.594291Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,594 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
{"timestamp": "2026-02-16T09:17:46.594833Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)"}
2026-02-16 04:17:46,594 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:46.594910Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:46,595 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
{"timestamp": "2026-02-16T09:17:46.595459Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)"}
2026-02-16 04:17:46,595 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.595550Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,596 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
{"timestamp": "2026-02-16T09:17:46.596207Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)"}
2026-02-16 04:17:46,596 INFO sqlalchemy.engine.Engine [no key 0.00021s] ()
{"timestamp": "2026-02-16T09:17:46.596391Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00021s] ()"}
2026-02-16 04:17:46,597 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:17:46.597079Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cut_tickets\")"}
2026-02-16 04:17:46,597 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.597164Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,597 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:17:46.597738Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cut_tickets\")"}
2026-02-16 04:17:46,597 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.597827Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,598 INFO sqlalchemy.engine.Engine 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.598566Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cut_tickets (\n\tfabric_lot_id CHAR(36) NOT NULL, \n\torder_id CHAR(36) NOT NULL, \n\tticket_number VARCHAR(100) NOT NULL, \n\tcut_date DATE, \n\tplies INTEGER, \n\tmarker_length_cm INTEGER, \n\tconsumption_meters NUMERIC(10, 2), \n\twastage_pct NUMERIC(5, 2), \n\tsize_ratio TEXT, \n\tbundle_count INTEGER, \n\ttotal_pieces INTEGER, \n\tcutter_id CHAR(36), \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,598 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.598665Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,599 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
{"timestamp": "2026-02-16T09:17:46.599399Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)"}
2026-02-16 04:17:46,599 INFO sqlalchemy.engine.Engine [no key 0.00021s] ()
{"timestamp": "2026-02-16T09:17:46.599584Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00021s] ()"}
2026-02-16 04:17:46,600 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
{"timestamp": "2026-02-16T09:17:46.600193Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)"}
2026-02-16 04:17:46,600 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:46.600277Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:46,600 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
{"timestamp": "2026-02-16T09:17:46.600835Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)"}
2026-02-16 04:17:46,600 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.600926Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,601 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("packing_lists")
{"timestamp": "2026-02-16T09:17:46.601544Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"packing_lists\")"}
2026-02-16 04:17:46,601 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.601621Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,602 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("packing_lists")
{"timestamp": "2026-02-16T09:17:46.602323Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"packing_lists\")"}
2026-02-16 04:17:46,602 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.602414Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,603 INFO sqlalchemy.engine.Engine 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.603390Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE packing_lists (\n\torder_id CHAR(36) NOT NULL, \n\tpacking_list_number VARCHAR(100) NOT NULL, \n\tship_date DATE, \n\tdestination VARCHAR(255), \n\tship_to_address TEXT, \n\tcarrier VARCHAR(100), \n\ttracking_number VARCHAR(255), \n\tcontainer_number VARCHAR(100), \n\ttotal_cartons INTEGER, \n\ttotal_units INTEGER, \n\ttotal_net_weight_kg NUMERIC(10, 2), \n\ttotal_gross_weight_kg NUMERIC(10, 2), \n\ttotal_cbm NUMERIC(8, 3), \n\tstatus VARCHAR(10) NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,603 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:46.603498Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:46,604 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
{"timestamp": "2026-02-16T09:17:46.604301Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)"}
2026-02-16 04:17:46,604 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:17:46.604456Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 04:17:46,605 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
{"timestamp": "2026-02-16T09:17:46.605056Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)"}
2026-02-16 04:17:46,605 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.605150Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,605 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cartons")
{"timestamp": "2026-02-16T09:17:46.605792Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cartons\")"}
2026-02-16 04:17:46,605 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.605880Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,606 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cartons")
{"timestamp": "2026-02-16T09:17:46.606593Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cartons\")"}
2026-02-16 04:17:46,606 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.606682Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,607 INFO sqlalchemy.engine.Engine 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.607611Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cartons (\n\tpacking_list_id CHAR(36) NOT NULL, \n\tcarton_number VARCHAR(50) NOT NULL, \n\tsize_breakdown TEXT, \n\tcolor VARCHAR(100), \n\ttotal_units INTEGER, \n\tnet_weight_kg NUMERIC(8, 2), \n\tgross_weight_kg NUMERIC(8, 2), \n\tdimensions_cm TEXT, \n\tlength_cm INTEGER, \n\twidth_cm INTEGER, \n\theight_cm INTEGER, \n\tbarcode VARCHAR(100), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,607 INFO sqlalchemy.engine.Engine [no key 0.00024s] ()
{"timestamp": "2026-02-16T09:17:46.607811Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00024s] ()"}
2026-02-16 04:17:46,608 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
{"timestamp": "2026-02-16T09:17:46.608542Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)"}
2026-02-16 04:17:46,608 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.608637Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,609 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("traceability_records")
{"timestamp": "2026-02-16T09:17:46.609251Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"traceability_records\")"}
2026-02-16 04:17:46,609 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.609338Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,609 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("traceability_records")
{"timestamp": "2026-02-16T09:17:46.609936Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"traceability_records\")"}
2026-02-16 04:17:46,609 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.610019Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,610 INFO sqlalchemy.engine.Engine 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.610922Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE traceability_records (\n\tcarton_id CHAR(36), \n\tfabric_lot_id CHAR(36), \n\tcut_ticket_id CHAR(36), \n\tproduction_run_id CHAR(36), \n\tcompliance_standard VARCHAR(8) NOT NULL, \n\tchain_of_custody TEXT, \n\tsupporting_documents TEXT, \n\tverification_status VARCHAR(8) NOT NULL, \n\tverified_by_id CHAR(36), \n\tverified_at DATETIME, \n\trisk_score VARCHAR(20), \n\trisk_notes TEXT, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, \n\tFOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, \n\tFOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,610 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:46.611037Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:46,611 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
{"timestamp": "2026-02-16T09:17:46.611677Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)"}
2026-02-16 04:17:46,611 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.611781Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,612 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
{"timestamp": "2026-02-16T09:17:46.612396Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)"}
2026-02-16 04:17:46,612 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.612479Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,613 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
{"timestamp": "2026-02-16T09:17:46.613072Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)"}
2026-02-16 04:17:46,613 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.613160Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,613 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:17:46.613732Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 04:17:46,613 INFO sqlalchemy.engine.Engine [cached since 49.49s ago] ()
{"timestamp": "2026-02-16T09:17:46.613826Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.49s ago] ()"}
2026-02-16 04:17:46,614 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:46.614259Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:46,615 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:46.615308Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:46,615 INFO sqlalchemy.engine.Engine INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:46.615581Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:46,615 INFO sqlalchemy.engine.Engine [cached since 49.33s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '2ecad19e-56ad-44db-8930-79c7b875e7f7', '2026-02-16 09:17:46.615482', '2026-02-16 09:17:46.615484', 0, None)
{"timestamp": "2026-02-16T09:17:46.615673Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.33s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '2ecad19e-56ad-44db-8930-79c7b875e7f7', '2026-02-16 09:17:46.615482', '2026-02-16 09:17:46.615484', 0, None)"}
2026-02-16 04:17:46,616 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:46.616306Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:46,616 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:46.616901Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:46,617 INFO sqlalchemy.engine.Engine SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
{"timestamp": "2026-02-16T09:17:46.617125Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at \nFROM organizations \nWHERE organizations.id = ?"}
2026-02-16 04:17:46,617 INFO sqlalchemy.engine.Engine [cached since 49.33s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7',)
{"timestamp": "2026-02-16T09:17:46.617212Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.33s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7',)"}
2026-02-16 04:17:46,618 INFO sqlalchemy.engine.Engine SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
{"timestamp": "2026-02-16T09:17:46.618971Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at \nFROM users \nWHERE ? = users.organization_id"}
2026-02-16 04:17:46,619 INFO sqlalchemy.engine.Engine [cached since 49.33s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7',)
{"timestamp": "2026-02-16T09:17:46.619237Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.33s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7',)"}
2026-02-16 04:17:46,620 INFO sqlalchemy.engine.Engine SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
{"timestamp": "2026-02-16T09:17:46.620426Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at \nFROM factories \nWHERE ? = factories.organization_id"}
2026-02-16 04:17:46,620 INFO sqlalchemy.engine.Engine [cached since 49.33s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7',)
{"timestamp": "2026-02-16T09:17:46.620538Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.33s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7',)"}
2026-02-16 04:17:46,903 INFO sqlalchemy.engine.Engine INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:46.903329Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:46,903 INFO sqlalchemy.engine.Engine [cached since 49.37s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7', 'test@example.com', '$2b$12$ULKDx5k.X6OCw50DE3rzKeDycjpd7y0ueamoE2XwgShvYXSATreTy', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '46847616-76d5-4435-8152-1fb271221518', '2026-02-16 09:17:46.903132', '2026-02-16 09:17:46.903136', 0, None)
{"timestamp": "2026-02-16T09:17:46.903498Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.37s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7', 'test@example.com', '$2b$12$ULKDx5k.X6OCw50DE3rzKeDycjpd7y0ueamoE2XwgShvYXSATreTy', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '46847616-76d5-4435-8152-1fb271221518', '2026-02-16 09:17:46.903132', '2026-02-16 09:17:46.903136', 0, None)"}
2026-02-16 04:17:46,904 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:46.904428Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:46,905 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:46.905103Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:46,905 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
{"timestamp": "2026-02-16T09:17:46.905360Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ?"}
2026-02-16 04:17:46,905 INFO sqlalchemy.engine.Engine [cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)
{"timestamp": "2026-02-16T09:17:46.905460Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)"}
2026-02-16 04:17:46,906 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
{"timestamp": "2026-02-16T09:17:46.906622Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.user_id"}
2026-02-16 04:17:46,906 INFO sqlalchemy.engine.Engine [cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)
{"timestamp": "2026-02-16T09:17:46.906732Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)"}
2026-02-16 04:17:46,907 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
{"timestamp": "2026-02-16T09:17:46.907660Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE ? = user_scopes.user_id"}
2026-02-16 04:17:46,907 INFO sqlalchemy.engine.Engine [cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)
{"timestamp": "2026-02-16T09:17:46.907760Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)"}
2026-02-16 04:17:46,909 INFO sqlalchemy.engine.Engine INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:46.909491Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:46,909 INFO sqlalchemy.engine.Engine [cached since 2.119s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7', 'Widget Test Factory', 'WTF-001', 'Test Country', None, None, 'UTC', None, None, None, None, 'en-US', 1, 'c1f767cc-943b-4d61-bd3a-66595e12d9c3', '2026-02-16 09:17:46.909382', '2026-02-16 09:17:46.909384')
{"timestamp": "2026-02-16T09:17:46.909603Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.119s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7', 'Widget Test Factory', 'WTF-001', 'Test Country', None, None, 'UTC', None, None, None, None, 'en-US', 1, 'c1f767cc-943b-4d61-bd3a-66595e12d9c3', '2026-02-16 09:17:46.909382', '2026-02-16 09:17:46.909384')"}
2026-02-16 04:17:46,910 INFO sqlalchemy.engine.Engine INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:46.910710Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:46,910 INFO sqlalchemy.engine.Engine [cached since 49.36s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'Widget Line A', 'WL-A', 15, None, None, None, None, None, None, None, None, None, 0, None, None, 1, '12c385f9-d822-4ab6-825f-dd920472c391', '2026-02-16 09:17:46.910601', '2026-02-16 09:17:46.910603')
{"timestamp": "2026-02-16T09:17:46.910830Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.36s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'Widget Line A', 'WL-A', 15, None, None, None, None, None, None, None, None, None, 0, None, None, 1, '12c385f9-d822-4ab6-825f-dd920472c391', '2026-02-16 09:17:46.910601', '2026-02-16 09:17:46.910603')"}
2026-02-16 04:17:46,911 INFO sqlalchemy.engine.Engine INSERT INTO styles (factory_id, style_number, style_name, description, buyer, season, category, base_sam, complexity_rating, tech_pack_url, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:46.911770Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO styles (factory_id, style_number, style_name, description, buyer, season, category, base_sam, complexity_rating, tech_pack_url, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:46,911 INFO sqlalchemy.engine.Engine [cached since 0.5038s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'STY-WIDGET-01', None, 'Complex Widget Style', None, None, None, 12.5, None, None, 1, '3158c97e-7c09-42f7-8e30-869820cb44ef', '2026-02-16 09:17:46.911668', '2026-02-16 09:17:46.911670')
{"timestamp": "2026-02-16T09:17:46.911876Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5038s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'STY-WIDGET-01', None, 'Complex Widget Style', None, None, None, 12.5, None, None, 1, '3158c97e-7c09-42f7-8e30-869820cb44ef', '2026-02-16 09:17:46.911668', '2026-02-16 09:17:46.911670')"}
2026-02-16 04:17:46,912 INFO sqlalchemy.engine.Engine INSERT INTO orders (style_id, po_number, quantity, uom, color, order_date, planned_cut_date, planned_sew_date, ex_factory_date, actual_ship_date, status, priority, qty_cut, qty_sewn, qty_packed, qty_shipped, notes, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:46.912784Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (style_id, po_number, quantity, uom, color, order_date, planned_cut_date, planned_sew_date, ex_factory_date, actual_ship_date, status, priority, qty_cut, qty_sewn, qty_packed, qty_shipped, notes, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:46,912 INFO sqlalchemy.engine.Engine [cached since 0.5032s ago] ('3158c97e-7c09-42f7-8e30-869820cb44ef', 'PO-WIDGET-01', 5000, 'pcs', None, None, None, None, None, None, 'sewing', 'normal', 0, 0, 0, 0, None, 'aa2a229e-0576-4d71-bd6b-65ae0561bae0', '2026-02-16 09:17:46.912692', '2026-02-16 09:17:46.912693')
{"timestamp": "2026-02-16T09:17:46.912884Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5032s ago] ('3158c97e-7c09-42f7-8e30-869820cb44ef', 'PO-WIDGET-01', 5000, 'pcs', None, None, None, None, None, None, 'sewing', 'normal', 0, 0, 0, 0, None, 'aa2a229e-0576-4d71-bd6b-65ae0561bae0', '2026-02-16 09:17:46.912692', '2026-02-16 09:17:46.912693')"}
2026-02-16 04:17:46,913 INFO sqlalchemy.engine.Engine INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency
{"timestamp": "2026-02-16T09:17:46.913989Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency"}
2026-02-16 04:17:46,914 INFO sqlalchemy.engine.Engine [cached since 0.5025s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'aa2a229e-0576-4d71-bd6b-65ae0561bae0', '12c385f9-d822-4ab6-825f-dd920472c391', None, '2026-02-16 00:00:00.000000', None, 'day', None, 1000, None, None, None, None, None, None, 'Machine Failure', 0.486, 14, 1, 540.0, 'Needle broke frequently', None, None, None, None, None, None, None, None, 0, None, None, '114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', '2026-02-16 09:17:46.913877', '2026-02-16 09:17:46.913878')
{"timestamp": "2026-02-16T09:17:46.914106Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5025s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'aa2a229e-0576-4d71-bd6b-65ae0561bae0', '12c385f9-d822-4ab6-825f-dd920472c391', None, '2026-02-16 00:00:00.000000', None, 'day', None, 1000, None, None, None, None, None, None, 'Machine Failure', 0.486, 14, 1, 540.0, 'Needle broke frequently', None, None, None, None, None, None, None, None, 0, None, None, '114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', '2026-02-16 09:17:46.913877', '2026-02-16 09:17:46.913878')"}
2026-02-16 04:17:46,915 INFO sqlalchemy.engine.Engine INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency
{"timestamp": "2026-02-16T09:17:46.915380Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency"}
2026-02-16 04:17:46,915 INFO sqlalchemy.engine.Engine [cached since 0.5039s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'aa2a229e-0576-4d71-bd6b-65ae0561bae0', '12c385f9-d822-4ab6-825f-dd920472c391', None, '2026-02-15 00:00:00.000000', None, 'day', None, 900, None, None, None, None, None, None, None, 0.48, 15, 0, 540.0, None, None, None, None, None, None, None, None, None, 0, None, None, '88bbb28d-152d-4169-9d76-d9b03cdf83db', '2026-02-16 09:17:46.915266', '2026-02-16 09:17:46.915268')
{"timestamp": "2026-02-16T09:17:46.915493Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5039s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'aa2a229e-0576-4d71-bd6b-65ae0561bae0', '12c385f9-d822-4ab6-825f-dd920472c391', None, '2026-02-15 00:00:00.000000', None, 'day', None, 900, None, None, None, None, None, None, None, 0.48, 15, 0, 540.0, None, None, None, None, None, None, None, None, None, 0, None, None, '88bbb28d-152d-4169-9d76-d9b03cdf83db', '2026-02-16 09:17:46.915266', '2026-02-16 09:17:46.915268')"}
2026-02-16 04:17:46,916 INFO sqlalchemy.engine.Engine INSERT INTO dhu_reports (factory_id, report_date, period_type, avg_dhu, min_dhu, max_dhu, total_inspected, total_defects, total_rejected, top_defects, top_operations, top_lines, dhu_change_pct, trend_direction, recommendations, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:46.916855Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO dhu_reports (factory_id, report_date, period_type, avg_dhu, min_dhu, max_dhu, total_inspected, total_defects, total_rejected, top_defects, top_operations, top_lines, dhu_change_pct, trend_direction, recommendations, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:46,916 INFO sqlalchemy.engine.Engine [cached since 0.5016s ago (insertmanyvalues) 1/1 (unordered)] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', '2026-02-16', 'daily', 2.5, None, None, 1000, 25, None, None, None, None, None, None, None, '954d6e1b-0f1f-4977-9884-5b9153d213c8', '2026-02-16 09:17:46.916708', '2026-02-16 09:17:46.916709', 'c1f767cc-943b-4d61-bd3a-66595e12d9c3', '2026-02-15', 'daily', 3.0, None, None, 900, 27, None, None, None, None, None, None, None, '0e9e92c7-b24b-48c8-92d8-c4459d3a4085', '2026-02-16 09:17:46.916714', '2026-02-16 09:17:46.916714')
{"timestamp": "2026-02-16T09:17:46.916966Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5016s ago (insertmanyvalues) 1/1 (unordered)] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', '2026-02-16', 'daily', 2.5, None, None, 1000, 25, None, None, None, None, None, None, None, '954d6e1b-0f1f-4977-9884-5b9153d213c8', '2026-02-16 09:17:46.916708', '2026-02-16 09:17:46.916709', 'c1f767cc-943b-4d61-bd3a-66595e12d9c3', '2026-02-15', 'daily', 3.0, None, None, 900, 27, None, None, None, None, None, None, None, '0e9e92c7-b24b-48c8-92d8-c4459d3a4085', '2026-02-16 09:17:46.916714', '2026-02-16 09:17:46.916714')"}
2026-02-16 04:17:46,918 INFO sqlalchemy.engine.Engine INSERT INTO efficiency_metrics (production_run_id, efficiency_pct, sam_target, sam_actual, sam_variance, sam_variance_pct, capacity_utilization_pct, performance_tier, factory_avg_efficiency, line_avg_efficiency, calculated_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:46.918272Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO efficiency_metrics (production_run_id, efficiency_pct, sam_target, sam_actual, sam_variance, sam_variance_pct, capacity_utilization_pct, performance_tier, factory_avg_efficiency, line_avg_efficiency, calculated_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:46,918 INFO sqlalchemy.engine.Engine [cached since 0.5014s ago (insertmanyvalues) 1/1 (unordered)] ('114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', 90.0, 5400.0, 4860.0, None, None, None, None, None, None, '2026-02-16 09:17:46.916241', '32776dbf-d638-416a-917b-ef41df36b082', '2026-02-16 09:17:46.918094', '2026-02-16 09:17:46.918096', '88bbb28d-152d-4169-9d76-d9b03cdf83db', 80.0, 5400.0, 4320.0, None, None, None, None, None, None, '2026-02-15 09:17:46.916286', '7122aeff-f628-46b4-9911-f78d467aa94e', '2026-02-16 09:17:46.918100', '2026-02-16 09:17:46.918100')
{"timestamp": "2026-02-16T09:17:46.918398Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5014s ago (insertmanyvalues) 1/1 (unordered)] ('114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', 90.0, 5400.0, 4860.0, None, None, None, None, None, None, '2026-02-16 09:17:46.916241', '32776dbf-d638-416a-917b-ef41df36b082', '2026-02-16 09:17:46.918094', '2026-02-16 09:17:46.918096', '88bbb28d-152d-4169-9d76-d9b03cdf83db', 80.0, 5400.0, 4320.0, None, None, None, None, None, None, '2026-02-15 09:17:46.916286', '7122aeff-f628-46b4-9911-f78d467aa94e', '2026-02-16 09:17:46.918100', '2026-02-16 09:17:46.918100')"}
2026-02-16 04:17:46,919 INFO sqlalchemy.engine.Engine INSERT INTO workers (factory_id, employee_id, full_name, department, job_title, primary_skill, data_source_id, hire_date, termination_date, hourly_rate, currency, is_active, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:46.919245Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO workers (factory_id, employee_id, full_name, department, job_title, primary_skill, data_source_id, hire_date, termination_date, hourly_rate, currency, is_active, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:46,919 INFO sqlalchemy.engine.Engine [cached since 0.5012s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'WK-HOURLY-01', 'Hourly Worker', None, None, None, None, None, None, None, 'USD', 1, 'a831fd6f-9ef3-4874-ad40-56aa0a2984b3', '2026-02-16 09:17:46.919135', '2026-02-16 09:17:46.919137', 0, None)
{"timestamp": "2026-02-16T09:17:46.919346Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5012s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'WK-HOURLY-01', 'Hourly Worker', None, None, None, None, None, None, None, 'USD', 1, 'a831fd6f-9ef3-4874-ad40-56aa0a2984b3', '2026-02-16 09:17:46.919135', '2026-02-16 09:17:46.919137', 0, None)"}
2026-02-16 04:17:46,920 INFO sqlalchemy.engine.Engine INSERT INTO production_outputs (worker_id, production_run_id, operation, pieces_completed, sam_earned, minutes_worked, efficiency_pct, recorded_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:46.920789Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO production_outputs (worker_id, production_run_id, operation, pieces_completed, sam_earned, minutes_worked, efficiency_pct, recorded_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:46,920 INFO sqlalchemy.engine.Engine [cached since 0.5007s ago (insertmanyvalues) 1/1 (unordered)] ('a831fd6f-9ef3-4874-ad40-56aa0a2984b3', '114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', 'Sewing', 100, None, None, None, '2026-02-16 09:30:00.000000', 'b272d83d-9861-4c25-9974-e845d21d72be', '2026-02-16 09:17:46.920610', '2026-02-16 09:17:46.920612', 'a831fd6f-9ef3-4874-ad40-56aa0a2984b3', '114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', 'Sewing', 150, None, None, None, '2026-02-16 10:30:00.000000', '69106b86-4fe7-4fd6-ae2a-17c03456af41', '2026-02-16 09:17:46.920617', '2026-02-16 09:17:46.920617')
{"timestamp": "2026-02-16T09:17:46.920922Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5007s ago (insertmanyvalues) 1/1 (unordered)] ('a831fd6f-9ef3-4874-ad40-56aa0a2984b3', '114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', 'Sewing', 100, None, None, None, '2026-02-16 09:30:00.000000', 'b272d83d-9861-4c25-9974-e845d21d72be', '2026-02-16 09:17:46.920610', '2026-02-16 09:17:46.920612', 'a831fd6f-9ef3-4874-ad40-56aa0a2984b3', '114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', 'Sewing', 150, None, None, None, '2026-02-16 10:30:00.000000', '69106b86-4fe7-4fd6-ae2a-17c03456af41', '2026-02-16 09:17:46.920617', '2026-02-16 09:17:46.920617')"}
2026-02-16 04:17:46,921 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:46.921696Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
----------------------------- Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.43s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00022s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00033s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00026s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_style_id ON production_events (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_order_id ON production_events (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00028s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_factories_organization_id ON factories (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00028s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_factory_id ON styles (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_buyer ON styles (buyer)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00019s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_style_number ON styles (style_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_po_number ON orders (po_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_status ON orders (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_style_id ON orders (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00026s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00027s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_defect_type ON defects (defect_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_worker_id ON defects (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00033s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00022s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00019s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_users_organization_id ON users (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00020s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_factory_id ON workers (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00022s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_employee_id ON workers (employee_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00022s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00020s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00023s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00021s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00021s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00024s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.49s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.33s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '2ecad19e-56ad-44db-8930-79c7b875e7f7', '2026-02-16 09:17:46.615482', '2026-02-16 09:17:46.615484', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.33s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.33s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.33s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.37s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7', 'test@example.com', '$2b$12$ULKDx5k.X6OCw50DE3rzKeDycjpd7y0ueamoE2XwgShvYXSATreTy', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '46847616-76d5-4435-8152-1fb271221518', '2026-02-16 09:17:46.903132', '2026-02-16 09:17:46.903136', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 2.119s ago] ('2ecad19e-56ad-44db-8930-79c7b875e7f7', 'Widget Test Factory', 'WTF-001', 'Test Country', None, None, 'UTC', None, None, None, None, 'en-US', 1, 'c1f767cc-943b-4d61-bd3a-66595e12d9c3', '2026-02-16 09:17:46.909382', '2026-02-16 09:17:46.909384')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.36s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'Widget Line A', 'WL-A', 15, None, None, None, None, None, None, None, None, None, 0, None, None, 1, '12c385f9-d822-4ab6-825f-dd920472c391', '2026-02-16 09:17:46.910601', '2026-02-16 09:17:46.910603')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO styles (factory_id, style_number, style_name, description, buyer, season, category, base_sam, complexity_rating, tech_pack_url, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.5038s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'STY-WIDGET-01', None, 'Complex Widget Style', None, None, None, 12.5, None, None, 1, '3158c97e-7c09-42f7-8e30-869820cb44ef', '2026-02-16 09:17:46.911668', '2026-02-16 09:17:46.911670')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO orders (style_id, po_number, quantity, uom, color, order_date, planned_cut_date, planned_sew_date, ex_factory_date, actual_ship_date, status, priority, qty_cut, qty_sewn, qty_packed, qty_shipped, notes, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.5032s ago] ('3158c97e-7c09-42f7-8e30-869820cb44ef', 'PO-WIDGET-01', 5000, 'pcs', None, None, None, None, None, None, 'sewing', 'normal', 0, 0, 0, 0, None, 'aa2a229e-0576-4d71-bd6b-65ae0561bae0', '2026-02-16 09:17:46.912692', '2026-02-16 09:17:46.912693')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.5025s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'aa2a229e-0576-4d71-bd6b-65ae0561bae0', '12c385f9-d822-4ab6-825f-dd920472c391', None, '2026-02-16 00:00:00.000000', None, 'day', None, 1000, None, None, None, None, None, None, 'Machine Failure', 0.486, 14, 1, 540.0, 'Needle broke frequently', None, None, None, None, None, None, None, None, 0, None, None, '114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', '2026-02-16 09:17:46.913877', '2026-02-16 09:17:46.913878')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.5039s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'aa2a229e-0576-4d71-bd6b-65ae0561bae0', '12c385f9-d822-4ab6-825f-dd920472c391', None, '2026-02-15 00:00:00.000000', None, 'day', None, 900, None, None, None, None, None, None, None, 0.48, 15, 0, 540.0, None, None, None, None, None, None, None, None, None, 0, None, None, '88bbb28d-152d-4169-9d76-d9b03cdf83db', '2026-02-16 09:17:46.915266', '2026-02-16 09:17:46.915268')
INFO     sqlalchemy.engine.Engine:base.py:1844 INSERT INTO dhu_reports (factory_id, report_date, period_type, avg_dhu, min_dhu, max_dhu, total_inspected, total_defects, total_rejected, top_defects, top_operations, top_lines, dhu_change_pct, trend_direction, recommendations, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1844 [cached since 0.5016s ago (insertmanyvalues) 1/1 (unordered)] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', '2026-02-16', 'daily', 2.5, None, None, 1000, 25, None, None, None, None, None, None, None, '954d6e1b-0f1f-4977-9884-5b9153d213c8', '2026-02-16 09:17:46.916708', '2026-02-16 09:17:46.916709', 'c1f767cc-943b-4d61-bd3a-66595e12d9c3', '2026-02-15', 'daily', 3.0, None, None, 900, 27, None, None, None, None, None, None, None, '0e9e92c7-b24b-48c8-92d8-c4459d3a4085', '2026-02-16 09:17:46.916714', '2026-02-16 09:17:46.916714')
INFO     sqlalchemy.engine.Engine:base.py:1844 INSERT INTO efficiency_metrics (production_run_id, efficiency_pct, sam_target, sam_actual, sam_variance, sam_variance_pct, capacity_utilization_pct, performance_tier, factory_avg_efficiency, line_avg_efficiency, calculated_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1844 [cached since 0.5014s ago (insertmanyvalues) 1/1 (unordered)] ('114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', 90.0, 5400.0, 4860.0, None, None, None, None, None, None, '2026-02-16 09:17:46.916241', '32776dbf-d638-416a-917b-ef41df36b082', '2026-02-16 09:17:46.918094', '2026-02-16 09:17:46.918096', '88bbb28d-152d-4169-9d76-d9b03cdf83db', 80.0, 5400.0, 4320.0, None, None, None, None, None, None, '2026-02-15 09:17:46.916286', '7122aeff-f628-46b4-9911-f78d467aa94e', '2026-02-16 09:17:46.918100', '2026-02-16 09:17:46.918100')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO workers (factory_id, employee_id, full_name, department, job_title, primary_skill, data_source_id, hire_date, termination_date, hourly_rate, currency, is_active, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.5012s ago] ('c1f767cc-943b-4d61-bd3a-66595e12d9c3', 'WK-HOURLY-01', 'Hourly Worker', None, None, None, None, None, None, None, 'USD', 1, 'a831fd6f-9ef3-4874-ad40-56aa0a2984b3', '2026-02-16 09:17:46.919135', '2026-02-16 09:17:46.919137', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:1844 INSERT INTO production_outputs (worker_id, production_run_id, operation, pieces_completed, sam_earned, minutes_worked, efficiency_pct, recorded_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1844 [cached since 0.5007s ago (insertmanyvalues) 1/1 (unordered)] ('a831fd6f-9ef3-4874-ad40-56aa0a2984b3', '114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', 'Sewing', 100, None, None, None, '2026-02-16 09:30:00.000000', 'b272d83d-9861-4c25-9974-e845d21d72be', '2026-02-16 09:17:46.920610', '2026-02-16 09:17:46.920612', 'a831fd6f-9ef3-4874-ad40-56aa0a2984b3', '114455f8-e0fa-4ff4-89ff-2a917f7bd3c5', 'Sewing', 150, None, None, None, '2026-02-16 10:30:00.000000', '69106b86-4fe7-4fd6-ae2a-17c03456af41', '2026-02-16 09:17:46.920617', '2026-02-16 09:17:46.920617')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
---------------------------- Captured stdout call -----------------------------
2026-02-16 04:17:46,924 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:46.924472Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:46,924 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ? AND users.is_active = 1
{"timestamp": "2026-02-16T09:17:46.924697Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ? AND users.is_active = 1"}
2026-02-16 04:17:46,924 INFO sqlalchemy.engine.Engine [cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)
{"timestamp": "2026-02-16T09:17:46.924788Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)"}
2026-02-16 04:17:46,925 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.user_id IN (?)
{"timestamp": "2026-02-16T09:17:46.925832Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE dashboards.user_id IN (?)"}
2026-02-16 04:17:46,925 INFO sqlalchemy.engine.Engine [cached since 49.36s ago] ('46847616-76d5-4435-8152-1fb271221518',)
{"timestamp": "2026-02-16T09:17:46.925936Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.36s ago] ('46847616-76d5-4435-8152-1fb271221518',)"}
2026-02-16 04:17:46,926 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE user_scopes.user_id IN (?)
{"timestamp": "2026-02-16T09:17:46.926917Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE user_scopes.user_id IN (?)"}
2026-02-16 04:17:46,926 INFO sqlalchemy.engine.Engine [cached since 49.36s ago] ('46847616-76d5-4435-8152-1fb271221518',)
{"timestamp": "2026-02-16T09:17:46.927023Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.36s ago] ('46847616-76d5-4435-8152-1fb271221518',)"}
2026-02-16 04:17:46,928 INFO sqlalchemy.engine.Engine SELECT count(production_events.id) AS count_1 
FROM production_events 
WHERE production_events.timestamp >= ? AND production_events.timestamp < ?
{"timestamp": "2026-02-16T09:17:46.928565Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT count(production_events.id) AS count_1 \nFROM production_events \nWHERE production_events.timestamp >= ? AND production_events.timestamp < ?"}
2026-02-16 04:17:46,928 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('2026-02-16 00:00:00.000000', '2026-02-17 00:00:00.000000')
{"timestamp": "2026-02-16T09:17:46.928668Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00019s] ('2026-02-16 00:00:00.000000', '2026-02-17 00:00:00.000000')"}
2026-02-16 04:17:46,929 INFO sqlalchemy.engine.Engine SELECT count(production_runs.id) AS count_1 
FROM production_runs 
WHERE date(production_runs.production_date) = ?
{"timestamp": "2026-02-16T09:17:46.929905Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT count(production_runs.id) AS count_1 \nFROM production_runs \nWHERE date(production_runs.production_date) = ?"}
2026-02-16 04:17:46,929 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('2026-02-16',)
{"timestamp": "2026-02-16T09:17:46.930006Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00017s] ('2026-02-16',)"}
2026-02-16 04:17:46,931 INFO sqlalchemy.engine.Engine SELECT date(production_runs.production_date) AS report_date, sum(quality_inspections.defects_found) AS total_defects, sum(quality_inspections.units_checked) AS total_checked 
FROM production_runs JOIN quality_inspections ON production_runs.id = quality_inspections.production_run_id 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? GROUP BY date(production_runs.production_date) ORDER BY date(production_runs.production_date) ASC
{"timestamp": "2026-02-16T09:17:46.931831Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT date(production_runs.production_date) AS report_date, sum(quality_inspections.defects_found) AS total_defects, sum(quality_inspections.units_checked) AS total_checked \nFROM production_runs JOIN quality_inspections ON production_runs.id = quality_inspections.production_run_id \nWHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? GROUP BY date(production_runs.production_date) ORDER BY date(production_runs.production_date) ASC"}
2026-02-16 04:17:46,931 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('2026-02-10', '2026-02-16')
{"timestamp": "2026-02-16T09:17:46.931939Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00019s] ('2026-02-10', '2026-02-16')"}
{"timestamp": "2026-02-16T09:17:46.932894Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://test/api/v1/analytics/dhu?days=7 \"HTTP/1.1 200 OK\""}
------------------------------ Captured log call ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ? AND users.is_active = 1
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.37s ago] ('46847616-76d5-4435-8152-1fb271221518',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.user_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.36s ago] ('46847616-76d5-4435-8152-1fb271221518',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE user_scopes.user_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.36s ago] ('46847616-76d5-4435-8152-1fb271221518',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(production_events.id) AS count_1 
FROM production_events 
WHERE production_events.timestamp >= ? AND production_events.timestamp < ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00019s] ('2026-02-16 00:00:00.000000', '2026-02-17 00:00:00.000000')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(production_runs.id) AS count_1 
FROM production_runs 
WHERE date(production_runs.production_date) = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00017s] ('2026-02-16',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT date(production_runs.production_date) AS report_date, sum(quality_inspections.defects_found) AS total_defects, sum(quality_inspections.units_checked) AS total_checked 
FROM production_runs JOIN quality_inspections ON production_runs.id = quality_inspections.production_run_id 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? GROUP BY date(production_runs.production_date) ORDER BY date(production_runs.production_date) ASC
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00019s] ('2026-02-10', '2026-02-16')
INFO     httpx:_client.py:1740 HTTP Request: GET http://test/api/v1/analytics/dhu?days=7 "HTTP/1.1 200 OK"
-------------------------- Captured stdout teardown ---------------------------
2026-02-16 04:17:46,940 INFO sqlalchemy.engine.Engine ROLLBACK
{"timestamp": "2026-02-16T09:17:46.940921Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK"}
2026-02-16 04:17:46,941 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:46.941494Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:46,941 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:17:46.941713Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 04:17:46,941 INFO sqlalchemy.engine.Engine [cached since 49.9s ago] ()
{"timestamp": "2026-02-16T09:17:46.941801Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.9s ago] ()"}
2026-02-16 04:17:46,942 INFO sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table'
{"timestamp": "2026-02-16T09:17:46.942375Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT name FROM sqlite_master WHERE type='table'"}
2026-02-16 04:17:46,942 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.942474Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,943 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "ai_decisions"
{"timestamp": "2026-02-16T09:17:46.943282Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"ai_decisions\""}
2026-02-16 04:17:46,943 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.943375Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,944 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "alias_mappings"
{"timestamp": "2026-02-16T09:17:46.944077Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"alias_mappings\""}
2026-02-16 04:17:46,944 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.944173Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,944 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "efficiency_metrics"
{"timestamp": "2026-02-16T09:17:46.944818Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"efficiency_metrics\""}
2026-02-16 04:17:46,944 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.944903Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,945 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dhu_reports"
{"timestamp": "2026-02-16T09:17:46.945462Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dhu_reports\""}
2026-02-16 04:17:46,945 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.945555Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,946 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dashboards"
{"timestamp": "2026-02-16T09:17:46.946173Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dashboards\""}
2026-02-16 04:17:46,946 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.946268Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,946 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_quality_issues"
{"timestamp": "2026-02-16T09:17:46.946864Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_quality_issues\""}
2026-02-16 04:17:46,946 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.946945Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,947 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_sources"
{"timestamp": "2026-02-16T09:17:46.947510Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_sources\""}
2026-02-16 04:17:46,947 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.947596Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,948 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "schema_mappings"
{"timestamp": "2026-02-16T09:17:46.948168Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"schema_mappings\""}
2026-02-16 04:17:46,948 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.948252Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,948 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_events"
{"timestamp": "2026-02-16T09:17:46.948846Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_events\""}
2026-02-16 04:17:46,948 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.948950Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,949 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "factories"
{"timestamp": "2026-02-16T09:17:46.949526Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"factories\""}
2026-02-16 04:17:46,949 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.949607Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,950 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "styles"
{"timestamp": "2026-02-16T09:17:46.950146Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"styles\""}
2026-02-16 04:17:46,950 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.950229Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,950 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "orders"
{"timestamp": "2026-02-16T09:17:46.951056Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"orders\""}
2026-02-16 04:17:46,951 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.951184Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,951 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_runs"
{"timestamp": "2026-02-16T09:17:46.951802Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_runs\""}
2026-02-16 04:17:46,951 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.951891Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,952 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "quality_inspections"
{"timestamp": "2026-02-16T09:17:46.952555Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"quality_inspections\""}
2026-02-16 04:17:46,952 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.952639Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,953 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "defects"
{"timestamp": "2026-02-16T09:17:46.953216Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"defects\""}
2026-02-16 04:17:46,953 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.953296Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,953 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "raw_imports"
{"timestamp": "2026-02-16T09:17:46.953858Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"raw_imports\""}
2026-02-16 04:17:46,953 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.953954Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,954 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "staging_records"
{"timestamp": "2026-02-16T09:17:46.954528Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"staging_records\""}
2026-02-16 04:17:46,954 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.954612Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,955 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "organizations"
{"timestamp": "2026-02-16T09:17:46.955200Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"organizations\""}
2026-02-16 04:17:46,955 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.955301Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,955 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "users"
{"timestamp": "2026-02-16T09:17:46.955863Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"users\""}
2026-02-16 04:17:46,955 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.955949Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,956 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "user_scopes"
{"timestamp": "2026-02-16T09:17:46.956493Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"user_scopes\""}
2026-02-16 04:17:46,956 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.956592Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,957 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "waitlist"
{"timestamp": "2026-02-16T09:17:46.957221Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"waitlist\""}
2026-02-16 04:17:46,957 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.957331Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,957 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "workers"
{"timestamp": "2026-02-16T09:17:46.957877Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"workers\""}
2026-02-16 04:17:46,957 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.957968Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,958 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_skills"
{"timestamp": "2026-02-16T09:17:46.958514Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_skills\""}
2026-02-16 04:17:46,958 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.958595Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,959 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_attendances"
{"timestamp": "2026-02-16T09:17:46.959161Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_attendances\""}
2026-02-16 04:17:46,959 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.959251Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,959 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_outputs"
{"timestamp": "2026-02-16T09:17:46.959831Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_outputs\""}
2026-02-16 04:17:46,959 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.959912Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,960 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "fabric_lots"
{"timestamp": "2026-02-16T09:17:46.960478Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"fabric_lots\""}
2026-02-16 04:17:46,960 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.960573Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,961 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cut_tickets"
{"timestamp": "2026-02-16T09:17:46.961122Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cut_tickets\""}
2026-02-16 04:17:46,961 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.961211Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,961 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "packing_lists"
{"timestamp": "2026-02-16T09:17:46.961780Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"packing_lists\""}
2026-02-16 04:17:46,961 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.961872Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,962 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cartons"
{"timestamp": "2026-02-16T09:17:46.962475Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cartons\""}
2026-02-16 04:17:46,962 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.962628Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,963 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "traceability_records"
{"timestamp": "2026-02-16T09:17:46.963366Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"traceability_records\""}
2026-02-16 04:17:46,963 INFO sqlalchemy.engine.Engine [cached since 48.16s ago] ()
{"timestamp": "2026-02-16T09:17:46.963464Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.16s ago] ()"}
2026-02-16 04:17:46,964 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:17:46.964083Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 04:17:46,964 INFO sqlalchemy.engine.Engine [cached since 49.84s ago] ()
{"timestamp": "2026-02-16T09:17:46.964179Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.84s ago] ()"}
2026-02-16 04:17:46,964 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:46.964686Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
---------------------------- Captured log teardown ----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.9s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT name FROM sqlite_master WHERE type='table'
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "ai_decisions"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "alias_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "efficiency_metrics"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dhu_reports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dashboards"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_quality_issues"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_sources"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "schema_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_events"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "factories"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "styles"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "orders"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_runs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "quality_inspections"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "defects"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "raw_imports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "staging_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "organizations"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "users"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "user_scopes"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "waitlist"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "workers"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_skills"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_attendances"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_outputs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "fabric_lots"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cut_tickets"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "packing_lists"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cartons"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "traceability_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.16s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.84s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
__________________________ test_get_speed_vs_quality __________________________
backend\tests\test_api\test_individual_widgets.py:351: in test_get_speed_vs_quality
    assert point is not None
E   assert None is not None
---------------------------- Captured stdout setup ----------------------------
2026-02-16 04:17:46,969 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:46.969672Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:46,969 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:17:46.969919Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 04:17:46,969 INFO sqlalchemy.engine.Engine [cached since 49.93s ago] ()
{"timestamp": "2026-02-16T09:17:46.970008Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.93s ago] ()"}
2026-02-16 04:17:46,970 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:17:46.970614Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"ai_decisions\")"}
2026-02-16 04:17:46,970 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.970713Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,971 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:17:46.971270Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"ai_decisions\")"}
2026-02-16 04:17:46,971 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.971355Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,972 INFO sqlalchemy.engine.Engine 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


{"timestamp": "2026-02-16T09:17:46.972229Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE ai_decisions (\n\tdata_source_id VARCHAR(36), \n\tagent_type VARCHAR(16) NOT NULL, \n\tmodel_used VARCHAR(50) NOT NULL, \n\tinput_summary TEXT NOT NULL, \n\toutput_summary TEXT NOT NULL, \n\tconfidence FLOAT, \n\treasoning JSON, \n\tperformance_metadata JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id)\n)\n\n"}
2026-02-16 04:17:46,972 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.972337Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,972 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
{"timestamp": "2026-02-16T09:17:46.973006Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)"}
2026-02-16 04:17:46,973 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.973103Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,973 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
{"timestamp": "2026-02-16T09:17:46.973649Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)"}
2026-02-16 04:17:46,973 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:46.973732Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:46,974 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:17:46.974269Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"alias_mappings\")"}
2026-02-16 04:17:46,974 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.974356Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,974 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:17:46.974931Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"alias_mappings\")"}
2026-02-16 04:17:46,974 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.975025Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,975 INFO sqlalchemy.engine.Engine 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.975850Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE alias_mappings (\n\tscope VARCHAR(50) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tsource_alias VARCHAR(255) NOT NULL, \n\tsource_alias_normalized VARCHAR(255) NOT NULL, \n\tcanonical_field VARCHAR(100) NOT NULL, \n\tusage_count INTEGER NOT NULL, \n\tlast_used_at DATETIME NOT NULL, \n\tcreated_by_id CHAR(36), \n\tcorrection_count INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,975 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.975956Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,976 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
{"timestamp": "2026-02-16T09:17:46.976590Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)"}
2026-02-16 04:17:46,976 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.976685Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,977 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
{"timestamp": "2026-02-16T09:17:46.977227Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)"}
2026-02-16 04:17:46,977 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.977320Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,977 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
{"timestamp": "2026-02-16T09:17:46.977841Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)"}
2026-02-16 04:17:46,977 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:46.977948Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:46,978 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
{"timestamp": "2026-02-16T09:17:46.978487Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)"}
2026-02-16 04:17:46,978 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.978579Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,979 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
{"timestamp": "2026-02-16T09:17:46.979166Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)"}
2026-02-16 04:17:46,979 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.979260Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,979 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
{"timestamp": "2026-02-16T09:17:46.979789Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)"}
2026-02-16 04:17:46,979 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:46.979874Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:46,980 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:17:46.980384Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"efficiency_metrics\")"}
2026-02-16 04:17:46,980 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.980466Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,981 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:17:46.981059Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"efficiency_metrics\")"}
2026-02-16 04:17:46,981 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.981152Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,981 INFO sqlalchemy.engine.Engine 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.981947Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE efficiency_metrics (\n\tproduction_run_id CHAR(36) NOT NULL, \n\tefficiency_pct NUMERIC(6, 2), \n\tsam_target NUMERIC(10, 2), \n\tsam_actual NUMERIC(10, 2), \n\tsam_variance NUMERIC(8, 2), \n\tsam_variance_pct NUMERIC(6, 2), \n\tcapacity_utilization_pct NUMERIC(6, 2), \n\tperformance_tier VARCHAR(12), \n\tfactory_avg_efficiency NUMERIC(6, 2), \n\tline_avg_efficiency NUMERIC(6, 2), \n\tcalculated_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,982 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.982047Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,982 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
{"timestamp": "2026-02-16T09:17:46.982639Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)"}
2026-02-16 04:17:46,982 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.982736Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,983 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:17:46.983299Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dhu_reports\")"}
2026-02-16 04:17:46,983 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.983388Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,984 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:17:46.984143Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dhu_reports\")"}
2026-02-16 04:17:46,984 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.984281Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,985 INFO sqlalchemy.engine.Engine 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.985059Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dhu_reports (\n\tfactory_id CHAR(36) NOT NULL, \n\treport_date DATE NOT NULL, \n\tperiod_type VARCHAR(7) NOT NULL, \n\tavg_dhu NUMERIC(6, 2), \n\tmin_dhu NUMERIC(6, 2), \n\tmax_dhu NUMERIC(6, 2), \n\ttotal_inspected INTEGER, \n\ttotal_defects INTEGER, \n\ttotal_rejected INTEGER, \n\ttop_defects TEXT, \n\ttop_operations TEXT, \n\ttop_lines TEXT, \n\tdhu_change_pct NUMERIC(6, 2), \n\ttrend_direction VARCHAR(20), \n\trecommendations TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,985 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.985162Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,985 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
{"timestamp": "2026-02-16T09:17:46.985819Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)"}
2026-02-16 04:17:46,985 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.985916Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,986 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
{"timestamp": "2026-02-16T09:17:46.986487Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)"}
2026-02-16 04:17:46,986 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.986573Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,987 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dashboards")
{"timestamp": "2026-02-16T09:17:46.987125Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dashboards\")"}
2026-02-16 04:17:46,987 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.987214Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,987 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dashboards")
{"timestamp": "2026-02-16T09:17:46.987779Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dashboards\")"}
2026-02-16 04:17:46,987 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.987865Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,988 INFO sqlalchemy.engine.Engine 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.988654Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dashboards (\n\tuser_id CHAR(36) NOT NULL, \n\tname VARCHAR(200) NOT NULL, \n\tdescription TEXT, \n\tdata_source_id CHAR(36), \n\twidget_config TEXT, \n\tlayout_config TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tCONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,988 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.988749Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,989 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
{"timestamp": "2026-02-16T09:17:46.989350Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)"}
2026-02-16 04:17:46,989 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:46.989450Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:46,989 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
{"timestamp": "2026-02-16T09:17:46.989992Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)"}
2026-02-16 04:17:46,990 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:46.990074Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:46,990 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:17:46.990661Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_quality_issues\")"}
2026-02-16 04:17:46,990 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.990748Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,991 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:17:46.991321Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_quality_issues\")"}
2026-02-16 04:17:46,991 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.991403Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,992 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:46.992163Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_quality_issues (\n\traw_import_id VARCHAR(36) NOT NULL, \n\trow_number INTEGER, \n\tissue_type VARCHAR(50) NOT NULL, \n\tseverity VARCHAR(20) NOT NULL, \n\tmessage TEXT NOT NULL, \n\tfield_name VARCHAR(100), \n\tfield_value VARCHAR(500), \n\tresolved_at DATETIME, \n\tresolved_by_user_id VARCHAR(36), \n\tresolution_notes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, \n\tFOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:46,992 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.992262Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,992 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
{"timestamp": "2026-02-16T09:17:46.993014Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)"}
2026-02-16 04:17:46,993 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.993121Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,993 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
{"timestamp": "2026-02-16T09:17:46.993792Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)"}
2026-02-16 04:17:46,993 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:46.993887Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:46,994 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
{"timestamp": "2026-02-16T09:17:46.994462Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)"}
2026-02-16 04:17:46,994 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:46.994546Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:46,995 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_sources")
{"timestamp": "2026-02-16T09:17:46.995139Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_sources\")"}
2026-02-16 04:17:46,995 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.995232Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,995 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_sources")
{"timestamp": "2026-02-16T09:17:46.995770Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_sources\")"}
2026-02-16 04:17:46,995 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.995847Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,996 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:46.996652Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_sources (\n\tfactory_id CHAR(36), \n\tname VARCHAR(100) NOT NULL, \n\tcode VARCHAR(50), \n\ttarget_operators INTEGER, \n\ttarget_efficiency_pct INTEGER, \n\tsettings JSON, \n\tspecialty VARCHAR(100), \n\tsupervisor_id CHAR(36), \n\tproduction_line_id CHAR(36), \n\tsource_name VARCHAR(255), \n\tdescription TEXT, \n\ttime_column VARCHAR(100), \n\ttime_format VARCHAR(50), \n\tschema_config JSON, \n\tparent_data_source_id CHAR(36), \n\tis_segment BOOLEAN NOT NULL, \n\tdate_range_start DATE, \n\tdate_range_end DATE, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, \n\tFOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:46,996 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:46.996753Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:46,997 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
{"timestamp": "2026-02-16T09:17:46.997394Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)"}
2026-02-16 04:17:46,997 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:46.997478Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:46,997 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
{"timestamp": "2026-02-16T09:17:46.997999Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)"}
2026-02-16 04:17:46,998 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:46.998093Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:46,998 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:17:46.998627Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"schema_mappings\")"}
2026-02-16 04:17:46,998 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.998725Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:46,999 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:17:46.999227Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"schema_mappings\")"}
2026-02-16 04:17:46,999 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:46.999315Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,000 INFO sqlalchemy.engine.Engine 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.000050Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE schema_mappings (\n\tdata_source_id CHAR(36) NOT NULL, \n\tversion INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tcolumn_map JSON NOT NULL, \n\textraction_rules JSON, \n\treviewed_by_user BOOLEAN NOT NULL, \n\tuser_notes TEXT, \n\tmatching_tier VARCHAR(20), \n\ttier_confidence FLOAT, \n\ttier_breakdown JSON, \n\tfuzzy_scores JSON, \n\tuser_corrected BOOLEAN NOT NULL, \n\tcorrection_count INTEGER, \n\tcorrection_history JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,000 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.000139Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,001 INFO sqlalchemy.engine.Engine CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
{"timestamp": "2026-02-16T09:17:47.001119Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)"}
2026-02-16 04:17:47,001 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:47.001219Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:47,001 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_events")
{"timestamp": "2026-02-16T09:17:47.001908Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_events\")"}
2026-02-16 04:17:47,001 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.002001Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,002 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_events")
{"timestamp": "2026-02-16T09:17:47.002533Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_events\")"}
2026-02-16 04:17:47,002 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.002626Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,003 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:47.003369Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_events (\n\ttimestamp DATETIME NOT NULL, \n\tevent_type VARCHAR(17) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tstyle_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36), \n\tsource_import_id VARCHAR(36), \n\traw_data JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:47,003 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:47.003470Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:47,004 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
{"timestamp": "2026-02-16T09:17:47.004153Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)"}
2026-02-16 04:17:47,004 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.004247Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,004 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
{"timestamp": "2026-02-16T09:17:47.004737Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)"}
2026-02-16 04:17:47,004 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.004834Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,005 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
{"timestamp": "2026-02-16T09:17:47.005321Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)"}
2026-02-16 04:17:47,005 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.005409Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,005 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
{"timestamp": "2026-02-16T09:17:47.006049Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)"}
2026-02-16 04:17:47,006 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.006134Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,006 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_style_id ON production_events (style_id)
{"timestamp": "2026-02-16T09:17:47.006725Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_style_id ON production_events (style_id)"}
2026-02-16 04:17:47,006 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.006810Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,007 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_order_id ON production_events (order_id)
{"timestamp": "2026-02-16T09:17:47.007431Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_order_id ON production_events (order_id)"}
2026-02-16 04:17:47,007 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.007526Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,008 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("factories")
{"timestamp": "2026-02-16T09:17:47.008093Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"factories\")"}
2026-02-16 04:17:47,008 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.008184Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,008 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("factories")
{"timestamp": "2026-02-16T09:17:47.008738Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"factories\")"}
2026-02-16 04:17:47,008 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.008820Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,009 INFO sqlalchemy.engine.Engine 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:17:47.009660Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE factories (\n\torganization_id CHAR(36) NOT NULL, \n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50) NOT NULL, \n\tcountry VARCHAR(100) NOT NULL, \n\tcity VARCHAR(100), \n\taddress TEXT, \n\ttimezone VARCHAR(50) NOT NULL, \n\ttotal_lines INTEGER, \n\ttotal_workers INTEGER, \n\tdaily_capacity_units INTEGER, \n\tcertifications TEXT, \n\tsettings JSON, \n\tlocale VARCHAR(20) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 04:17:47,009 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.009759Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,010 INFO sqlalchemy.engine.Engine CREATE INDEX ix_factories_organization_id ON factories (organization_id)
{"timestamp": "2026-02-16T09:17:47.010363Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_factories_organization_id ON factories (organization_id)"}
2026-02-16 04:17:47,010 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.010448Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,010 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("styles")
{"timestamp": "2026-02-16T09:17:47.010999Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"styles\")"}
2026-02-16 04:17:47,011 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.011084Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,011 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("styles")
{"timestamp": "2026-02-16T09:17:47.011639Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"styles\")"}
2026-02-16 04:17:47,011 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.011724Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,012 INFO sqlalchemy.engine.Engine 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.012503Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE styles (\n\tfactory_id VARCHAR(36) NOT NULL, \n\tstyle_number VARCHAR(100) NOT NULL, \n\tstyle_name VARCHAR(255), \n\tdescription VARCHAR(500), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tcategory VARCHAR(100), \n\tbase_sam NUMERIC(12, 4), \n\tcomplexity_rating VARCHAR(20), \n\tbom_summary JSON, \n\ttech_pack_url VARCHAR(500), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,012 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.012595Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,013 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_factory_id ON styles (factory_id)
{"timestamp": "2026-02-16T09:17:47.013157Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_factory_id ON styles (factory_id)"}
2026-02-16 04:17:47,013 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:47.013236Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:47,013 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_buyer ON styles (buyer)
{"timestamp": "2026-02-16T09:17:47.013760Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_buyer ON styles (buyer)"}
2026-02-16 04:17:47,013 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.013856Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,014 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_style_number ON styles (style_number)
{"timestamp": "2026-02-16T09:17:47.014377Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_style_number ON styles (style_number)"}
2026-02-16 04:17:47,014 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.014460Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,014 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("orders")
{"timestamp": "2026-02-16T09:17:47.014959Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"orders\")"}
2026-02-16 04:17:47,015 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.015034Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,015 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("orders")
{"timestamp": "2026-02-16T09:17:47.015577Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"orders\")"}
2026-02-16 04:17:47,015 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.015670Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,016 INFO sqlalchemy.engine.Engine 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.016438Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE orders (\n\tstyle_id VARCHAR(36) NOT NULL, \n\tpo_number VARCHAR(100) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tsize_breakdown JSON, \n\tuom VARCHAR(20) NOT NULL, \n\tcolor VARCHAR(100), \n\torder_date DATETIME, \n\tplanned_cut_date DATETIME, \n\tplanned_sew_date DATETIME, \n\tex_factory_date DATETIME, \n\tactual_ship_date DATETIME, \n\tstatus VARCHAR(20) NOT NULL, \n\tpriority VARCHAR(20) NOT NULL, \n\tqty_cut INTEGER NOT NULL, \n\tqty_sewn INTEGER NOT NULL, \n\tqty_packed INTEGER NOT NULL, \n\tqty_shipped INTEGER NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_style_po UNIQUE (style_id, po_number), \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,016 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:47.016544Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:47,017 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_po_number ON orders (po_number)
{"timestamp": "2026-02-16T09:17:47.017337Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_po_number ON orders (po_number)"}
2026-02-16 04:17:47,017 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:17:47.017488Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 04:17:47,018 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_status ON orders (status)
{"timestamp": "2026-02-16T09:17:47.018147Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_status ON orders (status)"}
2026-02-16 04:17:47,018 INFO sqlalchemy.engine.Engine [no key 0.00021s] ()
{"timestamp": "2026-02-16T09:17:47.018296Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00021s] ()"}
2026-02-16 04:17:47,018 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_style_id ON orders (style_id)
{"timestamp": "2026-02-16T09:17:47.018865Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_style_id ON orders (style_id)"}
2026-02-16 04:17:47,018 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.018949Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,019 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_runs")
{"timestamp": "2026-02-16T09:17:47.019468Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_runs\")"}
2026-02-16 04:17:47,019 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.019554Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,020 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_runs")
{"timestamp": "2026-02-16T09:17:47.020094Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_runs\")"}
2026-02-16 04:17:47,020 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.020169Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,021 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:47.021147Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_runs (\n\tfactory_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\tsource_import_id VARCHAR(36), \n\tproduction_date DATETIME, \n\tinspection_date DATETIME, \n\tshift VARCHAR(20) NOT NULL, \n\tplanned_qty INTEGER, \n\tactual_qty INTEGER NOT NULL, \n\twip_start INTEGER, \n\twip_end INTEGER, \n\tlot_number VARCHAR(50), \n\tshade_band VARCHAR(10), \n\tbatch_number VARCHAR(50), \n\tdowntime_minutes INTEGER, \n\tdowntime_reason VARCHAR(255), \n\tsam NUMERIC(12, 4), \n\toperators_present INTEGER NOT NULL, \n\thelpers_present INTEGER NOT NULL, \n\tworked_minutes NUMERIC(12, 4) NOT NULL, \n\tearned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), \n\tefficiency NUMERIC(10, 2) GENERATED ALWAYS AS (\n            CASE\n                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL\n                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100\n                ELSE 0\n            END\n            ), \n\tnotes TEXT, \n\tstart_time TIME, \n\tend_time TIME, \n\tstyle_number VARCHAR(100), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tpo_number VARCHAR(100), \n\tcolor VARCHAR(100), \n\tsize VARCHAR(50), \n\tdefects INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tline_efficiency NUMERIC(10, 2), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT check_positive_qty CHECK (actual_qty >= 0), \n\tCONSTRAINT check_positive_operators CHECK (operators_present >= 0), \n\tCONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), \n\tCONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), \n\tCONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), \n\tCONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), \n\tCONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:47,021 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:47.021281Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:47,021 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
{"timestamp": "2026-02-16T09:17:47.021982Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)"}
2026-02-16 04:17:47,022 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.022077Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,022 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
{"timestamp": "2026-02-16T09:17:47.022633Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)"}
2026-02-16 04:17:47,022 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.022724Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,023 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
{"timestamp": "2026-02-16T09:17:47.023253Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)"}
2026-02-16 04:17:47,023 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.023343Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,023 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
{"timestamp": "2026-02-16T09:17:47.023879Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)"}
2026-02-16 04:17:47,023 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.023988Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,024 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
{"timestamp": "2026-02-16T09:17:47.024516Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)"}
2026-02-16 04:17:47,024 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:17:47.024672Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 04:17:47,025 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
{"timestamp": "2026-02-16T09:17:47.025199Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)"}
2026-02-16 04:17:47,025 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.025280Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,025 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
{"timestamp": "2026-02-16T09:17:47.025755Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)"}
2026-02-16 04:17:47,025 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.025838Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,026 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
{"timestamp": "2026-02-16T09:17:47.026361Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)"}
2026-02-16 04:17:47,026 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:47.026439Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:47,026 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:17:47.026984Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"quality_inspections\")"}
2026-02-16 04:17:47,027 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.027075Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,027 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:17:47.027632Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"quality_inspections\")"}
2026-02-16 04:17:47,027 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.027718Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,028 INFO sqlalchemy.engine.Engine 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:47.028440Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE quality_inspections (\n\tproduction_run_id VARCHAR(36) NOT NULL, \n\tinspector_id VARCHAR(36), \n\tinspection_type VARCHAR(7) NOT NULL, \n\tunits_checked INTEGER NOT NULL, \n\tdefects_found INTEGER NOT NULL, \n\tunits_rejected INTEGER NOT NULL, \n\tunits_reworked INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\taql_level VARCHAR(20), \n\taql_result VARCHAR(7), \n\tinspected_at DATETIME NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:47,028 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:47.028543Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:47,029 INFO sqlalchemy.engine.Engine CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
{"timestamp": "2026-02-16T09:17:47.029130Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)"}
2026-02-16 04:17:47,029 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.029208Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,029 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("defects")
{"timestamp": "2026-02-16T09:17:47.029765Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"defects\")"}
2026-02-16 04:17:47,029 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.029847Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,030 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("defects")
{"timestamp": "2026-02-16T09:17:47.030362Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"defects\")"}
2026-02-16 04:17:47,030 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.030446Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,031 INFO sqlalchemy.engine.Engine 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:47.031194Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE defects (\n\tinspection_id VARCHAR(36) NOT NULL, \n\tworker_id VARCHAR(36), \n\tdefect_type VARCHAR(100) NOT NULL, \n\tdefect_code VARCHAR(20), \n\tdefect_category VARCHAR(100), \n\toperation VARCHAR(100), \n\tseverity VARCHAR(8) NOT NULL, \n\tis_reworkable BOOLEAN NOT NULL, \n\tis_reworked BOOLEAN NOT NULL, \n\troot_cause VARCHAR(255), \n\tmachine_id VARCHAR(50), \n\timage_url VARCHAR(500), \n\tcount INTEGER NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:47,031 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:17:47.031330Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 04:17:47,031 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_defect_type ON defects (defect_type)
{"timestamp": "2026-02-16T09:17:47.031940Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_defect_type ON defects (defect_type)"}
2026-02-16 04:17:47,032 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:17:47.032102Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 04:17:47,032 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_worker_id ON defects (worker_id)
{"timestamp": "2026-02-16T09:17:47.032676Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_worker_id ON defects (worker_id)"}
2026-02-16 04:17:47,032 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.032765Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,033 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
{"timestamp": "2026-02-16T09:17:47.033347Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)"}
2026-02-16 04:17:47,033 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.033484Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,034 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("raw_imports")
{"timestamp": "2026-02-16T09:17:47.034211Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"raw_imports\")"}
2026-02-16 04:17:47,034 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.034307Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,034 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("raw_imports")
{"timestamp": "2026-02-16T09:17:47.034917Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"raw_imports\")"}
2026-02-16 04:17:47,034 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.035005Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,035 INFO sqlalchemy.engine.Engine 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:47.035880Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE raw_imports (\n\tuploaded_by_id VARCHAR(36), \n\tfactory_id VARCHAR(36), \n\tproduction_line_id VARCHAR(36), \n\tdata_source_id VARCHAR(36), \n\ttime_column_used VARCHAR(100), \n\toriginal_filename VARCHAR(500) NOT NULL, \n\tfile_path VARCHAR(1000) NOT NULL, \n\tfile_size_bytes INTEGER NOT NULL, \n\tfile_hash VARCHAR(64) NOT NULL, \n\tmime_type VARCHAR(100), \n\tencoding_detected VARCHAR(50), \n\tsheet_count INTEGER NOT NULL, \n\tsheet_names TEXT, \n\trow_count INTEGER, \n\tcolumn_count INTEGER, \n\theader_row_detected INTEGER, \n\traw_headers TEXT, \n\tsample_data TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tprocessing_error TEXT, \n\tprocessed_at DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:47,036 INFO sqlalchemy.engine.Engine [no key 0.00021s] ()
{"timestamp": "2026-02-16T09:17:47.036068Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00021s] ()"}
2026-02-16 04:17:47,036 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
{"timestamp": "2026-02-16T09:17:47.036736Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)"}
2026-02-16 04:17:47,036 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.036827Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,037 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
{"timestamp": "2026-02-16T09:17:47.037381Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)"}
2026-02-16 04:17:47,037 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:17:47.037457Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:17:47,037 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
{"timestamp": "2026-02-16T09:17:47.038021Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)"}
2026-02-16 04:17:47,038 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:47.038120Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:47,038 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
{"timestamp": "2026-02-16T09:17:47.038694Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)"}
2026-02-16 04:17:47,038 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.038784Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,039 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("staging_records")
{"timestamp": "2026-02-16T09:17:47.039321Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"staging_records\")"}
2026-02-16 04:17:47,039 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.039402Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,039 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("staging_records")
{"timestamp": "2026-02-16T09:17:47.039964Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"staging_records\")"}
2026-02-16 04:17:47,040 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.040059Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,040 INFO sqlalchemy.engine.Engine 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.040836Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE staging_records (\n\traw_import_id VARCHAR(36) NOT NULL, \n\tsource_row_number INTEGER NOT NULL, \n\tstatus VARCHAR(50) NOT NULL, \n\tvalidation_errors TEXT, \n\tvalidation_warnings TEXT, \n\trecord_data TEXT NOT NULL, \n\tnormalized_data TEXT, \n\tquality_score FLOAT, \n\tnull_field_count INTEGER, \n\tpromoted_at DATETIME, \n\tpromoted_to_table VARCHAR(100), \n\tpromoted_record_id VARCHAR(36), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,040 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:17:47.040935Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 04:17:47,041 INFO sqlalchemy.engine.Engine CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
{"timestamp": "2026-02-16T09:17:47.041492Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)"}
2026-02-16 04:17:47,041 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.041582Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,042 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("organizations")
{"timestamp": "2026-02-16T09:17:47.042155Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"organizations\")"}
2026-02-16 04:17:47,042 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.042239Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,042 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("organizations")
{"timestamp": "2026-02-16T09:17:47.042771Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"organizations\")"}
2026-02-16 04:17:47,042 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.042850Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,043 INFO sqlalchemy.engine.Engine 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:17:47.043568Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE organizations (\n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50), \n\tsubscription_tier VARCHAR(10) NOT NULL, \n\tsettings TEXT, \n\tmax_factories INTEGER NOT NULL, \n\tmax_lines_per_factory INTEGER NOT NULL, \n\tprimary_email VARCHAR(255), \n\tprimary_phone VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 04:17:47,043 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.043662Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,044 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
{"timestamp": "2026-02-16T09:17:47.044237Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"users\")"}
2026-02-16 04:17:47,044 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.044371Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,044 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("users")
{"timestamp": "2026-02-16T09:17:47.044898Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"users\")"}
2026-02-16 04:17:47,044 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.044980Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,045 INFO sqlalchemy.engine.Engine 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


{"timestamp": "2026-02-16T09:17:47.045744Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE users (\n\torganization_id CHAR(36) NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\thashed_password VARCHAR(255) NOT NULL, \n\tfull_name VARCHAR(255), \n\tavatar_url VARCHAR(500), \n\ttimezone VARCHAR(50), \n\tpreferences TEXT, \n\trole VARCHAR(15) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tis_verified BOOLEAN NOT NULL, \n\tlast_login DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (email)\n)\n\n"}
2026-02-16 04:17:47,045 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.045843Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,046 INFO sqlalchemy.engine.Engine CREATE INDEX ix_users_organization_id ON users (organization_id)
{"timestamp": "2026-02-16T09:17:47.046435Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_users_organization_id ON users (organization_id)"}
2026-02-16 04:17:47,046 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.046520Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,047 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_scopes")
{"timestamp": "2026-02-16T09:17:47.047104Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"user_scopes\")"}
2026-02-16 04:17:47,047 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.047185Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,047 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("user_scopes")
{"timestamp": "2026-02-16T09:17:47.047613Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"user_scopes\")"}
2026-02-16 04:17:47,047 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.047686Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,048 INFO sqlalchemy.engine.Engine 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.048438Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE user_scopes (\n\tuser_id CHAR(36) NOT NULL, \n\tscope_type VARCHAR(12) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tdata_source_id CHAR(36), \n\trole VARCHAR(15) NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,048 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:17:47.048553Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 04:17:47,049 INFO sqlalchemy.engine.Engine CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
{"timestamp": "2026-02-16T09:17:47.049114Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)"}
2026-02-16 04:17:47,049 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.049193Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,049 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("waitlist")
{"timestamp": "2026-02-16T09:17:47.049676Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"waitlist\")"}
2026-02-16 04:17:47,049 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.049758Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,050 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("waitlist")
{"timestamp": "2026-02-16T09:17:47.050376Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"waitlist\")"}
2026-02-16 04:17:47,050 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.050591Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,051 INFO sqlalchemy.engine.Engine 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


{"timestamp": "2026-02-16T09:17:47.051340Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE waitlist (\n\tid INTEGER NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\treferral_code VARCHAR(8) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n"}
2026-02-16 04:17:47,051 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.051434Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,051 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
{"timestamp": "2026-02-16T09:17:47.052026Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)"}
2026-02-16 04:17:47,052 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.052110Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,052 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
{"timestamp": "2026-02-16T09:17:47.052652Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)"}
2026-02-16 04:17:47,052 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:47.052781Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:47,053 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("workers")
{"timestamp": "2026-02-16T09:17:47.053331Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"workers\")"}
2026-02-16 04:17:47,053 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.053418Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,054 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("workers")
{"timestamp": "2026-02-16T09:17:47.054105Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"workers\")"}
2026-02-16 04:17:47,054 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.054235Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,055 INFO sqlalchemy.engine.Engine 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:47.055092Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE workers (\n\tfactory_id VARCHAR(36) NOT NULL, \n\temployee_id VARCHAR(50) NOT NULL, \n\tfull_name VARCHAR(255) NOT NULL, \n\tdepartment VARCHAR(100), \n\tjob_title VARCHAR(100), \n\tprimary_skill VARCHAR(100), \n\tdata_source_id VARCHAR(36), \n\thire_date DATE, \n\ttermination_date DATE, \n\thourly_rate NUMERIC(10, 2), \n\tcurrency VARCHAR(3), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:47,055 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.055185Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,056 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_factory_id ON workers (factory_id)
{"timestamp": "2026-02-16T09:17:47.056117Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_factory_id ON workers (factory_id)"}
2026-02-16 04:17:47,056 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:47.056341Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:47,056 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_employee_id ON workers (employee_id)
{"timestamp": "2026-02-16T09:17:47.056971Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_employee_id ON workers (employee_id)"}
2026-02-16 04:17:47,057 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.057061Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,057 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_skills")
{"timestamp": "2026-02-16T09:17:47.057660Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_skills\")"}
2026-02-16 04:17:47,057 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.057753Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,058 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_skills")
{"timestamp": "2026-02-16T09:17:47.058354Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_skills\")"}
2026-02-16 04:17:47,058 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.058474Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,059 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.059486Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_skills (\n\tworker_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\toperation_category VARCHAR(100), \n\tproficiency_pct NUMERIC(5, 2), \n\tsam_achieved NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\tpieces_lifetime INTEGER, \n\tpieces_30d INTEGER, \n\tis_certified BOOLEAN NOT NULL, \n\tcertification_date DATE, \n\tlast_assessed DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,059 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:47.059582Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:47,060 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
{"timestamp": "2026-02-16T09:17:47.060308Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)"}
2026-02-16 04:17:47,060 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.060390Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,060 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
{"timestamp": "2026-02-16T09:17:47.061037Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)"}
2026-02-16 04:17:47,061 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.061125Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,061 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:17:47.061714Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_attendances\")"}
2026-02-16 04:17:47,061 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.061809Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,062 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:17:47.062483Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_attendances\")"}
2026-02-16 04:17:47,062 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.062792Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,063 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.063555Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_attendances (\n\tworker_id VARCHAR(36) NOT NULL, \n\twork_date DATE NOT NULL, \n\tclock_in TIME, \n\tclock_out TIME, \n\thours_regular NUMERIC(4, 2), \n\thours_overtime NUMERIC(4, 2), \n\thours_total NUMERIC(4, 2), \n\tis_present BOOLEAN NOT NULL, \n\tabsence_reason VARCHAR(100), \n\tis_approved BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,063 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.063653Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,064 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
{"timestamp": "2026-02-16T09:17:47.064328Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)"}
2026-02-16 04:17:47,064 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.064419Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,064 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
{"timestamp": "2026-02-16T09:17:47.065006Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)"}
2026-02-16 04:17:47,065 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:47.065104Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:47,065 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_outputs")
{"timestamp": "2026-02-16T09:17:47.065718Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_outputs\")"}
2026-02-16 04:17:47,065 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.065805Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,066 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_outputs")
{"timestamp": "2026-02-16T09:17:47.066424Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_outputs\")"}
2026-02-16 04:17:47,066 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.066505Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,067 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.067479Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_outputs (\n\tworker_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\tpieces_completed INTEGER NOT NULL, \n\tsam_earned NUMERIC(10, 2), \n\tminutes_worked NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\trecorded_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,067 INFO sqlalchemy.engine.Engine [no key 0.00019s] ()
{"timestamp": "2026-02-16T09:17:47.067660Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00019s] ()"}
2026-02-16 04:17:47,068 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
{"timestamp": "2026-02-16T09:17:47.068554Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)"}
2026-02-16 04:17:47,068 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:47.068716Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:47,069 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
{"timestamp": "2026-02-16T09:17:47.069362Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)"}
2026-02-16 04:17:47,069 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.069513Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,070 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:17:47.070406Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"fabric_lots\")"}
2026-02-16 04:17:47,070 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.070495Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,071 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:17:47.071172Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"fabric_lots\")"}
2026-02-16 04:17:47,071 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.071298Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,072 INFO sqlalchemy.engine.Engine 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.072211Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE fabric_lots (\n\tfactory_id CHAR(36) NOT NULL, \n\tlot_number VARCHAR(100) NOT NULL, \n\tfabric_type VARCHAR(100), \n\tcomposition VARCHAR(255), \n\twidth_cm INTEGER, \n\tgsm INTEGER, \n\tcolor VARCHAR(100), \n\tsupplier VARCHAR(255), \n\torigin_country VARCHAR(100), \n\tmill_name VARCHAR(255), \n\treceived_date DATE, \n\tinitial_meters NUMERIC(12, 2), \n\tavailable_meters NUMERIC(12, 2), \n\treserved_meters NUMERIC(12, 2), \n\tunit_cost NUMERIC(10, 4), \n\tcurrency VARCHAR(3), \n\tcertifications TEXT, \n\tinspection_status VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,072 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:47.072319Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:47,072 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
{"timestamp": "2026-02-16T09:17:47.073032Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)"}
2026-02-16 04:17:47,073 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:47.073140Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:47,073 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
{"timestamp": "2026-02-16T09:17:47.073745Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)"}
2026-02-16 04:17:47,073 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.073835Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,074 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
{"timestamp": "2026-02-16T09:17:47.074380Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)"}
2026-02-16 04:17:47,074 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.074468Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,074 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
{"timestamp": "2026-02-16T09:17:47.075022Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)"}
2026-02-16 04:17:47,075 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:47.075177Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:47,075 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:17:47.075763Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cut_tickets\")"}
2026-02-16 04:17:47,075 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.075844Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,076 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:17:47.076378Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cut_tickets\")"}
2026-02-16 04:17:47,076 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.076454Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,077 INFO sqlalchemy.engine.Engine 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:47.077185Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cut_tickets (\n\tfabric_lot_id CHAR(36) NOT NULL, \n\torder_id CHAR(36) NOT NULL, \n\tticket_number VARCHAR(100) NOT NULL, \n\tcut_date DATE, \n\tplies INTEGER, \n\tmarker_length_cm INTEGER, \n\tconsumption_meters NUMERIC(10, 2), \n\twastage_pct NUMERIC(5, 2), \n\tsize_ratio TEXT, \n\tbundle_count INTEGER, \n\ttotal_pieces INTEGER, \n\tcutter_id CHAR(36), \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:47,077 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:17:47.077341Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 04:17:47,077 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
{"timestamp": "2026-02-16T09:17:47.077966Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)"}
2026-02-16 04:17:47,078 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.078051Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,078 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
{"timestamp": "2026-02-16T09:17:47.078612Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)"}
2026-02-16 04:17:47,078 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:17:47.078767Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 04:17:47,079 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
{"timestamp": "2026-02-16T09:17:47.079418Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)"}
2026-02-16 04:17:47,079 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:17:47.079506Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:17:47,080 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("packing_lists")
{"timestamp": "2026-02-16T09:17:47.080177Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"packing_lists\")"}
2026-02-16 04:17:47,080 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.080290Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,080 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("packing_lists")
{"timestamp": "2026-02-16T09:17:47.080867Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"packing_lists\")"}
2026-02-16 04:17:47,080 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.080987Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,081 INFO sqlalchemy.engine.Engine 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.081754Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE packing_lists (\n\torder_id CHAR(36) NOT NULL, \n\tpacking_list_number VARCHAR(100) NOT NULL, \n\tship_date DATE, \n\tdestination VARCHAR(255), \n\tship_to_address TEXT, \n\tcarrier VARCHAR(100), \n\ttracking_number VARCHAR(255), \n\tcontainer_number VARCHAR(100), \n\ttotal_cartons INTEGER, \n\ttotal_units INTEGER, \n\ttotal_net_weight_kg NUMERIC(10, 2), \n\ttotal_gross_weight_kg NUMERIC(10, 2), \n\ttotal_cbm NUMERIC(8, 3), \n\tstatus VARCHAR(10) NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,081 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.081868Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,082 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
{"timestamp": "2026-02-16T09:17:47.082481Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)"}
2026-02-16 04:17:47,082 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:47.082568Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:47,083 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
{"timestamp": "2026-02-16T09:17:47.083295Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)"}
2026-02-16 04:17:47,083 INFO sqlalchemy.engine.Engine [no key 0.00024s] ()
{"timestamp": "2026-02-16T09:17:47.083441Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00024s] ()"}
2026-02-16 04:17:47,084 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cartons")
{"timestamp": "2026-02-16T09:17:47.084546Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cartons\")"}
2026-02-16 04:17:47,084 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.084726Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,085 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cartons")
{"timestamp": "2026-02-16T09:17:47.085579Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cartons\")"}
2026-02-16 04:17:47,085 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.085753Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,086 INFO sqlalchemy.engine.Engine 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:17:47.086759Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cartons (\n\tpacking_list_id CHAR(36) NOT NULL, \n\tcarton_number VARCHAR(50) NOT NULL, \n\tsize_breakdown TEXT, \n\tcolor VARCHAR(100), \n\ttotal_units INTEGER, \n\tnet_weight_kg NUMERIC(8, 2), \n\tgross_weight_kg NUMERIC(8, 2), \n\tdimensions_cm TEXT, \n\tlength_cm INTEGER, \n\twidth_cm INTEGER, \n\theight_cm INTEGER, \n\tbarcode VARCHAR(100), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:17:47,086 INFO sqlalchemy.engine.Engine [no key 0.00023s] ()
{"timestamp": "2026-02-16T09:17:47.086960Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00023s] ()"}
2026-02-16 04:17:47,087 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
{"timestamp": "2026-02-16T09:17:47.087800Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)"}
2026-02-16 04:17:47,087 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:17:47.087896Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:17:47,088 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("traceability_records")
{"timestamp": "2026-02-16T09:17:47.088617Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"traceability_records\")"}
2026-02-16 04:17:47,088 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.088758Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,089 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("traceability_records")
{"timestamp": "2026-02-16T09:17:47.089346Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"traceability_records\")"}
2026-02-16 04:17:47,089 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:17:47.089439Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:17:47,090 INFO sqlalchemy.engine.Engine 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:17:47.090241Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE traceability_records (\n\tcarton_id CHAR(36), \n\tfabric_lot_id CHAR(36), \n\tcut_ticket_id CHAR(36), \n\tproduction_run_id CHAR(36), \n\tcompliance_standard VARCHAR(8) NOT NULL, \n\tchain_of_custody TEXT, \n\tsupporting_documents TEXT, \n\tverification_status VARCHAR(8) NOT NULL, \n\tverified_by_id CHAR(36), \n\tverified_at DATETIME, \n\trisk_score VARCHAR(20), \n\trisk_notes TEXT, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, \n\tFOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, \n\tFOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:17:47,090 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:17:47.090342Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:17:47,090 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
{"timestamp": "2026-02-16T09:17:47.090970Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)"}
2026-02-16 04:17:47,091 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:17:47.091062Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:17:47,091 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
{"timestamp": "2026-02-16T09:17:47.091684Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)"}
2026-02-16 04:17:47,091 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:17:47.091766Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:17:47,092 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
{"timestamp": "2026-02-16T09:17:47.092456Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)"}
2026-02-16 04:17:47,092 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:17:47.092610Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:17:47,093 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:17:47.093240Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 04:17:47,093 INFO sqlalchemy.engine.Engine [cached since 49.97s ago] ()
{"timestamp": "2026-02-16T09:17:47.093331Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.97s ago] ()"}
2026-02-16 04:17:47,093 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:47.093849Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:47,094 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:47.094924Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:47,095 INFO sqlalchemy.engine.Engine INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:47.095166Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:47,095 INFO sqlalchemy.engine.Engine [cached since 49.81s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '65c89b79-41e0-4802-ab6b-109999b2be20', '2026-02-16 09:17:47.095085', '2026-02-16 09:17:47.095087', 0, None)
{"timestamp": "2026-02-16T09:17:47.095256Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.81s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '65c89b79-41e0-4802-ab6b-109999b2be20', '2026-02-16 09:17:47.095085', '2026-02-16 09:17:47.095087', 0, None)"}
2026-02-16 04:17:47,095 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:47.095863Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:47,096 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:47.096504Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:47,096 INFO sqlalchemy.engine.Engine SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
{"timestamp": "2026-02-16T09:17:47.096816Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at \nFROM organizations \nWHERE organizations.id = ?"}
2026-02-16 04:17:47,096 INFO sqlalchemy.engine.Engine [cached since 49.81s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20',)
{"timestamp": "2026-02-16T09:17:47.096909Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.81s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20',)"}
2026-02-16 04:17:47,098 INFO sqlalchemy.engine.Engine SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
{"timestamp": "2026-02-16T09:17:47.098261Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at \nFROM users \nWHERE ? = users.organization_id"}
2026-02-16 04:17:47,098 INFO sqlalchemy.engine.Engine [cached since 49.81s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20',)
{"timestamp": "2026-02-16T09:17:47.098381Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.81s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20',)"}
2026-02-16 04:17:47,099 INFO sqlalchemy.engine.Engine SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
{"timestamp": "2026-02-16T09:17:47.099423Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at \nFROM factories \nWHERE ? = factories.organization_id"}
2026-02-16 04:17:47,099 INFO sqlalchemy.engine.Engine [cached since 49.81s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20',)
{"timestamp": "2026-02-16T09:17:47.099517Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.81s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20',)"}
2026-02-16 04:17:47,346 INFO sqlalchemy.engine.Engine INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:47.346590Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:47,346 INFO sqlalchemy.engine.Engine [cached since 49.82s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20', 'test@example.com', '$2b$12$IfHAcPuWAfi9iBVR8pY10uHoqodsBvygw8qT5i/BefFOIVyqyQPUW', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '0d8373e4-4e29-4abe-b60f-47146e10bc32', '2026-02-16 09:17:47.346431', '2026-02-16 09:17:47.346433', 0, None)
{"timestamp": "2026-02-16T09:17:47.346713Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.82s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20', 'test@example.com', '$2b$12$IfHAcPuWAfi9iBVR8pY10uHoqodsBvygw8qT5i/BefFOIVyqyQPUW', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '0d8373e4-4e29-4abe-b60f-47146e10bc32', '2026-02-16 09:17:47.346431', '2026-02-16 09:17:47.346433', 0, None)"}
2026-02-16 04:17:47,347 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:47.347482Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:17:47,348 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:47.348202Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:47,348 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
{"timestamp": "2026-02-16T09:17:47.348434Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ?"}
2026-02-16 04:17:47,348 INFO sqlalchemy.engine.Engine [cached since 49.82s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
{"timestamp": "2026-02-16T09:17:47.348526Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.82s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)"}
2026-02-16 04:17:47,349 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
{"timestamp": "2026-02-16T09:17:47.349623Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.user_id"}
2026-02-16 04:17:47,349 INFO sqlalchemy.engine.Engine [cached since 49.82s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
{"timestamp": "2026-02-16T09:17:47.349736Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.82s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)"}
2026-02-16 04:17:47,350 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
{"timestamp": "2026-02-16T09:17:47.351050Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE ? = user_scopes.user_id"}
2026-02-16 04:17:47,351 INFO sqlalchemy.engine.Engine [cached since 49.82s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
{"timestamp": "2026-02-16T09:17:47.351174Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.82s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)"}
2026-02-16 04:17:47,352 INFO sqlalchemy.engine.Engine INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:47.352721Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:47,352 INFO sqlalchemy.engine.Engine [cached since 2.562s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20', 'Widget Test Factory', 'WTF-001', 'Test Country', None, None, 'UTC', None, None, None, None, 'en-US', 1, 'ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '2026-02-16 09:17:47.352624', '2026-02-16 09:17:47.352626')
{"timestamp": "2026-02-16T09:17:47.352827Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.562s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20', 'Widget Test Factory', 'WTF-001', 'Test Country', None, None, 'UTC', None, None, None, None, 'en-US', 1, 'ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '2026-02-16 09:17:47.352624', '2026-02-16 09:17:47.352626')"}
2026-02-16 04:17:47,353 INFO sqlalchemy.engine.Engine INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:47.353751Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:47,353 INFO sqlalchemy.engine.Engine [cached since 49.8s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', 'Widget Line A', 'WL-A', 15, None, None, None, None, None, None, None, None, None, 0, None, None, 1, '8438f266-8cd1-4ca4-a0d1-a981954a48f1', '2026-02-16 09:17:47.353652', '2026-02-16 09:17:47.353654')
{"timestamp": "2026-02-16T09:17:47.353856Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.8s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', 'Widget Line A', 'WL-A', 15, None, None, None, None, None, None, None, None, None, 0, None, None, 1, '8438f266-8cd1-4ca4-a0d1-a981954a48f1', '2026-02-16 09:17:47.353652', '2026-02-16 09:17:47.353654')"}
2026-02-16 04:17:47,354 INFO sqlalchemy.engine.Engine INSERT INTO styles (factory_id, style_number, style_name, description, buyer, season, category, base_sam, complexity_rating, tech_pack_url, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:47.354756Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO styles (factory_id, style_number, style_name, description, buyer, season, category, base_sam, complexity_rating, tech_pack_url, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:47,354 INFO sqlalchemy.engine.Engine [cached since 0.9467s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', 'STY-WIDGET-01', None, 'Complex Widget Style', None, None, None, 12.5, None, None, 1, 'bc4c5e5b-d8c5-4a29-aeca-3ccc12c611f8', '2026-02-16 09:17:47.354660', '2026-02-16 09:17:47.354662')
{"timestamp": "2026-02-16T09:17:47.354858Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.9467s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', 'STY-WIDGET-01', None, 'Complex Widget Style', None, None, None, 12.5, None, None, 1, 'bc4c5e5b-d8c5-4a29-aeca-3ccc12c611f8', '2026-02-16 09:17:47.354660', '2026-02-16 09:17:47.354662')"}
2026-02-16 04:17:47,355 INFO sqlalchemy.engine.Engine INSERT INTO orders (style_id, po_number, quantity, uom, color, order_date, planned_cut_date, planned_sew_date, ex_factory_date, actual_ship_date, status, priority, qty_cut, qty_sewn, qty_packed, qty_shipped, notes, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:47.355719Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (style_id, po_number, quantity, uom, color, order_date, planned_cut_date, planned_sew_date, ex_factory_date, actual_ship_date, status, priority, qty_cut, qty_sewn, qty_packed, qty_shipped, notes, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:47,355 INFO sqlalchemy.engine.Engine [cached since 0.9462s ago] ('bc4c5e5b-d8c5-4a29-aeca-3ccc12c611f8', 'PO-WIDGET-01', 5000, 'pcs', None, None, None, None, None, None, 'sewing', 'normal', 0, 0, 0, 0, None, '53090e53-3934-4f41-86d7-72225d475e1e', '2026-02-16 09:17:47.355606', '2026-02-16 09:17:47.355608')
{"timestamp": "2026-02-16T09:17:47.355824Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.9462s ago] ('bc4c5e5b-d8c5-4a29-aeca-3ccc12c611f8', 'PO-WIDGET-01', 5000, 'pcs', None, None, None, None, None, None, 'sewing', 'normal', 0, 0, 0, 0, None, '53090e53-3934-4f41-86d7-72225d475e1e', '2026-02-16 09:17:47.355606', '2026-02-16 09:17:47.355608')"}
2026-02-16 04:17:47,356 INFO sqlalchemy.engine.Engine INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency
{"timestamp": "2026-02-16T09:17:47.356886Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency"}
2026-02-16 04:17:47,356 INFO sqlalchemy.engine.Engine [cached since 0.9454s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '53090e53-3934-4f41-86d7-72225d475e1e', '8438f266-8cd1-4ca4-a0d1-a981954a48f1', None, '2026-02-16 00:00:00.000000', None, 'day', None, 1000, None, None, None, None, None, None, 'Machine Failure', 0.486, 14, 1, 540.0, 'Needle broke frequently', None, None, None, None, None, None, None, None, 0, None, None, 'bc1d4045-4bb0-44df-adf0-eddff17edb16', '2026-02-16 09:17:47.356783', '2026-02-16 09:17:47.356784')
{"timestamp": "2026-02-16T09:17:47.356993Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.9454s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '53090e53-3934-4f41-86d7-72225d475e1e', '8438f266-8cd1-4ca4-a0d1-a981954a48f1', None, '2026-02-16 00:00:00.000000', None, 'day', None, 1000, None, None, None, None, None, None, 'Machine Failure', 0.486, 14, 1, 540.0, 'Needle broke frequently', None, None, None, None, None, None, None, None, 0, None, None, 'bc1d4045-4bb0-44df-adf0-eddff17edb16', '2026-02-16 09:17:47.356783', '2026-02-16 09:17:47.356784')"}
2026-02-16 04:17:47,358 INFO sqlalchemy.engine.Engine INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency
{"timestamp": "2026-02-16T09:17:47.358304Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency"}
2026-02-16 04:17:47,358 INFO sqlalchemy.engine.Engine [cached since 0.9468s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '53090e53-3934-4f41-86d7-72225d475e1e', '8438f266-8cd1-4ca4-a0d1-a981954a48f1', None, '2026-02-15 00:00:00.000000', None, 'day', None, 900, None, None, None, None, None, None, None, 0.48, 15, 0, 540.0, None, None, None, None, None, None, None, None, None, 0, None, None, '0d3227c6-1e34-4eb6-9eee-152cb95edf93', '2026-02-16 09:17:47.358198', '2026-02-16 09:17:47.358199')
{"timestamp": "2026-02-16T09:17:47.358412Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.9468s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '53090e53-3934-4f41-86d7-72225d475e1e', '8438f266-8cd1-4ca4-a0d1-a981954a48f1', None, '2026-02-15 00:00:00.000000', None, 'day', None, 900, None, None, None, None, None, None, None, 0.48, 15, 0, 540.0, None, None, None, None, None, None, None, None, None, 0, None, None, '0d3227c6-1e34-4eb6-9eee-152cb95edf93', '2026-02-16 09:17:47.358198', '2026-02-16 09:17:47.358199')"}
2026-02-16 04:17:47,359 INFO sqlalchemy.engine.Engine INSERT INTO dhu_reports (factory_id, report_date, period_type, avg_dhu, min_dhu, max_dhu, total_inspected, total_defects, total_rejected, top_defects, top_operations, top_lines, dhu_change_pct, trend_direction, recommendations, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:47.359682Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO dhu_reports (factory_id, report_date, period_type, avg_dhu, min_dhu, max_dhu, total_inspected, total_defects, total_rejected, top_defects, top_operations, top_lines, dhu_change_pct, trend_direction, recommendations, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:47,359 INFO sqlalchemy.engine.Engine [cached since 0.9444s ago (insertmanyvalues) 1/1 (unordered)] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '2026-02-16', 'daily', 2.5, None, None, 1000, 25, None, None, None, None, None, None, None, 'cbd8d8cf-ff87-4121-9d41-8ec2b53ec690', '2026-02-16 09:17:47.359539', '2026-02-16 09:17:47.359540', 'ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '2026-02-15', 'daily', 3.0, None, None, 900, 27, None, None, None, None, None, None, None, '5bfce0f9-b0e2-44bb-b7a8-4eb6a18557de', '2026-02-16 09:17:47.359545', '2026-02-16 09:17:47.359545')
{"timestamp": "2026-02-16T09:17:47.359823Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.9444s ago (insertmanyvalues) 1/1 (unordered)] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '2026-02-16', 'daily', 2.5, None, None, 1000, 25, None, None, None, None, None, None, None, 'cbd8d8cf-ff87-4121-9d41-8ec2b53ec690', '2026-02-16 09:17:47.359539', '2026-02-16 09:17:47.359540', 'ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '2026-02-15', 'daily', 3.0, None, None, 900, 27, None, None, None, None, None, None, None, '5bfce0f9-b0e2-44bb-b7a8-4eb6a18557de', '2026-02-16 09:17:47.359545', '2026-02-16 09:17:47.359545')"}
2026-02-16 04:17:47,360 INFO sqlalchemy.engine.Engine INSERT INTO efficiency_metrics (production_run_id, efficiency_pct, sam_target, sam_actual, sam_variance, sam_variance_pct, capacity_utilization_pct, performance_tier, factory_avg_efficiency, line_avg_efficiency, calculated_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:47.360627Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO efficiency_metrics (production_run_id, efficiency_pct, sam_target, sam_actual, sam_variance, sam_variance_pct, capacity_utilization_pct, performance_tier, factory_avg_efficiency, line_avg_efficiency, calculated_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:47,360 INFO sqlalchemy.engine.Engine [cached since 0.9438s ago (insertmanyvalues) 1/1 (unordered)] ('bc1d4045-4bb0-44df-adf0-eddff17edb16', 90.0, 5400.0, 4860.0, None, None, None, None, None, None, '2026-02-16 09:17:47.359108', '9044dfac-1a0f-4bf3-9bf1-a6e71213e44b', '2026-02-16 09:17:47.360494', '2026-02-16 09:17:47.360495', '0d3227c6-1e34-4eb6-9eee-152cb95edf93', 80.0, 5400.0, 4320.0, None, None, None, None, None, None, '2026-02-15 09:17:47.359148', 'aa0764f1-600c-463c-9226-d94fdc3e96ac', '2026-02-16 09:17:47.360499', '2026-02-16 09:17:47.360500')
{"timestamp": "2026-02-16T09:17:47.360776Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.9438s ago (insertmanyvalues) 1/1 (unordered)] ('bc1d4045-4bb0-44df-adf0-eddff17edb16', 90.0, 5400.0, 4860.0, None, None, None, None, None, None, '2026-02-16 09:17:47.359108', '9044dfac-1a0f-4bf3-9bf1-a6e71213e44b', '2026-02-16 09:17:47.360494', '2026-02-16 09:17:47.360495', '0d3227c6-1e34-4eb6-9eee-152cb95edf93', 80.0, 5400.0, 4320.0, None, None, None, None, None, None, '2026-02-15 09:17:47.359148', 'aa0764f1-600c-463c-9226-d94fdc3e96ac', '2026-02-16 09:17:47.360499', '2026-02-16 09:17:47.360500')"}
2026-02-16 04:17:47,361 INFO sqlalchemy.engine.Engine INSERT INTO workers (factory_id, employee_id, full_name, department, job_title, primary_skill, data_source_id, hire_date, termination_date, hourly_rate, currency, is_active, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:47.361455Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO workers (factory_id, employee_id, full_name, department, job_title, primary_skill, data_source_id, hire_date, termination_date, hourly_rate, currency, is_active, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:47,361 INFO sqlalchemy.engine.Engine [cached since 0.9435s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', 'WK-HOURLY-01', 'Hourly Worker', None, None, None, None, None, None, None, 'USD', 1, 'b6393c31-d8e8-420f-8cd9-4113c83d9995', '2026-02-16 09:17:47.361365', '2026-02-16 09:17:47.361366', 0, None)
{"timestamp": "2026-02-16T09:17:47.361548Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.9435s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', 'WK-HOURLY-01', 'Hourly Worker', None, None, None, None, None, None, None, 'USD', 1, 'b6393c31-d8e8-420f-8cd9-4113c83d9995', '2026-02-16 09:17:47.361365', '2026-02-16 09:17:47.361366', 0, None)"}
2026-02-16 04:17:47,362 INFO sqlalchemy.engine.Engine INSERT INTO production_outputs (worker_id, production_run_id, operation, pieces_completed, sam_earned, minutes_worked, efficiency_pct, recorded_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:17:47.362493Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO production_outputs (worker_id, production_run_id, operation, pieces_completed, sam_earned, minutes_worked, efficiency_pct, recorded_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:17:47,362 INFO sqlalchemy.engine.Engine [cached since 0.9424s ago (insertmanyvalues) 1/1 (unordered)] ('b6393c31-d8e8-420f-8cd9-4113c83d9995', 'bc1d4045-4bb0-44df-adf0-eddff17edb16', 'Sewing', 100, None, None, None, '2026-02-16 09:30:00.000000', 'a9b8afac-39ff-41a9-b7db-1bddaee242cb', '2026-02-16 09:17:47.362372', '2026-02-16 09:17:47.362374', 'b6393c31-d8e8-420f-8cd9-4113c83d9995', 'bc1d4045-4bb0-44df-adf0-eddff17edb16', 'Sewing', 150, None, None, None, '2026-02-16 10:30:00.000000', '53fbaf95-8c59-4a5e-968d-2f1176120cc9', '2026-02-16 09:17:47.362377', '2026-02-16 09:17:47.362378')
{"timestamp": "2026-02-16T09:17:47.362586Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.9424s ago (insertmanyvalues) 1/1 (unordered)] ('b6393c31-d8e8-420f-8cd9-4113c83d9995', 'bc1d4045-4bb0-44df-adf0-eddff17edb16', 'Sewing', 100, None, None, None, '2026-02-16 09:30:00.000000', 'a9b8afac-39ff-41a9-b7db-1bddaee242cb', '2026-02-16 09:17:47.362372', '2026-02-16 09:17:47.362374', 'b6393c31-d8e8-420f-8cd9-4113c83d9995', 'bc1d4045-4bb0-44df-adf0-eddff17edb16', 'Sewing', 150, None, None, None, '2026-02-16 10:30:00.000000', '53fbaf95-8c59-4a5e-968d-2f1176120cc9', '2026-02-16 09:17:47.362377', '2026-02-16 09:17:47.362378')"}
2026-02-16 04:17:47,363 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:47.363184Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
----------------------------- Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.93s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_style_id ON production_events (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_order_id ON production_events (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_factories_organization_id ON factories (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_factory_id ON styles (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_buyer ON styles (buyer)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_style_number ON styles (style_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_po_number ON orders (po_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_status ON orders (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00021s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_style_id ON orders (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_defect_type ON defects (defect_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_worker_id ON defects (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00021s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_users_organization_id ON users (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_factory_id ON workers (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_employee_id ON workers (employee_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00019s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00024s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00023s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.97s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.81s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, '65c89b79-41e0-4802-ab6b-109999b2be20', '2026-02-16 09:17:47.095085', '2026-02-16 09:17:47.095087', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.81s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.81s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.81s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.82s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20', 'test@example.com', '$2b$12$IfHAcPuWAfi9iBVR8pY10uHoqodsBvygw8qT5i/BefFOIVyqyQPUW', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '0d8373e4-4e29-4abe-b60f-47146e10bc32', '2026-02-16 09:17:47.346431', '2026-02-16 09:17:47.346433', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.82s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.82s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.82s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 2.562s ago] ('65c89b79-41e0-4802-ab6b-109999b2be20', 'Widget Test Factory', 'WTF-001', 'Test Country', None, None, 'UTC', None, None, None, None, 'en-US', 1, 'ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '2026-02-16 09:17:47.352624', '2026-02-16 09:17:47.352626')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.8s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', 'Widget Line A', 'WL-A', 15, None, None, None, None, None, None, None, None, None, 0, None, None, 1, '8438f266-8cd1-4ca4-a0d1-a981954a48f1', '2026-02-16 09:17:47.353652', '2026-02-16 09:17:47.353654')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO styles (factory_id, style_number, style_name, description, buyer, season, category, base_sam, complexity_rating, tech_pack_url, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.9467s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', 'STY-WIDGET-01', None, 'Complex Widget Style', None, None, None, 12.5, None, None, 1, 'bc4c5e5b-d8c5-4a29-aeca-3ccc12c611f8', '2026-02-16 09:17:47.354660', '2026-02-16 09:17:47.354662')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO orders (style_id, po_number, quantity, uom, color, order_date, planned_cut_date, planned_sew_date, ex_factory_date, actual_ship_date, status, priority, qty_cut, qty_sewn, qty_packed, qty_shipped, notes, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.9462s ago] ('bc4c5e5b-d8c5-4a29-aeca-3ccc12c611f8', 'PO-WIDGET-01', 5000, 'pcs', None, None, None, None, None, None, 'sewing', 'normal', 0, 0, 0, 0, None, '53090e53-3934-4f41-86d7-72225d475e1e', '2026-02-16 09:17:47.355606', '2026-02-16 09:17:47.355608')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.9454s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '53090e53-3934-4f41-86d7-72225d475e1e', '8438f266-8cd1-4ca4-a0d1-a981954a48f1', None, '2026-02-16 00:00:00.000000', None, 'day', None, 1000, None, None, None, None, None, None, 'Machine Failure', 0.486, 14, 1, 540.0, 'Needle broke frequently', None, None, None, None, None, None, None, None, 0, None, None, 'bc1d4045-4bb0-44df-adf0-eddff17edb16', '2026-02-16 09:17:47.356783', '2026-02-16 09:17:47.356784')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO production_runs (factory_id, order_id, data_source_id, source_import_id, production_date, inspection_date, shift, planned_qty, actual_qty, wip_start, wip_end, lot_number, shade_band, batch_number, downtime_minutes, downtime_reason, sam, operators_present, helpers_present, worked_minutes, notes, start_time, end_time, style_number, buyer, season, po_number, color, size, defects, dhu, line_efficiency, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING earned_minutes, efficiency
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.9468s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '53090e53-3934-4f41-86d7-72225d475e1e', '8438f266-8cd1-4ca4-a0d1-a981954a48f1', None, '2026-02-15 00:00:00.000000', None, 'day', None, 900, None, None, None, None, None, None, None, 0.48, 15, 0, 540.0, None, None, None, None, None, None, None, None, None, 0, None, None, '0d3227c6-1e34-4eb6-9eee-152cb95edf93', '2026-02-16 09:17:47.358198', '2026-02-16 09:17:47.358199')
INFO     sqlalchemy.engine.Engine:base.py:1844 INSERT INTO dhu_reports (factory_id, report_date, period_type, avg_dhu, min_dhu, max_dhu, total_inspected, total_defects, total_rejected, top_defects, top_operations, top_lines, dhu_change_pct, trend_direction, recommendations, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1844 [cached since 0.9444s ago (insertmanyvalues) 1/1 (unordered)] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '2026-02-16', 'daily', 2.5, None, None, 1000, 25, None, None, None, None, None, None, None, 'cbd8d8cf-ff87-4121-9d41-8ec2b53ec690', '2026-02-16 09:17:47.359539', '2026-02-16 09:17:47.359540', 'ce889d8f-9dbc-4546-b3b9-04e2eea7e332', '2026-02-15', 'daily', 3.0, None, None, 900, 27, None, None, None, None, None, None, None, '5bfce0f9-b0e2-44bb-b7a8-4eb6a18557de', '2026-02-16 09:17:47.359545', '2026-02-16 09:17:47.359545')
INFO     sqlalchemy.engine.Engine:base.py:1844 INSERT INTO efficiency_metrics (production_run_id, efficiency_pct, sam_target, sam_actual, sam_variance, sam_variance_pct, capacity_utilization_pct, performance_tier, factory_avg_efficiency, line_avg_efficiency, calculated_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1844 [cached since 0.9438s ago (insertmanyvalues) 1/1 (unordered)] ('bc1d4045-4bb0-44df-adf0-eddff17edb16', 90.0, 5400.0, 4860.0, None, None, None, None, None, None, '2026-02-16 09:17:47.359108', '9044dfac-1a0f-4bf3-9bf1-a6e71213e44b', '2026-02-16 09:17:47.360494', '2026-02-16 09:17:47.360495', '0d3227c6-1e34-4eb6-9eee-152cb95edf93', 80.0, 5400.0, 4320.0, None, None, None, None, None, None, '2026-02-15 09:17:47.359148', 'aa0764f1-600c-463c-9226-d94fdc3e96ac', '2026-02-16 09:17:47.360499', '2026-02-16 09:17:47.360500')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO workers (factory_id, employee_id, full_name, department, job_title, primary_skill, data_source_id, hire_date, termination_date, hourly_rate, currency, is_active, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.9435s ago] ('ce889d8f-9dbc-4546-b3b9-04e2eea7e332', 'WK-HOURLY-01', 'Hourly Worker', None, None, None, None, None, None, None, 'USD', 1, 'b6393c31-d8e8-420f-8cd9-4113c83d9995', '2026-02-16 09:17:47.361365', '2026-02-16 09:17:47.361366', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:1844 INSERT INTO production_outputs (worker_id, production_run_id, operation, pieces_completed, sam_earned, minutes_worked, efficiency_pct, recorded_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1844 [cached since 0.9424s ago (insertmanyvalues) 1/1 (unordered)] ('b6393c31-d8e8-420f-8cd9-4113c83d9995', 'bc1d4045-4bb0-44df-adf0-eddff17edb16', 'Sewing', 100, None, None, None, '2026-02-16 09:30:00.000000', 'a9b8afac-39ff-41a9-b7db-1bddaee242cb', '2026-02-16 09:17:47.362372', '2026-02-16 09:17:47.362374', 'b6393c31-d8e8-420f-8cd9-4113c83d9995', 'bc1d4045-4bb0-44df-adf0-eddff17edb16', 'Sewing', 150, None, None, None, '2026-02-16 10:30:00.000000', '53fbaf95-8c59-4a5e-968d-2f1176120cc9', '2026-02-16 09:17:47.362377', '2026-02-16 09:17:47.362378')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
---------------------------- Captured stdout call -----------------------------
2026-02-16 04:17:47,365 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:47.365712Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:47,365 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ? AND users.is_active = 1
{"timestamp": "2026-02-16T09:17:47.365954Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ? AND users.is_active = 1"}
2026-02-16 04:17:47,366 INFO sqlalchemy.engine.Engine [cached since 49.81s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
{"timestamp": "2026-02-16T09:17:47.366057Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.81s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)"}
2026-02-16 04:17:47,367 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.user_id IN (?)
{"timestamp": "2026-02-16T09:17:47.367616Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE dashboards.user_id IN (?)"}
2026-02-16 04:17:47,367 INFO sqlalchemy.engine.Engine [cached since 49.81s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
{"timestamp": "2026-02-16T09:17:47.367760Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.81s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)"}
2026-02-16 04:17:47,368 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE user_scopes.user_id IN (?)
{"timestamp": "2026-02-16T09:17:47.368904Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE user_scopes.user_id IN (?)"}
2026-02-16 04:17:47,368 INFO sqlalchemy.engine.Engine [cached since 49.81s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
{"timestamp": "2026-02-16T09:17:47.369001Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.81s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)"}
2026-02-16 04:17:47,370 INFO sqlalchemy.engine.Engine SELECT count(production_events.id) AS count_1 
FROM production_events 
WHERE production_events.timestamp >= ? AND production_events.timestamp < ?
{"timestamp": "2026-02-16T09:17:47.370227Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT count(production_events.id) AS count_1 \nFROM production_events \nWHERE production_events.timestamp >= ? AND production_events.timestamp < ?"}
2026-02-16 04:17:47,370 INFO sqlalchemy.engine.Engine [cached since 0.4418s ago] ('2026-02-16 00:00:00.000000', '2026-02-17 00:00:00.000000')
{"timestamp": "2026-02-16T09:17:47.370329Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4418s ago] ('2026-02-16 00:00:00.000000', '2026-02-17 00:00:00.000000')"}
2026-02-16 04:17:47,371 INFO sqlalchemy.engine.Engine SELECT count(production_runs.id) AS count_1 
FROM production_runs 
WHERE date(production_runs.production_date) = ?
{"timestamp": "2026-02-16T09:17:47.371261Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT count(production_runs.id) AS count_1 \nFROM production_runs \nWHERE date(production_runs.production_date) = ?"}
2026-02-16 04:17:47,371 INFO sqlalchemy.engine.Engine [cached since 0.4415s ago] ('2026-02-16',)
{"timestamp": "2026-02-16T09:17:47.371352Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4415s ago] ('2026-02-16',)"}
2026-02-16 04:17:47,373 INFO sqlalchemy.engine.Engine SELECT date(production_runs.production_date) AS production_date, avg(efficiency_metrics.efficiency_pct) AS avg_eff 
FROM production_runs JOIN efficiency_metrics ON production_runs.id = efficiency_metrics.production_run_id 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? GROUP BY production_runs.production_date
{"timestamp": "2026-02-16T09:17:47.373307Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT date(production_runs.production_date) AS production_date, avg(efficiency_metrics.efficiency_pct) AS avg_eff \nFROM production_runs JOIN efficiency_metrics ON production_runs.id = efficiency_metrics.production_run_id \nWHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? GROUP BY production_runs.production_date"}
2026-02-16 04:17:47,373 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('2026-02-02', '2026-02-16')
{"timestamp": "2026-02-16T09:17:47.373403Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00018s] ('2026-02-02', '2026-02-16')"}
2026-02-16 04:17:47,374 INFO sqlalchemy.engine.Engine SELECT dhu_reports.report_date, dhu_reports.avg_dhu 
FROM dhu_reports 
WHERE dhu_reports.report_date >= ? AND dhu_reports.report_date <= ?
{"timestamp": "2026-02-16T09:17:47.374780Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dhu_reports.report_date, dhu_reports.avg_dhu \nFROM dhu_reports \nWHERE dhu_reports.report_date >= ? AND dhu_reports.report_date <= ?"}
2026-02-16 04:17:47,374 INFO sqlalchemy.engine.Engine [generated in 0.00025s] ('2026-02-02', '2026-02-16')
{"timestamp": "2026-02-16T09:17:47.374890Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] ('2026-02-02', '2026-02-16')"}
{"timestamp": "2026-02-16T09:17:47.376152Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://test/api/v1/analytics/speed-quality \"HTTP/1.1 200 OK\""}
------------------------------ Captured log call ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ? AND users.is_active = 1
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.81s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.user_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.81s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE user_scopes.user_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 49.81s ago] ('0d8373e4-4e29-4abe-b60f-47146e10bc32',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(production_events.id) AS count_1 
FROM production_events 
WHERE production_events.timestamp >= ? AND production_events.timestamp < ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.4418s ago] ('2026-02-16 00:00:00.000000', '2026-02-17 00:00:00.000000')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(production_runs.id) AS count_1 
FROM production_runs 
WHERE date(production_runs.production_date) = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.4415s ago] ('2026-02-16',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT date(production_runs.production_date) AS production_date, avg(efficiency_metrics.efficiency_pct) AS avg_eff 
FROM production_runs JOIN efficiency_metrics ON production_runs.id = efficiency_metrics.production_run_id 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? GROUP BY production_runs.production_date
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00018s] ('2026-02-02', '2026-02-16')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dhu_reports.report_date, dhu_reports.avg_dhu 
FROM dhu_reports 
WHERE dhu_reports.report_date >= ? AND dhu_reports.report_date <= ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00025s] ('2026-02-02', '2026-02-16')
INFO     httpx:_client.py:1740 HTTP Request: GET http://test/api/v1/analytics/speed-quality "HTTP/1.1 200 OK"
-------------------------- Captured stdout teardown ---------------------------
2026-02-16 04:17:47,383 INFO sqlalchemy.engine.Engine ROLLBACK
{"timestamp": "2026-02-16T09:17:47.383240Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK"}
2026-02-16 04:17:47,383 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:17:47.383848Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:17:47,384 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:17:47.384076Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 04:17:47,384 INFO sqlalchemy.engine.Engine [cached since 50.34s ago] ()
{"timestamp": "2026-02-16T09:17:47.384160Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 50.34s ago] ()"}
2026-02-16 04:17:47,384 INFO sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table'
{"timestamp": "2026-02-16T09:17:47.384723Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT name FROM sqlite_master WHERE type='table'"}
2026-02-16 04:17:47,384 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.384819Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,385 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "ai_decisions"
{"timestamp": "2026-02-16T09:17:47.385554Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"ai_decisions\""}
2026-02-16 04:17:47,385 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.385675Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,386 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "alias_mappings"
{"timestamp": "2026-02-16T09:17:47.386355Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"alias_mappings\""}
2026-02-16 04:17:47,386 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.386445Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,387 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "efficiency_metrics"
{"timestamp": "2026-02-16T09:17:47.387206Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"efficiency_metrics\""}
2026-02-16 04:17:47,387 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.387292Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,387 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dhu_reports"
{"timestamp": "2026-02-16T09:17:47.387926Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dhu_reports\""}
2026-02-16 04:17:47,387 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.388030Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,388 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dashboards"
{"timestamp": "2026-02-16T09:17:47.388709Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dashboards\""}
2026-02-16 04:17:47,388 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.388816Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,389 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_quality_issues"
{"timestamp": "2026-02-16T09:17:47.389615Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_quality_issues\""}
2026-02-16 04:17:47,389 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.389699Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,390 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_sources"
{"timestamp": "2026-02-16T09:17:47.390357Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_sources\""}
2026-02-16 04:17:47,390 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.390453Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,390 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "schema_mappings"
{"timestamp": "2026-02-16T09:17:47.391005Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"schema_mappings\""}
2026-02-16 04:17:47,391 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.391127Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,391 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_events"
{"timestamp": "2026-02-16T09:17:47.391731Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_events\""}
2026-02-16 04:17:47,391 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.391873Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,392 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "factories"
{"timestamp": "2026-02-16T09:17:47.392534Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"factories\""}
2026-02-16 04:17:47,392 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.392673Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,393 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "styles"
{"timestamp": "2026-02-16T09:17:47.393273Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"styles\""}
2026-02-16 04:17:47,393 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.393359Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,393 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "orders"
{"timestamp": "2026-02-16T09:17:47.394002Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"orders\""}
2026-02-16 04:17:47,394 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.394089Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,394 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_runs"
{"timestamp": "2026-02-16T09:17:47.394689Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_runs\""}
2026-02-16 04:17:47,394 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.394777Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,395 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "quality_inspections"
{"timestamp": "2026-02-16T09:17:47.395492Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"quality_inspections\""}
2026-02-16 04:17:47,395 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.395575Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,396 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "defects"
{"timestamp": "2026-02-16T09:17:47.396172Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"defects\""}
2026-02-16 04:17:47,396 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.396253Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,396 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "raw_imports"
{"timestamp": "2026-02-16T09:17:47.396819Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"raw_imports\""}
2026-02-16 04:17:47,396 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.396906Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,397 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "staging_records"
{"timestamp": "2026-02-16T09:17:47.397476Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"staging_records\""}
2026-02-16 04:17:47,397 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.397624Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,398 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "organizations"
{"timestamp": "2026-02-16T09:17:47.398218Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"organizations\""}
2026-02-16 04:17:47,398 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.398302Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,398 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "users"
{"timestamp": "2026-02-16T09:17:47.398840Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"users\""}
2026-02-16 04:17:47,398 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.399012Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,399 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "user_scopes"
{"timestamp": "2026-02-16T09:17:47.399869Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"user_scopes\""}
2026-02-16 04:17:47,399 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.400133Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,400 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "waitlist"
{"timestamp": "2026-02-16T09:17:47.400899Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"waitlist\""}
2026-02-16 04:17:47,400 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.400990Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,401 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "workers"
{"timestamp": "2026-02-16T09:17:47.401595Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"workers\""}
2026-02-16 04:17:47,401 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.401684Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,402 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_skills"
{"timestamp": "2026-02-16T09:17:47.402249Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_skills\""}
2026-02-16 04:17:47,402 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.402337Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,402 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_attendances"
{"timestamp": "2026-02-16T09:17:47.403007Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_attendances\""}
2026-02-16 04:17:47,403 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.403106Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,403 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_outputs"
{"timestamp": "2026-02-16T09:17:47.403638Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_outputs\""}
2026-02-16 04:17:47,403 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.403723Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,404 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "fabric_lots"
{"timestamp": "2026-02-16T09:17:47.404305Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"fabric_lots\""}
2026-02-16 04:17:47,404 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.404453Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,405 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cut_tickets"
{"timestamp": "2026-02-16T09:17:47.405065Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cut_tickets\""}
2026-02-16 04:17:47,405 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.405152Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,405 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "packing_lists"
{"timestamp": "2026-02-16T09:17:47.405730Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"packing_lists\""}
2026-02-16 04:17:47,405 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.405829Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,406 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cartons"
{"timestamp": "2026-02-16T09:17:47.406415Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cartons\""}
2026-02-16 04:17:47,406 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.406534Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,407 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "traceability_records"
{"timestamp": "2026-02-16T09:17:47.407162Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"traceability_records\""}
2026-02-16 04:17:47,407 INFO sqlalchemy.engine.Engine [cached since 48.6s ago] ()
{"timestamp": "2026-02-16T09:17:47.407272Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 48.6s ago] ()"}
2026-02-16 04:17:47,407 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:17:47.407899Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 04:17:47,407 INFO sqlalchemy.engine.Engine [cached since 50.29s ago] ()
{"timestamp": "2026-02-16T09:17:47.407985Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 50.29s ago] ()"}
2026-02-16 04:17:47,408 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:17:47.408461Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
---------------------------- Captured log teardown ----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 50.34s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT name FROM sqlite_master WHERE type='table'
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "ai_decisions"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "alias_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "efficiency_metrics"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dhu_reports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dashboards"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_quality_issues"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_sources"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "schema_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_events"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "factories"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "styles"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "orders"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_runs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "quality_inspections"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "defects"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "raw_imports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "staging_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "organizations"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "users"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "user_scopes"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "waitlist"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "workers"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_skills"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_attendances"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_outputs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "fabric_lots"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cut_tickets"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "packing_lists"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cartons"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "traceability_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 48.6s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 50.29s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
____________________________ test_schema_evolution ____________________________
backend\tests\test_api\test_ingestion_flow.py:231: in test_schema_evolution
    assert len(mappings) >= 1
E   assert 0 >= 1
E    +  where 0 = len([])
---------------------------- Captured stdout setup ----------------------------
2026-02-16 04:18:00,635 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:18:00.635958Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:18:00,636 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:18:00.636187Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 04:18:00,636 INFO sqlalchemy.engine.Engine [cached since 63.59s ago] ()
{"timestamp": "2026-02-16T09:18:00.636267Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.59s ago] ()"}
2026-02-16 04:18:00,636 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:18:00.636803Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"ai_decisions\")"}
2026-02-16 04:18:00,636 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.636878Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,637 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:18:00.637410Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"ai_decisions\")"}
2026-02-16 04:18:00,637 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.637501Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,638 INFO sqlalchemy.engine.Engine 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


{"timestamp": "2026-02-16T09:18:00.638365Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE ai_decisions (\n\tdata_source_id VARCHAR(36), \n\tagent_type VARCHAR(16) NOT NULL, \n\tmodel_used VARCHAR(50) NOT NULL, \n\tinput_summary TEXT NOT NULL, \n\toutput_summary TEXT NOT NULL, \n\tconfidence FLOAT, \n\treasoning JSON, \n\tperformance_metadata JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id)\n)\n\n"}
2026-02-16 04:18:00,638 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:18:00.638476Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:18:00,639 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
{"timestamp": "2026-02-16T09:18:00.639129Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)"}
2026-02-16 04:18:00,639 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.639218Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,639 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
{"timestamp": "2026-02-16T09:18:00.639758Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)"}
2026-02-16 04:18:00,639 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.639847Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,640 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:18:00.640393Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"alias_mappings\")"}
2026-02-16 04:18:00,640 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.640475Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,640 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:18:00.640965Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"alias_mappings\")"}
2026-02-16 04:18:00,641 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.641050Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,641 INFO sqlalchemy.engine.Engine 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.641789Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE alias_mappings (\n\tscope VARCHAR(50) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tsource_alias VARCHAR(255) NOT NULL, \n\tsource_alias_normalized VARCHAR(255) NOT NULL, \n\tcanonical_field VARCHAR(100) NOT NULL, \n\tusage_count INTEGER NOT NULL, \n\tlast_used_at DATETIME NOT NULL, \n\tcreated_by_id CHAR(36), \n\tcorrection_count INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,641 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.641874Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,642 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
{"timestamp": "2026-02-16T09:18:00.642531Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)"}
2026-02-16 04:18:00,642 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.642610Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,643 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
{"timestamp": "2026-02-16T09:18:00.643097Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)"}
2026-02-16 04:18:00,643 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.643167Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,643 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
{"timestamp": "2026-02-16T09:18:00.643594Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)"}
2026-02-16 04:18:00,643 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:18:00.643665Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:18:00,644 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
{"timestamp": "2026-02-16T09:18:00.644108Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)"}
2026-02-16 04:18:00,644 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.644188Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,644 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
{"timestamp": "2026-02-16T09:18:00.644659Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)"}
2026-02-16 04:18:00,644 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.644735Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,645 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
{"timestamp": "2026-02-16T09:18:00.645170Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)"}
2026-02-16 04:18:00,645 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.645244Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,645 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:18:00.645757Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"efficiency_metrics\")"}
2026-02-16 04:18:00,645 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.645843Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,646 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:18:00.646386Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"efficiency_metrics\")"}
2026-02-16 04:18:00,646 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.646464Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,647 INFO sqlalchemy.engine.Engine 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.647113Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE efficiency_metrics (\n\tproduction_run_id CHAR(36) NOT NULL, \n\tefficiency_pct NUMERIC(6, 2), \n\tsam_target NUMERIC(10, 2), \n\tsam_actual NUMERIC(10, 2), \n\tsam_variance NUMERIC(8, 2), \n\tsam_variance_pct NUMERIC(6, 2), \n\tcapacity_utilization_pct NUMERIC(6, 2), \n\tperformance_tier VARCHAR(12), \n\tfactory_avg_efficiency NUMERIC(6, 2), \n\tline_avg_efficiency NUMERIC(6, 2), \n\tcalculated_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,647 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.647199Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,647 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
{"timestamp": "2026-02-16T09:18:00.647765Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)"}
2026-02-16 04:18:00,647 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.647836Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,648 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:18:00.648346Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dhu_reports\")"}
2026-02-16 04:18:00,648 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.648431Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,648 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:18:00.648914Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dhu_reports\")"}
2026-02-16 04:18:00,648 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.648996Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,649 INFO sqlalchemy.engine.Engine 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.649720Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dhu_reports (\n\tfactory_id CHAR(36) NOT NULL, \n\treport_date DATE NOT NULL, \n\tperiod_type VARCHAR(7) NOT NULL, \n\tavg_dhu NUMERIC(6, 2), \n\tmin_dhu NUMERIC(6, 2), \n\tmax_dhu NUMERIC(6, 2), \n\ttotal_inspected INTEGER, \n\ttotal_defects INTEGER, \n\ttotal_rejected INTEGER, \n\ttop_defects TEXT, \n\ttop_operations TEXT, \n\ttop_lines TEXT, \n\tdhu_change_pct NUMERIC(6, 2), \n\ttrend_direction VARCHAR(20), \n\trecommendations TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,649 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.649806Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,650 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
{"timestamp": "2026-02-16T09:18:00.650369Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)"}
2026-02-16 04:18:00,650 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.650448Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,650 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
{"timestamp": "2026-02-16T09:18:00.650949Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)"}
2026-02-16 04:18:00,650 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:18:00.651018Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:18:00,651 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dashboards")
{"timestamp": "2026-02-16T09:18:00.651515Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dashboards\")"}
2026-02-16 04:18:00,651 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.651594Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,652 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dashboards")
{"timestamp": "2026-02-16T09:18:00.652071Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dashboards\")"}
2026-02-16 04:18:00,652 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.652160Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,652 INFO sqlalchemy.engine.Engine 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.652844Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dashboards (\n\tuser_id CHAR(36) NOT NULL, \n\tname VARCHAR(200) NOT NULL, \n\tdescription TEXT, \n\tdata_source_id CHAR(36), \n\twidget_config TEXT, \n\tlayout_config TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tCONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,652 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.652938Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,653 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
{"timestamp": "2026-02-16T09:18:00.653497Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)"}
2026-02-16 04:18:00,653 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.653573Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,654 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
{"timestamp": "2026-02-16T09:18:00.654067Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)"}
2026-02-16 04:18:00,654 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.654148Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,654 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:18:00.654816Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_quality_issues\")"}
2026-02-16 04:18:00,654 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.654958Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,655 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:18:00.655561Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_quality_issues\")"}
2026-02-16 04:18:00,655 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.655644Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,656 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.656403Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_quality_issues (\n\traw_import_id VARCHAR(36) NOT NULL, \n\trow_number INTEGER, \n\tissue_type VARCHAR(50) NOT NULL, \n\tseverity VARCHAR(20) NOT NULL, \n\tmessage TEXT NOT NULL, \n\tfield_name VARCHAR(100), \n\tfield_value VARCHAR(500), \n\tresolved_at DATETIME, \n\tresolved_by_user_id VARCHAR(36), \n\tresolution_notes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, \n\tFOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,656 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.656494Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,657 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
{"timestamp": "2026-02-16T09:18:00.657088Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)"}
2026-02-16 04:18:00,657 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.657167Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,657 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
{"timestamp": "2026-02-16T09:18:00.657685Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)"}
2026-02-16 04:18:00,657 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.657766Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,658 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
{"timestamp": "2026-02-16T09:18:00.658349Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)"}
2026-02-16 04:18:00,658 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:18:00.658495Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 04:18:00,659 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_sources")
{"timestamp": "2026-02-16T09:18:00.659052Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_sources\")"}
2026-02-16 04:18:00,659 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.659131Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,659 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_sources")
{"timestamp": "2026-02-16T09:18:00.659632Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_sources\")"}
2026-02-16 04:18:00,659 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.659701Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,660 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.660447Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_sources (\n\tfactory_id CHAR(36), \n\tname VARCHAR(100) NOT NULL, \n\tcode VARCHAR(50), \n\ttarget_operators INTEGER, \n\ttarget_efficiency_pct INTEGER, \n\tsettings JSON, \n\tspecialty VARCHAR(100), \n\tsupervisor_id CHAR(36), \n\tproduction_line_id CHAR(36), \n\tsource_name VARCHAR(255), \n\tdescription TEXT, \n\ttime_column VARCHAR(100), \n\ttime_format VARCHAR(50), \n\tschema_config JSON, \n\tparent_data_source_id CHAR(36), \n\tis_segment BOOLEAN NOT NULL, \n\tdate_range_start DATE, \n\tdate_range_end DATE, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, \n\tFOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,660 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.660534Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,661 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
{"timestamp": "2026-02-16T09:18:00.661140Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)"}
2026-02-16 04:18:00,661 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:18:00.661239Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:18:00,661 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
{"timestamp": "2026-02-16T09:18:00.661798Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)"}
2026-02-16 04:18:00,661 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.661884Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,662 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:18:00.662391Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"schema_mappings\")"}
2026-02-16 04:18:00,662 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.662470Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,662 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:18:00.662960Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"schema_mappings\")"}
2026-02-16 04:18:00,663 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.663044Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,663 INFO sqlalchemy.engine.Engine 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.663717Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE schema_mappings (\n\tdata_source_id CHAR(36) NOT NULL, \n\tversion INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tcolumn_map JSON NOT NULL, \n\textraction_rules JSON, \n\treviewed_by_user BOOLEAN NOT NULL, \n\tuser_notes TEXT, \n\tmatching_tier VARCHAR(20), \n\ttier_confidence FLOAT, \n\ttier_breakdown JSON, \n\tfuzzy_scores JSON, \n\tuser_corrected BOOLEAN NOT NULL, \n\tcorrection_count INTEGER, \n\tcorrection_history JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,663 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.663806Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,664 INFO sqlalchemy.engine.Engine CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
{"timestamp": "2026-02-16T09:18:00.664346Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)"}
2026-02-16 04:18:00,664 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.664417Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,664 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_events")
{"timestamp": "2026-02-16T09:18:00.664958Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_events\")"}
2026-02-16 04:18:00,665 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.665039Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,665 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_events")
{"timestamp": "2026-02-16T09:18:00.665543Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_events\")"}
2026-02-16 04:18:00,665 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.665628Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,666 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.666341Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_events (\n\ttimestamp DATETIME NOT NULL, \n\tevent_type VARCHAR(17) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tstyle_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36), \n\tsource_import_id VARCHAR(36), \n\traw_data JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,666 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.666430Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,666 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
{"timestamp": "2026-02-16T09:18:00.667011Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)"}
2026-02-16 04:18:00,667 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.667093Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,667 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
{"timestamp": "2026-02-16T09:18:00.667609Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)"}
2026-02-16 04:18:00,667 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.667685Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,668 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
{"timestamp": "2026-02-16T09:18:00.668164Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)"}
2026-02-16 04:18:00,668 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.668249Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,668 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
{"timestamp": "2026-02-16T09:18:00.668754Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)"}
2026-02-16 04:18:00,668 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.668825Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,669 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_style_id ON production_events (style_id)
{"timestamp": "2026-02-16T09:18:00.669311Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_style_id ON production_events (style_id)"}
2026-02-16 04:18:00,669 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.669402Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,669 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_order_id ON production_events (order_id)
{"timestamp": "2026-02-16T09:18:00.669885Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_order_id ON production_events (order_id)"}
2026-02-16 04:18:00,669 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:18:00.669955Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:18:00,670 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("factories")
{"timestamp": "2026-02-16T09:18:00.670475Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"factories\")"}
2026-02-16 04:18:00,670 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.670556Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,671 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("factories")
{"timestamp": "2026-02-16T09:18:00.671092Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"factories\")"}
2026-02-16 04:18:00,671 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.671171Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,671 INFO sqlalchemy.engine.Engine 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:18:00.672055Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE factories (\n\torganization_id CHAR(36) NOT NULL, \n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50) NOT NULL, \n\tcountry VARCHAR(100) NOT NULL, \n\tcity VARCHAR(100), \n\taddress TEXT, \n\ttimezone VARCHAR(50) NOT NULL, \n\ttotal_lines INTEGER, \n\ttotal_workers INTEGER, \n\tdaily_capacity_units INTEGER, \n\tcertifications TEXT, \n\tsettings JSON, \n\tlocale VARCHAR(20) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 04:18:00,672 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:18:00.672163Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:18:00,672 INFO sqlalchemy.engine.Engine CREATE INDEX ix_factories_organization_id ON factories (organization_id)
{"timestamp": "2026-02-16T09:18:00.672728Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_factories_organization_id ON factories (organization_id)"}
2026-02-16 04:18:00,672 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.672799Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,673 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("styles")
{"timestamp": "2026-02-16T09:18:00.673337Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"styles\")"}
2026-02-16 04:18:00,673 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.673424Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,673 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("styles")
{"timestamp": "2026-02-16T09:18:00.673881Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"styles\")"}
2026-02-16 04:18:00,673 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.673949Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,674 INFO sqlalchemy.engine.Engine 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.674607Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE styles (\n\tfactory_id VARCHAR(36) NOT NULL, \n\tstyle_number VARCHAR(100) NOT NULL, \n\tstyle_name VARCHAR(255), \n\tdescription VARCHAR(500), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tcategory VARCHAR(100), \n\tbase_sam NUMERIC(12, 4), \n\tcomplexity_rating VARCHAR(20), \n\tbom_summary JSON, \n\ttech_pack_url VARCHAR(500), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,674 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.674696Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,675 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_factory_id ON styles (factory_id)
{"timestamp": "2026-02-16T09:18:00.675257Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_factory_id ON styles (factory_id)"}
2026-02-16 04:18:00,675 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:18:00.675346Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:18:00,675 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_buyer ON styles (buyer)
{"timestamp": "2026-02-16T09:18:00.675894Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_buyer ON styles (buyer)"}
2026-02-16 04:18:00,675 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.675972Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,676 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_style_number ON styles (style_number)
{"timestamp": "2026-02-16T09:18:00.676489Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_style_number ON styles (style_number)"}
2026-02-16 04:18:00,676 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.676574Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,677 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("orders")
{"timestamp": "2026-02-16T09:18:00.677108Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"orders\")"}
2026-02-16 04:18:00,677 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.677187Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,677 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("orders")
{"timestamp": "2026-02-16T09:18:00.677687Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"orders\")"}
2026-02-16 04:18:00,677 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.677796Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,678 INFO sqlalchemy.engine.Engine 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.678616Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE orders (\n\tstyle_id VARCHAR(36) NOT NULL, \n\tpo_number VARCHAR(100) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tsize_breakdown JSON, \n\tuom VARCHAR(20) NOT NULL, \n\tcolor VARCHAR(100), \n\torder_date DATETIME, \n\tplanned_cut_date DATETIME, \n\tplanned_sew_date DATETIME, \n\tex_factory_date DATETIME, \n\tactual_ship_date DATETIME, \n\tstatus VARCHAR(20) NOT NULL, \n\tpriority VARCHAR(20) NOT NULL, \n\tqty_cut INTEGER NOT NULL, \n\tqty_sewn INTEGER NOT NULL, \n\tqty_packed INTEGER NOT NULL, \n\tqty_shipped INTEGER NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_style_po UNIQUE (style_id, po_number), \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,678 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:18:00.678707Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:18:00,679 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_po_number ON orders (po_number)
{"timestamp": "2026-02-16T09:18:00.679384Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_po_number ON orders (po_number)"}
2026-02-16 04:18:00,679 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:18:00.679483Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:18:00,680 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_status ON orders (status)
{"timestamp": "2026-02-16T09:18:00.680060Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_status ON orders (status)"}
2026-02-16 04:18:00,680 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.680135Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,680 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_style_id ON orders (style_id)
{"timestamp": "2026-02-16T09:18:00.680678Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_style_id ON orders (style_id)"}
2026-02-16 04:18:00,680 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:18:00.680774Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:18:00,681 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_runs")
{"timestamp": "2026-02-16T09:18:00.681324Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_runs\")"}
2026-02-16 04:18:00,681 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.681400Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,681 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_runs")
{"timestamp": "2026-02-16T09:18:00.681869Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_runs\")"}
2026-02-16 04:18:00,681 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.681950Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,682 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.682965Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_runs (\n\tfactory_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\tsource_import_id VARCHAR(36), \n\tproduction_date DATETIME, \n\tinspection_date DATETIME, \n\tshift VARCHAR(20) NOT NULL, \n\tplanned_qty INTEGER, \n\tactual_qty INTEGER NOT NULL, \n\twip_start INTEGER, \n\twip_end INTEGER, \n\tlot_number VARCHAR(50), \n\tshade_band VARCHAR(10), \n\tbatch_number VARCHAR(50), \n\tdowntime_minutes INTEGER, \n\tdowntime_reason VARCHAR(255), \n\tsam NUMERIC(12, 4), \n\toperators_present INTEGER NOT NULL, \n\thelpers_present INTEGER NOT NULL, \n\tworked_minutes NUMERIC(12, 4) NOT NULL, \n\tearned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), \n\tefficiency NUMERIC(10, 2) GENERATED ALWAYS AS (\n            CASE\n                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL\n                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100\n                ELSE 0\n            END\n            ), \n\tnotes TEXT, \n\tstart_time TIME, \n\tend_time TIME, \n\tstyle_number VARCHAR(100), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tpo_number VARCHAR(100), \n\tcolor VARCHAR(100), \n\tsize VARCHAR(50), \n\tdefects INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tline_efficiency NUMERIC(10, 2), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT check_positive_qty CHECK (actual_qty >= 0), \n\tCONSTRAINT check_positive_operators CHECK (operators_present >= 0), \n\tCONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), \n\tCONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), \n\tCONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), \n\tCONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), \n\tCONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,683 INFO sqlalchemy.engine.Engine [no key 0.00022s] ()
{"timestamp": "2026-02-16T09:18:00.683133Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00022s] ()"}
2026-02-16 04:18:00,683 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
{"timestamp": "2026-02-16T09:18:00.683950Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)"}
2026-02-16 04:18:00,684 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:18:00.684051Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:18:00,684 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
{"timestamp": "2026-02-16T09:18:00.684615Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)"}
2026-02-16 04:18:00,684 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.684696Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,685 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
{"timestamp": "2026-02-16T09:18:00.685209Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)"}
2026-02-16 04:18:00,685 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.685296Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,685 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
{"timestamp": "2026-02-16T09:18:00.685818Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)"}
2026-02-16 04:18:00,685 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.685900Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,686 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
{"timestamp": "2026-02-16T09:18:00.686398Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)"}
2026-02-16 04:18:00,686 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.686483Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,686 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
{"timestamp": "2026-02-16T09:18:00.686962Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)"}
2026-02-16 04:18:00,687 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.687043Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,687 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
{"timestamp": "2026-02-16T09:18:00.687543Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)"}
2026-02-16 04:18:00,687 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.687628Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,688 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
{"timestamp": "2026-02-16T09:18:00.688232Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)"}
2026-02-16 04:18:00,688 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.688309Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,688 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:18:00.688903Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"quality_inspections\")"}
2026-02-16 04:18:00,688 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.688982Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,689 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:18:00.689468Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"quality_inspections\")"}
2026-02-16 04:18:00,689 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.689544Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,690 INFO sqlalchemy.engine.Engine 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.690250Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE quality_inspections (\n\tproduction_run_id VARCHAR(36) NOT NULL, \n\tinspector_id VARCHAR(36), \n\tinspection_type VARCHAR(7) NOT NULL, \n\tunits_checked INTEGER NOT NULL, \n\tdefects_found INTEGER NOT NULL, \n\tunits_rejected INTEGER NOT NULL, \n\tunits_reworked INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\taql_level VARCHAR(20), \n\taql_result VARCHAR(7), \n\tinspected_at DATETIME NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,690 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.690348Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,690 INFO sqlalchemy.engine.Engine CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
{"timestamp": "2026-02-16T09:18:00.690973Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)"}
2026-02-16 04:18:00,691 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.691062Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,691 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("defects")
{"timestamp": "2026-02-16T09:18:00.691646Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"defects\")"}
2026-02-16 04:18:00,691 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.691717Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,692 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("defects")
{"timestamp": "2026-02-16T09:18:00.692295Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"defects\")"}
2026-02-16 04:18:00,692 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.692495Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,693 INFO sqlalchemy.engine.Engine 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.693650Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE defects (\n\tinspection_id VARCHAR(36) NOT NULL, \n\tworker_id VARCHAR(36), \n\tdefect_type VARCHAR(100) NOT NULL, \n\tdefect_code VARCHAR(20), \n\tdefect_category VARCHAR(100), \n\toperation VARCHAR(100), \n\tseverity VARCHAR(8) NOT NULL, \n\tis_reworkable BOOLEAN NOT NULL, \n\tis_reworked BOOLEAN NOT NULL, \n\troot_cause VARCHAR(255), \n\tmachine_id VARCHAR(50), \n\timage_url VARCHAR(500), \n\tcount INTEGER NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,693 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:18:00.693773Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 04:18:00,694 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_defect_type ON defects (defect_type)
{"timestamp": "2026-02-16T09:18:00.694642Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_defect_type ON defects (defect_type)"}
2026-02-16 04:18:00,694 INFO sqlalchemy.engine.Engine [no key 0.00027s] ()
{"timestamp": "2026-02-16T09:18:00.694891Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00027s] ()"}
2026-02-16 04:18:00,695 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_worker_id ON defects (worker_id)
{"timestamp": "2026-02-16T09:18:00.695692Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_worker_id ON defects (worker_id)"}
2026-02-16 04:18:00,695 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:18:00.695810Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:18:00,696 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
{"timestamp": "2026-02-16T09:18:00.696499Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)"}
2026-02-16 04:18:00,696 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:18:00.696599Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:18:00,697 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("raw_imports")
{"timestamp": "2026-02-16T09:18:00.697235Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"raw_imports\")"}
2026-02-16 04:18:00,697 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.697343Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,697 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("raw_imports")
{"timestamp": "2026-02-16T09:18:00.697905Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"raw_imports\")"}
2026-02-16 04:18:00,697 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.697997Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,698 INFO sqlalchemy.engine.Engine 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.698771Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE raw_imports (\n\tuploaded_by_id VARCHAR(36), \n\tfactory_id VARCHAR(36), \n\tproduction_line_id VARCHAR(36), \n\tdata_source_id VARCHAR(36), \n\ttime_column_used VARCHAR(100), \n\toriginal_filename VARCHAR(500) NOT NULL, \n\tfile_path VARCHAR(1000) NOT NULL, \n\tfile_size_bytes INTEGER NOT NULL, \n\tfile_hash VARCHAR(64) NOT NULL, \n\tmime_type VARCHAR(100), \n\tencoding_detected VARCHAR(50), \n\tsheet_count INTEGER NOT NULL, \n\tsheet_names TEXT, \n\trow_count INTEGER, \n\tcolumn_count INTEGER, \n\theader_row_detected INTEGER, \n\traw_headers TEXT, \n\tsample_data TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tprocessing_error TEXT, \n\tprocessed_at DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,698 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.698861Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,699 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
{"timestamp": "2026-02-16T09:18:00.699525Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)"}
2026-02-16 04:18:00,699 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.699617Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,700 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
{"timestamp": "2026-02-16T09:18:00.700153Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)"}
2026-02-16 04:18:00,700 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.700236Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,700 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
{"timestamp": "2026-02-16T09:18:00.700743Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)"}
2026-02-16 04:18:00,700 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.700822Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,701 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
{"timestamp": "2026-02-16T09:18:00.701342Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)"}
2026-02-16 04:18:00,701 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.701427Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,701 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("staging_records")
{"timestamp": "2026-02-16T09:18:00.702011Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"staging_records\")"}
2026-02-16 04:18:00,702 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.702094Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,702 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("staging_records")
{"timestamp": "2026-02-16T09:18:00.702600Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"staging_records\")"}
2026-02-16 04:18:00,702 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.702674Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,703 INFO sqlalchemy.engine.Engine 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.703324Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE staging_records (\n\traw_import_id VARCHAR(36) NOT NULL, \n\tsource_row_number INTEGER NOT NULL, \n\tstatus VARCHAR(50) NOT NULL, \n\tvalidation_errors TEXT, \n\tvalidation_warnings TEXT, \n\trecord_data TEXT NOT NULL, \n\tnormalized_data TEXT, \n\tquality_score FLOAT, \n\tnull_field_count INTEGER, \n\tpromoted_at DATETIME, \n\tpromoted_to_table VARCHAR(100), \n\tpromoted_record_id VARCHAR(36), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,703 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.703405Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,703 INFO sqlalchemy.engine.Engine CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
{"timestamp": "2026-02-16T09:18:00.704033Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)"}
2026-02-16 04:18:00,704 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.704116Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,704 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("organizations")
{"timestamp": "2026-02-16T09:18:00.704667Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"organizations\")"}
2026-02-16 04:18:00,704 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.704743Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,705 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("organizations")
{"timestamp": "2026-02-16T09:18:00.705387Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"organizations\")"}
2026-02-16 04:18:00,705 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.705467Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,706 INFO sqlalchemy.engine.Engine 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:18:00.706199Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE organizations (\n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50), \n\tsubscription_tier VARCHAR(10) NOT NULL, \n\tsettings TEXT, \n\tmax_factories INTEGER NOT NULL, \n\tmax_lines_per_factory INTEGER NOT NULL, \n\tprimary_email VARCHAR(255), \n\tprimary_phone VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 04:18:00,706 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.706284Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,706 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
{"timestamp": "2026-02-16T09:18:00.706956Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"users\")"}
2026-02-16 04:18:00,707 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.707039Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,707 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("users")
{"timestamp": "2026-02-16T09:18:00.707560Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"users\")"}
2026-02-16 04:18:00,707 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.707633Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,708 INFO sqlalchemy.engine.Engine 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


{"timestamp": "2026-02-16T09:18:00.708328Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE users (\n\torganization_id CHAR(36) NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\thashed_password VARCHAR(255) NOT NULL, \n\tfull_name VARCHAR(255), \n\tavatar_url VARCHAR(500), \n\ttimezone VARCHAR(50), \n\tpreferences TEXT, \n\trole VARCHAR(15) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tis_verified BOOLEAN NOT NULL, \n\tlast_login DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (email)\n)\n\n"}
2026-02-16 04:18:00,708 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.708419Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,708 INFO sqlalchemy.engine.Engine CREATE INDEX ix_users_organization_id ON users (organization_id)
{"timestamp": "2026-02-16T09:18:00.709050Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_users_organization_id ON users (organization_id)"}
2026-02-16 04:18:00,709 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.709134Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,709 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_scopes")
{"timestamp": "2026-02-16T09:18:00.709654Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"user_scopes\")"}
2026-02-16 04:18:00,709 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.709731Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,710 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("user_scopes")
{"timestamp": "2026-02-16T09:18:00.710355Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"user_scopes\")"}
2026-02-16 04:18:00,710 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.710476Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,711 INFO sqlalchemy.engine.Engine 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.711536Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE user_scopes (\n\tuser_id CHAR(36) NOT NULL, \n\tscope_type VARCHAR(12) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tdata_source_id CHAR(36), \n\trole VARCHAR(15) NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,711 INFO sqlalchemy.engine.Engine [no key 0.00021s] ()
{"timestamp": "2026-02-16T09:18:00.711704Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00021s] ()"}
2026-02-16 04:18:00,712 INFO sqlalchemy.engine.Engine CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
{"timestamp": "2026-02-16T09:18:00.712496Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)"}
2026-02-16 04:18:00,712 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:18:00.712605Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 04:18:00,713 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("waitlist")
{"timestamp": "2026-02-16T09:18:00.713238Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"waitlist\")"}
2026-02-16 04:18:00,713 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.713337Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,713 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("waitlist")
{"timestamp": "2026-02-16T09:18:00.713974Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"waitlist\")"}
2026-02-16 04:18:00,714 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.714059Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,714 INFO sqlalchemy.engine.Engine 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


{"timestamp": "2026-02-16T09:18:00.714706Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE waitlist (\n\tid INTEGER NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\treferral_code VARCHAR(8) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n"}
2026-02-16 04:18:00,714 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.714789Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,715 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
{"timestamp": "2026-02-16T09:18:00.715350Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)"}
2026-02-16 04:18:00,715 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.715452Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,715 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
{"timestamp": "2026-02-16T09:18:00.715994Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)"}
2026-02-16 04:18:00,716 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.716077Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,716 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("workers")
{"timestamp": "2026-02-16T09:18:00.716631Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"workers\")"}
2026-02-16 04:18:00,716 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.716705Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,717 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("workers")
{"timestamp": "2026-02-16T09:18:00.717257Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"workers\")"}
2026-02-16 04:18:00,717 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.717342Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,718 INFO sqlalchemy.engine.Engine 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.718146Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE workers (\n\tfactory_id VARCHAR(36) NOT NULL, \n\temployee_id VARCHAR(50) NOT NULL, \n\tfull_name VARCHAR(255) NOT NULL, \n\tdepartment VARCHAR(100), \n\tjob_title VARCHAR(100), \n\tprimary_skill VARCHAR(100), \n\tdata_source_id VARCHAR(36), \n\thire_date DATE, \n\ttermination_date DATE, \n\thourly_rate NUMERIC(10, 2), \n\tcurrency VARCHAR(3), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,718 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.718232Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,718 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_factory_id ON workers (factory_id)
{"timestamp": "2026-02-16T09:18:00.718817Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_factory_id ON workers (factory_id)"}
2026-02-16 04:18:00,718 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.718901Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,719 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_employee_id ON workers (employee_id)
{"timestamp": "2026-02-16T09:18:00.719482Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_employee_id ON workers (employee_id)"}
2026-02-16 04:18:00,719 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.719557Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,720 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_skills")
{"timestamp": "2026-02-16T09:18:00.720055Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_skills\")"}
2026-02-16 04:18:00,720 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.720136Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,720 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_skills")
{"timestamp": "2026-02-16T09:18:00.720622Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_skills\")"}
2026-02-16 04:18:00,720 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.720693Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,721 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.721589Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_skills (\n\tworker_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\toperation_category VARCHAR(100), \n\tproficiency_pct NUMERIC(5, 2), \n\tsam_achieved NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\tpieces_lifetime INTEGER, \n\tpieces_30d INTEGER, \n\tis_certified BOOLEAN NOT NULL, \n\tcertification_date DATE, \n\tlast_assessed DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,721 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:18:00.721695Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 04:18:00,722 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
{"timestamp": "2026-02-16T09:18:00.722409Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)"}
2026-02-16 04:18:00,722 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.722499Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,722 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
{"timestamp": "2026-02-16T09:18:00.723037Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)"}
2026-02-16 04:18:00,723 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.723125Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,723 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:18:00.723669Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_attendances\")"}
2026-02-16 04:18:00,723 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.723744Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,724 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:18:00.724315Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_attendances\")"}
2026-02-16 04:18:00,724 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.724402Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,725 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.725100Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_attendances (\n\tworker_id VARCHAR(36) NOT NULL, \n\twork_date DATE NOT NULL, \n\tclock_in TIME, \n\tclock_out TIME, \n\thours_regular NUMERIC(4, 2), \n\thours_overtime NUMERIC(4, 2), \n\thours_total NUMERIC(4, 2), \n\tis_present BOOLEAN NOT NULL, \n\tabsence_reason VARCHAR(100), \n\tis_approved BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,725 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.725196Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,725 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
{"timestamp": "2026-02-16T09:18:00.725798Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)"}
2026-02-16 04:18:00,725 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.725878Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,726 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
{"timestamp": "2026-02-16T09:18:00.726347Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)"}
2026-02-16 04:18:00,726 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.726428Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,726 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_outputs")
{"timestamp": "2026-02-16T09:18:00.726957Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_outputs\")"}
2026-02-16 04:18:00,726 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.727024Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,727 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_outputs")
{"timestamp": "2026-02-16T09:18:00.727531Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_outputs\")"}
2026-02-16 04:18:00,727 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.727595Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,728 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.728331Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_outputs (\n\tworker_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\tpieces_completed INTEGER NOT NULL, \n\tsam_earned NUMERIC(10, 2), \n\tminutes_worked NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\trecorded_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,728 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:18:00.728437Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:18:00,728 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
{"timestamp": "2026-02-16T09:18:00.728988Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)"}
2026-02-16 04:18:00,729 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.729061Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,729 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
{"timestamp": "2026-02-16T09:18:00.729539Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)"}
2026-02-16 04:18:00,729 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.729621Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,730 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:18:00.730165Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"fabric_lots\")"}
2026-02-16 04:18:00,730 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.730245Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,730 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:18:00.730774Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"fabric_lots\")"}
2026-02-16 04:18:00,730 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.730864Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,731 INFO sqlalchemy.engine.Engine 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.731640Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE fabric_lots (\n\tfactory_id CHAR(36) NOT NULL, \n\tlot_number VARCHAR(100) NOT NULL, \n\tfabric_type VARCHAR(100), \n\tcomposition VARCHAR(255), \n\twidth_cm INTEGER, \n\tgsm INTEGER, \n\tcolor VARCHAR(100), \n\tsupplier VARCHAR(255), \n\torigin_country VARCHAR(100), \n\tmill_name VARCHAR(255), \n\treceived_date DATE, \n\tinitial_meters NUMERIC(12, 2), \n\tavailable_meters NUMERIC(12, 2), \n\treserved_meters NUMERIC(12, 2), \n\tunit_cost NUMERIC(10, 4), \n\tcurrency VARCHAR(3), \n\tcertifications TEXT, \n\tinspection_status VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,731 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.731739Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,732 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
{"timestamp": "2026-02-16T09:18:00.732365Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)"}
2026-02-16 04:18:00,732 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.732445Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,732 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
{"timestamp": "2026-02-16T09:18:00.732974Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)"}
2026-02-16 04:18:00,733 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.733054Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,733 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
{"timestamp": "2026-02-16T09:18:00.733522Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)"}
2026-02-16 04:18:00,733 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.733597Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,734 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
{"timestamp": "2026-02-16T09:18:00.734097Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)"}
2026-02-16 04:18:00,734 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.734176Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,734 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:18:00.734635Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cut_tickets\")"}
2026-02-16 04:18:00,734 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.734706Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,735 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:18:00.735152Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cut_tickets\")"}
2026-02-16 04:18:00,735 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.735223Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,735 INFO sqlalchemy.engine.Engine 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.735905Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cut_tickets (\n\tfabric_lot_id CHAR(36) NOT NULL, \n\torder_id CHAR(36) NOT NULL, \n\tticket_number VARCHAR(100) NOT NULL, \n\tcut_date DATE, \n\tplies INTEGER, \n\tmarker_length_cm INTEGER, \n\tconsumption_meters NUMERIC(10, 2), \n\twastage_pct NUMERIC(5, 2), \n\tsize_ratio TEXT, \n\tbundle_count INTEGER, \n\ttotal_pieces INTEGER, \n\tcutter_id CHAR(36), \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,735 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.735997Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,736 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
{"timestamp": "2026-02-16T09:18:00.736567Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)"}
2026-02-16 04:18:00,736 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.736644Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,737 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
{"timestamp": "2026-02-16T09:18:00.737130Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)"}
2026-02-16 04:18:00,737 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:18:00.737200Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 04:18:00,737 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
{"timestamp": "2026-02-16T09:18:00.737739Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)"}
2026-02-16 04:18:00,737 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.737825Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,738 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("packing_lists")
{"timestamp": "2026-02-16T09:18:00.738393Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"packing_lists\")"}
2026-02-16 04:18:00,738 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.738462Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,738 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("packing_lists")
{"timestamp": "2026-02-16T09:18:00.738976Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"packing_lists\")"}
2026-02-16 04:18:00,739 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.739055Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,739 INFO sqlalchemy.engine.Engine 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.739801Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE packing_lists (\n\torder_id CHAR(36) NOT NULL, \n\tpacking_list_number VARCHAR(100) NOT NULL, \n\tship_date DATE, \n\tdestination VARCHAR(255), \n\tship_to_address TEXT, \n\tcarrier VARCHAR(100), \n\ttracking_number VARCHAR(255), \n\tcontainer_number VARCHAR(100), \n\ttotal_cartons INTEGER, \n\ttotal_units INTEGER, \n\ttotal_net_weight_kg NUMERIC(10, 2), \n\ttotal_gross_weight_kg NUMERIC(10, 2), \n\ttotal_cbm NUMERIC(8, 3), \n\tstatus VARCHAR(10) NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,739 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:18:00.739909Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 04:18:00,740 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
{"timestamp": "2026-02-16T09:18:00.740513Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)"}
2026-02-16 04:18:00,740 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.740596Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,741 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
{"timestamp": "2026-02-16T09:18:00.741095Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)"}
2026-02-16 04:18:00,741 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.741186Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,741 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cartons")
{"timestamp": "2026-02-16T09:18:00.741696Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cartons\")"}
2026-02-16 04:18:00,741 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.741776Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,742 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cartons")
{"timestamp": "2026-02-16T09:18:00.742305Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cartons\")"}
2026-02-16 04:18:00,742 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.742375Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,743 INFO sqlalchemy.engine.Engine 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:18:00.743061Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cartons (\n\tpacking_list_id CHAR(36) NOT NULL, \n\tcarton_number VARCHAR(50) NOT NULL, \n\tsize_breakdown TEXT, \n\tcolor VARCHAR(100), \n\ttotal_units INTEGER, \n\tnet_weight_kg NUMERIC(8, 2), \n\tgross_weight_kg NUMERIC(8, 2), \n\tdimensions_cm TEXT, \n\tlength_cm INTEGER, \n\twidth_cm INTEGER, \n\theight_cm INTEGER, \n\tbarcode VARCHAR(100), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 04:18:00,743 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:18:00.743155Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 04:18:00,743 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
{"timestamp": "2026-02-16T09:18:00.743756Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)"}
2026-02-16 04:18:00,743 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.743836Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,744 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("traceability_records")
{"timestamp": "2026-02-16T09:18:00.744388Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"traceability_records\")"}
2026-02-16 04:18:00,744 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.744466Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,744 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("traceability_records")
{"timestamp": "2026-02-16T09:18:00.744993Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"traceability_records\")"}
2026-02-16 04:18:00,745 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:18:00.745063Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 04:18:00,745 INFO sqlalchemy.engine.Engine 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:18:00.745762Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE traceability_records (\n\tcarton_id CHAR(36), \n\tfabric_lot_id CHAR(36), \n\tcut_ticket_id CHAR(36), \n\tproduction_run_id CHAR(36), \n\tcompliance_standard VARCHAR(8) NOT NULL, \n\tchain_of_custody TEXT, \n\tsupporting_documents TEXT, \n\tverification_status VARCHAR(8) NOT NULL, \n\tverified_by_id CHAR(36), \n\tverified_at DATETIME, \n\trisk_score VARCHAR(20), \n\trisk_notes TEXT, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, \n\tFOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, \n\tFOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 04:18:00,745 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.745851Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,746 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
{"timestamp": "2026-02-16T09:18:00.746510Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)"}
2026-02-16 04:18:00,746 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:18:00.746599Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 04:18:00,747 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
{"timestamp": "2026-02-16T09:18:00.747096Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)"}
2026-02-16 04:18:00,747 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:18:00.747167Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 04:18:00,747 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
{"timestamp": "2026-02-16T09:18:00.747700Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)"}
2026-02-16 04:18:00,747 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:18:00.747780Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 04:18:00,748 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:18:00.748305Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 04:18:00,748 INFO sqlalchemy.engine.Engine [cached since 63.63s ago] ()
{"timestamp": "2026-02-16T09:18:00.748379Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.63s ago] ()"}
2026-02-16 04:18:00,748 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:18:00.748824Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:18:00,749 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:18:00.749835Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:18:00,750 INFO sqlalchemy.engine.Engine INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:18:00.750074Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:18:00,750 INFO sqlalchemy.engine.Engine [cached since 63.46s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, 'd83d8779-f022-479c-9adc-d75536a8d2e8', '2026-02-16 09:18:00.749999', '2026-02-16 09:18:00.750001', 0, None)
{"timestamp": "2026-02-16T09:18:00.750160Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.46s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, 'd83d8779-f022-479c-9adc-d75536a8d2e8', '2026-02-16 09:18:00.749999', '2026-02-16 09:18:00.750001', 0, None)"}
2026-02-16 04:18:00,750 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:18:00.750723Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:18:00,751 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:18:00.751301Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:18:00,751 INFO sqlalchemy.engine.Engine SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
{"timestamp": "2026-02-16T09:18:00.751542Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at \nFROM organizations \nWHERE organizations.id = ?"}
2026-02-16 04:18:00,751 INFO sqlalchemy.engine.Engine [cached since 63.46s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8',)
{"timestamp": "2026-02-16T09:18:00.751625Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.46s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8',)"}
2026-02-16 04:18:00,752 INFO sqlalchemy.engine.Engine SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
{"timestamp": "2026-02-16T09:18:00.752964Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at \nFROM users \nWHERE ? = users.organization_id"}
2026-02-16 04:18:00,753 INFO sqlalchemy.engine.Engine [cached since 63.46s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8',)
{"timestamp": "2026-02-16T09:18:00.753076Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.46s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8',)"}
2026-02-16 04:18:00,753 INFO sqlalchemy.engine.Engine SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
{"timestamp": "2026-02-16T09:18:00.753979Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at \nFROM factories \nWHERE ? = factories.organization_id"}
2026-02-16 04:18:00,754 INFO sqlalchemy.engine.Engine [cached since 63.46s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8',)
{"timestamp": "2026-02-16T09:18:00.754086Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.46s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8',)"}
2026-02-16 04:18:00,967 INFO sqlalchemy.engine.Engine INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:18:00.967644Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:18:00,967 INFO sqlalchemy.engine.Engine [cached since 63.44s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8', 'test@example.com', '$2b$12$rbHUddYCj8EJKvxuVSL8tuS2nreavc10baZ80ia7DwDLxHKFflooe', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, 'a939b1e7-c94e-4b91-9a3f-9a37ee877772', '2026-02-16 09:18:00.967477', '2026-02-16 09:18:00.967480', 0, None)
{"timestamp": "2026-02-16T09:18:00.967783Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.44s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8', 'test@example.com', '$2b$12$rbHUddYCj8EJKvxuVSL8tuS2nreavc10baZ80ia7DwDLxHKFflooe', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, 'a939b1e7-c94e-4b91-9a3f-9a37ee877772', '2026-02-16 09:18:00.967477', '2026-02-16 09:18:00.967480', 0, None)"}
2026-02-16 04:18:00,968 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:18:00.968500Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:18:00,969 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:18:00.969093Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:18:00,969 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
{"timestamp": "2026-02-16T09:18:00.969310Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ?"}
2026-02-16 04:18:00,969 INFO sqlalchemy.engine.Engine [cached since 63.44s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
{"timestamp": "2026-02-16T09:18:00.969456Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.44s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)"}
2026-02-16 04:18:00,970 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
{"timestamp": "2026-02-16T09:18:00.970448Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.user_id"}
2026-02-16 04:18:00,970 INFO sqlalchemy.engine.Engine [cached since 63.44s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
{"timestamp": "2026-02-16T09:18:00.970605Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.44s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)"}
2026-02-16 04:18:00,971 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
{"timestamp": "2026-02-16T09:18:00.971536Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE ? = user_scopes.user_id"}
2026-02-16 04:18:00,971 INFO sqlalchemy.engine.Engine [cached since 63.44s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
{"timestamp": "2026-02-16T09:18:00.971625Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.44s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)"}
----------------------------- Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.59s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_style_id ON production_events (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_order_id ON production_events (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_factories_organization_id ON factories (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_factory_id ON styles (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_buyer ON styles (buyer)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_style_number ON styles (style_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_po_number ON orders (po_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_status ON orders (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_style_id ON orders (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00022s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_defect_type ON defects (defect_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00027s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_worker_id ON defects (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_users_organization_id ON users (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00021s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_factory_id ON workers (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_employee_id ON workers (employee_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.63s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.46s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, 'd83d8779-f022-479c-9adc-d75536a8d2e8', '2026-02-16 09:18:00.749999', '2026-02-16 09:18:00.750001', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.46s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.46s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.46s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.44s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8', 'test@example.com', '$2b$12$rbHUddYCj8EJKvxuVSL8tuS2nreavc10baZ80ia7DwDLxHKFflooe', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, 'a939b1e7-c94e-4b91-9a3f-9a37ee877772', '2026-02-16 09:18:00.967477', '2026-02-16 09:18:00.967480', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.44s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.44s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.44s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
---------------------------- Captured stdout call -----------------------------
2026-02-16 04:18:00,973 INFO sqlalchemy.engine.Engine INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:18:00.973638Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:18:00,973 INFO sqlalchemy.engine.Engine [cached since 63.42s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8', 'Evolution Factory', 'EF-001', 'US', None, None, 'UTC', None, None, None, None, 'en-US', 1, '1ac217ce-1b17-4459-b3fd-cd878d060008', '2026-02-16 09:18:00.973478', '2026-02-16 09:18:00.973480')
{"timestamp": "2026-02-16T09:18:00.973751Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.42s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8', 'Evolution Factory', 'EF-001', 'US', None, None, 'UTC', None, None, None, None, 'en-US', 1, '1ac217ce-1b17-4459-b3fd-cd878d060008', '2026-02-16 09:18:00.973478', '2026-02-16 09:18:00.973480')"}
2026-02-16 04:18:00,974 INFO sqlalchemy.engine.Engine INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:18:00.974636Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:18:00,974 INFO sqlalchemy.engine.Engine [cached since 63.42s ago] ('1ac217ce-1b17-4459-b3fd-cd878d060008', 'Evo Line', 'EL-01', None, None, None, None, None, None, None, None, None, None, 0, None, None, 1, 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', '2026-02-16 09:18:00.974538', '2026-02-16 09:18:00.974539')
{"timestamp": "2026-02-16T09:18:00.974734Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.42s ago] ('1ac217ce-1b17-4459-b3fd-cd878d060008', 'Evo Line', 'EL-01', None, None, None, None, None, None, None, None, None, None, 0, None, None, 1, 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', '2026-02-16 09:18:00.974538', '2026-02-16 09:18:00.974539')"}
2026-02-16 04:18:00,975 INFO sqlalchemy.engine.Engine INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:18:00.975972Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:18:00,976 INFO sqlalchemy.engine.Engine [generated in 0.00025s] (None, 'Unnamed Line', None, None, None, None, None, 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', 'Evo Source', None, 'Date', None, None, 0, None, None, 1, 'bc0a9ff9-b01b-4674-942f-595a11eea243', '2026-02-16 09:18:00.975850', '2026-02-16 09:18:00.975852')
{"timestamp": "2026-02-16T09:18:00.976079Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] (None, 'Unnamed Line', None, None, None, None, None, 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', 'Evo Source', None, 'Date', None, None, 0, None, None, 1, 'bc0a9ff9-b01b-4674-942f-595a11eea243', '2026-02-16 09:18:00.975850', '2026-02-16 09:18:00.975852')"}
2026-02-16 04:18:00,976 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:18:00.976715Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:18:00,978 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:18:00.978340Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:18:00,978 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ? AND users.is_active = 1
{"timestamp": "2026-02-16T09:18:00.978540Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ? AND users.is_active = 1"}
2026-02-16 04:18:00,978 INFO sqlalchemy.engine.Engine [cached since 63.42s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
{"timestamp": "2026-02-16T09:18:00.978619Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.42s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)"}
2026-02-16 04:18:00,979 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.user_id IN (?)
{"timestamp": "2026-02-16T09:18:00.979643Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE dashboards.user_id IN (?)"}
2026-02-16 04:18:00,979 INFO sqlalchemy.engine.Engine [cached since 63.42s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
{"timestamp": "2026-02-16T09:18:00.979743Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.42s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)"}
2026-02-16 04:18:00,980 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE user_scopes.user_id IN (?)
{"timestamp": "2026-02-16T09:18:00.980605Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE user_scopes.user_id IN (?)"}
2026-02-16 04:18:00,980 INFO sqlalchemy.engine.Engine [cached since 63.42s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
{"timestamp": "2026-02-16T09:18:00.980697Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.42s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)"}
2026-02-16 04:18:00,981 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
{"timestamp": "2026-02-16T09:18:00.981653Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at \nFROM data_sources \nWHERE data_sources.id = ?"}
2026-02-16 04:18:00,981 INFO sqlalchemy.engine.Engine [cached since 63.42s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:00.981746Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.42s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
2026-02-16 04:18:00,982 INFO sqlalchemy.engine.Engine SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE schema_mappings.data_source_id IN (?)
{"timestamp": "2026-02-16T09:18:00.982779Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at \nFROM schema_mappings \nWHERE schema_mappings.data_source_id IN (?)"}
2026-02-16 04:18:00,982 INFO sqlalchemy.engine.Engine [cached since 63.42s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:00.982880Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.42s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
2026-02-16 04:18:00,983 INFO sqlalchemy.engine.Engine SELECT production_runs.data_source_id AS production_runs_data_source_id, production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE production_runs.data_source_id IN (?)
{"timestamp": "2026-02-16T09:18:00.983745Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT production_runs.data_source_id AS production_runs_data_source_id, production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at \nFROM production_runs \nWHERE production_runs.data_source_id IN (?)"}
2026-02-16 04:18:00,983 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:00.983849Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
2026-02-16 04:18:00,984 INFO sqlalchemy.engine.Engine SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ai_decisions.data_source_id IN (?)
{"timestamp": "2026-02-16T09:18:00.984809Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at \nFROM ai_decisions \nWHERE ai_decisions.data_source_id IN (?)"}
2026-02-16 04:18:00,984 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:00.984908Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
2026-02-16 04:18:00,985 INFO sqlalchemy.engine.Engine SELECT dashboards.data_source_id AS dashboards_data_source_id, dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.data_source_id IN (?)
{"timestamp": "2026-02-16T09:18:00.985791Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.data_source_id AS dashboards_data_source_id, dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE dashboards.data_source_id IN (?)"}
2026-02-16 04:18:00,985 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:00.985895Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
2026-02-16 04:18:00,986 INFO sqlalchemy.engine.Engine SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.file_hash = ? AND raw_imports.data_source_id = ?
{"timestamp": "2026-02-16T09:18:00.986953Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at \nFROM raw_imports \nWHERE raw_imports.file_hash = ? AND raw_imports.data_source_id = ?"}
2026-02-16 04:18:00,987 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('4251fb35733d461f26797ec07c9efe5cfe4959ca8ddd95e13478a12689d85b61', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736')
{"timestamp": "2026-02-16T09:18:00.987117Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('4251fb35733d461f26797ec07c9efe5cfe4959ca8ddd95e13478a12689d85b61', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736')"}
2026-02-16 04:18:01,003 INFO sqlalchemy.engine.Engine INSERT INTO raw_imports (uploaded_by_id, factory_id, production_line_id, data_source_id, time_column_used, original_filename, file_path, file_size_bytes, file_hash, mime_type, encoding_detected, sheet_count, sheet_names, row_count, column_count, header_row_detected, raw_headers, sample_data, status, processing_error, processed_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:18:01.003160Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO raw_imports (uploaded_by_id, factory_id, production_line_id, data_source_id, time_column_used, original_filename, file_path, file_size_bytes, file_hash, mime_type, encoding_detected, sheet_count, sheet_names, row_count, column_count, header_row_detected, raw_headers, sample_data, status, processing_error, processed_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:18:01,003 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] (None, '1ac217ce-1b17-4459-b3fd-cd878d060008', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', None, 'new_data.csv', 'uploads\\1ac217ce-1b17-4459-b3fd-cd878d060008\\c79a55ed-b2e5-4d4c-a04e-e97188a6c736\\2026\\02\\4251fb35733d461f_new_data.csv', 32, '4251fb35733d461f26797ec07c9efe5cfe4959ca8ddd95e13478a12689d85b61', 'text/csv', 'ascii', 1, None, 1, 3, None, '["Date", "Total", "Eff"]', '[["2025-02-01", 100, 90]]', 'uploaded', None, None, '4b474ab5-816f-428e-9146-e6be13142350', '2026-02-16 09:18:01.003019', '2026-02-16 09:18:01.003022')
{"timestamp": "2026-02-16T09:18:01.003386Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] (None, '1ac217ce-1b17-4459-b3fd-cd878d060008', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', None, 'new_data.csv', 'uploads\\\\1ac217ce-1b17-4459-b3fd-cd878d060008\\\\c79a55ed-b2e5-4d4c-a04e-e97188a6c736\\\\2026\\\\02\\\\4251fb35733d461f_new_data.csv', 32, '4251fb35733d461f26797ec07c9efe5cfe4959ca8ddd95e13478a12689d85b61', 'text/csv', 'ascii', 1, None, 1, 3, None, '[\"Date\", \"Total\", \"Eff\"]', '[[\"2025-02-01\", 100, 90]]', 'uploaded', None, None, '4b474ab5-816f-428e-9146-e6be13142350', '2026-02-16 09:18:01.003019', '2026-02-16 09:18:01.003022')"}
2026-02-16 04:18:01,004 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:18:01.004353Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:18:01,004 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:18:01.004982Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:18:01,005 INFO sqlalchemy.engine.Engine SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.id = ?
{"timestamp": "2026-02-16T09:18:01.005202Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at \nFROM raw_imports \nWHERE raw_imports.id = ?"}
2026-02-16 04:18:01,005 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)
{"timestamp": "2026-02-16T09:18:01.005294Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)"}
{"timestamp": "2026-02-16T09:18:01.006221Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://test/api/v1/ingestion/upload?factory_id=1ac217ce-1b17-4459-b3fd-cd878d060008&production_line_id=c79a55ed-b2e5-4d4c-a04e-e97188a6c736 \"HTTP/1.1 200 OK\""}
2026-02-16 04:18:01,007 INFO sqlalchemy.engine.Engine SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.id = ?
{"timestamp": "2026-02-16T09:18:01.007704Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at \nFROM raw_imports \nWHERE raw_imports.id = ?"}
2026-02-16 04:18:01,007 INFO sqlalchemy.engine.Engine [cached since 63.4s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)
{"timestamp": "2026-02-16T09:18:01.007809Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.4s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)"}
2026-02-16 04:18:01,009 INFO sqlalchemy.engine.Engine UPDATE raw_imports SET status=?, processed_at=?, updated_at=? WHERE raw_imports.id = ?
{"timestamp": "2026-02-16T09:18:01.009483Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE raw_imports SET status=?, processed_at=?, updated_at=? WHERE raw_imports.id = ?"}
2026-02-16 04:18:01,009 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('processed', '2026-02-16 09:18:01.008908', '2026-02-16 09:18:01.009386', '4b474ab5-816f-428e-9146-e6be13142350')
{"timestamp": "2026-02-16T09:18:01.009573Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00018s] ('processed', '2026-02-16 09:18:01.008908', '2026-02-16 09:18:01.009386', '4b474ab5-816f-428e-9146-e6be13142350')"}
2026-02-16 04:18:01,010 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:18:01.010123Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:18:01,011 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:18:01.011771Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:18:01,011 INFO sqlalchemy.engine.Engine DELETE FROM staging_records WHERE staging_records.raw_import_id = ?
{"timestamp": "2026-02-16T09:18:01.011985Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DELETE FROM staging_records WHERE staging_records.raw_import_id = ?"}
2026-02-16 04:18:01,012 INFO sqlalchemy.engine.Engine [cached since 50.78s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)
{"timestamp": "2026-02-16T09:18:01.012063Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 50.78s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)"}
2026-02-16 04:18:01,013 INFO sqlalchemy.engine.Engine INSERT INTO staging_records (raw_import_id, source_row_number, status, validation_errors, validation_warnings, record_data, normalized_data, quality_score, null_field_count, promoted_at, promoted_to_table, promoted_record_id, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:18:01.013079Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO staging_records (raw_import_id, source_row_number, status, validation_errors, validation_warnings, record_data, normalized_data, quality_score, null_field_count, promoted_at, promoted_to_table, promoted_record_id, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:18:01,013 INFO sqlalchemy.engine.Engine [cached since 12.16s ago] ('4b474ab5-816f-428e-9146-e6be13142350', 1, 'pending', None, None, '{"Date": "2025-02-01", "Total": 100, "Eff": 90}', None, None, None, None, None, None, 'd8d044b6-eef5-4a21-a3b6-abaad8e704c7', '2026-02-16 09:18:01.012985', '2026-02-16 09:18:01.012988')
{"timestamp": "2026-02-16T09:18:01.013170Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 12.16s ago] ('4b474ab5-816f-428e-9146-e6be13142350', 1, 'pending', None, None, '{\"Date\": \"2025-02-01\", \"Total\": 100, \"Eff\": 90}', None, None, None, None, None, None, 'd8d044b6-eef5-4a21-a3b6-abaad8e704c7', '2026-02-16 09:18:01.012985', '2026-02-16 09:18:01.012988')"}
2026-02-16 04:18:01,013 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:18:01.013767Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
{"timestamp": "2026-02-16T09:18:01.014566Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://test/api/v1/ingestion/process/4b474ab5-816f-428e-9146-e6be13142350 \"HTTP/1.1 200 OK\""}
{"timestamp": "2026-02-16T09:18:01.015105Z", "level": "INFO", "logger": "ingestion.confirm_mapping", "message": "============================================================"}
{"timestamp": "2026-02-16T09:18:01.015163Z", "level": "INFO", "logger": "ingestion.confirm_mapping", "message": "CONFIRM-MAPPING ENDPOINT CALLED"}
{"timestamp": "2026-02-16T09:18:01.015197Z", "level": "INFO", "logger": "ingestion.confirm_mapping", "message": "  raw_import_id: 4b474ab5-816f-428e-9146-e6be13142350"}
{"timestamp": "2026-02-16T09:18:01.015226Z", "level": "INFO", "logger": "ingestion.confirm_mapping", "message": "  production_line_id: c79a55ed-b2e5-4d4c-a04e-e97188a6c736"}
{"timestamp": "2026-02-16T09:18:01.015255Z", "level": "INFO", "logger": "ingestion.confirm_mapping", "message": "  factory_id: None"}
{"timestamp": "2026-02-16T09:18:01.015284Z", "level": "INFO", "logger": "ingestion.confirm_mapping", "message": "  data_source_id: None"}
{"timestamp": "2026-02-16T09:18:01.015313Z", "level": "INFO", "logger": "ingestion.confirm_mapping", "message": "  mappings count: 3"}
{"timestamp": "2026-02-16T09:18:01.015340Z", "level": "INFO", "logger": "ingestion.confirm_mapping", "message": "============================================================"}
2026-02-16 04:18:01,015 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:18:01.015621Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:18:01,015 INFO sqlalchemy.engine.Engine SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.id = ?
{"timestamp": "2026-02-16T09:18:01.015799Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at \nFROM raw_imports \nWHERE raw_imports.id = ?"}
2026-02-16 04:18:01,015 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)
{"timestamp": "2026-02-16T09:18:01.015897Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)"}
2026-02-16 04:18:01,016 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
{"timestamp": "2026-02-16T09:18:01.016838Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at \nFROM data_sources \nWHERE data_sources.id = ?"}
2026-02-16 04:18:01,016 INFO sqlalchemy.engine.Engine [cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:01.016935Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
2026-02-16 04:18:01,018 INFO sqlalchemy.engine.Engine SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE schema_mappings.data_source_id IN (?)
{"timestamp": "2026-02-16T09:18:01.018058Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at \nFROM schema_mappings \nWHERE schema_mappings.data_source_id IN (?)"}
2026-02-16 04:18:01,018 INFO sqlalchemy.engine.Engine [cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:01.018160Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
2026-02-16 04:18:01,018 INFO sqlalchemy.engine.Engine SELECT production_runs.data_source_id AS production_runs_data_source_id, production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE production_runs.data_source_id IN (?)
{"timestamp": "2026-02-16T09:18:01.019027Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT production_runs.data_source_id AS production_runs_data_source_id, production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at \nFROM production_runs \nWHERE production_runs.data_source_id IN (?)"}
2026-02-16 04:18:01,019 INFO sqlalchemy.engine.Engine [cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:01.019128Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
2026-02-16 04:18:01,020 INFO sqlalchemy.engine.Engine SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ai_decisions.data_source_id IN (?)
{"timestamp": "2026-02-16T09:18:01.020122Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at \nFROM ai_decisions \nWHERE ai_decisions.data_source_id IN (?)"}
2026-02-16 04:18:01,020 INFO sqlalchemy.engine.Engine [cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:01.020259Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
2026-02-16 04:18:01,021 INFO sqlalchemy.engine.Engine SELECT dashboards.data_source_id AS dashboards_data_source_id, dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.data_source_id IN (?)
{"timestamp": "2026-02-16T09:18:01.021281Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.data_source_id AS dashboards_data_source_id, dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE dashboards.data_source_id IN (?)"}
2026-02-16 04:18:01,021 INFO sqlalchemy.engine.Engine [cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:01.021385Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
{"timestamp": "2026-02-16T09:18:01.022058Z", "level": "INFO", "logger": "ingestion.confirm_mapping", "message": "Schema Locked for DataSource c79a55ed-b2e5-4d4c-a04e-e97188a6c736: dict_keys(['Date', 'Total', 'Eff'])"}
2026-02-16 04:18:01,022 INFO sqlalchemy.engine.Engine UPDATE data_sources SET time_column=?, schema_config=?, updated_at=? WHERE data_sources.id = ?
{"timestamp": "2026-02-16T09:18:01.022849Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE data_sources SET time_column=?, schema_config=?, updated_at=? WHERE data_sources.id = ?"}
2026-02-16 04:18:01,022 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('Date', '{"Date": "production_date", "Total": "production_count", "Eff": "efficiency_pct"}', '2026-02-16 09:18:01.022749', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736')
{"timestamp": "2026-02-16T09:18:01.022946Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('Date', '{\"Date\": \"production_date\", \"Total\": \"production_count\", \"Eff\": \"efficiency_pct\"}', '2026-02-16 09:18:01.022749', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736')"}
2026-02-16 04:18:01,023 INFO sqlalchemy.engine.Engine UPDATE raw_imports SET time_column_used=?, updated_at=? WHERE raw_imports.id = ?
{"timestamp": "2026-02-16T09:18:01.023588Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE raw_imports SET time_column_used=?, updated_at=? WHERE raw_imports.id = ?"}
2026-02-16 04:18:01,023 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('Date', '2026-02-16 09:18:01.023503', '4b474ab5-816f-428e-9146-e6be13142350')
{"timestamp": "2026-02-16T09:18:01.023672Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('Date', '2026-02-16 09:18:01.023503', '4b474ab5-816f-428e-9146-e6be13142350')"}
2026-02-16 04:18:01,024 INFO sqlalchemy.engine.Engine UPDATE schema_mappings SET is_active=?, updated_at=? WHERE schema_mappings.data_source_id = ? AND schema_mappings.is_active = 1 RETURNING id
{"timestamp": "2026-02-16T09:18:01.024561Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE schema_mappings SET is_active=?, updated_at=? WHERE schema_mappings.data_source_id = ? AND schema_mappings.is_active = 1 RETURNING id"}
2026-02-16 04:18:01,024 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] (0, '2026-02-16 09:18:01.024474', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736')
{"timestamp": "2026-02-16T09:18:01.024648Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] (0, '2026-02-16 09:18:01.024474', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736')"}
2026-02-16 04:18:01,025 INFO sqlalchemy.engine.Engine SELECT max(schema_mappings.version) AS max_1 
FROM schema_mappings 
WHERE schema_mappings.data_source_id = ?
{"timestamp": "2026-02-16T09:18:01.025474Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT max(schema_mappings.version) AS max_1 \nFROM schema_mappings \nWHERE schema_mappings.data_source_id = ?"}
2026-02-16 04:18:01,025 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:01.025558Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
2026-02-16 04:18:01,026 INFO sqlalchemy.engine.Engine INSERT INTO schema_mappings (data_source_id, version, is_active, column_map, reviewed_by_user, user_notes, matching_tier, tier_confidence, user_corrected, correction_count, correction_history, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:18:01.026459Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO schema_mappings (data_source_id, version, is_active, column_map, reviewed_by_user, user_notes, matching_tier, tier_confidence, user_corrected, correction_count, correction_history, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 04:18:01,026 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736', 1, 1, '{"Date": "production_date", "Total": "production_count", "Eff": "efficiency_pct"}', 1, None, None, None, 0, 0, 'null', '99de5ddb-ec78-4213-8903-a6da01f8312d', '2026-02-16 09:18:01.026359', '2026-02-16 09:18:01.026360')
{"timestamp": "2026-02-16T09:18:01.026550Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736', 1, 1, '{\"Date\": \"production_date\", \"Total\": \"production_count\", \"Eff\": \"efficiency_pct\"}', 1, None, None, None, 0, 0, 'null', '99de5ddb-ec78-4213-8903-a6da01f8312d', '2026-02-16 09:18:01.026359', '2026-02-16 09:18:01.026360')"}
2026-02-16 04:18:01,027 INFO sqlalchemy.engine.Engine UPDATE raw_imports SET status=?, updated_at=? WHERE raw_imports.id = ?
{"timestamp": "2026-02-16T09:18:01.027151Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE raw_imports SET status=?, updated_at=? WHERE raw_imports.id = ?"}
2026-02-16 04:18:01,027 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('confirmed', '2026-02-16 09:18:01.027076', '4b474ab5-816f-428e-9146-e6be13142350')
{"timestamp": "2026-02-16T09:18:01.027230Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('confirmed', '2026-02-16 09:18:01.027076', '4b474ab5-816f-428e-9146-e6be13142350')"}
2026-02-16 04:18:01,027 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:18:01.027788Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 04:18:01,028 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:18:01.028312Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:18:01,028 INFO sqlalchemy.engine.Engine SELECT schema_mappings.data_source_id, schema_mappings.version, schema_mappings.is_active, schema_mappings.column_map, schema_mappings.extraction_rules, schema_mappings.reviewed_by_user, schema_mappings.user_notes, schema_mappings.matching_tier, schema_mappings.tier_confidence, schema_mappings.tier_breakdown, schema_mappings.fuzzy_scores, schema_mappings.user_corrected, schema_mappings.correction_count, schema_mappings.correction_history, schema_mappings.id, schema_mappings.created_at, schema_mappings.updated_at 
FROM schema_mappings 
WHERE schema_mappings.id = ?
{"timestamp": "2026-02-16T09:18:01.028522Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT schema_mappings.data_source_id, schema_mappings.version, schema_mappings.is_active, schema_mappings.column_map, schema_mappings.extraction_rules, schema_mappings.reviewed_by_user, schema_mappings.user_notes, schema_mappings.matching_tier, schema_mappings.tier_confidence, schema_mappings.tier_breakdown, schema_mappings.fuzzy_scores, schema_mappings.user_corrected, schema_mappings.correction_count, schema_mappings.correction_history, schema_mappings.id, schema_mappings.created_at, schema_mappings.updated_at \nFROM schema_mappings \nWHERE schema_mappings.id = ?"}
2026-02-16 04:18:01,028 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('99de5ddb-ec78-4213-8903-a6da01f8312d',)
{"timestamp": "2026-02-16T09:18:01.028600Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('99de5ddb-ec78-4213-8903-a6da01f8312d',)"}
2026-02-16 04:18:01,029 INFO sqlalchemy.engine.Engine SELECT id FROM data_sources WHERE id = ?
{"timestamp": "2026-02-16T09:18:01.029393Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT id FROM data_sources WHERE id = ?"}
2026-02-16 04:18:01,029 INFO sqlalchemy.engine.Engine [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
{"timestamp": "2026-02-16T09:18:01.029481Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)"}
{"timestamp": "2026-02-16T09:18:01.030179Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://test/api/v1/ingestion/confirm-mapping \"HTTP/1.1 200 OK\""}
2026-02-16 04:18:01,030 INFO sqlalchemy.engine.Engine SELECT schema_mappings.data_source_id, schema_mappings.version, schema_mappings.is_active, schema_mappings.column_map, schema_mappings.extraction_rules, schema_mappings.reviewed_by_user, schema_mappings.user_notes, schema_mappings.matching_tier, schema_mappings.tier_confidence, schema_mappings.tier_breakdown, schema_mappings.fuzzy_scores, schema_mappings.user_corrected, schema_mappings.correction_count, schema_mappings.correction_history, schema_mappings.id, schema_mappings.created_at, schema_mappings.updated_at 
FROM schema_mappings 
WHERE schema_mappings.data_source_id = ?
{"timestamp": "2026-02-16T09:18:01.030974Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT schema_mappings.data_source_id, schema_mappings.version, schema_mappings.is_active, schema_mappings.column_map, schema_mappings.extraction_rules, schema_mappings.reviewed_by_user, schema_mappings.user_notes, schema_mappings.matching_tier, schema_mappings.tier_confidence, schema_mappings.tier_breakdown, schema_mappings.fuzzy_scores, schema_mappings.user_corrected, schema_mappings.correction_count, schema_mappings.correction_history, schema_mappings.id, schema_mappings.created_at, schema_mappings.updated_at \nFROM schema_mappings \nWHERE schema_mappings.data_source_id = ?"}
2026-02-16 04:18:01,031 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('bc0a9ff9-b01b-4674-942f-595a11eea243',)
{"timestamp": "2026-02-16T09:18:01.031069Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00017s] ('bc0a9ff9-b01b-4674-942f-595a11eea243',)"}
------------------------------ Captured log call ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.42s ago] ('d83d8779-f022-479c-9adc-d75536a8d2e8', 'Evolution Factory', 'EF-001', 'US', None, None, 'UTC', None, None, None, None, 'en-US', 1, '1ac217ce-1b17-4459-b3fd-cd878d060008', '2026-02-16 09:18:00.973478', '2026-02-16 09:18:00.973480')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.42s ago] ('1ac217ce-1b17-4459-b3fd-cd878d060008', 'Evo Line', 'EL-01', None, None, None, None, None, None, None, None, None, None, 0, None, None, 1, 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', '2026-02-16 09:18:00.974538', '2026-02-16 09:18:00.974539')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00025s] (None, 'Unnamed Line', None, None, None, None, None, 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', 'Evo Source', None, 'Date', None, None, 0, None, None, 1, 'bc0a9ff9-b01b-4674-942f-595a11eea243', '2026-02-16 09:18:00.975850', '2026-02-16 09:18:00.975852')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ? AND users.is_active = 1
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.42s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.user_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.42s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE user_scopes.user_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.42s ago] ('a939b1e7-c94e-4b91-9a3f-9a37ee877772',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.42s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE schema_mappings.data_source_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.42s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT production_runs.data_source_id AS production_runs_data_source_id, production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE production_runs.data_source_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ai_decisions.data_source_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.data_source_id AS dashboards_data_source_id, dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.data_source_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.file_hash = ? AND raw_imports.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('4251fb35733d461f26797ec07c9efe5cfe4959ca8ddd95e13478a12689d85b61', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736')
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO raw_imports (uploaded_by_id, factory_id, production_line_id, data_source_id, time_column_used, original_filename, file_path, file_size_bytes, file_hash, mime_type, encoding_detected, sheet_count, sheet_names, row_count, column_count, header_row_detected, raw_headers, sample_data, status, processing_error, processed_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] (None, '1ac217ce-1b17-4459-b3fd-cd878d060008', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736', None, 'new_data.csv', 'uploads\\1ac217ce-1b17-4459-b3fd-cd878d060008\\c79a55ed-b2e5-4d4c-a04e-e97188a6c736\\2026\\02\\4251fb35733d461f_new_data.csv', 32, '4251fb35733d461f26797ec07c9efe5cfe4959ca8ddd95e13478a12689d85b61', 'text/csv', 'ascii', 1, None, 1, 3, None, '["Date", "Total", "Eff"]', '[["2025-02-01", 100, 90]]', 'uploaded', None, None, '4b474ab5-816f-428e-9146-e6be13142350', '2026-02-16 09:18:01.003019', '2026-02-16 09:18:01.003022')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/ingestion/upload?factory_id=1ac217ce-1b17-4459-b3fd-cd878d060008&production_line_id=c79a55ed-b2e5-4d4c-a04e-e97188a6c736 "HTTP/1.1 200 OK"
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.4s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)
INFO     sqlalchemy.engine.Engine:base.py:1846 UPDATE raw_imports SET status=?, processed_at=?, updated_at=? WHERE raw_imports.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00018s] ('processed', '2026-02-16 09:18:01.008908', '2026-02-16 09:18:01.009386', '4b474ab5-816f-428e-9146-e6be13142350')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 DELETE FROM staging_records WHERE staging_records.raw_import_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 50.78s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO staging_records (raw_import_id, source_row_number, status, validation_errors, validation_warnings, record_data, normalized_data, quality_score, null_field_count, promoted_at, promoted_to_table, promoted_record_id, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 12.16s ago] ('4b474ab5-816f-428e-9146-e6be13142350', 1, 'pending', None, None, '{"Date": "2025-02-01", "Total": 100, "Eff": 90}', None, None, None, None, None, None, 'd8d044b6-eef5-4a21-a3b6-abaad8e704c7', '2026-02-16 09:18:01.012985', '2026-02-16 09:18:01.012988')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/ingestion/process/4b474ab5-816f-428e-9146-e6be13142350 "HTTP/1.1 200 OK"
INFO     ingestion.confirm_mapping:ingestion.py:525 ============================================================
INFO     ingestion.confirm_mapping:ingestion.py:526 CONFIRM-MAPPING ENDPOINT CALLED
INFO     ingestion.confirm_mapping:ingestion.py:527   raw_import_id: 4b474ab5-816f-428e-9146-e6be13142350
INFO     ingestion.confirm_mapping:ingestion.py:528   production_line_id: c79a55ed-b2e5-4d4c-a04e-e97188a6c736
INFO     ingestion.confirm_mapping:ingestion.py:529   factory_id: None
INFO     ingestion.confirm_mapping:ingestion.py:530   data_source_id: None
INFO     ingestion.confirm_mapping:ingestion.py:531   mappings count: 3
INFO     ingestion.confirm_mapping:ingestion.py:532 ============================================================
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('4b474ab5-816f-428e-9146-e6be13142350',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE schema_mappings.data_source_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT production_runs.data_source_id AS production_runs_data_source_id, production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE production_runs.data_source_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ai_decisions.data_source_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.data_source_id AS dashboards_data_source_id, dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE dashboards.data_source_id IN (?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.45s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     ingestion.confirm_mapping:ingestion.py:626 Schema Locked for DataSource c79a55ed-b2e5-4d4c-a04e-e97188a6c736: dict_keys(['Date', 'Total', 'Eff'])
INFO     sqlalchemy.engine.Engine:base.py:1846 UPDATE data_sources SET time_column=?, schema_config=?, updated_at=? WHERE data_sources.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('Date', '{"Date": "production_date", "Total": "production_count", "Eff": "efficiency_pct"}', '2026-02-16 09:18:01.022749', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736')
INFO     sqlalchemy.engine.Engine:base.py:1846 UPDATE raw_imports SET time_column_used=?, updated_at=? WHERE raw_imports.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('Date', '2026-02-16 09:18:01.023503', '4b474ab5-816f-428e-9146-e6be13142350')
INFO     sqlalchemy.engine.Engine:base.py:1846 UPDATE schema_mappings SET is_active=?, updated_at=? WHERE schema_mappings.data_source_id = ? AND schema_mappings.is_active = 1 RETURNING id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] (0, '2026-02-16 09:18:01.024474', 'c79a55ed-b2e5-4d4c-a04e-e97188a6c736')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT max(schema_mappings.version) AS max_1 
FROM schema_mappings 
WHERE schema_mappings.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO schema_mappings (data_source_id, version, is_active, column_map, reviewed_by_user, user_notes, matching_tier, tier_confidence, user_corrected, correction_count, correction_history, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736', 1, 1, '{"Date": "production_date", "Total": "production_count", "Eff": "efficiency_pct"}', 1, None, None, None, 0, 0, 'null', '99de5ddb-ec78-4213-8903-a6da01f8312d', '2026-02-16 09:18:01.026359', '2026-02-16 09:18:01.026360')
INFO     sqlalchemy.engine.Engine:base.py:1846 UPDATE raw_imports SET status=?, updated_at=? WHERE raw_imports.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('confirmed', '2026-02-16 09:18:01.027076', '4b474ab5-816f-428e-9146-e6be13142350')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT schema_mappings.data_source_id, schema_mappings.version, schema_mappings.is_active, schema_mappings.column_map, schema_mappings.extraction_rules, schema_mappings.reviewed_by_user, schema_mappings.user_notes, schema_mappings.matching_tier, schema_mappings.tier_confidence, schema_mappings.tier_breakdown, schema_mappings.fuzzy_scores, schema_mappings.user_corrected, schema_mappings.correction_count, schema_mappings.correction_history, schema_mappings.id, schema_mappings.created_at, schema_mappings.updated_at 
FROM schema_mappings 
WHERE schema_mappings.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('99de5ddb-ec78-4213-8903-a6da01f8312d',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT id FROM data_sources WHERE id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.41s ago] ('c79a55ed-b2e5-4d4c-a04e-e97188a6c736',)
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/ingestion/confirm-mapping "HTTP/1.1 200 OK"
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT schema_mappings.data_source_id, schema_mappings.version, schema_mappings.is_active, schema_mappings.column_map, schema_mappings.extraction_rules, schema_mappings.reviewed_by_user, schema_mappings.user_notes, schema_mappings.matching_tier, schema_mappings.tier_confidence, schema_mappings.tier_breakdown, schema_mappings.fuzzy_scores, schema_mappings.user_corrected, schema_mappings.correction_count, schema_mappings.correction_history, schema_mappings.id, schema_mappings.created_at, schema_mappings.updated_at 
FROM schema_mappings 
WHERE schema_mappings.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00017s] ('bc0a9ff9-b01b-4674-942f-595a11eea243',)
-------------------------- Captured stdout teardown ---------------------------
2026-02-16 04:18:01,037 INFO sqlalchemy.engine.Engine ROLLBACK
{"timestamp": "2026-02-16T09:18:01.037419Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK"}
2026-02-16 04:18:01,037 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:18:01.037955Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 04:18:01,038 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:18:01.038147Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 04:18:01,038 INFO sqlalchemy.engine.Engine [cached since 63.99s ago] ()
{"timestamp": "2026-02-16T09:18:01.038228Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.99s ago] ()"}
2026-02-16 04:18:01,038 INFO sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table'
{"timestamp": "2026-02-16T09:18:01.038757Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT name FROM sqlite_master WHERE type='table'"}
2026-02-16 04:18:01,038 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.038841Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,039 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "ai_decisions"
{"timestamp": "2026-02-16T09:18:01.039488Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"ai_decisions\""}
2026-02-16 04:18:01,039 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.039561Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,040 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "alias_mappings"
{"timestamp": "2026-02-16T09:18:01.040119Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"alias_mappings\""}
2026-02-16 04:18:01,040 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.040193Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,040 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "efficiency_metrics"
{"timestamp": "2026-02-16T09:18:01.040758Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"efficiency_metrics\""}
2026-02-16 04:18:01,040 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.040826Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,041 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dhu_reports"
{"timestamp": "2026-02-16T09:18:01.041352Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dhu_reports\""}
2026-02-16 04:18:01,041 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.041444Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,041 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dashboards"
{"timestamp": "2026-02-16T09:18:01.041992Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dashboards\""}
2026-02-16 04:18:01,042 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.042076Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,042 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_quality_issues"
{"timestamp": "2026-02-16T09:18:01.042582Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_quality_issues\""}
2026-02-16 04:18:01,042 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.042650Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,043 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_sources"
{"timestamp": "2026-02-16T09:18:01.043177Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_sources\""}
2026-02-16 04:18:01,043 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.043251Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,043 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "schema_mappings"
{"timestamp": "2026-02-16T09:18:01.043818Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"schema_mappings\""}
2026-02-16 04:18:01,043 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.043885Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,044 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_events"
{"timestamp": "2026-02-16T09:18:01.044346Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_events\""}
2026-02-16 04:18:01,044 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.044429Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,044 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "factories"
{"timestamp": "2026-02-16T09:18:01.044986Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"factories\""}
2026-02-16 04:18:01,045 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.045062Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,045 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "styles"
{"timestamp": "2026-02-16T09:18:01.045542Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"styles\""}
2026-02-16 04:18:01,045 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.045609Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,046 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "orders"
{"timestamp": "2026-02-16T09:18:01.046114Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"orders\""}
2026-02-16 04:18:01,046 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.046186Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,046 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_runs"
{"timestamp": "2026-02-16T09:18:01.046672Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_runs\""}
2026-02-16 04:18:01,046 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.046753Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,047 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "quality_inspections"
{"timestamp": "2026-02-16T09:18:01.047427Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"quality_inspections\""}
2026-02-16 04:18:01,047 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.047508Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,047 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "defects"
{"timestamp": "2026-02-16T09:18:01.047961Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"defects\""}
2026-02-16 04:18:01,048 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.048029Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,048 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "raw_imports"
{"timestamp": "2026-02-16T09:18:01.048551Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"raw_imports\""}
2026-02-16 04:18:01,048 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.048631Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,049 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "staging_records"
{"timestamp": "2026-02-16T09:18:01.049150Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"staging_records\""}
2026-02-16 04:18:01,049 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.049217Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,049 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "organizations"
{"timestamp": "2026-02-16T09:18:01.049690Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"organizations\""}
2026-02-16 04:18:01,049 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.049772Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,050 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "users"
{"timestamp": "2026-02-16T09:18:01.050283Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"users\""}
2026-02-16 04:18:01,050 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.050369Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,050 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "user_scopes"
{"timestamp": "2026-02-16T09:18:01.050885Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"user_scopes\""}
2026-02-16 04:18:01,050 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.050957Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,051 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "waitlist"
{"timestamp": "2026-02-16T09:18:01.051419Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"waitlist\""}
2026-02-16 04:18:01,051 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.051499Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,051 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "workers"
{"timestamp": "2026-02-16T09:18:01.051971Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"workers\""}
2026-02-16 04:18:01,052 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.052048Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,052 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_skills"
{"timestamp": "2026-02-16T09:18:01.052560Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_skills\""}
2026-02-16 04:18:01,052 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.052633Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,053 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_attendances"
{"timestamp": "2026-02-16T09:18:01.053216Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_attendances\""}
2026-02-16 04:18:01,053 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.053296Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,053 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_outputs"
{"timestamp": "2026-02-16T09:18:01.053844Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_outputs\""}
2026-02-16 04:18:01,053 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.053915Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,054 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "fabric_lots"
{"timestamp": "2026-02-16T09:18:01.054429Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"fabric_lots\""}
2026-02-16 04:18:01,054 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.054511Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,054 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cut_tickets"
{"timestamp": "2026-02-16T09:18:01.054977Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cut_tickets\""}
2026-02-16 04:18:01,055 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.055046Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,055 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "packing_lists"
{"timestamp": "2026-02-16T09:18:01.055548Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"packing_lists\""}
2026-02-16 04:18:01,055 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.055627Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,056 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cartons"
{"timestamp": "2026-02-16T09:18:01.056153Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cartons\""}
2026-02-16 04:18:01,056 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.056230Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,056 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "traceability_records"
{"timestamp": "2026-02-16T09:18:01.056661Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"traceability_records\""}
2026-02-16 04:18:01,056 INFO sqlalchemy.engine.Engine [cached since 62.25s ago] ()
{"timestamp": "2026-02-16T09:18:01.056731Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 62.25s ago] ()"}
2026-02-16 04:18:01,057 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:18:01.057272Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 04:18:01,057 INFO sqlalchemy.engine.Engine [cached since 63.94s ago] ()
{"timestamp": "2026-02-16T09:18:01.057365Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 63.94s ago] ()"}
2026-02-16 04:18:01,057 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:18:01.057844Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
---------------------------- Captured log teardown ----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.99s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT name FROM sqlite_master WHERE type='table'
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "ai_decisions"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "alias_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "efficiency_metrics"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dhu_reports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dashboards"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_quality_issues"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_sources"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "schema_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_events"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "factories"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "styles"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "orders"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_runs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "quality_inspections"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "defects"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "raw_imports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "staging_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "organizations"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "users"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "user_scopes"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "waitlist"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "workers"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_skills"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_attendances"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_outputs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "fabric_lots"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cut_tickets"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "packing_lists"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cartons"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "traceability_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 62.25s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 63.94s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
=========================== short test summary info ===========================
FAILED backend\tests\test_api\test_individual_widgets.py::test_get_hourly_production
FAILED backend\tests\test_api\test_individual_widgets.py::test_get_sam_performance
FAILED backend\tests\test_api\test_individual_widgets.py::test_get_dhu_history
FAILED backend\tests\test_api\test_individual_widgets.py::test_get_speed_vs_quality
FAILED backend\tests\test_api\test_ingestion_flow.py::test_schema_evolution
=================== 5 failed, 14 passed in 65.56s (0:01:05) ===================
