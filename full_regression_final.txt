"≡ƒº¬ Running Tests (in Docker)..."
docker compose exec backend pytest
time="2026-02-16T04:46:34-05:00" level=warning msg="C:\\Users\\19803\\Projects\\FactoryExcelManager\\docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /usr/local/bin/python3.11
cachedir: .pytest_cache
rootdir: /app
configfile: pytest.ini
testpaths: tests
plugins: asyncio-1.3.0, Faker-40.4.0, langsmith-0.7.1, cov-7.0.0, anyio-4.12.1, mock-3.15.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 224 items

tests/api/test_analytics_flaws.py::test_hourly_production_no_events_returns_zeros PASSED [  0%]
tests/api/test_analytics_flaws.py::test_midnight_boundary_respects_timezone PASSED [  0%]
tests/api/v1/test_factory_settings.py::test_factory_settings_localization_and_snapshot PASSED [  1%]
tests/api/v1/test_team.py::test_assign_user_to_line PASSED               [  1%]
tests/api/v1/test_users.py::test_get_user_me PASSED                      [  2%]
tests/api/v1/test_users.py::test_update_user_me PASSED                   [  2%]
tests/api/v1/test_users.py::test_update_user_invalid_timezone PASSED     [  3%]
tests/api/v1/test_users.py::test_update_user_partial_preferences PASSED  [  3%]
tests/api/v1/test_users.py::test_update_user_invalid_preference_type PASSED [  4%]
tests/e2e/test_excel_to_dashboard.py::test_e2e_excel_ingestion_and_dashboard FAILED [  4%]
tests/test_api/test_ai_decisions.py::test_list_ai_decisions PASSED       [  4%]
tests/test_api/test_ai_decisions.py::test_list_ai_decisions_with_filters PASSED [  5%]
tests/test_api/test_ai_decisions.py::test_get_ai_decision_by_id PASSED   [  5%]
tests/test_api/test_ai_decisions.py::test_get_ai_decision_not_found PASSED [  6%]
tests/test_api/test_ai_decisions.py::test_get_data_source_ai_decisions PASSED [  6%]
tests/test_api/test_ai_decisions.py::test_ai_decisions_pagination PASSED [  7%]
tests/test_api/test_ai_decisions.py::test_ai_decisions_require_auth PASSED [  7%]
tests/test_api/test_analytics_real.py::test_get_overview_stats_real PASSED [  8%]
tests/test_api/test_analytics_real.py::test_get_production_chart_real PASSED [  8%]
tests/test_api/test_analytics_real.py::test_get_lowest_performers_real PASSED [  8%]
tests/test_api/test_analytics_real.py::test_get_discrepancies_real PASSED [  9%]
tests/test_api/test_auth.py::test_login_success PASSED                   [  9%]
tests/test_api/test_auth.py::test_login_invalid_password PASSED          [ 10%]
tests/test_api/test_auth.py::test_login_user_not_found PASSED            [ 10%]
tests/test_api/test_auth.py::test_register_success PASSED                [ 11%]
tests/test_api/test_dashboard_creation_flow.py::test_complete_dashboard_creation_flow PASSED [ 11%]
tests/test_api/test_dashboard_creation_flow.py::test_dashboard_creation_blocked_by_factory_quota PASSED [ 12%]
tests/test_api/test_dashboard_creation_flow.py::test_dashboard_creation_blocked_by_line_quota SKIPPED [ 12%]
tests/test_api/test_dashboard_creation_flow.py::test_multiple_dashboards_same_data_source PASSED [ 12%]
tests/test_api/test_dashboard_creation_flow.py::test_list_dashboards_filtered_by_factory PASSED [ 13%]
tests/test_api/test_dashboard_flow.py::test_edit_configuration FAILED    [ 13%]
tests/test_api/test_dashboard_flow.py::test_view_uploaded_files PASSED   [ 14%]
tests/test_api/test_dashboard_flow.py::test_upload_history_isolation PASSED [ 14%]
tests/test_api/test_dashboard_flow.py::test_upload_history_simple_endpoint PASSED [ 15%]
tests/test_api/test_dashboard_widgets.py::test_get_dhu_quality_trend PASSED [ 15%]
tests/test_api/test_dashboard_widgets.py::test_get_style_progress PASSED [ 16%]
tests/test_api/test_data_pipeline_robust.py::test_value_preservation_through_pipeline PASSED [ 16%]
tests/test_api/test_data_pipeline_robust.py::test_date_format_handling PASSED [ 16%]
tests/test_api/test_data_pipeline_robust.py::test_efficiency_normalization PASSED [ 17%]
tests/test_api/test_data_pipeline_robust.py::test_null_handling PASSED   [ 17%]
tests/test_api/test_data_pipeline_robust.py::test_data_integrity_across_multiple_rows PASSED [ 18%]
tests/test_api/test_data_pipeline_robust.py::test_style_and_order_creation PASSED [ 18%]
tests/test_api/test_data_pipeline_robust.py::test_duplicate_upload_handling PASSED [ 19%]
tests/test_api/test_data_pipeline_robust.py::test_multiple_widgets_receive_correct_data PASSED [ 19%]
tests/test_api/test_data_pipeline_robust.py::test_invalid_data_handling PASSED [ 20%]
tests/test_api/test_data_pipeline_robust.py::test_analytics_sum_matches_database PASSED [ 20%]
tests/test_api/test_datasource.py::test_create_data_source PASSED        [ 20%]
tests/test_api/test_datasource.py::test_get_data_source PASSED           [ 21%]
tests/test_api/test_datasource.py::test_get_data_source_by_line PASSED   [ 21%]
tests/test_api/test_datasource.py::test_update_schema_mapping PASSED     [ 22%]
tests/test_api/test_datasource.py::test_create_duplicate_data_source_fails PASSED [ 22%]
tests/test_api/test_datasources_by_line.py::test_get_datasource_by_line_exists PASSED [ 23%]
tests/test_api/test_demo_pipeline.py::test_demo_full_pipeline_with_excel_file PASSED [ 23%]
tests/test_api/test_demo_pipeline.py::test_demo_data_values_integrity PASSED [ 24%]
tests/test_api/test_destructive_flows.py::test_delete_datasource_cascade PASSED [ 24%]
tests/test_api/test_destructive_flows.py::test_permissions_restricted_delete PASSED [ 25%]
tests/test_api/test_dry_run_flow.py::test_dry_run_preview_structure PASSED [ 25%]
tests/test_api/test_dry_run_flow.py::test_date_auto_fixing_detection PASSED [ 25%]
tests/test_api/test_dry_run_flow.py::test_efficiency_percentage_cleaning PASSED [ 26%]
tests/test_api/test_dry_run_flow.py::test_decimal_field_handling PASSED  [ 26%]
tests/test_api/test_dry_run_flow.py::test_integer_field_cleaning PASSED  [ 27%]
tests/test_api/test_dry_run_flow.py::test_column_mapping_application PASSED [ 27%]
tests/test_api/test_dry_run_flow.py::test_overall_status_with_warnings PASSED [ 28%]
tests/test_api/test_dry_run_flow.py::test_overall_status_all_valid PASSED [ 28%]
tests/test_api/test_dry_run_flow.py::test_promotion_after_dry_run_approval PASSED [ 29%]
tests/test_api/test_dry_run_flow.py::test_dry_run_with_missing_schema_mapping PASSED [ 29%]
tests/test_api/test_dry_run_flow.py::test_dry_run_limits_to_20_rows PASSED [ 29%]
tests/test_api/test_dry_run_flow.py::test_raw_data_preserved_in_preview PASSED [ 30%]
tests/test_api/test_error_handling.py::test_404_json_response PASSED     [ 30%]
tests/test_api/test_error_handling.py::test_validation_error_json_response PASSED [ 31%]
tests/test_api/test_error_handling.py::test_upload_bad_file_json_response PASSED [ 31%]
tests/test_api/test_error_handling.py::test_delete_204_response PASSED   [ 32%]
tests/test_api/test_excel_to_widget_integrity.py::test_golden_master_excel_to_overview_widget PASSED [ 32%]
tests/test_api/test_excel_to_widget_integrity.py::test_golden_master_physics_validation_triggers PASSED [ 33%]
tests/test_api/test_factories.py::test_create_factory PASSED             [ 33%]
tests/test_api/test_factories.py::test_list_factories PASSED             [ 33%]
tests/test_api/test_factories.py::test_production_line_crud PASSED       [ 34%]
tests/test_api/test_fallback_logic.py::test_overview_fallback PASSED     [ 34%]
tests/test_api/test_fallback_logic.py::test_production_chart_fallback PASSED [ 35%]
tests/test_api/test_fallback_logic.py::test_sam_performance_fallback PASSED [ 35%]
tests/test_api/test_fallback_logic.py::test_hourly_fallback PASSED       [ 36%]
tests/test_api/test_individual_widgets.py::test_get_hourly_production PASSED [ 36%]
tests/test_api/test_individual_widgets.py::test_get_sam_performance PASSED [ 37%]
tests/test_api/test_individual_widgets.py::test_get_workforce_stats PASSED [ 37%]
tests/test_api/test_individual_widgets.py::test_get_dhu_history PASSED   [ 37%]
tests/test_api/test_individual_widgets.py::test_get_speed_vs_quality PASSED [ 38%]
tests/test_api/test_individual_widgets.py::test_get_complexity_impact PASSED [ 38%]
tests/test_api/test_individual_widgets.py::test_get_downtime_reasons PASSED [ 39%]
tests/test_api/test_ingestion_deduplication.py::test_ingestion_deduplication PASSED [ 39%]
tests/test_api/test_ingestion_deduplication.py::test_mapping_state_endpoint PASSED [ 40%]
tests/test_api/test_ingestion_deduplication.py::test_process_idempotency PASSED [ 40%]
tests/test_api/test_ingestion_flow.py::test_full_ingestion_flow PASSED   [ 41%]
tests/test_api/test_ingestion_flow.py::test_schema_evolution PASSED      [ 41%]
tests/test_api/test_integrity.py::test_pydantic_validation PASSED        [ 41%]
tests/test_api/test_integrity.py::test_canonical_mapping_validation PASSED [ 42%]
tests/test_api/test_integrity.py::test_order_hybrid_property PASSED      [ 42%]
tests/test_api/test_integrity.py::test_production_run_constraints PASSED [ 43%]
tests/test_api/test_line_management.py::test_reset_schema_configuration PASSED [ 43%]
tests/test_api/test_line_management.py::test_clear_upload_history PASSED [ 44%]
tests/test_api/test_organizations.py::test_get_my_organization PASSED    [ 44%]
tests/test_api/test_organizations.py::test_update_my_organization PASSED [ 45%]
tests/test_api/test_organizations.py::test_get_organization_by_id PASSED [ 45%]
tests/test_api/test_preview.py::test_preview_endpoint_success PASSED     [ 45%]
tests/test_api/test_preview.py::test_list_uploads_includes_datasource_id PASSED [ 46%]
tests/test_api/test_preview_dry_run_endpoint.py::test_preview_dry_run_endpoint PASSED [ 46%]
tests/test_api/test_production.py::test_production_run_lifecycle PASSED  [ 47%]
tests/test_api/test_production.py::test_create_run_factory_mismatch PASSED [ 47%]
tests/test_api/test_promotion.py::test_promotion_logic_full_cycle PASSED [ 48%]
tests/test_api/test_quality_constraints.py::test_quality_inspection_allows_different_types_per_run PASSED [ 48%]
tests/test_api/test_quality_constraints.py::test_quality_inspection_rejects_duplicate_type_per_run PASSED [ 49%]
tests/test_api/test_quality_import.py::test_quality_data_promotion PASSED [ 49%]
tests/test_api/test_quota_enforcement.py::test_factory_quota_enforced PASSED [ 50%]
tests/test_api/test_quota_enforcement.py::test_line_quota_enforced PASSED [ 50%]
tests/test_api/test_quota_enforcement.py::test_soft_deleted_factories_not_counted PASSED [ 50%]
tests/test_api/test_quota_enforcement.py::test_quota_status_endpoint PASSED [ 51%]
tests/test_api/test_quota_enforcement.py::test_enterprise_tier_quotas PASSED [ 51%]
tests/test_api/test_quota_enforcement.py::test_quota_at_exact_limit PASSED [ 52%]
tests/test_api/test_quota_enforcement.py::test_zero_quota_blocks_creation PASSED [ 52%]
tests/test_api/test_repro_500.py::test_list_dashboards_by_factory_id_crash PASSED [ 53%]
tests/test_api/test_samples.py::test_list_sample_files PASSED            [ 53%]
tests/test_api/test_samples.py::test_download_sample_file PASSED         [ 54%]
tests/test_api/test_samples.py::test_download_csv_sample_file PASSED     [ 54%]
tests/test_api/test_samples.py::test_download_nonexistent_file PASSED    [ 54%]
tests/test_api/test_samples.py::test_download_with_path_traversal_attempt PASSED [ 55%]
tests/test_api/test_samples.py::test_sample_files_have_descriptions PASSED [ 55%]
tests/test_api/test_schema_config.py::test_schema_configuration_flow PASSED [ 56%]
tests/test_api/test_schema_mapping_reuse.py::test_confirm_mapping_deactivates_previous PASSED [ 56%]
tests/test_api/test_schema_mapping_reuse.py::test_schema_mapping_version_increments_correctly PASSED [ 57%]
tests/test_api/test_storage_separation.py::test_storage_segmentation PASSED [ 57%]
tests/test_api/test_style_progress.py::test_get_style_progress_with_pending_orders PASSED [ 58%]
tests/test_api/test_upload.py::TestUploadEndpoints::test_upload_endpoint_requires_auth PASSED [ 58%]
tests/test_api/test_upload.py::TestUploadEndpoints::test_upload_rejects_non_excel PASSED [ 58%]
tests/test_api/test_upload.py::TestUploadEndpoints::test_upload_accepts_xlsx PASSED [ 59%]
tests/test_api/test_upload_history.py::test_upload_history_segmentation PASSED [ 59%]
tests/test_api/test_upload_preview.py::test_upload_csv_file PASSED       [ 60%]
tests/test_api/test_upload_preview.py::test_preview_csv_file PASSED      [ 60%]
tests/test_api/test_upload_preview.py::test_preview_excel_file PASSED    [ 61%]
tests/test_api/test_upload_preview.py::test_preview_nonexistent_file PASSED [ 61%]
tests/test_api/test_upload_preview.py::test_upload_invalid_file_extension PASSED [ 62%]
tests/test_api/test_verification_cascade.py::test_factory_deletion_cascade_behavior PASSED [ 62%]
tests/test_api/test_widget_data_e2e.py::test_full_widget_data_flow PASSED [ 62%]
tests/test_api/test_widget_data_e2e.py::test_widget_endpoint_with_line_filter SKIPPED [ 63%]
tests/test_async_flow.py::test_datasource_lifecycle PASSED               [ 63%]
tests/test_datasource_flow.py::test_datasource_flow PASSED               [ 64%]
tests/test_ingestion/test_full_flow.py::test_full_data_flow PASSED       [ 64%]
tests/test_mapping_intelligence.py::test_mapping_engine_intelligence PASSED [ 65%]
tests/test_sequential_ingestion.py::test_jan_feb_march_continuity PASSED [ 65%]
tests/test_services/test_ai_decision_logging.py::test_ai_decision_creation PASSED [ 66%]
tests/test_services/test_ai_decision_logging.py::test_schema_inference_logging PASSED [ 66%]
tests/test_services/test_ai_decision_logging.py::test_code_generation_logging PASSED [ 66%]
tests/test_services/test_ai_decision_logging.py::test_ai_decision_without_db_session PASSED [ 67%]
tests/test_services/test_ai_decision_logging.py::test_ai_decision_data_source_relationship PASSED [ 67%]
tests/test_services/test_ai_decision_logging.py::test_ai_decision_confidence_calculation PASSED [ 68%]
tests/test_services/test_ai_decision_logging.py::test_ai_decision_metadata_completeness PASSED [ 68%]
tests/test_services/test_analytics_service.py::test_get_aggregated_stats_standard PASSED [ 69%]
tests/test_services/test_analytics_service.py::test_get_aggregated_stats_weighted_check PASSED [ 69%]
tests/test_services/test_analytics_service.py::test_validate_production_physics_rules PASSED [ 70%]
tests/test_services/test_date_parser.py::TestDateParser::test_native_types PASSED [ 70%]
tests/test_services/test_date_parser.py::TestDateParser::test_format_spec PASSED [ 70%]
tests/test_services/test_date_parser.py::TestDateParser::test_excel_serials PASSED [ 71%]
tests/test_services/test_date_parser.py::TestDateParser::test_heuristics_dayfirst PASSED [ 71%]
tests/test_services/test_date_parser.py::TestDateParser::test_diagnostics_return PASSED [ 72%]
tests/test_services/test_date_parser.py::TestDateParser::test_invalid_inputs PASSED [ 72%]
tests/test_services/test_excel_parser.py::TestFlexibleExcelParser::test_fuzzy_column_matching_qty PASSED [ 73%]
tests/test_services/test_excel_parser.py::TestFlexibleExcelParser::test_fuzzy_column_matching_po PASSED [ 73%]
tests/test_services/test_excel_parser.py::TestFlexibleExcelParser::test_header_scoring PASSED [ 74%]
tests/test_services/test_excel_parser.py::TestFlexibleExcelParser::test_clean_column_name PASSED [ 74%]
tests/test_services/test_excel_parser.py::TestFlexibleExcelParser::test_empty_columns_filtered PASSED [ 75%]
tests/test_services/test_file_processor.py::TestFileProcessorDryRun::test_dry_run_preview_basic PASSED [ 75%]
tests/test_services/test_file_processor.py::TestFileProcessorDryRun::test_dry_run_detects_date_warnings PASSED [ 75%]
tests/test_services/test_file_processor.py::TestFileProcessorDryRun::test_dry_run_shows_before_after PASSED [ 76%]
tests/test_services/test_file_processor.py::TestFileProcessorDryRun::test_dry_run_no_warnings_for_clean_data PASSED [ 76%]
tests/test_services/test_file_processor.py::TestFileProcessorDryRun::test_dry_run_limits_to_20_rows PASSED [ 77%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_date_messy_format PASSED [ 77%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_date_full_format PASSED [ 78%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_integer_fields PASSED [ 78%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_decimal_fields PASSED [ 79%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_efficiency_percentage PASSED [ 79%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_none_values PASSED [ 79%]
tests/test_services/test_file_processor.py::TestDataCleaning::test_clean_string_fields PASSED [ 80%]
tests/test_services/test_file_processor.py::TestProductionRunInsertion::test_promote_delegates_to_orchestrator PASSED [ 80%]
tests/test_services/test_file_processor.py::TestProductionRunInsertion::test_promote_handles_already_promoted PASSED [ 81%]
tests/test_services/test_fuzzy_matcher_optimized.py::test_fuzzy_matcher_wratio_handling PASSED [ 81%]
tests/test_services/test_fuzzy_matcher_optimized.py::test_short_word_protection PASSED [ 82%]
tests/test_services/test_fuzzy_matcher_optimized.py::test_industry_variations PASSED [ 82%]
tests/test_services/test_fuzzy_matcher_optimized.py::test_match_with_alternatives_deduplication PASSED [ 83%]
tests/test_services/test_fuzzy_matcher_optimized.py::test_performance_cached_keys PASSED [ 83%]
tests/test_services/test_matching_engine_new.py::test_hash_matcher_exact PASSED [ 83%]
tests/test_services/test_matching_engine_new.py::test_hash_matcher_alias PASSED [ 84%]
tests/test_services/test_matching_engine_new.py::test_fuzzy_matcher PASSED [ 84%]
tests/test_services/test_matching_engine_new.py::test_unmatched_column PASSED [ 85%]
tests/test_services/test_matching_engine_new.py::test_case_insensitivity PASSED [ 85%]
tests/test_services/test_matching_engine_new.py::test_operator_plurality_mismatch PASSED [ 86%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_parse_mm_dd_format PASSED [ 86%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_parse_mm_slash_dd_format PASSED [ 87%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_parse_full_date_format PASSED [ 87%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_parse_date_object PASSED [ 87%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_target_qty_alias PASSED [ 88%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_planned_qty_direct PASSED [ 88%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_invalid_date_format PASSED [ 89%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_optional_fields PASSED [ 89%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_default_values PASSED [ 90%]
tests/test_services/test_production_schema.py::TestProductionDateValidator::test_edge_case_dates PASSED [ 90%]
tests/test_timezone_chaos.py::test_timezone_chaos_midnight_boundary PASSED [ 91%]
tests/test_widget_judge.py::test_judge_workforce_integrity_and_scope PASSED [ 91%]
tests/test_widget_judge.py::test_judge_overview_timezone_and_scope PASSED [ 91%]
tests/test_widget_judge.py::test_judge_no_fake_simulation PASSED         [ 92%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_detects_iso_when_last_exceeds_12 PASSED [ 92%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_detects_swap_when_middle_exceeds_12 PASSED [ 93%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_early_exit_on_first_proof PASSED [ 93%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_ambiguous_when_all_values_under_12 PASSED [ 94%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_single_ambiguous_value PASSED [ 94%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_impossible_date_both_exceed_12 PASSED [ 95%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_mixed_constraint_violations PASSED [ 95%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_february_30_invalid PASSED [ 95%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_empty_list PASSED [ 96%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_none_values_skipped PASSED [ 96%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_non_date_strings_skipped PASSED [ 97%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_slash_separator PASSED [ 97%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_dot_separator PASSED [ 98%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_mixed_separators PASSED [ 98%]
tests/unit/services/ingestion/test_date_profiler.py::TestDetectColumnFormat::test_respects_max_sample PASSED [ 99%]
tests/unit/services/ingestion/test_date_profiler.py::TestProfileDateColumn::test_returns_dict_with_expected_keys PASSED [ 99%]
tests/unit/services/ingestion/test_date_profiler.py::TestProfileDateColumn::test_profile_matches_detect_result PASSED [100%]

=================================== FAILURES ===================================
____________________ test_e2e_excel_ingestion_and_dashboard ____________________
tests/e2e/test_excel_to_dashboard.py:243: in test_e2e_excel_ingestion_and_dashboard
    assert stats["total_output"] == 8, (
E   AssertionError: Expected 8 total output (Day 5), got 0
E   assert 0 == 8
----------------------------- Captured stdout call -----------------------------
{"timestamp": "2026-02-16T09:46:54.522009Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://test/api/v1/ingestion/upload?factory_id=8fb2141b-a6a2-4ee6-9399-adc9668c61e8&production_line_id=aa560f48-b092-472e-8813-de28f0225e63 \"HTTP/1.1 200 OK\""}
{"timestamp": "2026-02-16T09:46:54.673120Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'production_date' -> 'production_date' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676028Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'shift' -> 'shift' (Score: 100)"}
{"timestamp": "2026-02-16T09:46:54.676135Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'style_number' -> 'style_number' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676332Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'style_description' -> 'style_number' (Score: 90)"}
{"timestamp": "2026-02-16T09:46:54.676387Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'po_number' -> 'po_number' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676424Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'buyer' -> 'buyer' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676459Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'season' -> 'season' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676499Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'quantity' -> 'actual_qty' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676541Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'sam' -> 'sam' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676609Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'planned_qty' -> 'planned_qty' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676644Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'actual_qty' -> 'actual_qty' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676679Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'operators_present' -> 'operators_present' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676711Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'helpers_present' -> 'helpers_present' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.676825Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'worked_minutes' -> 'worked_minutes' (Score: 100)"}
{"timestamp": "2026-02-16T09:46:54.677005Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'downtime_minutes' -> 'downtime_minutes' (Score: 100)"}
{"timestamp": "2026-02-16T09:46:54.677300Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Fuzzy]: 'downtime_reason' -> 'downtime_reason' (Score: 100)"}
{"timestamp": "2026-02-16T09:46:54.677427Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'defects' -> 'defects' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.677633Z", "level": "INFO", "logger": "app.services.matching.engine", "message": "MATCH [Hash]: 'dhu' -> 'dhu' (Conf: 1.0)"}
{"timestamp": "2026-02-16T09:46:54.689543Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://test/api/v1/ingestion/process/1aaa2a52-9cf2-4207-ba68-733ea12f0bfd?factory_id=8fb2141b-a6a2-4ee6-9399-adc9668c61e8 \"HTTP/1.1 200 OK\""}
{"timestamp": "2026-02-16T09:46:54.728837Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://test/api/v1/ingestion/preview-dry-run/1aaa2a52-9cf2-4207-ba68-733ea12f0bfd \"HTTP/1.1 200 OK\""}
{"timestamp": "2026-02-16T09:46:54.740199Z", "level": "INFO", "logger": "ingestion.promote", "message": "============================================================"}
{"timestamp": "2026-02-16T09:46:54.740291Z", "level": "INFO", "logger": "ingestion.promote", "message": "PROMOTE ENDPOINT CALLED"}
{"timestamp": "2026-02-16T09:46:54.740335Z", "level": "INFO", "logger": "ingestion.promote", "message": "  raw_import_id: 1aaa2a52-9cf2-4207-ba68-733ea12f0bfd"}
{"timestamp": "2026-02-16T09:46:54.740360Z", "level": "INFO", "logger": "ingestion.promote", "message": "============================================================"}
{"timestamp": "2026-02-16T09:46:54.741483Z", "level": "INFO", "logger": "ingestion.promote", "message": "  raw_import.status: confirmed"}
{"timestamp": "2026-02-16T09:46:54.741555Z", "level": "INFO", "logger": "ingestion.promote", "message": "  raw_import.factory_id: 8fb2141b-a6a2-4ee6-9399-adc9668c61e8"}
{"timestamp": "2026-02-16T09:46:54.741585Z", "level": "INFO", "logger": "ingestion.promote", "message": "  raw_import.production_line_id: aa560f48-b092-472e-8813-de28f0225e63"}
{"timestamp": "2026-02-16T09:46:54.741610Z", "level": "INFO", "logger": "ingestion.promote", "message": "  raw_import.data_source_id: 34218f2e-3dcd-434d-97b2-79f861c9efdd"}
{"timestamp": "2026-02-16T09:46:54.741632Z", "level": "INFO", "logger": "ingestion.promote", "message": "Creating FileProcessingService..."}
{"timestamp": "2026-02-16T09:46:54.741704Z", "level": "INFO", "logger": "ingestion.promote", "message": "Calling promote_to_production..."}

==================================================
≡ƒÜÇ DEBUG: promote_to_production CALLED
≡ƒåö raw_import_id: 1aaa2a52-9cf2-4207-ba68-733ea12f0bfd
≡ƒöè SQL Logging Enabled
==================================================

{"timestamp": "2026-02-16T09:46:54.741854Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "ORCHESTRATOR: promote_to_production for 1aaa2a52-9cf2-4207-ba68-733ea12f0bfd"}
{"timestamp": "2026-02-16T09:46:54.747540Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "DEBUG: Checking mappings for DS 34218f2e-3dcd-434d-97b2-79f861c9efdd"}
{"timestamp": "2026-02-16T09:46:54.747609Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "DEBUG: Mapping b74d3f98-aa4e-40dc-b575-449b94331e73 | Ver: 1 | Active: True"}
{"timestamp": "2026-02-16T09:46:54.756178Z", "level": "WARNING", "logger": "app.services.ingestion.date_profiler", "message": "AMBIGUOUS DATE COLUMN: All 6 sampled values could be YYYY-MM-DD or YYYY-DD-MM. Defaulting to ISO 8601 (YYYY-MM-DD). Consider configuring explicit format in data source settings."}
{"timestamp": "2026-02-16T09:46:54.756286Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "DATE COLUMN PROFILED: 'production_date' -> YYYY-MM-DD (confidence: 50%)"}
{"timestamp": "2026-02-16T09:46:54.756321Z", "level": "WARNING", "logger": "app.services.ingestion.orchestrator", "message": "AMBIGUOUS DATE COLUMN 'production_date': All sampled values could be YYYY-MM-DD or YYYY-DD-MM. Defaulting to ISO 8601. Consider configuring explicit format."}
{"timestamp": "2026-02-16T09:46:54.763097Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "Resolving existing runs for differential calculation..."}
{"timestamp": "2026-02-16T09:46:54.764967Z", "level": "INFO", "logger": "app.services.ingestion.orchestrator", "message": "Found 0 existing runs to update."}
{"timestamp": "2026-02-16T09:46:54.765582Z", "level": "INFO", "logger": "app.services.ingestion.writer", "message": "Inserting/Upserting 6 runs..."}
{"timestamp": "2026-02-16T09:46:54.778186Z", "level": "INFO", "logger": "app.services.ingestion.writer", "message": "Flushing ProductionRun writes before inserting children..."}
{"timestamp": "2026-02-16T09:46:54.778330Z", "level": "INFO", "logger": "app.services.ingestion.writer", "message": "Inserting 6 events..."}
{"timestamp": "2026-02-16T09:46:54.780057Z", "level": "INFO", "logger": "app.services.ingestion.writer", "message": "Upserting 6 efficiency metrics..."}
{"timestamp": "2026-02-16T09:46:54.781883Z", "level": "INFO", "logger": "app.services.ingestion.writer", "message": "Upserting 6 quality inspections..."}
{"timestamp": "2026-02-16T09:46:55.023037Z", "level": "INFO", "logger": "ingestion.promote", "message": "Promotion SUCCESS: {'status': 'promoted', 'inserted': 6, 'updated': 0, 'events': 6, 'errors': 0}"}
{"timestamp": "2026-02-16T09:46:55.023600Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: POST http://test/api/v1/ingestion/promote/1aaa2a52-9cf2-4207-ba68-733ea12f0bfd \"HTTP/1.1 200 OK\""}
{"timestamp": "2026-02-16T09:46:55.040205Z", "level": "INFO", "logger": "app.api.v1.endpoints.analytics", "message": "[DIAG] get_overview_stats called with line_id=aa560f48-b092-472e-8813-de28f0225e63"}
2026-02-16 09:46:55,040 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:46:55.040849Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:46:55,041 INFO sqlalchemy.engine.Engine SELECT factories.timezone 
FROM factories JOIN data_sources ON data_sources.factory_id = factories.id 
WHERE data_sources.id = ?
{"timestamp": "2026-02-16T09:46:55.041452Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT factories.timezone \nFROM factories JOIN data_sources ON data_sources.factory_id = factories.id \nWHERE data_sources.id = ?"}
2026-02-16 09:46:55,041 INFO sqlalchemy.engine.Engine [cached since 4.768s ago] ('aa560f48-b092-472e-8813-de28f0225e63',)
{"timestamp": "2026-02-16T09:46:55.041558Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.768s ago] ('aa560f48-b092-472e-8813-de28f0225e63',)"}
2026-02-16 09:46:55,044 INFO sqlalchemy.engine.Engine SELECT count(production_events.id) AS count_1 
FROM production_events 
WHERE production_events.timestamp >= ? AND production_events.timestamp < ? AND production_events.data_source_id = ?
{"timestamp": "2026-02-16T09:46:55.044115Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT count(production_events.id) AS count_1 \nFROM production_events \nWHERE production_events.timestamp >= ? AND production_events.timestamp < ? AND production_events.data_source_id = ?"}
2026-02-16 09:46:55,044 INFO sqlalchemy.engine.Engine [cached since 4.768s ago] ('2026-02-15 22:00:00.000000', '2026-02-16 22:00:00.000000', 'aa560f48-b092-472e-8813-de28f0225e63')
{"timestamp": "2026-02-16T09:46:55.044331Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.768s ago] ('2026-02-15 22:00:00.000000', '2026-02-16 22:00:00.000000', 'aa560f48-b092-472e-8813-de28f0225e63')"}
2026-02-16 09:46:55,045 INFO sqlalchemy.engine.Engine SELECT count(production_runs.id) AS count_1 
FROM production_runs 
WHERE date(production_runs.production_date) = ? AND production_runs.data_source_id = ?
{"timestamp": "2026-02-16T09:46:55.045966Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT count(production_runs.id) AS count_1 \nFROM production_runs \nWHERE date(production_runs.production_date) = ? AND production_runs.data_source_id = ?"}
2026-02-16 09:46:55,046 INFO sqlalchemy.engine.Engine [cached since 4.769s ago] ('2026-02-16', 'aa560f48-b092-472e-8813-de28f0225e63')
{"timestamp": "2026-02-16T09:46:55.046074Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.769s ago] ('2026-02-16', 'aa560f48-b092-472e-8813-de28f0225e63')"}
2026-02-16 09:46:55,046 INFO sqlalchemy.engine.Engine SELECT max(production_events.timestamp) AS max_1 
FROM production_events 
WHERE production_events.data_source_id = ?
{"timestamp": "2026-02-16T09:46:55.046928Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT max(production_events.timestamp) AS max_1 \nFROM production_events \nWHERE production_events.data_source_id = ?"}
2026-02-16 09:46:55,046 INFO sqlalchemy.engine.Engine [cached since 4.411s ago] ('aa560f48-b092-472e-8813-de28f0225e63',)
{"timestamp": "2026-02-16T09:46:55.047023Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.411s ago] ('aa560f48-b092-472e-8813-de28f0225e63',)"}
2026-02-16 09:46:55,048 INFO sqlalchemy.engine.Engine SELECT max(date(production_runs.production_date)) AS max_1 
FROM production_runs 
WHERE production_runs.data_source_id = ?
{"timestamp": "2026-02-16T09:46:55.048332Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT max(date(production_runs.production_date)) AS max_1 \nFROM production_runs \nWHERE production_runs.data_source_id = ?"}
2026-02-16 09:46:55,048 INFO sqlalchemy.engine.Engine [cached since 4.41s ago] ('aa560f48-b092-472e-8813-de28f0225e63',)
{"timestamp": "2026-02-16T09:46:55.048461Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.41s ago] ('aa560f48-b092-472e-8813-de28f0225e63',)"}
2026-02-16 09:46:55,053 INFO sqlalchemy.engine.Engine SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at 
FROM production_runs 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?
{"timestamp": "2026-02-16T09:46:55.054199Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at \nFROM production_runs \nWHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?"}
2026-02-16 09:46:55,054 INFO sqlalchemy.engine.Engine [generated in 0.00079s] ('2026-02-16', '2026-02-16', 'aa560f48-b092-472e-8813-de28f0225e63')
{"timestamp": "2026-02-16T09:46:55.054389Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00079s] ('2026-02-16', '2026-02-16', 'aa560f48-b092-472e-8813-de28f0225e63')"}
2026-02-16 09:46:55,058 INFO sqlalchemy.engine.Engine SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at 
FROM production_runs 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?
{"timestamp": "2026-02-16T09:46:55.058267Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at \nFROM production_runs \nWHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?"}
2026-02-16 09:46:55,058 INFO sqlalchemy.engine.Engine [cached since 0.004826s ago] ('2026-02-15', '2026-02-15', 'aa560f48-b092-472e-8813-de28f0225e63')
{"timestamp": "2026-02-16T09:46:55.058404Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.004826s ago] ('2026-02-15', '2026-02-15', 'aa560f48-b092-472e-8813-de28f0225e63')"}
2026-02-16 09:46:55,062 INFO sqlalchemy.engine.Engine SELECT count(data_sources.id) AS total, sum(CASE WHEN data_sources.is_active THEN ? ELSE ? END) AS active 
FROM data_sources
{"timestamp": "2026-02-16T09:46:55.062186Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT count(data_sources.id) AS total, sum(CASE WHEN data_sources.is_active THEN ? ELSE ? END) AS active \nFROM data_sources"}
2026-02-16 09:46:55,062 INFO sqlalchemy.engine.Engine [generated in 0.00027s] (1, 0)
{"timestamp": "2026-02-16T09:46:55.062306Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] (1, 0)"}
2026-02-16 09:46:55,064 INFO sqlalchemy.engine.Engine SELECT count(traceability_records.id) AS count_1 
FROM traceability_records 
WHERE traceability_records.verification_status != ?
{"timestamp": "2026-02-16T09:46:55.064787Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT count(traceability_records.id) AS count_1 \nFROM traceability_records \nWHERE traceability_records.verification_status != ?"}
2026-02-16 09:46:55,065 INFO sqlalchemy.engine.Engine [generated in 0.00051s] ('VERIFIED',)
{"timestamp": "2026-02-16T09:46:55.065453Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] ('VERIFIED',)"}
{"timestamp": "2026-02-16T09:46:55.066468Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://test/api/v1/analytics/overview?line_id=aa560f48-b092-472e-8813-de28f0225e63 \"HTTP/1.1 200 OK\""}
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/ingestion/upload?factory_id=8fb2141b-a6a2-4ee6-9399-adc9668c61e8&production_line_id=aa560f48-b092-472e-8813-de28f0225e63 "HTTP/1.1 200 OK"
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'production_date' -> 'production_date' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:175 MATCH [Fuzzy]: 'shift' -> 'shift' (Score: 100)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'style_number' -> 'style_number' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:175 MATCH [Fuzzy]: 'style_description' -> 'style_number' (Score: 90)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'po_number' -> 'po_number' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'buyer' -> 'buyer' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'season' -> 'season' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'quantity' -> 'actual_qty' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'sam' -> 'sam' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'planned_qty' -> 'planned_qty' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'actual_qty' -> 'actual_qty' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'operators_present' -> 'operators_present' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'helpers_present' -> 'helpers_present' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:175 MATCH [Fuzzy]: 'worked_minutes' -> 'worked_minutes' (Score: 100)
INFO     app.services.matching.engine:engine.py:175 MATCH [Fuzzy]: 'downtime_minutes' -> 'downtime_minutes' (Score: 100)
INFO     app.services.matching.engine:engine.py:175 MATCH [Fuzzy]: 'downtime_reason' -> 'downtime_reason' (Score: 100)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'defects' -> 'defects' (Conf: 1.0)
INFO     app.services.matching.engine:engine.py:167 MATCH [Hash]: 'dhu' -> 'dhu' (Conf: 1.0)
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/ingestion/process/1aaa2a52-9cf2-4207-ba68-733ea12f0bfd?factory_id=8fb2141b-a6a2-4ee6-9399-adc9668c61e8 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1740 HTTP Request: GET http://test/api/v1/ingestion/preview-dry-run/1aaa2a52-9cf2-4207-ba68-733ea12f0bfd "HTTP/1.1 200 OK"
INFO     ingestion.promote:ingestion.py:1044 ============================================================
INFO     ingestion.promote:ingestion.py:1045 PROMOTE ENDPOINT CALLED
INFO     ingestion.promote:ingestion.py:1046   raw_import_id: 1aaa2a52-9cf2-4207-ba68-733ea12f0bfd
INFO     ingestion.promote:ingestion.py:1047 ============================================================
INFO     ingestion.promote:ingestion.py:1059   raw_import.status: confirmed
INFO     ingestion.promote:ingestion.py:1060   raw_import.factory_id: 8fb2141b-a6a2-4ee6-9399-adc9668c61e8
INFO     ingestion.promote:ingestion.py:1061   raw_import.production_line_id: aa560f48-b092-472e-8813-de28f0225e63
INFO     ingestion.promote:ingestion.py:1062   raw_import.data_source_id: 34218f2e-3dcd-434d-97b2-79f861c9efdd
INFO     ingestion.promote:ingestion.py:1072 Creating FileProcessingService...
INFO     ingestion.promote:ingestion.py:1074 Calling promote_to_production...
INFO     app.services.ingestion.orchestrator:orchestrator.py:92 ORCHESTRATOR: promote_to_production for 1aaa2a52-9cf2-4207-ba68-733ea12f0bfd
INFO     app.services.ingestion.orchestrator:orchestrator.py:109 DEBUG: Checking mappings for DS 34218f2e-3dcd-434d-97b2-79f861c9efdd
INFO     app.services.ingestion.orchestrator:orchestrator.py:112 DEBUG: Mapping b74d3f98-aa4e-40dc-b575-449b94331e73 | Ver: 1 | Active: True
WARNING  app.services.ingestion.date_profiler:date_profiler.py:147 AMBIGUOUS DATE COLUMN: All 6 sampled values could be YYYY-MM-DD or YYYY-DD-MM. Defaulting to ISO 8601 (YYYY-MM-DD). Consider configuring explicit format in data source settings.
INFO     app.services.ingestion.orchestrator:orchestrator.py:258 DATE COLUMN PROFILED: 'production_date' -> YYYY-MM-DD (confidence: 50%)
WARNING  app.services.ingestion.orchestrator:orchestrator.py:265 AMBIGUOUS DATE COLUMN 'production_date': All sampled values could be YYYY-MM-DD or YYYY-DD-MM. Defaulting to ISO 8601. Consider configuring explicit format.
INFO     app.services.ingestion.orchestrator:orchestrator.py:161 Resolving existing runs for differential calculation...
INFO     app.services.ingestion.orchestrator:orchestrator.py:165 Found 0 existing runs to update.
INFO     app.services.ingestion.writer:writer.py:380 Inserting/Upserting 6 runs...
INFO     app.services.ingestion.writer:writer.py:446 Flushing ProductionRun writes before inserting children...
INFO     app.services.ingestion.writer:writer.py:467 Inserting 6 events...
INFO     app.services.ingestion.writer:writer.py:480 Upserting 6 efficiency metrics...
INFO     app.services.ingestion.writer:writer.py:504 Upserting 6 quality inspections...
INFO     ingestion.promote:ingestion.py:1076 Promotion SUCCESS: {'status': 'promoted', 'inserted': 6, 'updated': 0, 'events': 6, 'errors': 0}
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/ingestion/promote/1aaa2a52-9cf2-4207-ba68-733ea12f0bfd "HTTP/1.1 200 OK"
INFO     app.api.v1.endpoints.analytics:analytics.py:73 [DIAG] get_overview_stats called with line_id=aa560f48-b092-472e-8813-de28f0225e63
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT factories.timezone 
FROM factories JOIN data_sources ON data_sources.factory_id = factories.id 
WHERE data_sources.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 4.768s ago] ('aa560f48-b092-472e-8813-de28f0225e63',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(production_events.id) AS count_1 
FROM production_events 
WHERE production_events.timestamp >= ? AND production_events.timestamp < ? AND production_events.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 4.768s ago] ('2026-02-15 22:00:00.000000', '2026-02-16 22:00:00.000000', 'aa560f48-b092-472e-8813-de28f0225e63')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(production_runs.id) AS count_1 
FROM production_runs 
WHERE date(production_runs.production_date) = ? AND production_runs.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 4.769s ago] ('2026-02-16', 'aa560f48-b092-472e-8813-de28f0225e63')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT max(production_events.timestamp) AS max_1 
FROM production_events 
WHERE production_events.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 4.411s ago] ('aa560f48-b092-472e-8813-de28f0225e63',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT max(date(production_runs.production_date)) AS max_1 
FROM production_runs 
WHERE production_runs.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 4.41s ago] ('aa560f48-b092-472e-8813-de28f0225e63',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at 
FROM production_runs 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00079s] ('2026-02-16', '2026-02-16', 'aa560f48-b092-472e-8813-de28f0225e63')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT production_runs.factory_id, production_runs.order_id, production_runs.data_source_id, production_runs.source_import_id, production_runs.production_date, production_runs.inspection_date, production_runs.shift, production_runs.planned_qty, production_runs.actual_qty, production_runs.wip_start, production_runs.wip_end, production_runs.lot_number, production_runs.shade_band, production_runs.batch_number, production_runs.downtime_minutes, production_runs.downtime_reason, production_runs.sam, production_runs.operators_present, production_runs.helpers_present, production_runs.worked_minutes, production_runs.earned_minutes, production_runs.efficiency, production_runs.notes, production_runs.start_time, production_runs.end_time, production_runs.style_number, production_runs.buyer, production_runs.season, production_runs.po_number, production_runs.color, production_runs.size, production_runs.defects, production_runs.dhu, production_runs.line_efficiency, production_runs.id, production_runs.created_at, production_runs.updated_at 
FROM production_runs 
WHERE date(production_runs.production_date) >= ? AND date(production_runs.production_date) <= ? AND production_runs.data_source_id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 0.004826s ago] ('2026-02-15', '2026-02-15', 'aa560f48-b092-472e-8813-de28f0225e63')
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(data_sources.id) AS total, sum(CASE WHEN data_sources.is_active THEN ? ELSE ? END) AS active 
FROM data_sources
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00027s] (1, 0)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT count(traceability_records.id) AS count_1 
FROM traceability_records 
WHERE traceability_records.verification_status != ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00051s] ('VERIFIED',)
INFO     httpx:_client.py:1740 HTTP Request: GET http://test/api/v1/analytics/overview?line_id=aa560f48-b092-472e-8813-de28f0225e63 "HTTP/1.1 200 OK"
--------------------------- Captured stdout teardown ---------------------------
2026-02-16 09:46:56,977 INFO sqlalchemy.engine.Engine ROLLBACK
{"timestamp": "2026-02-16T09:46:56.977557Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK"}
2026-02-16 09:46:56,978 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:46:56.978304Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:46:56,978 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:46:56.978529Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 09:46:56,978 INFO sqlalchemy.engine.Engine [cached since 7.167s ago] ()
{"timestamp": "2026-02-16T09:46:56.978607Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 7.167s ago] ()"}
2026-02-16 09:46:56,979 INFO sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table'
{"timestamp": "2026-02-16T09:46:56.979886Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT name FROM sqlite_master WHERE type='table'"}
2026-02-16 09:46:56,980 INFO sqlalchemy.engine.Engine [cached since 6.698s ago] ()
{"timestamp": "2026-02-16T09:46:56.980068Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.698s ago] ()"}
2026-02-16 09:46:56,981 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "ai_decisions"
{"timestamp": "2026-02-16T09:46:56.981721Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"ai_decisions\""}
2026-02-16 09:46:56,981 INFO sqlalchemy.engine.Engine [cached since 6.699s ago] ()
{"timestamp": "2026-02-16T09:46:56.981857Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.699s ago] ()"}
2026-02-16 09:46:56,982 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "alias_mappings"
{"timestamp": "2026-02-16T09:46:56.983036Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"alias_mappings\""}
2026-02-16 09:46:56,983 INFO sqlalchemy.engine.Engine [cached since 6.7s ago] ()
{"timestamp": "2026-02-16T09:46:56.983138Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.7s ago] ()"}
2026-02-16 09:46:56,984 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "efficiency_metrics"
{"timestamp": "2026-02-16T09:46:56.984244Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"efficiency_metrics\""}
2026-02-16 09:46:56,984 INFO sqlalchemy.engine.Engine [cached since 6.7s ago] ()
{"timestamp": "2026-02-16T09:46:56.984385Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.7s ago] ()"}
2026-02-16 09:46:56,985 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dhu_reports"
{"timestamp": "2026-02-16T09:46:56.985343Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dhu_reports\""}
2026-02-16 09:46:56,985 INFO sqlalchemy.engine.Engine [cached since 6.7s ago] ()
{"timestamp": "2026-02-16T09:46:56.985462Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.7s ago] ()"}
2026-02-16 09:46:56,986 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dashboards"
{"timestamp": "2026-02-16T09:46:56.986547Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dashboards\""}
2026-02-16 09:46:56,986 INFO sqlalchemy.engine.Engine [cached since 6.701s ago] ()
{"timestamp": "2026-02-16T09:46:56.986752Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.701s ago] ()"}
2026-02-16 09:46:56,987 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_quality_issues"
{"timestamp": "2026-02-16T09:46:56.987882Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_quality_issues\""}
2026-02-16 09:46:56,987 INFO sqlalchemy.engine.Engine [cached since 6.701s ago] ()
{"timestamp": "2026-02-16T09:46:56.987991Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.701s ago] ()"}
2026-02-16 09:46:56,988 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_sources"
{"timestamp": "2026-02-16T09:46:56.988803Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_sources\""}
2026-02-16 09:46:56,988 INFO sqlalchemy.engine.Engine [cached since 6.702s ago] ()
{"timestamp": "2026-02-16T09:46:56.988945Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.702s ago] ()"}
2026-02-16 09:46:56,989 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "schema_mappings"
{"timestamp": "2026-02-16T09:46:56.989565Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"schema_mappings\""}
2026-02-16 09:46:56,989 INFO sqlalchemy.engine.Engine [cached since 6.702s ago] ()
{"timestamp": "2026-02-16T09:46:56.989654Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.702s ago] ()"}
2026-02-16 09:46:56,990 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_events"
{"timestamp": "2026-02-16T09:46:56.990463Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_events\""}
2026-02-16 09:46:56,990 INFO sqlalchemy.engine.Engine [cached since 6.702s ago] ()
{"timestamp": "2026-02-16T09:46:56.990544Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.702s ago] ()"}
2026-02-16 09:46:56,991 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "factories"
{"timestamp": "2026-02-16T09:46:56.991486Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"factories\""}
2026-02-16 09:46:56,991 INFO sqlalchemy.engine.Engine [cached since 6.703s ago] ()
{"timestamp": "2026-02-16T09:46:56.991578Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.703s ago] ()"}
2026-02-16 09:46:56,992 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "styles"
{"timestamp": "2026-02-16T09:46:56.992407Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"styles\""}
2026-02-16 09:46:56,992 INFO sqlalchemy.engine.Engine [cached since 6.703s ago] ()
{"timestamp": "2026-02-16T09:46:56.992487Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.703s ago] ()"}
2026-02-16 09:46:56,993 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "orders"
{"timestamp": "2026-02-16T09:46:56.993620Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"orders\""}
2026-02-16 09:46:56,993 INFO sqlalchemy.engine.Engine [cached since 6.704s ago] ()
{"timestamp": "2026-02-16T09:46:56.993701Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.704s ago] ()"}
2026-02-16 09:46:56,994 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_runs"
{"timestamp": "2026-02-16T09:46:56.994722Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_runs\""}
2026-02-16 09:46:56,994 INFO sqlalchemy.engine.Engine [cached since 6.704s ago] ()
{"timestamp": "2026-02-16T09:46:56.994811Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.704s ago] ()"}
2026-02-16 09:46:56,996 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "quality_inspections"
{"timestamp": "2026-02-16T09:46:56.996591Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"quality_inspections\""}
2026-02-16 09:46:56,996 INFO sqlalchemy.engine.Engine [cached since 6.706s ago] ()
{"timestamp": "2026-02-16T09:46:56.996851Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.706s ago] ()"}
2026-02-16 09:46:56,997 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "defects"
{"timestamp": "2026-02-16T09:46:56.998052Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"defects\""}
2026-02-16 09:46:56,998 INFO sqlalchemy.engine.Engine [cached since 6.707s ago] ()
{"timestamp": "2026-02-16T09:46:56.998179Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.707s ago] ()"}
2026-02-16 09:46:56,999 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "raw_imports"
{"timestamp": "2026-02-16T09:46:56.999166Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"raw_imports\""}
2026-02-16 09:46:56,999 INFO sqlalchemy.engine.Engine [cached since 6.707s ago] ()
{"timestamp": "2026-02-16T09:46:56.999295Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.707s ago] ()"}
2026-02-16 09:46:57,000 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "staging_records"
{"timestamp": "2026-02-16T09:46:57.000247Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"staging_records\""}
2026-02-16 09:46:57,000 INFO sqlalchemy.engine.Engine [cached since 6.708s ago] ()
{"timestamp": "2026-02-16T09:46:57.000340Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.708s ago] ()"}
2026-02-16 09:46:57,001 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "organizations"
{"timestamp": "2026-02-16T09:46:57.001301Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"organizations\""}
2026-02-16 09:46:57,001 INFO sqlalchemy.engine.Engine [cached since 6.708s ago] ()
{"timestamp": "2026-02-16T09:46:57.001392Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.708s ago] ()"}
2026-02-16 09:46:57,002 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "users"
{"timestamp": "2026-02-16T09:46:57.002209Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"users\""}
2026-02-16 09:46:57,002 INFO sqlalchemy.engine.Engine [cached since 6.709s ago] ()
{"timestamp": "2026-02-16T09:46:57.002299Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.709s ago] ()"}
2026-02-16 09:46:57,003 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "user_scopes"
{"timestamp": "2026-02-16T09:46:57.003255Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"user_scopes\""}
2026-02-16 09:46:57,003 INFO sqlalchemy.engine.Engine [cached since 6.709s ago] ()
{"timestamp": "2026-02-16T09:46:57.003396Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.709s ago] ()"}
2026-02-16 09:46:57,004 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "waitlist"
{"timestamp": "2026-02-16T09:46:57.004183Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"waitlist\""}
2026-02-16 09:46:57,004 INFO sqlalchemy.engine.Engine [cached since 6.71s ago] ()
{"timestamp": "2026-02-16T09:46:57.004269Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.71s ago] ()"}
2026-02-16 09:46:57,004 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "workers"
{"timestamp": "2026-02-16T09:46:57.004882Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"workers\""}
2026-02-16 09:46:57,004 INFO sqlalchemy.engine.Engine [cached since 6.71s ago] ()
{"timestamp": "2026-02-16T09:46:57.005007Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.71s ago] ()"}
2026-02-16 09:46:57,005 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_skills"
{"timestamp": "2026-02-16T09:46:57.005840Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_skills\""}
2026-02-16 09:46:57,005 INFO sqlalchemy.engine.Engine [cached since 6.71s ago] ()
{"timestamp": "2026-02-16T09:46:57.006043Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.71s ago] ()"}
2026-02-16 09:46:57,006 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_attendances"
{"timestamp": "2026-02-16T09:46:57.007034Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_attendances\""}
2026-02-16 09:46:57,007 INFO sqlalchemy.engine.Engine [cached since 6.711s ago] ()
{"timestamp": "2026-02-16T09:46:57.007133Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.711s ago] ()"}
2026-02-16 09:46:57,007 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_outputs"
{"timestamp": "2026-02-16T09:46:57.007817Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_outputs\""}
2026-02-16 09:46:57,007 INFO sqlalchemy.engine.Engine [cached since 6.711s ago] ()
{"timestamp": "2026-02-16T09:46:57.007908Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.711s ago] ()"}
2026-02-16 09:46:57,008 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "fabric_lots"
{"timestamp": "2026-02-16T09:46:57.008573Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"fabric_lots\""}
2026-02-16 09:46:57,008 INFO sqlalchemy.engine.Engine [cached since 6.712s ago] ()
{"timestamp": "2026-02-16T09:46:57.008661Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.712s ago] ()"}
2026-02-16 09:46:57,009 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cut_tickets"
{"timestamp": "2026-02-16T09:46:57.009285Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cut_tickets\""}
2026-02-16 09:46:57,009 INFO sqlalchemy.engine.Engine [cached since 6.712s ago] ()
{"timestamp": "2026-02-16T09:46:57.009366Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.712s ago] ()"}
2026-02-16 09:46:57,010 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "packing_lists"
{"timestamp": "2026-02-16T09:46:57.010070Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"packing_lists\""}
2026-02-16 09:46:57,010 INFO sqlalchemy.engine.Engine [cached since 6.712s ago] ()
{"timestamp": "2026-02-16T09:46:57.010150Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.712s ago] ()"}
2026-02-16 09:46:57,010 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cartons"
{"timestamp": "2026-02-16T09:46:57.010895Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cartons\""}
2026-02-16 09:46:57,010 INFO sqlalchemy.engine.Engine [cached since 6.713s ago] ()
{"timestamp": "2026-02-16T09:46:57.010986Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.713s ago] ()"}
2026-02-16 09:46:57,011 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "traceability_records"
{"timestamp": "2026-02-16T09:46:57.011756Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"traceability_records\""}
2026-02-16 09:46:57,011 INFO sqlalchemy.engine.Engine [cached since 6.713s ago] ()
{"timestamp": "2026-02-16T09:46:57.011927Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.713s ago] ()"}
2026-02-16 09:46:57,012 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:46:57.012780Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 09:46:57,012 INFO sqlalchemy.engine.Engine [cached since 7.116s ago] ()
{"timestamp": "2026-02-16T09:46:57.012956Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 7.116s ago] ()"}
2026-02-16 09:46:57,013 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:46:57.013905Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 7.167s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT name FROM sqlite_master WHERE type='table'
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.698s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "ai_decisions"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.699s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "alias_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.7s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "efficiency_metrics"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.7s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dhu_reports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.7s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dashboards"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.701s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_quality_issues"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.701s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_sources"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.702s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "schema_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.702s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_events"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.702s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "factories"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.703s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "styles"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.703s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "orders"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.704s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_runs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.704s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "quality_inspections"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.706s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "defects"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.707s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "raw_imports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.707s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "staging_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.708s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "organizations"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.708s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "users"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.709s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "user_scopes"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.709s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "waitlist"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.71s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "workers"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.71s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_skills"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.71s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_attendances"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.711s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_outputs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.711s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "fabric_lots"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.712s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cut_tickets"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.712s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "packing_lists"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.712s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cartons"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.713s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "traceability_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 6.713s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 7.116s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
___________________________ test_edit_configuration ____________________________
tests/test_api/test_dashboard_flow.py:94: in test_edit_configuration
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stdout setup -----------------------------
2026-02-16 09:47:07,242 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:47:07.242606Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:47:07,242 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:47:07.242852Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 09:47:07,242 INFO sqlalchemy.engine.Engine [cached since 17.43s ago] ()
{"timestamp": "2026-02-16T09:47:07.242929Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.43s ago] ()"}
2026-02-16 09:47:07,243 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:47:07.243850Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"ai_decisions\")"}
2026-02-16 09:47:07,243 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.243947Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,244 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("ai_decisions")
{"timestamp": "2026-02-16T09:47:07.244550Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"ai_decisions\")"}
2026-02-16 09:47:07,244 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.244623Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,246 INFO sqlalchemy.engine.Engine 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


{"timestamp": "2026-02-16T09:47:07.246264Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE ai_decisions (\n\tdata_source_id VARCHAR(36), \n\tagent_type VARCHAR(16) NOT NULL, \n\tmodel_used VARCHAR(50) NOT NULL, \n\tinput_summary TEXT NOT NULL, \n\toutput_summary TEXT NOT NULL, \n\tconfidence FLOAT, \n\treasoning JSON, \n\tperformance_metadata JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id)\n)\n\n"}
2026-02-16 09:47:07,246 INFO sqlalchemy.engine.Engine [no key 0.00028s] ()
{"timestamp": "2026-02-16T09:47:07.246577Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00028s] ()"}
2026-02-16 09:47:07,247 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
{"timestamp": "2026-02-16T09:47:07.247576Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)"}
2026-02-16 09:47:07,247 INFO sqlalchemy.engine.Engine [no key 0.00020s] ()
{"timestamp": "2026-02-16T09:47:07.247785Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00020s] ()"}
2026-02-16 09:47:07,248 INFO sqlalchemy.engine.Engine CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
{"timestamp": "2026-02-16T09:47:07.248714Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)"}
2026-02-16 09:47:07,248 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:47:07.248791Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 09:47:07,249 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:47:07.249665Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"alias_mappings\")"}
2026-02-16 09:47:07,249 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.249775Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,250 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("alias_mappings")
{"timestamp": "2026-02-16T09:47:07.250459Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"alias_mappings\")"}
2026-02-16 09:47:07,250 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.250534Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,251 INFO sqlalchemy.engine.Engine 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.251549Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE alias_mappings (\n\tscope VARCHAR(50) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tsource_alias VARCHAR(255) NOT NULL, \n\tsource_alias_normalized VARCHAR(255) NOT NULL, \n\tcanonical_field VARCHAR(100) NOT NULL, \n\tusage_count INTEGER NOT NULL, \n\tlast_used_at DATETIME NOT NULL, \n\tcreated_by_id CHAR(36), \n\tcorrection_count INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,251 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.251630Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,252 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
{"timestamp": "2026-02-16T09:47:07.252321Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)"}
2026-02-16 09:47:07,252 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:47:07.252389Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:47:07,253 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
{"timestamp": "2026-02-16T09:47:07.253070Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)"}
2026-02-16 09:47:07,253 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.253138Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,254 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
{"timestamp": "2026-02-16T09:47:07.254095Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)"}
2026-02-16 09:47:07,254 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.254187Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,254 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
{"timestamp": "2026-02-16T09:47:07.254691Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)"}
2026-02-16 09:47:07,254 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:47:07.254757Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:47:07,255 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
{"timestamp": "2026-02-16T09:47:07.255306Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)"}
2026-02-16 09:47:07,255 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.255382Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,256 INFO sqlalchemy.engine.Engine CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
{"timestamp": "2026-02-16T09:47:07.256123Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)"}
2026-02-16 09:47:07,256 INFO sqlalchemy.engine.Engine [no key 0.00020s] ()
{"timestamp": "2026-02-16T09:47:07.256284Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00020s] ()"}
2026-02-16 09:47:07,257 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:47:07.257068Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"efficiency_metrics\")"}
2026-02-16 09:47:07,257 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.257146Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,257 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("efficiency_metrics")
{"timestamp": "2026-02-16T09:47:07.257793Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"efficiency_metrics\")"}
2026-02-16 09:47:07,257 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.257856Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,258 INFO sqlalchemy.engine.Engine 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.258783Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE efficiency_metrics (\n\tproduction_run_id CHAR(36) NOT NULL, \n\tefficiency_pct NUMERIC(6, 2), \n\tsam_target NUMERIC(10, 2), \n\tsam_actual NUMERIC(10, 2), \n\tsam_variance NUMERIC(8, 2), \n\tsam_variance_pct NUMERIC(6, 2), \n\tcapacity_utilization_pct NUMERIC(6, 2), \n\tperformance_tier VARCHAR(12), \n\tfactory_avg_efficiency NUMERIC(6, 2), \n\tline_avg_efficiency NUMERIC(6, 2), \n\tcalculated_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,258 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:47:07.258890Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 09:47:07,259 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
{"timestamp": "2026-02-16T09:47:07.259498Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)"}
2026-02-16 09:47:07,259 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:47:07.259564Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:47:07,260 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:47:07.260162Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dhu_reports\")"}
2026-02-16 09:47:07,260 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.260242Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,260 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dhu_reports")
{"timestamp": "2026-02-16T09:47:07.260857Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dhu_reports\")"}
2026-02-16 09:47:07,260 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.260987Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,261 INFO sqlalchemy.engine.Engine 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.262048Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dhu_reports (\n\tfactory_id CHAR(36) NOT NULL, \n\treport_date DATE NOT NULL, \n\tperiod_type VARCHAR(7) NOT NULL, \n\tavg_dhu NUMERIC(6, 2), \n\tmin_dhu NUMERIC(6, 2), \n\tmax_dhu NUMERIC(6, 2), \n\ttotal_inspected INTEGER, \n\ttotal_defects INTEGER, \n\ttotal_rejected INTEGER, \n\ttop_defects TEXT, \n\ttop_operations TEXT, \n\ttop_lines TEXT, \n\tdhu_change_pct NUMERIC(6, 2), \n\ttrend_direction VARCHAR(20), \n\trecommendations TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,262 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:47:07.262187Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 09:47:07,263 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
{"timestamp": "2026-02-16T09:47:07.263399Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)"}
2026-02-16 09:47:07,263 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:47:07.263491Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 09:47:07,264 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
{"timestamp": "2026-02-16T09:47:07.264132Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)"}
2026-02-16 09:47:07,264 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.264204Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,264 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("dashboards")
{"timestamp": "2026-02-16T09:47:07.265078Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"dashboards\")"}
2026-02-16 09:47:07,265 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.265193Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,265 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("dashboards")
{"timestamp": "2026-02-16T09:47:07.265900Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"dashboards\")"}
2026-02-16 09:47:07,265 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.265965Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,267 INFO sqlalchemy.engine.Engine 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.267250Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE dashboards (\n\tuser_id CHAR(36) NOT NULL, \n\tname VARCHAR(200) NOT NULL, \n\tdescription TEXT, \n\tdata_source_id CHAR(36), \n\twidget_config TEXT, \n\tlayout_config TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tCONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,267 INFO sqlalchemy.engine.Engine [no key 0.00031s] ()
{"timestamp": "2026-02-16T09:47:07.267442Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00031s] ()"}
2026-02-16 09:47:07,268 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
{"timestamp": "2026-02-16T09:47:07.268156Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)"}
2026-02-16 09:47:07,268 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.268254Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,269 INFO sqlalchemy.engine.Engine CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
{"timestamp": "2026-02-16T09:47:07.269132Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)"}
2026-02-16 09:47:07,269 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.269211Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,269 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:47:07.269853Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_quality_issues\")"}
2026-02-16 09:47:07,269 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.269933Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,270 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_quality_issues")
{"timestamp": "2026-02-16T09:47:07.270599Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_quality_issues\")"}
2026-02-16 09:47:07,270 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.270674Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,271 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.271594Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_quality_issues (\n\traw_import_id VARCHAR(36) NOT NULL, \n\trow_number INTEGER, \n\tissue_type VARCHAR(50) NOT NULL, \n\tseverity VARCHAR(20) NOT NULL, \n\tmessage TEXT NOT NULL, \n\tfield_name VARCHAR(100), \n\tfield_value VARCHAR(500), \n\tresolved_at DATETIME, \n\tresolved_by_user_id VARCHAR(36), \n\tresolution_notes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, \n\tFOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,271 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:47:07.271686Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 09:47:07,272 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
{"timestamp": "2026-02-16T09:47:07.272400Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)"}
2026-02-16 09:47:07,272 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.272477Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,273 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
{"timestamp": "2026-02-16T09:47:07.273211Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)"}
2026-02-16 09:47:07,273 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.273298Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,274 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
{"timestamp": "2026-02-16T09:47:07.274142Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)"}
2026-02-16 09:47:07,274 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.274221Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,275 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("data_sources")
{"timestamp": "2026-02-16T09:47:07.275052Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"data_sources\")"}
2026-02-16 09:47:07,275 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.275218Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,275 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("data_sources")
{"timestamp": "2026-02-16T09:47:07.275838Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"data_sources\")"}
2026-02-16 09:47:07,275 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.275906Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,276 INFO sqlalchemy.engine.Engine 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.276992Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE data_sources (\n\tfactory_id CHAR(36), \n\tname VARCHAR(100) NOT NULL, \n\tcode VARCHAR(50), \n\ttarget_operators INTEGER, \n\ttarget_efficiency_pct INTEGER, \n\tsettings JSON, \n\tspecialty VARCHAR(100), \n\tsupervisor_id CHAR(36), \n\tproduction_line_id CHAR(36), \n\tsource_name VARCHAR(255), \n\tdescription TEXT, \n\ttime_column VARCHAR(100), \n\ttime_format VARCHAR(50), \n\tschema_config JSON, \n\tparent_data_source_id CHAR(36), \n\tis_segment BOOLEAN NOT NULL, \n\tdate_range_start DATE, \n\tdate_range_end DATE, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, \n\tFOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,277 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:47:07.277086Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 09:47:07,278 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
{"timestamp": "2026-02-16T09:47:07.278140Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)"}
2026-02-16 09:47:07,278 INFO sqlalchemy.engine.Engine [no key 0.00021s] ()
{"timestamp": "2026-02-16T09:47:07.278315Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00021s] ()"}
2026-02-16 09:47:07,279 INFO sqlalchemy.engine.Engine CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
{"timestamp": "2026-02-16T09:47:07.279293Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)"}
2026-02-16 09:47:07,279 INFO sqlalchemy.engine.Engine [no key 0.00019s] ()
{"timestamp": "2026-02-16T09:47:07.279434Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00019s] ()"}
2026-02-16 09:47:07,280 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:47:07.280290Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"schema_mappings\")"}
2026-02-16 09:47:07,280 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.280388Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,280 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("schema_mappings")
{"timestamp": "2026-02-16T09:47:07.281030Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"schema_mappings\")"}
2026-02-16 09:47:07,281 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.281109Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,282 INFO sqlalchemy.engine.Engine 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.282215Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE schema_mappings (\n\tdata_source_id CHAR(36) NOT NULL, \n\tversion INTEGER NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tcolumn_map JSON NOT NULL, \n\textraction_rules JSON, \n\treviewed_by_user BOOLEAN NOT NULL, \n\tuser_notes TEXT, \n\tmatching_tier VARCHAR(20), \n\ttier_confidence FLOAT, \n\ttier_breakdown JSON, \n\tfuzzy_scores JSON, \n\tuser_corrected BOOLEAN NOT NULL, \n\tcorrection_count INTEGER, \n\tcorrection_history JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,282 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:47:07.282305Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 09:47:07,282 INFO sqlalchemy.engine.Engine CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
{"timestamp": "2026-02-16T09:47:07.282966Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)"}
2026-02-16 09:47:07,283 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.283051Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,283 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_events")
{"timestamp": "2026-02-16T09:47:07.283950Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_events\")"}
2026-02-16 09:47:07,283 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.284021Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,284 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_events")
{"timestamp": "2026-02-16T09:47:07.284448Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_events\")"}
2026-02-16 09:47:07,284 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.284509Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,285 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.285598Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_events (\n\ttimestamp DATETIME NOT NULL, \n\tevent_type VARCHAR(17) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tstyle_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36), \n\tsource_import_id VARCHAR(36), \n\traw_data JSON, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,285 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:47:07.285691Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 09:47:07,286 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
{"timestamp": "2026-02-16T09:47:07.286771Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)"}
2026-02-16 09:47:07,286 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:47:07.286841Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:47:07,287 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
{"timestamp": "2026-02-16T09:47:07.287392Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)"}
2026-02-16 09:47:07,287 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:47:07.287462Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:47:07,287 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
{"timestamp": "2026-02-16T09:47:07.287944Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)"}
2026-02-16 09:47:07,287 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
{"timestamp": "2026-02-16T09:47:07.288007Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00009s] ()"}
2026-02-16 09:47:07,288 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_style_id ON production_events (style_id)
{"timestamp": "2026-02-16T09:47:07.288698Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_style_id ON production_events (style_id)"}
2026-02-16 09:47:07,288 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.288788Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,289 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_order_id ON production_events (order_id)
{"timestamp": "2026-02-16T09:47:07.289855Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_order_id ON production_events (order_id)"}
2026-02-16 09:47:07,289 INFO sqlalchemy.engine.Engine [no key 0.00020s] ()
{"timestamp": "2026-02-16T09:47:07.289959Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00020s] ()"}
2026-02-16 09:47:07,290 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
{"timestamp": "2026-02-16T09:47:07.290715Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)"}
2026-02-16 09:47:07,290 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.290788Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,291 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("factories")
{"timestamp": "2026-02-16T09:47:07.291536Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"factories\")"}
2026-02-16 09:47:07,291 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.291672Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,292 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("factories")
{"timestamp": "2026-02-16T09:47:07.292390Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"factories\")"}
2026-02-16 09:47:07,292 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.292470Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,293 INFO sqlalchemy.engine.Engine 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:47:07.293499Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE factories (\n\torganization_id CHAR(36) NOT NULL, \n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50) NOT NULL, \n\tcountry VARCHAR(100) NOT NULL, \n\tcity VARCHAR(100), \n\taddress TEXT, \n\ttimezone VARCHAR(50) NOT NULL, \n\ttotal_lines INTEGER, \n\ttotal_workers INTEGER, \n\tdaily_capacity_units INTEGER, \n\tcertifications TEXT, \n\tsettings JSON, \n\tlocale VARCHAR(20) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 09:47:07,293 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:47:07.293584Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 09:47:07,294 INFO sqlalchemy.engine.Engine CREATE INDEX ix_factories_organization_id ON factories (organization_id)
{"timestamp": "2026-02-16T09:47:07.294282Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_factories_organization_id ON factories (organization_id)"}
2026-02-16 09:47:07,294 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.294363Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,295 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("styles")
{"timestamp": "2026-02-16T09:47:07.295356Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"styles\")"}
2026-02-16 09:47:07,295 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.295612Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,296 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("styles")
{"timestamp": "2026-02-16T09:47:07.296573Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"styles\")"}
2026-02-16 09:47:07,296 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.296679Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,297 INFO sqlalchemy.engine.Engine 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.297777Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE styles (\n\tfactory_id VARCHAR(36) NOT NULL, \n\tstyle_number VARCHAR(100) NOT NULL, \n\tstyle_name VARCHAR(255), \n\tdescription VARCHAR(500), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tcategory VARCHAR(100), \n\tbase_sam NUMERIC(12, 4), \n\tcomplexity_rating VARCHAR(20), \n\tbom_summary JSON, \n\ttech_pack_url VARCHAR(500), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,297 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:47:07.297870Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 09:47:07,298 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_style_number ON styles (style_number)
{"timestamp": "2026-02-16T09:47:07.298965Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_style_number ON styles (style_number)"}
2026-02-16 09:47:07,299 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:47:07.299080Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 09:47:07,299 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_buyer ON styles (buyer)
{"timestamp": "2026-02-16T09:47:07.299953Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_buyer ON styles (buyer)"}
2026-02-16 09:47:07,300 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:47:07.300061Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 09:47:07,300 INFO sqlalchemy.engine.Engine CREATE INDEX ix_styles_factory_id ON styles (factory_id)
{"timestamp": "2026-02-16T09:47:07.300875Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_styles_factory_id ON styles (factory_id)"}
2026-02-16 09:47:07,300 INFO sqlalchemy.engine.Engine [no key 0.00019s] ()
{"timestamp": "2026-02-16T09:47:07.301038Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00019s] ()"}
2026-02-16 09:47:07,301 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("orders")
{"timestamp": "2026-02-16T09:47:07.301958Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"orders\")"}
2026-02-16 09:47:07,302 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.302068Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,302 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("orders")
{"timestamp": "2026-02-16T09:47:07.302939Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"orders\")"}
2026-02-16 09:47:07,302 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.303015Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,304 INFO sqlalchemy.engine.Engine 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.304110Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE orders (\n\tstyle_id VARCHAR(36) NOT NULL, \n\tpo_number VARCHAR(100) NOT NULL, \n\tquantity INTEGER NOT NULL, \n\tsize_breakdown JSON, \n\tuom VARCHAR(20) NOT NULL, \n\tcolor VARCHAR(100), \n\torder_date DATETIME, \n\tplanned_cut_date DATETIME, \n\tplanned_sew_date DATETIME, \n\tex_factory_date DATETIME, \n\tactual_ship_date DATETIME, \n\tstatus VARCHAR(20) NOT NULL, \n\tpriority VARCHAR(20) NOT NULL, \n\tqty_cut INTEGER NOT NULL, \n\tqty_sewn INTEGER NOT NULL, \n\tqty_packed INTEGER NOT NULL, \n\tqty_shipped INTEGER NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_style_po UNIQUE (style_id, po_number), \n\tFOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,304 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.304202Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,304 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_style_id ON orders (style_id)
{"timestamp": "2026-02-16T09:47:07.305038Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_style_id ON orders (style_id)"}
2026-02-16 09:47:07,305 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.305115Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,305 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_status ON orders (status)
{"timestamp": "2026-02-16T09:47:07.305827Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_status ON orders (status)"}
2026-02-16 09:47:07,305 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:47:07.305944Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 09:47:07,306 INFO sqlalchemy.engine.Engine CREATE INDEX ix_orders_po_number ON orders (po_number)
{"timestamp": "2026-02-16T09:47:07.306683Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_orders_po_number ON orders (po_number)"}
2026-02-16 09:47:07,306 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.306772Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,307 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_runs")
{"timestamp": "2026-02-16T09:47:07.307481Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_runs\")"}
2026-02-16 09:47:07,307 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.307566Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,308 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_runs")
{"timestamp": "2026-02-16T09:47:07.308228Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_runs\")"}
2026-02-16 09:47:07,308 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.308304Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,309 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.309684Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_runs (\n\tfactory_id VARCHAR(36) NOT NULL, \n\torder_id VARCHAR(36) NOT NULL, \n\tdata_source_id VARCHAR(36) NOT NULL, \n\tsource_import_id VARCHAR(36), \n\tproduction_date DATETIME, \n\tinspection_date DATETIME, \n\tshift VARCHAR(20) NOT NULL, \n\tplanned_qty INTEGER, \n\tactual_qty INTEGER NOT NULL, \n\twip_start INTEGER, \n\twip_end INTEGER, \n\tlot_number VARCHAR(50), \n\tshade_band VARCHAR(10), \n\tbatch_number VARCHAR(50), \n\tdowntime_minutes INTEGER, \n\tdowntime_reason VARCHAR(255), \n\tsam NUMERIC(12, 4), \n\toperators_present INTEGER NOT NULL, \n\thelpers_present INTEGER NOT NULL, \n\tworked_minutes NUMERIC(12, 4) NOT NULL, \n\tearned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), \n\tefficiency NUMERIC(10, 2) GENERATED ALWAYS AS (\n            CASE\n                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL\n                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100\n                ELSE 0\n            END\n            ), \n\tnotes TEXT, \n\tstart_time TIME, \n\tend_time TIME, \n\tstyle_number VARCHAR(100), \n\tbuyer VARCHAR(255), \n\tseason VARCHAR(50), \n\tpo_number VARCHAR(100), \n\tcolor VARCHAR(100), \n\tsize VARCHAR(50), \n\tdefects INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tline_efficiency NUMERIC(10, 2), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT check_positive_qty CHECK (actual_qty >= 0), \n\tCONSTRAINT check_positive_operators CHECK (operators_present >= 0), \n\tCONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), \n\tCONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), \n\tCONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), \n\tCONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), \n\tCONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, \n\tFOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,309 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:47:07.309800Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 09:47:07,310 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
{"timestamp": "2026-02-16T09:47:07.310913Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)"}
2026-02-16 09:47:07,310 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:47:07.311016Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 09:47:07,311 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
{"timestamp": "2026-02-16T09:47:07.312053Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)"}
2026-02-16 09:47:07,312 INFO sqlalchemy.engine.Engine [no key 0.00023s] ()
{"timestamp": "2026-02-16T09:47:07.312217Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00023s] ()"}
2026-02-16 09:47:07,313 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
{"timestamp": "2026-02-16T09:47:07.313505Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)"}
2026-02-16 09:47:07,313 INFO sqlalchemy.engine.Engine [no key 0.00031s] ()
{"timestamp": "2026-02-16T09:47:07.313722Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00031s] ()"}
2026-02-16 09:47:07,314 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
{"timestamp": "2026-02-16T09:47:07.314920Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)"}
2026-02-16 09:47:07,315 INFO sqlalchemy.engine.Engine [no key 0.00025s] ()
{"timestamp": "2026-02-16T09:47:07.315067Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00025s] ()"}
2026-02-16 09:47:07,315 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
{"timestamp": "2026-02-16T09:47:07.315890Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)"}
2026-02-16 09:47:07,315 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:47:07.315995Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 09:47:07,316 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
{"timestamp": "2026-02-16T09:47:07.316810Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)"}
2026-02-16 09:47:07,316 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.316883Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,317 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
{"timestamp": "2026-02-16T09:47:07.317854Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)"}
2026-02-16 09:47:07,317 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:47:07.317980Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 09:47:07,318 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
{"timestamp": "2026-02-16T09:47:07.318959Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)"}
2026-02-16 09:47:07,319 INFO sqlalchemy.engine.Engine [no key 0.00023s] ()
{"timestamp": "2026-02-16T09:47:07.319102Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00023s] ()"}
2026-02-16 09:47:07,319 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:47:07.319958Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"quality_inspections\")"}
2026-02-16 09:47:07,320 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.320060Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,320 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("quality_inspections")
{"timestamp": "2026-02-16T09:47:07.320862Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"quality_inspections\")"}
2026-02-16 09:47:07,320 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.321023Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,322 INFO sqlalchemy.engine.Engine 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.322139Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE quality_inspections (\n\tproduction_run_id VARCHAR(36) NOT NULL, \n\tinspector_id VARCHAR(36), \n\tinspection_type VARCHAR(7) NOT NULL, \n\tunits_checked INTEGER NOT NULL, \n\tdefects_found INTEGER NOT NULL, \n\tunits_rejected INTEGER NOT NULL, \n\tunits_reworked INTEGER NOT NULL, \n\tdhu NUMERIC(6, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\taql_level VARCHAR(20), \n\taql_result VARCHAR(7), \n\tinspected_at DATETIME NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, \n\tFOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,322 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:47:07.322238Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 09:47:07,323 INFO sqlalchemy.engine.Engine CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
{"timestamp": "2026-02-16T09:47:07.323424Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)"}
2026-02-16 09:47:07,323 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:47:07.323520Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 09:47:07,324 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("defects")
{"timestamp": "2026-02-16T09:47:07.324331Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"defects\")"}
2026-02-16 09:47:07,324 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.324418Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,325 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("defects")
{"timestamp": "2026-02-16T09:47:07.325191Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"defects\")"}
2026-02-16 09:47:07,325 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.325306Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,326 INFO sqlalchemy.engine.Engine 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.326462Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE defects (\n\tinspection_id VARCHAR(36) NOT NULL, \n\tworker_id VARCHAR(36), \n\tdefect_type VARCHAR(100) NOT NULL, \n\tdefect_code VARCHAR(20), \n\tdefect_category VARCHAR(100), \n\toperation VARCHAR(100), \n\tseverity VARCHAR(8) NOT NULL, \n\tis_reworkable BOOLEAN NOT NULL, \n\tis_reworked BOOLEAN NOT NULL, \n\troot_cause VARCHAR(255), \n\tmachine_id VARCHAR(50), \n\timage_url VARCHAR(500), \n\tcount INTEGER NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,326 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:47:07.326557Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 09:47:07,327 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
{"timestamp": "2026-02-16T09:47:07.327855Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)"}
2026-02-16 09:47:07,327 INFO sqlalchemy.engine.Engine [no key 0.00017s] ()
{"timestamp": "2026-02-16T09:47:07.327979Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00017s] ()"}
2026-02-16 09:47:07,328 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_worker_id ON defects (worker_id)
{"timestamp": "2026-02-16T09:47:07.329054Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_worker_id ON defects (worker_id)"}
2026-02-16 09:47:07,329 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:47:07.329154Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 09:47:07,329 INFO sqlalchemy.engine.Engine CREATE INDEX ix_defects_defect_type ON defects (defect_type)
{"timestamp": "2026-02-16T09:47:07.329986Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_defects_defect_type ON defects (defect_type)"}
2026-02-16 09:47:07,330 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:47:07.330082Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 09:47:07,330 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("raw_imports")
{"timestamp": "2026-02-16T09:47:07.330875Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"raw_imports\")"}
2026-02-16 09:47:07,330 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.330960Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,331 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("raw_imports")
{"timestamp": "2026-02-16T09:47:07.331976Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"raw_imports\")"}
2026-02-16 09:47:07,332 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.332059Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,333 INFO sqlalchemy.engine.Engine 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.333147Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE raw_imports (\n\tuploaded_by_id VARCHAR(36), \n\tfactory_id VARCHAR(36), \n\tproduction_line_id VARCHAR(36), \n\tdata_source_id VARCHAR(36), \n\ttime_column_used VARCHAR(100), \n\toriginal_filename VARCHAR(500) NOT NULL, \n\tfile_path VARCHAR(1000) NOT NULL, \n\tfile_size_bytes INTEGER NOT NULL, \n\tfile_hash VARCHAR(64) NOT NULL, \n\tmime_type VARCHAR(100), \n\tencoding_detected VARCHAR(50), \n\tsheet_count INTEGER NOT NULL, \n\tsheet_names TEXT, \n\trow_count INTEGER, \n\tcolumn_count INTEGER, \n\theader_row_detected INTEGER, \n\traw_headers TEXT, \n\tsample_data TEXT, \n\tstatus VARCHAR(50) NOT NULL, \n\tprocessing_error TEXT, \n\tprocessed_at DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,333 INFO sqlalchemy.engine.Engine [no key 0.00018s] ()
{"timestamp": "2026-02-16T09:47:07.333295Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00018s] ()"}
2026-02-16 09:47:07,334 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
{"timestamp": "2026-02-16T09:47:07.334314Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)"}
2026-02-16 09:47:07,334 INFO sqlalchemy.engine.Engine [no key 0.00023s] ()
{"timestamp": "2026-02-16T09:47:07.334448Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00023s] ()"}
2026-02-16 09:47:07,335 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
{"timestamp": "2026-02-16T09:47:07.335225Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)"}
2026-02-16 09:47:07,335 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:47:07.335314Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 09:47:07,335 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
{"timestamp": "2026-02-16T09:47:07.335998Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)"}
2026-02-16 09:47:07,336 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:47:07.336110Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 09:47:07,336 INFO sqlalchemy.engine.Engine CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
{"timestamp": "2026-02-16T09:47:07.336729Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)"}
2026-02-16 09:47:07,336 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.336808Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,337 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("staging_records")
{"timestamp": "2026-02-16T09:47:07.337452Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"staging_records\")"}
2026-02-16 09:47:07,337 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.337521Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,338 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("staging_records")
{"timestamp": "2026-02-16T09:47:07.338417Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"staging_records\")"}
2026-02-16 09:47:07,338 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.338489Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,339 INFO sqlalchemy.engine.Engine 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.339366Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE staging_records (\n\traw_import_id VARCHAR(36) NOT NULL, \n\tsource_row_number INTEGER NOT NULL, \n\tstatus VARCHAR(50) NOT NULL, \n\tvalidation_errors TEXT, \n\tvalidation_warnings TEXT, \n\trecord_data TEXT NOT NULL, \n\tnormalized_data TEXT, \n\tquality_score FLOAT, \n\tnull_field_count INTEGER, \n\tpromoted_at DATETIME, \n\tpromoted_to_table VARCHAR(100), \n\tpromoted_record_id VARCHAR(36), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,339 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.339446Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,340 INFO sqlalchemy.engine.Engine CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
{"timestamp": "2026-02-16T09:47:07.340220Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)"}
2026-02-16 09:47:07,340 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.340300Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,341 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("organizations")
{"timestamp": "2026-02-16T09:47:07.341128Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"organizations\")"}
2026-02-16 09:47:07,341 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.341245Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,341 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("organizations")
{"timestamp": "2026-02-16T09:47:07.341913Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"organizations\")"}
2026-02-16 09:47:07,341 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.341998Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,342 INFO sqlalchemy.engine.Engine 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


{"timestamp": "2026-02-16T09:47:07.342960Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE organizations (\n\tname VARCHAR(255) NOT NULL, \n\tcode VARCHAR(50), \n\tsubscription_tier VARCHAR(10) NOT NULL, \n\tsettings TEXT, \n\tmax_factories INTEGER NOT NULL, \n\tmax_lines_per_factory INTEGER NOT NULL, \n\tprimary_email VARCHAR(255), \n\tprimary_phone VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (code)\n)\n\n"}
2026-02-16 09:47:07,343 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.343040Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,343 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
{"timestamp": "2026-02-16T09:47:07.344017Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"users\")"}
2026-02-16 09:47:07,344 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.344107Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,344 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("users")
{"timestamp": "2026-02-16T09:47:07.344768Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"users\")"}
2026-02-16 09:47:07,345 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.345112Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,346 INFO sqlalchemy.engine.Engine 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


{"timestamp": "2026-02-16T09:47:07.346851Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE users (\n\torganization_id CHAR(36) NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\thashed_password VARCHAR(255) NOT NULL, \n\tfull_name VARCHAR(255), \n\tavatar_url VARCHAR(500), \n\ttimezone VARCHAR(50), \n\tpreferences TEXT, \n\trole VARCHAR(15) NOT NULL, \n\tis_active BOOLEAN NOT NULL, \n\tis_verified BOOLEAN NOT NULL, \n\tlast_login DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tUNIQUE (email)\n)\n\n"}
2026-02-16 09:47:07,346 INFO sqlalchemy.engine.Engine [no key 0.00025s] ()
{"timestamp": "2026-02-16T09:47:07.346983Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00025s] ()"}
2026-02-16 09:47:07,348 INFO sqlalchemy.engine.Engine CREATE INDEX ix_users_organization_id ON users (organization_id)
{"timestamp": "2026-02-16T09:47:07.348161Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_users_organization_id ON users (organization_id)"}
2026-02-16 09:47:07,348 INFO sqlalchemy.engine.Engine [no key 0.00024s] ()
{"timestamp": "2026-02-16T09:47:07.348318Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00024s] ()"}
2026-02-16 09:47:07,349 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_scopes")
{"timestamp": "2026-02-16T09:47:07.349397Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"user_scopes\")"}
2026-02-16 09:47:07,349 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.349493Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,350 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("user_scopes")
{"timestamp": "2026-02-16T09:47:07.350149Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"user_scopes\")"}
2026-02-16 09:47:07,350 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.350251Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,351 INFO sqlalchemy.engine.Engine 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.351059Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE user_scopes (\n\tuser_id CHAR(36) NOT NULL, \n\tscope_type VARCHAR(12) NOT NULL, \n\torganization_id CHAR(36), \n\tfactory_id CHAR(36), \n\tdata_source_id CHAR(36), \n\trole VARCHAR(15) NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,351 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.351142Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,351 INFO sqlalchemy.engine.Engine CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
{"timestamp": "2026-02-16T09:47:07.351853Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)"}
2026-02-16 09:47:07,351 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.351924Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,352 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("waitlist")
{"timestamp": "2026-02-16T09:47:07.352552Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"waitlist\")"}
2026-02-16 09:47:07,352 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.352626Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,353 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("waitlist")
{"timestamp": "2026-02-16T09:47:07.353275Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"waitlist\")"}
2026-02-16 09:47:07,353 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.353355Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,354 INFO sqlalchemy.engine.Engine 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


{"timestamp": "2026-02-16T09:47:07.354165Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE waitlist (\n\tid INTEGER NOT NULL, \n\temail VARCHAR(255) NOT NULL, \n\treferral_code VARCHAR(8) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n"}
2026-02-16 09:47:07,354 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.354246Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,354 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
{"timestamp": "2026-02-16T09:47:07.354999Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)"}
2026-02-16 09:47:07,355 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.355075Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,355 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
{"timestamp": "2026-02-16T09:47:07.355738Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)"}
2026-02-16 09:47:07,355 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.355830Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,356 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("workers")
{"timestamp": "2026-02-16T09:47:07.356759Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"workers\")"}
2026-02-16 09:47:07,356 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.356849Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,357 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("workers")
{"timestamp": "2026-02-16T09:47:07.357681Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"workers\")"}
2026-02-16 09:47:07,357 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.357765Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,358 INFO sqlalchemy.engine.Engine 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.358780Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE workers (\n\tfactory_id VARCHAR(36) NOT NULL, \n\temployee_id VARCHAR(50) NOT NULL, \n\tfull_name VARCHAR(255) NOT NULL, \n\tdepartment VARCHAR(100), \n\tjob_title VARCHAR(100), \n\tprimary_skill VARCHAR(100), \n\tdata_source_id VARCHAR(36), \n\thire_date DATE, \n\ttermination_date DATE, \n\thourly_rate NUMERIC(10, 2), \n\tcurrency VARCHAR(3), \n\tis_active BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tis_deleted BOOLEAN NOT NULL, \n\tdeleted_at DATETIME, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, \n\tFOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,358 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.358876Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,359 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_employee_id ON workers (employee_id)
{"timestamp": "2026-02-16T09:47:07.359647Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_employee_id ON workers (employee_id)"}
2026-02-16 09:47:07,359 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.359722Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,360 INFO sqlalchemy.engine.Engine CREATE INDEX ix_workers_factory_id ON workers (factory_id)
{"timestamp": "2026-02-16T09:47:07.360511Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_workers_factory_id ON workers (factory_id)"}
2026-02-16 09:47:07,360 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.360585Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,361 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_skills")
{"timestamp": "2026-02-16T09:47:07.361645Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_skills\")"}
2026-02-16 09:47:07,361 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.361765Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,362 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_skills")
{"timestamp": "2026-02-16T09:47:07.362877Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_skills\")"}
2026-02-16 09:47:07,362 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.362971Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,364 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.364269Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_skills (\n\tworker_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\toperation_category VARCHAR(100), \n\tproficiency_pct NUMERIC(5, 2), \n\tsam_achieved NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\tdefect_rate_pct NUMERIC(5, 2), \n\tpieces_lifetime INTEGER, \n\tpieces_30d INTEGER, \n\tis_certified BOOLEAN NOT NULL, \n\tcertification_date DATE, \n\tlast_assessed DATETIME, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,364 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:47:07.364367Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 09:47:07,365 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
{"timestamp": "2026-02-16T09:47:07.365343Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)"}
2026-02-16 09:47:07,365 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:47:07.365436Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 09:47:07,366 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
{"timestamp": "2026-02-16T09:47:07.366244Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)"}
2026-02-16 09:47:07,366 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.366336Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,367 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:47:07.367232Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"worker_attendances\")"}
2026-02-16 09:47:07,367 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.367396Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,368 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("worker_attendances")
{"timestamp": "2026-02-16T09:47:07.368310Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"worker_attendances\")"}
2026-02-16 09:47:07,368 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.368399Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,369 INFO sqlalchemy.engine.Engine 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.369415Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE worker_attendances (\n\tworker_id VARCHAR(36) NOT NULL, \n\twork_date DATE NOT NULL, \n\tclock_in TIME, \n\tclock_out TIME, \n\thours_regular NUMERIC(4, 2), \n\thours_overtime NUMERIC(4, 2), \n\thours_total NUMERIC(4, 2), \n\tis_present BOOLEAN NOT NULL, \n\tabsence_reason VARCHAR(100), \n\tis_approved BOOLEAN NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,369 INFO sqlalchemy.engine.Engine [no key 0.00023s] ()
{"timestamp": "2026-02-16T09:47:07.369604Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00023s] ()"}
2026-02-16 09:47:07,370 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
{"timestamp": "2026-02-16T09:47:07.370476Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)"}
2026-02-16 09:47:07,370 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.370567Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,371 INFO sqlalchemy.engine.Engine CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
{"timestamp": "2026-02-16T09:47:07.371298Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)"}
2026-02-16 09:47:07,371 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.371376Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,371 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("production_outputs")
{"timestamp": "2026-02-16T09:47:07.372030Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"production_outputs\")"}
2026-02-16 09:47:07,372 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.372106Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,372 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("production_outputs")
{"timestamp": "2026-02-16T09:47:07.372712Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"production_outputs\")"}
2026-02-16 09:47:07,372 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.372781Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,373 INFO sqlalchemy.engine.Engine 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.373922Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE production_outputs (\n\tworker_id VARCHAR(36) NOT NULL, \n\tproduction_run_id VARCHAR(36) NOT NULL, \n\toperation VARCHAR(100) NOT NULL, \n\tpieces_completed INTEGER NOT NULL, \n\tsam_earned NUMERIC(10, 2), \n\tminutes_worked NUMERIC(8, 2), \n\tefficiency_pct NUMERIC(5, 2), \n\trecorded_at DATETIME NOT NULL, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,373 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
{"timestamp": "2026-02-16T09:47:07.374012Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00015s] ()"}
2026-02-16 09:47:07,374 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
{"timestamp": "2026-02-16T09:47:07.374721Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)"}
2026-02-16 09:47:07,374 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.374803Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,375 INFO sqlalchemy.engine.Engine CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
{"timestamp": "2026-02-16T09:47:07.375459Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)"}
2026-02-16 09:47:07,375 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.375541Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,376 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:47:07.376239Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"fabric_lots\")"}
2026-02-16 09:47:07,376 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.376315Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,377 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("fabric_lots")
{"timestamp": "2026-02-16T09:47:07.377585Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"fabric_lots\")"}
2026-02-16 09:47:07,377 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.377659Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,379 INFO sqlalchemy.engine.Engine 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.379515Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE fabric_lots (\n\tfactory_id CHAR(36) NOT NULL, \n\tlot_number VARCHAR(100) NOT NULL, \n\tfabric_type VARCHAR(100), \n\tcomposition VARCHAR(255), \n\twidth_cm INTEGER, \n\tgsm INTEGER, \n\tcolor VARCHAR(100), \n\tsupplier VARCHAR(255), \n\torigin_country VARCHAR(100), \n\tmill_name VARCHAR(255), \n\treceived_date DATE, \n\tinitial_meters NUMERIC(12, 2), \n\tavailable_meters NUMERIC(12, 2), \n\treserved_meters NUMERIC(12, 2), \n\tunit_cost NUMERIC(10, 4), \n\tcurrency VARCHAR(3), \n\tcertifications TEXT, \n\tinspection_status VARCHAR(50), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tCONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), \n\tFOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,379 INFO sqlalchemy.engine.Engine [no key 0.00040s] ()
{"timestamp": "2026-02-16T09:47:07.379768Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00040s] ()"}
2026-02-16 09:47:07,380 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
{"timestamp": "2026-02-16T09:47:07.381063Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)"}
2026-02-16 09:47:07,381 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:47:07.381224Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 09:47:07,382 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
{"timestamp": "2026-02-16T09:47:07.382115Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)"}
2026-02-16 09:47:07,382 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.382200Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,382 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
{"timestamp": "2026-02-16T09:47:07.383165Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)"}
2026-02-16 09:47:07,383 INFO sqlalchemy.engine.Engine [no key 0.00027s] ()
{"timestamp": "2026-02-16T09:47:07.383249Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00027s] ()"}
2026-02-16 09:47:07,383 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
{"timestamp": "2026-02-16T09:47:07.383894Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)"}
2026-02-16 09:47:07,383 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.383973Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,384 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:47:07.384572Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cut_tickets\")"}
2026-02-16 09:47:07,384 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.384642Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,385 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cut_tickets")
{"timestamp": "2026-02-16T09:47:07.385290Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cut_tickets\")"}
2026-02-16 09:47:07,385 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.385388Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,386 INFO sqlalchemy.engine.Engine 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.386396Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cut_tickets (\n\tfabric_lot_id CHAR(36) NOT NULL, \n\torder_id CHAR(36) NOT NULL, \n\tticket_number VARCHAR(100) NOT NULL, \n\tcut_date DATE, \n\tplies INTEGER, \n\tmarker_length_cm INTEGER, \n\tconsumption_meters NUMERIC(10, 2), \n\twastage_pct NUMERIC(5, 2), \n\tsize_ratio TEXT, \n\tbundle_count INTEGER, \n\ttotal_pieces INTEGER, \n\tcutter_id CHAR(36), \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, \n\tFOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,386 INFO sqlalchemy.engine.Engine [no key 0.00012s] ()
{"timestamp": "2026-02-16T09:47:07.386479Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00012s] ()"}
2026-02-16 09:47:07,387 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
{"timestamp": "2026-02-16T09:47:07.387169Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)"}
2026-02-16 09:47:07,387 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.387247Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,388 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
{"timestamp": "2026-02-16T09:47:07.388121Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)"}
2026-02-16 09:47:07,388 INFO sqlalchemy.engine.Engine [no key 0.00020s] ()
{"timestamp": "2026-02-16T09:47:07.388288Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00020s] ()"}
2026-02-16 09:47:07,389 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
{"timestamp": "2026-02-16T09:47:07.389232Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)"}
2026-02-16 09:47:07,389 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:47:07.389320Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 09:47:07,389 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("packing_lists")
{"timestamp": "2026-02-16T09:47:07.389985Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"packing_lists\")"}
2026-02-16 09:47:07,390 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.390059Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,390 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("packing_lists")
{"timestamp": "2026-02-16T09:47:07.390729Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"packing_lists\")"}
2026-02-16 09:47:07,390 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.390817Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,391 INFO sqlalchemy.engine.Engine 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.391772Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE packing_lists (\n\torder_id CHAR(36) NOT NULL, \n\tpacking_list_number VARCHAR(100) NOT NULL, \n\tship_date DATE, \n\tdestination VARCHAR(255), \n\tship_to_address TEXT, \n\tcarrier VARCHAR(100), \n\ttracking_number VARCHAR(255), \n\tcontainer_number VARCHAR(100), \n\ttotal_cartons INTEGER, \n\ttotal_units INTEGER, \n\ttotal_net_weight_kg NUMERIC(10, 2), \n\ttotal_gross_weight_kg NUMERIC(10, 2), \n\ttotal_cbm NUMERIC(8, 3), \n\tstatus VARCHAR(10) NOT NULL, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,391 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.391872Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,392 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
{"timestamp": "2026-02-16T09:47:07.392793Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)"}
2026-02-16 09:47:07,392 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.392868Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,393 INFO sqlalchemy.engine.Engine CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
{"timestamp": "2026-02-16T09:47:07.393839Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)"}
2026-02-16 09:47:07,393 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.393923Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,394 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cartons")
{"timestamp": "2026-02-16T09:47:07.394803Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"cartons\")"}
2026-02-16 09:47:07,394 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.394981Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,395 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("cartons")
{"timestamp": "2026-02-16T09:47:07.396050Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"cartons\")"}
2026-02-16 09:47:07,396 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.396157Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,397 INFO sqlalchemy.engine.Engine 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


{"timestamp": "2026-02-16T09:47:07.397249Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE cartons (\n\tpacking_list_id CHAR(36) NOT NULL, \n\tcarton_number VARCHAR(50) NOT NULL, \n\tsize_breakdown TEXT, \n\tcolor VARCHAR(100), \n\ttotal_units INTEGER, \n\tnet_weight_kg NUMERIC(8, 2), \n\tgross_weight_kg NUMERIC(8, 2), \n\tdimensions_cm TEXT, \n\tlength_cm INTEGER, \n\twidth_cm INTEGER, \n\theight_cm INTEGER, \n\tbarcode VARCHAR(100), \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE\n)\n\n"}
2026-02-16 09:47:07,397 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
{"timestamp": "2026-02-16T09:47:07.397345Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00016s] ()"}
2026-02-16 09:47:07,398 INFO sqlalchemy.engine.Engine CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
{"timestamp": "2026-02-16T09:47:07.398094Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)"}
2026-02-16 09:47:07,398 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.398184Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,398 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("traceability_records")
{"timestamp": "2026-02-16T09:47:07.398917Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA main.table_info(\"traceability_records\")"}
2026-02-16 09:47:07,398 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.398995Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,399 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("traceability_records")
{"timestamp": "2026-02-16T09:47:07.399708Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA temp.table_info(\"traceability_records\")"}
2026-02-16 09:47:07,399 INFO sqlalchemy.engine.Engine [raw sql] ()
{"timestamp": "2026-02-16T09:47:07.399781Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()"}
2026-02-16 09:47:07,400 INFO sqlalchemy.engine.Engine 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


{"timestamp": "2026-02-16T09:47:07.400684Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "\nCREATE TABLE traceability_records (\n\tcarton_id CHAR(36), \n\tfabric_lot_id CHAR(36), \n\tcut_ticket_id CHAR(36), \n\tproduction_run_id CHAR(36), \n\tcompliance_standard VARCHAR(8) NOT NULL, \n\tchain_of_custody TEXT, \n\tsupporting_documents TEXT, \n\tverification_status VARCHAR(8) NOT NULL, \n\tverified_by_id CHAR(36), \n\tverified_at DATETIME, \n\trisk_score VARCHAR(20), \n\trisk_notes TEXT, \n\tnotes TEXT, \n\tid VARCHAR(36) NOT NULL, \n\tcreated_at DATETIME NOT NULL, \n\tupdated_at DATETIME NOT NULL, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, \n\tFOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, \n\tFOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, \n\tFOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, \n\tFOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n"}
2026-02-16 09:47:07,400 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
{"timestamp": "2026-02-16T09:47:07.400784Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00014s] ()"}
2026-02-16 09:47:07,401 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
{"timestamp": "2026-02-16T09:47:07.401577Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)"}
2026-02-16 09:47:07,401 INFO sqlalchemy.engine.Engine [no key 0.00013s] ()
{"timestamp": "2026-02-16T09:47:07.401661Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00013s] ()"}
2026-02-16 09:47:07,402 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
{"timestamp": "2026-02-16T09:47:07.402456Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)"}
2026-02-16 09:47:07,402 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
{"timestamp": "2026-02-16T09:47:07.402541Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00011s] ()"}
2026-02-16 09:47:07,403 INFO sqlalchemy.engine.Engine CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
{"timestamp": "2026-02-16T09:47:07.403174Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)"}
2026-02-16 09:47:07,403 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
{"timestamp": "2026-02-16T09:47:07.403255Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[no key 0.00010s] ()"}
2026-02-16 09:47:07,403 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:47:07.404017Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 09:47:07,404 INFO sqlalchemy.engine.Engine [cached since 17.51s ago] ()
{"timestamp": "2026-02-16T09:47:07.404112Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.51s ago] ()"}
2026-02-16 09:47:07,404 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:47:07.404694Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:47:07,406 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:47:07.406166Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:47:07,406 INFO sqlalchemy.engine.Engine INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:47:07.406506Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:47:07,406 INFO sqlalchemy.engine.Engine [cached since 17.43s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, 'c48235f3-1fc0-4094-91dc-5ff2cf18dcdd', '2026-02-16 09:47:07.406418', '2026-02-16 09:47:07.406422', 0, None)
{"timestamp": "2026-02-16T09:47:07.406596Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.43s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, 'c48235f3-1fc0-4094-91dc-5ff2cf18dcdd', '2026-02-16 09:47:07.406418', '2026-02-16 09:47:07.406422', 0, None)"}
2026-02-16 09:47:07,407 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:47:07.407416Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:47:07,408 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:47:07.408121Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:47:07,408 INFO sqlalchemy.engine.Engine SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
{"timestamp": "2026-02-16T09:47:07.408356Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at \nFROM organizations \nWHERE organizations.id = ?"}
2026-02-16 09:47:07,408 INFO sqlalchemy.engine.Engine [cached since 17.43s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd',)
{"timestamp": "2026-02-16T09:47:07.408428Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.43s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd',)"}
2026-02-16 09:47:07,409 INFO sqlalchemy.engine.Engine SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
{"timestamp": "2026-02-16T09:47:07.409637Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at \nFROM factories \nWHERE ? = factories.organization_id"}
2026-02-16 09:47:07,409 INFO sqlalchemy.engine.Engine [cached since 17.43s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd',)
{"timestamp": "2026-02-16T09:47:07.409735Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.43s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd',)"}
2026-02-16 09:47:07,410 INFO sqlalchemy.engine.Engine SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
{"timestamp": "2026-02-16T09:47:07.411084Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at \nFROM users \nWHERE ? = users.organization_id"}
2026-02-16 09:47:07,411 INFO sqlalchemy.engine.Engine [cached since 17.43s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd',)
{"timestamp": "2026-02-16T09:47:07.411684Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.43s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd',)"}
2026-02-16 09:47:07,415 INFO sqlalchemy.engine.Engine INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:47:07.416018Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:47:07,416 INFO sqlalchemy.engine.Engine [cached since 5.877s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd', 'Dash Factory', 'DF1', 'US', None, None, 'UTC', None, None, None, None, 'en-US', 1, '4375dd64-16f4-4d37-9a35-cf6a9ed60e3d', '2026-02-16 09:47:07.415632', '2026-02-16 09:47:07.415644')
{"timestamp": "2026-02-16T09:47:07.416424Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.877s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd', 'Dash Factory', 'DF1', 'US', None, None, 'UTC', None, None, None, None, 'en-US', 1, '4375dd64-16f4-4d37-9a35-cf6a9ed60e3d', '2026-02-16 09:47:07.415632', '2026-02-16 09:47:07.415644')"}
2026-02-16 09:47:07,417 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:47:07.417447Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:47:07,418 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:47:07.418243Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:47:07,418 INFO sqlalchemy.engine.Engine SELECT factories.organization_id, factories.name, factories.code, factories.country, factories.city, factories.address, factories.timezone, factories.total_lines, factories.total_workers, factories.daily_capacity_units, factories.certifications, factories.settings, factories.locale, factories.is_active, factories.id, factories.created_at, factories.updated_at 
FROM factories 
WHERE factories.id = ?
{"timestamp": "2026-02-16T09:47:07.418478Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT factories.organization_id, factories.name, factories.code, factories.country, factories.city, factories.address, factories.timezone, factories.total_lines, factories.total_workers, factories.daily_capacity_units, factories.certifications, factories.settings, factories.locale, factories.is_active, factories.id, factories.created_at, factories.updated_at \nFROM factories \nWHERE factories.id = ?"}
2026-02-16 09:47:07,418 INFO sqlalchemy.engine.Engine [cached since 17.21s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)
{"timestamp": "2026-02-16T09:47:07.418566Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.21s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)"}
2026-02-16 09:47:07,419 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.factory_id
{"timestamp": "2026-02-16T09:47:07.419774Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at \nFROM data_sources \nWHERE ? = data_sources.factory_id"}
2026-02-16 09:47:07,419 INFO sqlalchemy.engine.Engine [cached since 17.21s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)
{"timestamp": "2026-02-16T09:47:07.419866Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.21s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)"}
2026-02-16 09:47:07,421 INFO sqlalchemy.engine.Engine SELECT styles.factory_id AS styles_factory_id, styles.style_number AS styles_style_number, styles.style_name AS styles_style_name, styles.description AS styles_description, styles.buyer AS styles_buyer, styles.season AS styles_season, styles.category AS styles_category, styles.base_sam AS styles_base_sam, styles.complexity_rating AS styles_complexity_rating, styles.bom_summary AS styles_bom_summary, styles.tech_pack_url AS styles_tech_pack_url, styles.is_active AS styles_is_active, styles.id AS styles_id, styles.created_at AS styles_created_at, styles.updated_at AS styles_updated_at 
FROM styles 
WHERE ? = styles.factory_id
{"timestamp": "2026-02-16T09:47:07.421381Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT styles.factory_id AS styles_factory_id, styles.style_number AS styles_style_number, styles.style_name AS styles_style_name, styles.description AS styles_description, styles.buyer AS styles_buyer, styles.season AS styles_season, styles.category AS styles_category, styles.base_sam AS styles_base_sam, styles.complexity_rating AS styles_complexity_rating, styles.bom_summary AS styles_bom_summary, styles.tech_pack_url AS styles_tech_pack_url, styles.is_active AS styles_is_active, styles.id AS styles_id, styles.created_at AS styles_created_at, styles.updated_at AS styles_updated_at \nFROM styles \nWHERE ? = styles.factory_id"}
2026-02-16 09:47:07,421 INFO sqlalchemy.engine.Engine [cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)
{"timestamp": "2026-02-16T09:47:07.421497Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)"}
2026-02-16 09:47:07,422 INFO sqlalchemy.engine.Engine SELECT workers.factory_id AS workers_factory_id, workers.employee_id AS workers_employee_id, workers.full_name AS workers_full_name, workers.department AS workers_department, workers.job_title AS workers_job_title, workers.primary_skill AS workers_primary_skill, workers.data_source_id AS workers_data_source_id, workers.hire_date AS workers_hire_date, workers.termination_date AS workers_termination_date, workers.hourly_rate AS workers_hourly_rate, workers.currency AS workers_currency, workers.is_active AS workers_is_active, workers.id AS workers_id, workers.created_at AS workers_created_at, workers.updated_at AS workers_updated_at, workers.is_deleted AS workers_is_deleted, workers.deleted_at AS workers_deleted_at 
FROM workers 
WHERE ? = workers.factory_id
{"timestamp": "2026-02-16T09:47:07.422592Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT workers.factory_id AS workers_factory_id, workers.employee_id AS workers_employee_id, workers.full_name AS workers_full_name, workers.department AS workers_department, workers.job_title AS workers_job_title, workers.primary_skill AS workers_primary_skill, workers.data_source_id AS workers_data_source_id, workers.hire_date AS workers_hire_date, workers.termination_date AS workers_termination_date, workers.hourly_rate AS workers_hourly_rate, workers.currency AS workers_currency, workers.is_active AS workers_is_active, workers.id AS workers_id, workers.created_at AS workers_created_at, workers.updated_at AS workers_updated_at, workers.is_deleted AS workers_is_deleted, workers.deleted_at AS workers_deleted_at \nFROM workers \nWHERE ? = workers.factory_id"}
2026-02-16 09:47:07,422 INFO sqlalchemy.engine.Engine [cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)
{"timestamp": "2026-02-16T09:47:07.422682Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)"}
2026-02-16 09:47:07,423 INFO sqlalchemy.engine.Engine SELECT dhu_reports.factory_id AS dhu_reports_factory_id, dhu_reports.report_date AS dhu_reports_report_date, dhu_reports.period_type AS dhu_reports_period_type, dhu_reports.avg_dhu AS dhu_reports_avg_dhu, dhu_reports.min_dhu AS dhu_reports_min_dhu, dhu_reports.max_dhu AS dhu_reports_max_dhu, dhu_reports.total_inspected AS dhu_reports_total_inspected, dhu_reports.total_defects AS dhu_reports_total_defects, dhu_reports.total_rejected AS dhu_reports_total_rejected, dhu_reports.top_defects AS dhu_reports_top_defects, dhu_reports.top_operations AS dhu_reports_top_operations, dhu_reports.top_lines AS dhu_reports_top_lines, dhu_reports.dhu_change_pct AS dhu_reports_dhu_change_pct, dhu_reports.trend_direction AS dhu_reports_trend_direction, dhu_reports.recommendations AS dhu_reports_recommendations, dhu_reports.id AS dhu_reports_id, dhu_reports.created_at AS dhu_reports_created_at, dhu_reports.updated_at AS dhu_reports_updated_at 
FROM dhu_reports 
WHERE ? = dhu_reports.factory_id
{"timestamp": "2026-02-16T09:47:07.423899Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dhu_reports.factory_id AS dhu_reports_factory_id, dhu_reports.report_date AS dhu_reports_report_date, dhu_reports.period_type AS dhu_reports_period_type, dhu_reports.avg_dhu AS dhu_reports_avg_dhu, dhu_reports.min_dhu AS dhu_reports_min_dhu, dhu_reports.max_dhu AS dhu_reports_max_dhu, dhu_reports.total_inspected AS dhu_reports_total_inspected, dhu_reports.total_defects AS dhu_reports_total_defects, dhu_reports.total_rejected AS dhu_reports_total_rejected, dhu_reports.top_defects AS dhu_reports_top_defects, dhu_reports.top_operations AS dhu_reports_top_operations, dhu_reports.top_lines AS dhu_reports_top_lines, dhu_reports.dhu_change_pct AS dhu_reports_dhu_change_pct, dhu_reports.trend_direction AS dhu_reports_trend_direction, dhu_reports.recommendations AS dhu_reports_recommendations, dhu_reports.id AS dhu_reports_id, dhu_reports.created_at AS dhu_reports_created_at, dhu_reports.updated_at AS dhu_reports_updated_at \nFROM dhu_reports \nWHERE ? = dhu_reports.factory_id"}
2026-02-16 09:47:07,423 INFO sqlalchemy.engine.Engine [cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)
{"timestamp": "2026-02-16T09:47:07.424000Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)"}
2026-02-16 09:47:07,425 INFO sqlalchemy.engine.Engine INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:47:07.425543Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:47:07,425 INFO sqlalchemy.engine.Engine [cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d', 'Line 1', None, None, None, None, None, None, None, None, None, None, None, 0, None, None, 1, '4944b7df-c058-4165-9584-5bf4c09cd83b', '2026-02-16 09:47:07.425368', '2026-02-16 09:47:07.425373')
{"timestamp": "2026-02-16T09:47:07.425663Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d', 'Line 1', None, None, None, None, None, None, None, None, None, None, None, 0, None, None, 1, '4944b7df-c058-4165-9584-5bf4c09cd83b', '2026-02-16 09:47:07.425368', '2026-02-16 09:47:07.425373')"}
2026-02-16 09:47:07,426 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:47:07.426441Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:47:07,427 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:47:07.427201Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:47:07,427 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
{"timestamp": "2026-02-16T09:47:07.427459Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at \nFROM data_sources \nWHERE data_sources.id = ?"}
2026-02-16 09:47:07,427 INFO sqlalchemy.engine.Engine [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
{"timestamp": "2026-02-16T09:47:07.427547Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)"}
2026-02-16 09:47:07,429 INFO sqlalchemy.engine.Engine SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE ? = schema_mappings.data_source_id
{"timestamp": "2026-02-16T09:47:07.429224Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at \nFROM schema_mappings \nWHERE ? = schema_mappings.data_source_id"}
2026-02-16 09:47:07,429 INFO sqlalchemy.engine.Engine [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
{"timestamp": "2026-02-16T09:47:07.429399Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)"}
2026-02-16 09:47:07,430 INFO sqlalchemy.engine.Engine SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE ? = production_runs.data_source_id
{"timestamp": "2026-02-16T09:47:07.430583Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at \nFROM production_runs \nWHERE ? = production_runs.data_source_id"}
2026-02-16 09:47:07,430 INFO sqlalchemy.engine.Engine [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
{"timestamp": "2026-02-16T09:47:07.430692Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)"}
2026-02-16 09:47:07,431 INFO sqlalchemy.engine.Engine SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ? = ai_decisions.data_source_id
{"timestamp": "2026-02-16T09:47:07.432039Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at \nFROM ai_decisions \nWHERE ? = ai_decisions.data_source_id"}
2026-02-16 09:47:07,432 INFO sqlalchemy.engine.Engine [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
{"timestamp": "2026-02-16T09:47:07.432141Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)"}
2026-02-16 09:47:07,433 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.data_source_id
{"timestamp": "2026-02-16T09:47:07.433278Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.data_source_id"}
2026-02-16 09:47:07,433 INFO sqlalchemy.engine.Engine [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
{"timestamp": "2026-02-16T09:47:07.433365Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)"}
2026-02-16 09:47:07,434 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.parent_data_source_id
{"timestamp": "2026-02-16T09:47:07.434731Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at \nFROM data_sources \nWHERE ? = data_sources.parent_data_source_id"}
2026-02-16 09:47:07,434 INFO sqlalchemy.engine.Engine [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
{"timestamp": "2026-02-16T09:47:07.434923Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)"}
2026-02-16 09:47:07,436 INFO sqlalchemy.engine.Engine INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:47:07.436762Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:47:07,436 INFO sqlalchemy.engine.Engine [cached since 13s ago] (None, 'Unnamed Line', None, None, None, None, None, '4944b7df-c058-4165-9584-5bf4c09cd83b', 'Production Data', 'Main production data source', 'Date', None, None, 0, None, None, 1, '5c9386e1-4b5c-433d-87b5-66c9431f5397', '2026-02-16 09:47:07.436651', '2026-02-16 09:47:07.436655')
{"timestamp": "2026-02-16T09:47:07.436873Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13s ago] (None, 'Unnamed Line', None, None, None, None, None, '4944b7df-c058-4165-9584-5bf4c09cd83b', 'Production Data', 'Main production data source', 'Date', None, None, 0, None, None, 1, '5c9386e1-4b5c-433d-87b5-66c9431f5397', '2026-02-16 09:47:07.436651', '2026-02-16 09:47:07.436655')"}
2026-02-16 09:47:07,437 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:47:07.437698Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:47:07,438 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:47:07.438507Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:47:07,438 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
{"timestamp": "2026-02-16T09:47:07.438739Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at \nFROM data_sources \nWHERE data_sources.id = ?"}
2026-02-16 09:47:07,438 INFO sqlalchemy.engine.Engine [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
{"timestamp": "2026-02-16T09:47:07.438813Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)"}
2026-02-16 09:47:07,440 INFO sqlalchemy.engine.Engine SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE ? = schema_mappings.data_source_id
{"timestamp": "2026-02-16T09:47:07.440528Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at \nFROM schema_mappings \nWHERE ? = schema_mappings.data_source_id"}
2026-02-16 09:47:07,440 INFO sqlalchemy.engine.Engine [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
{"timestamp": "2026-02-16T09:47:07.440694Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)"}
2026-02-16 09:47:07,441 INFO sqlalchemy.engine.Engine SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE ? = production_runs.data_source_id
{"timestamp": "2026-02-16T09:47:07.441841Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at \nFROM production_runs \nWHERE ? = production_runs.data_source_id"}
2026-02-16 09:47:07,441 INFO sqlalchemy.engine.Engine [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
{"timestamp": "2026-02-16T09:47:07.441993Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)"}
2026-02-16 09:47:07,443 INFO sqlalchemy.engine.Engine SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ? = ai_decisions.data_source_id
{"timestamp": "2026-02-16T09:47:07.443282Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at \nFROM ai_decisions \nWHERE ? = ai_decisions.data_source_id"}
2026-02-16 09:47:07,443 INFO sqlalchemy.engine.Engine [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
{"timestamp": "2026-02-16T09:47:07.443410Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)"}
2026-02-16 09:47:07,444 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.data_source_id
{"timestamp": "2026-02-16T09:47:07.444764Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.data_source_id"}
2026-02-16 09:47:07,444 INFO sqlalchemy.engine.Engine [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
{"timestamp": "2026-02-16T09:47:07.444964Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)"}
2026-02-16 09:47:07,446 INFO sqlalchemy.engine.Engine SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.parent_data_source_id
{"timestamp": "2026-02-16T09:47:07.446526Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at \nFROM data_sources \nWHERE ? = data_sources.parent_data_source_id"}
2026-02-16 09:47:07,446 INFO sqlalchemy.engine.Engine [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
{"timestamp": "2026-02-16T09:47:07.446696Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)"}
2026-02-16 09:47:07,449 INFO sqlalchemy.engine.Engine INSERT INTO raw_imports (uploaded_by_id, factory_id, production_line_id, data_source_id, time_column_used, original_filename, file_path, file_size_bytes, file_hash, mime_type, encoding_detected, sheet_count, sheet_names, row_count, column_count, header_row_detected, raw_headers, sample_data, status, processing_error, processed_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:47:07.449367Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO raw_imports (uploaded_by_id, factory_id, production_line_id, data_source_id, time_column_used, original_filename, file_path, file_size_bytes, file_hash, mime_type, encoding_detected, sheet_count, sheet_names, row_count, column_count, header_row_detected, raw_headers, sample_data, status, processing_error, processed_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:47:07,449 INFO sqlalchemy.engine.Engine [generated in 0.00037s] (None, '4375dd64-16f4-4d37-9a35-cf6a9ed60e3d', '4944b7df-c058-4165-9584-5bf4c09cd83b', None, None, 'prod_jan.xlsx', '/tmp/prod_jan.xlsx', 1024, 'abc123', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', None, 1, None, 100, 10, None, '["Date", "Product", "Quantity"]', '[["2024-01-01", "Widget", 100]]', 'processed', None, None, '4a0d1c0a-bccb-45ea-9fe1-ad1dedf72f4c', '2026-02-16 09:47:07.449189', '2026-02-16 09:47:07.449195')
{"timestamp": "2026-02-16T09:47:07.449491Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00037s] (None, '4375dd64-16f4-4d37-9a35-cf6a9ed60e3d', '4944b7df-c058-4165-9584-5bf4c09cd83b', None, None, 'prod_jan.xlsx', '/tmp/prod_jan.xlsx', 1024, 'abc123', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', None, 1, None, 100, 10, None, '[\"Date\", \"Product\", \"Quantity\"]', '[[\"2024-01-01\", \"Widget\", 100]]', 'processed', None, None, '4a0d1c0a-bccb-45ea-9fe1-ad1dedf72f4c', '2026-02-16 09:47:07.449189', '2026-02-16 09:47:07.449195')"}
2026-02-16 09:47:07,450 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:47:07.450391Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:47:07,451 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:47:07.451357Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:47:07,451 INFO sqlalchemy.engine.Engine SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.id = ?
{"timestamp": "2026-02-16T09:47:07.451659Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at \nFROM raw_imports \nWHERE raw_imports.id = ?"}
2026-02-16 09:47:07,451 INFO sqlalchemy.engine.Engine [cached since 12.93s ago] ('4a0d1c0a-bccb-45ea-9fe1-ad1dedf72f4c',)
{"timestamp": "2026-02-16T09:47:07.451755Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 12.93s ago] ('4a0d1c0a-bccb-45ea-9fe1-ad1dedf72f4c',)"}
2026-02-16 09:47:07,689 INFO sqlalchemy.engine.Engine INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
{"timestamp": "2026-02-16T09:47:07.689289Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"}
2026-02-16 09:47:07,689 INFO sqlalchemy.engine.Engine [cached since 17.5s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd', 'test@example.com', '$2b$12$88rTe2YZvcubV0sB.m/1ZOpTeBziw5LYb9FvRhOLxetpkbydEqHU6', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '41897842-8cb3-44c4-8f3c-59b8e7a5f4f6', '2026-02-16 09:47:07.689099', '2026-02-16 09:47:07.689104', 0, None)
{"timestamp": "2026-02-16T09:47:07.689448Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.5s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd', 'test@example.com', '$2b$12$88rTe2YZvcubV0sB.m/1ZOpTeBziw5LYb9FvRhOLxetpkbydEqHU6', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '41897842-8cb3-44c4-8f3c-59b8e7a5f4f6', '2026-02-16 09:47:07.689099', '2026-02-16 09:47:07.689104', 0, None)"}
2026-02-16 09:47:07,690 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:47:07.690619Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
2026-02-16 09:47:07,691 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:47:07.691449Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:47:07,691 INFO sqlalchemy.engine.Engine SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
{"timestamp": "2026-02-16T09:47:07.691732Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at \nFROM users \nWHERE users.id = ?"}
2026-02-16 09:47:07,691 INFO sqlalchemy.engine.Engine [cached since 17.5s ago] ('41897842-8cb3-44c4-8f3c-59b8e7a5f4f6',)
{"timestamp": "2026-02-16T09:47:07.691860Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.5s ago] ('41897842-8cb3-44c4-8f3c-59b8e7a5f4f6',)"}
2026-02-16 09:47:07,693 INFO sqlalchemy.engine.Engine SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
{"timestamp": "2026-02-16T09:47:07.693434Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at \nFROM dashboards \nWHERE ? = dashboards.user_id"}
2026-02-16 09:47:07,693 INFO sqlalchemy.engine.Engine [cached since 17.5s ago] ('41897842-8cb3-44c4-8f3c-59b8e7a5f4f6',)
{"timestamp": "2026-02-16T09:47:07.693625Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.5s ago] ('41897842-8cb3-44c4-8f3c-59b8e7a5f4f6',)"}
2026-02-16 09:47:07,695 INFO sqlalchemy.engine.Engine SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
{"timestamp": "2026-02-16T09:47:07.695146Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at \nFROM user_scopes \nWHERE ? = user_scopes.user_id"}
2026-02-16 09:47:07,695 INFO sqlalchemy.engine.Engine [cached since 17.5s ago] ('41897842-8cb3-44c4-8f3c-59b8e7a5f4f6',)
{"timestamp": "2026-02-16T09:47:07.695243Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.5s ago] ('41897842-8cb3-44c4-8f3c-59b8e7a5f4f6',)"}
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.43s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("ai_decisions")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE ai_decisions (
	data_source_id VARCHAR(36), 
	agent_type VARCHAR(16) NOT NULL, 
	model_used VARCHAR(50) NOT NULL, 
	input_summary TEXT NOT NULL, 
	output_summary TEXT NOT NULL, 
	confidence FLOAT, 
	reasoning JSON, 
	performance_metadata JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00028s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_agent_type ON ai_decisions (agent_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00020s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_ai_decisions_data_source_id ON ai_decisions (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("alias_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE alias_mappings (
	scope VARCHAR(50) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	source_alias VARCHAR(255) NOT NULL, 
	source_alias_normalized VARCHAR(255) NOT NULL, 
	canonical_field VARCHAR(100) NOT NULL, 
	usage_count INTEGER NOT NULL, 
	last_used_at DATETIME NOT NULL, 
	created_by_id CHAR(36), 
	correction_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_alias_per_scope UNIQUE (scope, organization_id, factory_id, source_alias_normalized), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(created_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_canonical_field ON alias_mappings (canonical_field)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_organization_id ON alias_mappings (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_scope ON alias_mappings (scope)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias_normalized ON alias_mappings (source_alias_normalized)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_source_alias ON alias_mappings (source_alias)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_alias_mappings_factory_id ON alias_mappings (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00020s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("efficiency_metrics")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE efficiency_metrics (
	production_run_id CHAR(36) NOT NULL, 
	efficiency_pct NUMERIC(6, 2), 
	sam_target NUMERIC(10, 2), 
	sam_actual NUMERIC(10, 2), 
	sam_variance NUMERIC(8, 2), 
	sam_variance_pct NUMERIC(6, 2), 
	capacity_utilization_pct NUMERIC(6, 2), 
	performance_tier VARCHAR(12), 
	factory_avg_efficiency NUMERIC(6, 2), 
	line_avg_efficiency NUMERIC(6, 2), 
	calculated_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_efficiency_metrics_production_run_id ON efficiency_metrics (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dhu_reports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dhu_reports (
	factory_id CHAR(36) NOT NULL, 
	report_date DATE NOT NULL, 
	period_type VARCHAR(7) NOT NULL, 
	avg_dhu NUMERIC(6, 2), 
	min_dhu NUMERIC(6, 2), 
	max_dhu NUMERIC(6, 2), 
	total_inspected INTEGER, 
	total_defects INTEGER, 
	total_rejected INTEGER, 
	top_defects TEXT, 
	top_operations TEXT, 
	top_lines TEXT, 
	dhu_change_pct NUMERIC(6, 2), 
	trend_direction VARCHAR(20), 
	recommendations TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_date_period UNIQUE (factory_id, report_date, period_type), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_report_date ON dhu_reports (report_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dhu_reports_factory_id ON dhu_reports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("dashboards")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE dashboards (
	user_id CHAR(36) NOT NULL, 
	name VARCHAR(200) NOT NULL, 
	description TEXT, 
	data_source_id CHAR(36), 
	widget_config TEXT, 
	layout_config TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_dashboard_user FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_dashboard_datasource FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00031s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_data_source_id ON dashboards (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_dashboards_user_id ON dashboards (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_quality_issues")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_quality_issues (
	raw_import_id VARCHAR(36) NOT NULL, 
	row_number INTEGER, 
	issue_type VARCHAR(50) NOT NULL, 
	severity VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	field_name VARCHAR(100), 
	field_value VARCHAR(500), 
	resolved_at DATETIME, 
	resolved_by_user_id VARCHAR(36), 
	resolution_notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE, 
	FOREIGN KEY(resolved_by_user_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_raw_import_id ON data_quality_issues (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_issue_type ON data_quality_issues (issue_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_quality_issues_severity ON data_quality_issues (severity)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("data_sources")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE data_sources (
	factory_id CHAR(36), 
	name VARCHAR(100) NOT NULL, 
	code VARCHAR(50), 
	target_operators INTEGER, 
	target_efficiency_pct INTEGER, 
	settings JSON, 
	specialty VARCHAR(100), 
	supervisor_id CHAR(36), 
	production_line_id CHAR(36), 
	source_name VARCHAR(255), 
	description TEXT, 
	time_column VARCHAR(100), 
	time_format VARCHAR(50), 
	schema_config JSON, 
	parent_data_source_id CHAR(36), 
	is_segment BOOLEAN NOT NULL, 
	date_range_start DATE, 
	date_range_end DATE, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(supervisor_id) REFERENCES workers (id) ON DELETE SET NULL, 
	FOREIGN KEY(parent_data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_factory_id ON data_sources (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00021s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_data_sources_production_line_id ON data_sources (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00019s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("schema_mappings")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE schema_mappings (
	data_source_id CHAR(36) NOT NULL, 
	version INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	column_map JSON NOT NULL, 
	extraction_rules JSON, 
	reviewed_by_user BOOLEAN NOT NULL, 
	user_notes TEXT, 
	matching_tier VARCHAR(20), 
	tier_confidence FLOAT, 
	tier_breakdown JSON, 
	fuzzy_scores JSON, 
	user_corrected BOOLEAN NOT NULL, 
	correction_count INTEGER, 
	correction_history JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_schema_mappings_data_source_id ON schema_mappings (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_events")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_events (
	timestamp DATETIME NOT NULL, 
	event_type VARCHAR(17) NOT NULL, 
	quantity INTEGER NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	style_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36), 
	source_import_id VARCHAR(36), 
	raw_data JSON, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_source_import_id ON production_events (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_timestamp ON production_events (timestamp)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_production_run_id ON production_events (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_style_id ON production_events (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_order_id ON production_events (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00020s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_events_data_source_id ON production_events (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("factories")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE factories (
	organization_id CHAR(36) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50) NOT NULL, 
	country VARCHAR(100) NOT NULL, 
	city VARCHAR(100), 
	address TEXT, 
	timezone VARCHAR(50) NOT NULL, 
	total_lines INTEGER, 
	total_workers INTEGER, 
	daily_capacity_units INTEGER, 
	certifications TEXT, 
	settings JSON, 
	locale VARCHAR(20) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT fk_factory_org FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_factories_organization_id ON factories (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("styles")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE styles (
	factory_id VARCHAR(36) NOT NULL, 
	style_number VARCHAR(100) NOT NULL, 
	style_name VARCHAR(255), 
	description VARCHAR(500), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	category VARCHAR(100), 
	base_sam NUMERIC(12, 4), 
	complexity_rating VARCHAR(20), 
	bom_summary JSON, 
	tech_pack_url VARCHAR(500), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_style UNIQUE (factory_id, style_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_style_number ON styles (style_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_buyer ON styles (buyer)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_styles_factory_id ON styles (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00019s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("orders")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE orders (
	style_id VARCHAR(36) NOT NULL, 
	po_number VARCHAR(100) NOT NULL, 
	quantity INTEGER NOT NULL, 
	size_breakdown JSON, 
	uom VARCHAR(20) NOT NULL, 
	color VARCHAR(100), 
	order_date DATETIME, 
	planned_cut_date DATETIME, 
	planned_sew_date DATETIME, 
	ex_factory_date DATETIME, 
	actual_ship_date DATETIME, 
	status VARCHAR(20) NOT NULL, 
	priority VARCHAR(20) NOT NULL, 
	qty_cut INTEGER NOT NULL, 
	qty_sewn INTEGER NOT NULL, 
	qty_packed INTEGER NOT NULL, 
	qty_shipped INTEGER NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_style_po UNIQUE (style_id, po_number), 
	FOREIGN KEY(style_id) REFERENCES styles (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_style_id ON orders (style_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_status ON orders (status)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_orders_po_number ON orders (po_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_runs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_runs (
	factory_id VARCHAR(36) NOT NULL, 
	order_id VARCHAR(36) NOT NULL, 
	data_source_id VARCHAR(36) NOT NULL, 
	source_import_id VARCHAR(36), 
	production_date DATETIME, 
	inspection_date DATETIME, 
	shift VARCHAR(20) NOT NULL, 
	planned_qty INTEGER, 
	actual_qty INTEGER NOT NULL, 
	wip_start INTEGER, 
	wip_end INTEGER, 
	lot_number VARCHAR(50), 
	shade_band VARCHAR(10), 
	batch_number VARCHAR(50), 
	downtime_minutes INTEGER, 
	downtime_reason VARCHAR(255), 
	sam NUMERIC(12, 4), 
	operators_present INTEGER NOT NULL, 
	helpers_present INTEGER NOT NULL, 
	worked_minutes NUMERIC(12, 4) NOT NULL, 
	earned_minutes NUMERIC(15, 4) GENERATED ALWAYS AS (actual_qty * sam), 
	efficiency NUMERIC(10, 2) GENERATED ALWAYS AS (
            CASE
                WHEN (worked_minutes * (operators_present + helpers_present)) > 0 AND sam IS NOT NULL
                THEN ((actual_qty * sam) / (worked_minutes * (operators_present + helpers_present))) * 100
                ELSE 0
            END
            ), 
	notes TEXT, 
	start_time TIME, 
	end_time TIME, 
	style_number VARCHAR(100), 
	buyer VARCHAR(255), 
	season VARCHAR(50), 
	po_number VARCHAR(100), 
	color VARCHAR(100), 
	size VARCHAR(50), 
	defects INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	line_efficiency NUMERIC(10, 2), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT check_positive_qty CHECK (actual_qty >= 0), 
	CONSTRAINT check_positive_operators CHECK (operators_present >= 0), 
	CONSTRAINT check_positive_helpers CHECK (helpers_present >= 0), 
	CONSTRAINT check_positive_worked_minutes CHECK (worked_minutes >= 0), 
	CONSTRAINT check_positive_wip_start CHECK (wip_start >= 0 OR wip_start IS NULL), 
	CONSTRAINT check_positive_wip_end CHECK (wip_end >= 0 OR wip_end IS NULL), 
	CONSTRAINT uq_production_run UNIQUE (data_source_id, order_id, production_date, shift), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE, 
	FOREIGN KEY(source_import_id) REFERENCES raw_imports (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_inspection_date ON production_runs (inspection_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_production_date ON production_runs (production_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00023s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_factory_id ON production_runs (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00031s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_lot_number ON production_runs (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00025s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_source_import_id ON production_runs (source_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_batch_number ON production_runs (batch_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_order_id ON production_runs (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_runs_data_source_id ON production_runs (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00023s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("quality_inspections")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE quality_inspections (
	production_run_id VARCHAR(36) NOT NULL, 
	inspector_id VARCHAR(36), 
	inspection_type VARCHAR(7) NOT NULL, 
	units_checked INTEGER NOT NULL, 
	defects_found INTEGER NOT NULL, 
	units_rejected INTEGER NOT NULL, 
	units_reworked INTEGER NOT NULL, 
	dhu NUMERIC(6, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	aql_level VARCHAR(20), 
	aql_result VARCHAR(7), 
	inspected_at DATETIME NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_quality_inspection_run_type UNIQUE (production_run_id, inspection_type), 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE, 
	FOREIGN KEY(inspector_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_quality_inspections_production_run_id ON quality_inspections (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("defects")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE defects (
	inspection_id VARCHAR(36) NOT NULL, 
	worker_id VARCHAR(36), 
	defect_type VARCHAR(100) NOT NULL, 
	defect_code VARCHAR(20), 
	defect_category VARCHAR(100), 
	operation VARCHAR(100), 
	severity VARCHAR(8) NOT NULL, 
	is_reworkable BOOLEAN NOT NULL, 
	is_reworked BOOLEAN NOT NULL, 
	root_cause VARCHAR(255), 
	machine_id VARCHAR(50), 
	image_url VARCHAR(500), 
	count INTEGER NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(inspection_id) REFERENCES quality_inspections (id) ON DELETE CASCADE, 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_inspection_id ON defects (inspection_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00017s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_worker_id ON defects (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_defects_defect_type ON defects (defect_type)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("raw_imports")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE raw_imports (
	uploaded_by_id VARCHAR(36), 
	factory_id VARCHAR(36), 
	production_line_id VARCHAR(36), 
	data_source_id VARCHAR(36), 
	time_column_used VARCHAR(100), 
	original_filename VARCHAR(500) NOT NULL, 
	file_path VARCHAR(1000) NOT NULL, 
	file_size_bytes INTEGER NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	mime_type VARCHAR(100), 
	encoding_detected VARCHAR(50), 
	sheet_count INTEGER NOT NULL, 
	sheet_names TEXT, 
	row_count INTEGER, 
	column_count INTEGER, 
	header_row_detected INTEGER, 
	raw_headers TEXT, 
	sample_data TEXT, 
	status VARCHAR(50) NOT NULL, 
	processing_error TEXT, 
	processed_at DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(uploaded_by_id) REFERENCES users (id) ON DELETE SET NULL, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_line_id) REFERENCES data_sources (id) ON DELETE SET NULL, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00018s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_factory_id ON raw_imports (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00023s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_production_line_id ON raw_imports (production_line_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_uploaded_by_id ON raw_imports (uploaded_by_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_raw_imports_data_source_id ON raw_imports (data_source_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("staging_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE staging_records (
	raw_import_id VARCHAR(36) NOT NULL, 
	source_row_number INTEGER NOT NULL, 
	status VARCHAR(50) NOT NULL, 
	validation_errors TEXT, 
	validation_warnings TEXT, 
	record_data TEXT NOT NULL, 
	normalized_data TEXT, 
	quality_score FLOAT, 
	null_field_count INTEGER, 
	promoted_at DATETIME, 
	promoted_to_table VARCHAR(100), 
	promoted_record_id VARCHAR(36), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(raw_import_id) REFERENCES raw_imports (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_staging_records_raw_import_id ON staging_records (raw_import_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("organizations")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE organizations (
	name VARCHAR(255) NOT NULL, 
	code VARCHAR(50), 
	subscription_tier VARCHAR(10) NOT NULL, 
	settings TEXT, 
	max_factories INTEGER NOT NULL, 
	max_lines_per_factory INTEGER NOT NULL, 
	primary_email VARCHAR(255), 
	primary_phone VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE users (
	organization_id CHAR(36) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	avatar_url VARCHAR(500), 
	timezone VARCHAR(50), 
	preferences TEXT, 
	role VARCHAR(15) NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	is_verified BOOLEAN NOT NULL, 
	last_login DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	UNIQUE (email)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00025s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_users_organization_id ON users (organization_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00024s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("user_scopes")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE user_scopes (
	user_id CHAR(36) NOT NULL, 
	scope_type VARCHAR(12) NOT NULL, 
	organization_id CHAR(36), 
	factory_id CHAR(36), 
	data_source_id CHAR(36), 
	role VARCHAR(15) NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(organization_id) REFERENCES organizations (id) ON DELETE CASCADE, 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_user_scopes_user_id ON user_scopes (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("waitlist")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE waitlist (
	id INTEGER NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	referral_code VARCHAR(8) NOT NULL, 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_referral_code ON waitlist (referral_code)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE UNIQUE INDEX ix_waitlist_email ON waitlist (email)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("workers")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE workers (
	factory_id VARCHAR(36) NOT NULL, 
	employee_id VARCHAR(50) NOT NULL, 
	full_name VARCHAR(255) NOT NULL, 
	department VARCHAR(100), 
	job_title VARCHAR(100), 
	primary_skill VARCHAR(100), 
	data_source_id VARCHAR(36), 
	hire_date DATE, 
	termination_date DATE, 
	hourly_rate NUMERIC(10, 2), 
	currency VARCHAR(3), 
	is_active BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	is_deleted BOOLEAN NOT NULL, 
	deleted_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_employee UNIQUE (factory_id, employee_id), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE, 
	FOREIGN KEY(data_source_id) REFERENCES data_sources (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_employee_id ON workers (employee_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_workers_factory_id ON workers (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_skills")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_skills (
	worker_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	operation_category VARCHAR(100), 
	proficiency_pct NUMERIC(5, 2), 
	sam_achieved NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	defect_rate_pct NUMERIC(5, 2), 
	pieces_lifetime INTEGER, 
	pieces_30d INTEGER, 
	is_certified BOOLEAN NOT NULL, 
	certification_date DATE, 
	last_assessed DATETIME, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_operation UNIQUE (worker_id, operation), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_worker_id ON worker_skills (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_skills_operation ON worker_skills (operation)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("worker_attendances")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE worker_attendances (
	worker_id VARCHAR(36) NOT NULL, 
	work_date DATE NOT NULL, 
	clock_in TIME, 
	clock_out TIME, 
	hours_regular NUMERIC(4, 2), 
	hours_overtime NUMERIC(4, 2), 
	hours_total NUMERIC(4, 2), 
	is_present BOOLEAN NOT NULL, 
	absence_reason VARCHAR(100), 
	is_approved BOOLEAN NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_worker_date UNIQUE (worker_id, work_date), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00023s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_worker_id ON worker_attendances (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_worker_attendances_work_date ON worker_attendances (work_date)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("production_outputs")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE production_outputs (
	worker_id VARCHAR(36) NOT NULL, 
	production_run_id VARCHAR(36) NOT NULL, 
	operation VARCHAR(100) NOT NULL, 
	pieces_completed INTEGER NOT NULL, 
	sam_earned NUMERIC(10, 2), 
	minutes_worked NUMERIC(8, 2), 
	efficiency_pct NUMERIC(5, 2), 
	recorded_at DATETIME NOT NULL, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(worker_id) REFERENCES workers (id) ON DELETE CASCADE, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_worker_id ON production_outputs (worker_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_production_outputs_production_run_id ON production_outputs (production_run_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("fabric_lots")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE fabric_lots (
	factory_id CHAR(36) NOT NULL, 
	lot_number VARCHAR(100) NOT NULL, 
	fabric_type VARCHAR(100), 
	composition VARCHAR(255), 
	width_cm INTEGER, 
	gsm INTEGER, 
	color VARCHAR(100), 
	supplier VARCHAR(255), 
	origin_country VARCHAR(100), 
	mill_name VARCHAR(255), 
	received_date DATE, 
	initial_meters NUMERIC(12, 2), 
	available_meters NUMERIC(12, 2), 
	reserved_meters NUMERIC(12, 2), 
	unit_cost NUMERIC(10, 4), 
	currency VARCHAR(3), 
	certifications TEXT, 
	inspection_status VARCHAR(50), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_factory_lot UNIQUE (factory_id, lot_number), 
	FOREIGN KEY(factory_id) REFERENCES factories (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00040s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_factory_id ON fabric_lots (factory_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_supplier ON fabric_lots (supplier)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_lot_number ON fabric_lots (lot_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00027s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_fabric_lots_origin_country ON fabric_lots (origin_country)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cut_tickets")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cut_tickets (
	fabric_lot_id CHAR(36) NOT NULL, 
	order_id CHAR(36) NOT NULL, 
	ticket_number VARCHAR(100) NOT NULL, 
	cut_date DATE, 
	plies INTEGER, 
	marker_length_cm INTEGER, 
	consumption_meters NUMERIC(10, 2), 
	wastage_pct NUMERIC(5, 2), 
	size_ratio TEXT, 
	bundle_count INTEGER, 
	total_pieces INTEGER, 
	cutter_id CHAR(36), 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE CASCADE, 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE, 
	FOREIGN KEY(cutter_id) REFERENCES workers (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00012s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_fabric_lot_id ON cut_tickets (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_ticket_number ON cut_tickets (ticket_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00020s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cut_tickets_order_id ON cut_tickets (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("packing_lists")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE packing_lists (
	order_id CHAR(36) NOT NULL, 
	packing_list_number VARCHAR(100) NOT NULL, 
	ship_date DATE, 
	destination VARCHAR(255), 
	ship_to_address TEXT, 
	carrier VARCHAR(100), 
	tracking_number VARCHAR(255), 
	container_number VARCHAR(100), 
	total_cartons INTEGER, 
	total_units INTEGER, 
	total_net_weight_kg NUMERIC(10, 2), 
	total_gross_weight_kg NUMERIC(10, 2), 
	total_cbm NUMERIC(8, 3), 
	status VARCHAR(10) NOT NULL, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_order_id ON packing_lists (order_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_packing_lists_packing_list_number ON packing_lists (packing_list_number)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("cartons")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE cartons (
	packing_list_id CHAR(36) NOT NULL, 
	carton_number VARCHAR(50) NOT NULL, 
	size_breakdown TEXT, 
	color VARCHAR(100), 
	total_units INTEGER, 
	net_weight_kg NUMERIC(8, 2), 
	gross_weight_kg NUMERIC(8, 2), 
	dimensions_cm TEXT, 
	length_cm INTEGER, 
	width_cm INTEGER, 
	height_cm INTEGER, 
	barcode VARCHAR(100), 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(packing_list_id) REFERENCES packing_lists (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_cartons_packing_list_id ON cartons (packing_list_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA main.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA temp.table_info("traceability_records")
INFO     sqlalchemy.engine.Engine:base.py:1846 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 
CREATE TABLE traceability_records (
	carton_id CHAR(36), 
	fabric_lot_id CHAR(36), 
	cut_ticket_id CHAR(36), 
	production_run_id CHAR(36), 
	compliance_standard VARCHAR(8) NOT NULL, 
	chain_of_custody TEXT, 
	supporting_documents TEXT, 
	verification_status VARCHAR(8) NOT NULL, 
	verified_by_id CHAR(36), 
	verified_at DATETIME, 
	risk_score VARCHAR(20), 
	risk_notes TEXT, 
	notes TEXT, 
	id VARCHAR(36) NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(carton_id) REFERENCES cartons (id) ON DELETE SET NULL, 
	FOREIGN KEY(fabric_lot_id) REFERENCES fabric_lots (id) ON DELETE SET NULL, 
	FOREIGN KEY(cut_ticket_id) REFERENCES cut_tickets (id) ON DELETE SET NULL, 
	FOREIGN KEY(production_run_id) REFERENCES production_runs (id) ON DELETE SET NULL, 
	FOREIGN KEY(verified_by_id) REFERENCES users (id) ON DELETE SET NULL
)


INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_carton_id ON traceability_records (carton_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00013s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_cut_ticket_id ON traceability_records (cut_ticket_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 CREATE INDEX ix_traceability_records_fabric_lot_id ON traceability_records (fabric_lot_id)
INFO     sqlalchemy.engine.Engine:base.py:1846 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.51s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO organizations (name, code, subscription_tier, settings, max_factories, max_lines_per_factory, primary_email, primary_phone, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.43s ago] ('Test Factory Co', 'TEST001', 'starter', None, 1, 1, 'admin@testfactory.com', None, 'c48235f3-1fc0-4094-91dc-5ff2cf18dcdd', '2026-02-16 09:47:07.406418', '2026-02-16 09:47:07.406422', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT organizations.name, organizations.code, organizations.subscription_tier, organizations.settings, organizations.max_factories, organizations.max_lines_per_factory, organizations.primary_email, organizations.primary_phone, organizations.id, organizations.created_at, organizations.updated_at, organizations.is_deleted, organizations.deleted_at 
FROM organizations 
WHERE organizations.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.43s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT factories.organization_id AS factories_organization_id, factories.name AS factories_name, factories.code AS factories_code, factories.country AS factories_country, factories.city AS factories_city, factories.address AS factories_address, factories.timezone AS factories_timezone, factories.total_lines AS factories_total_lines, factories.total_workers AS factories_total_workers, factories.daily_capacity_units AS factories_daily_capacity_units, factories.certifications AS factories_certifications, factories.settings AS factories_settings, factories.locale AS factories_locale, factories.is_active AS factories_is_active, factories.id AS factories_id, factories.created_at AS factories_created_at, factories.updated_at AS factories_updated_at 
FROM factories 
WHERE ? = factories.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.43s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id AS users_organization_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.timezone AS users_timezone, users.preferences AS users_preferences, users.role AS users_role, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.last_login AS users_last_login, users.id AS users_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.is_deleted AS users_is_deleted, users.deleted_at AS users_deleted_at 
FROM users 
WHERE ? = users.organization_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.43s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO factories (organization_id, name, code, country, city, address, timezone, total_lines, total_workers, daily_capacity_units, certifications, locale, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 5.877s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd', 'Dash Factory', 'DF1', 'US', None, None, 'UTC', None, None, None, None, 'en-US', 1, '4375dd64-16f4-4d37-9a35-cf6a9ed60e3d', '2026-02-16 09:47:07.415632', '2026-02-16 09:47:07.415644')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT factories.organization_id, factories.name, factories.code, factories.country, factories.city, factories.address, factories.timezone, factories.total_lines, factories.total_workers, factories.daily_capacity_units, factories.certifications, factories.settings, factories.locale, factories.is_active, factories.id, factories.created_at, factories.updated_at 
FROM factories 
WHERE factories.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.21s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.factory_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.21s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT styles.factory_id AS styles_factory_id, styles.style_number AS styles_style_number, styles.style_name AS styles_style_name, styles.description AS styles_description, styles.buyer AS styles_buyer, styles.season AS styles_season, styles.category AS styles_category, styles.base_sam AS styles_base_sam, styles.complexity_rating AS styles_complexity_rating, styles.bom_summary AS styles_bom_summary, styles.tech_pack_url AS styles_tech_pack_url, styles.is_active AS styles_is_active, styles.id AS styles_id, styles.created_at AS styles_created_at, styles.updated_at AS styles_updated_at 
FROM styles 
WHERE ? = styles.factory_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT workers.factory_id AS workers_factory_id, workers.employee_id AS workers_employee_id, workers.full_name AS workers_full_name, workers.department AS workers_department, workers.job_title AS workers_job_title, workers.primary_skill AS workers_primary_skill, workers.data_source_id AS workers_data_source_id, workers.hire_date AS workers_hire_date, workers.termination_date AS workers_termination_date, workers.hourly_rate AS workers_hourly_rate, workers.currency AS workers_currency, workers.is_active AS workers_is_active, workers.id AS workers_id, workers.created_at AS workers_created_at, workers.updated_at AS workers_updated_at, workers.is_deleted AS workers_is_deleted, workers.deleted_at AS workers_deleted_at 
FROM workers 
WHERE ? = workers.factory_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dhu_reports.factory_id AS dhu_reports_factory_id, dhu_reports.report_date AS dhu_reports_report_date, dhu_reports.period_type AS dhu_reports_period_type, dhu_reports.avg_dhu AS dhu_reports_avg_dhu, dhu_reports.min_dhu AS dhu_reports_min_dhu, dhu_reports.max_dhu AS dhu_reports_max_dhu, dhu_reports.total_inspected AS dhu_reports_total_inspected, dhu_reports.total_defects AS dhu_reports_total_defects, dhu_reports.total_rejected AS dhu_reports_total_rejected, dhu_reports.top_defects AS dhu_reports_top_defects, dhu_reports.top_operations AS dhu_reports_top_operations, dhu_reports.top_lines AS dhu_reports_top_lines, dhu_reports.dhu_change_pct AS dhu_reports_dhu_change_pct, dhu_reports.trend_direction AS dhu_reports_trend_direction, dhu_reports.recommendations AS dhu_reports_recommendations, dhu_reports.id AS dhu_reports_id, dhu_reports.created_at AS dhu_reports_created_at, dhu_reports.updated_at AS dhu_reports_updated_at 
FROM dhu_reports 
WHERE ? = dhu_reports.factory_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.2s ago] ('4375dd64-16f4-4d37-9a35-cf6a9ed60e3d', 'Line 1', None, None, None, None, None, None, None, None, None, None, None, 0, None, None, 1, '4944b7df-c058-4165-9584-5bf4c09cd83b', '2026-02-16 09:47:07.425368', '2026-02-16 09:47:07.425373')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE ? = schema_mappings.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE ? = production_runs.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ? = ai_decisions.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.parent_data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.2s ago] ('4944b7df-c058-4165-9584-5bf4c09cd83b',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO data_sources (factory_id, name, code, target_operators, target_efficiency_pct, specialty, supervisor_id, production_line_id, source_name, description, time_column, time_format, parent_data_source_id, is_segment, date_range_start, date_range_end, is_active, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 13s ago] (None, 'Unnamed Line', None, None, None, None, None, '4944b7df-c058-4165-9584-5bf4c09cd83b', 'Production Data', 'Main production data source', 'Date', None, None, 0, None, None, 1, '5c9386e1-4b5c-433d-87b5-66c9431f5397', '2026-02-16 09:47:07.436651', '2026-02-16 09:47:07.436655')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id, data_sources.name, data_sources.code, data_sources.target_operators, data_sources.target_efficiency_pct, data_sources.settings, data_sources.specialty, data_sources.supervisor_id, data_sources.production_line_id, data_sources.source_name, data_sources.description, data_sources.time_column, data_sources.time_format, data_sources.schema_config, data_sources.parent_data_source_id, data_sources.is_segment, data_sources.date_range_start, data_sources.date_range_end, data_sources.is_active, data_sources.id, data_sources.created_at, data_sources.updated_at 
FROM data_sources 
WHERE data_sources.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT schema_mappings.data_source_id AS schema_mappings_data_source_id, schema_mappings.version AS schema_mappings_version, schema_mappings.is_active AS schema_mappings_is_active, schema_mappings.column_map AS schema_mappings_column_map, schema_mappings.extraction_rules AS schema_mappings_extraction_rules, schema_mappings.reviewed_by_user AS schema_mappings_reviewed_by_user, schema_mappings.user_notes AS schema_mappings_user_notes, schema_mappings.matching_tier AS schema_mappings_matching_tier, schema_mappings.tier_confidence AS schema_mappings_tier_confidence, schema_mappings.tier_breakdown AS schema_mappings_tier_breakdown, schema_mappings.fuzzy_scores AS schema_mappings_fuzzy_scores, schema_mappings.user_corrected AS schema_mappings_user_corrected, schema_mappings.correction_count AS schema_mappings_correction_count, schema_mappings.correction_history AS schema_mappings_correction_history, schema_mappings.id AS schema_mappings_id, schema_mappings.created_at AS schema_mappings_created_at, schema_mappings.updated_at AS schema_mappings_updated_at 
FROM schema_mappings 
WHERE ? = schema_mappings.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT production_runs.factory_id AS production_runs_factory_id, production_runs.order_id AS production_runs_order_id, production_runs.data_source_id AS production_runs_data_source_id, production_runs.source_import_id AS production_runs_source_import_id, production_runs.production_date AS production_runs_production_date, production_runs.inspection_date AS production_runs_inspection_date, production_runs.shift AS production_runs_shift, production_runs.planned_qty AS production_runs_planned_qty, production_runs.actual_qty AS production_runs_actual_qty, production_runs.wip_start AS production_runs_wip_start, production_runs.wip_end AS production_runs_wip_end, production_runs.lot_number AS production_runs_lot_number, production_runs.shade_band AS production_runs_shade_band, production_runs.batch_number AS production_runs_batch_number, production_runs.downtime_minutes AS production_runs_downtime_minutes, production_runs.downtime_reason AS production_runs_downtime_reason, production_runs.sam AS production_runs_sam, production_runs.operators_present AS production_runs_operators_present, production_runs.helpers_present AS production_runs_helpers_present, production_runs.worked_minutes AS production_runs_worked_minutes, production_runs.earned_minutes AS production_runs_earned_minutes, production_runs.efficiency AS production_runs_efficiency, production_runs.notes AS production_runs_notes, production_runs.start_time AS production_runs_start_time, production_runs.end_time AS production_runs_end_time, production_runs.style_number AS production_runs_style_number, production_runs.buyer AS production_runs_buyer, production_runs.season AS production_runs_season, production_runs.po_number AS production_runs_po_number, production_runs.color AS production_runs_color, production_runs.size AS production_runs_size, production_runs.defects AS production_runs_defects, production_runs.dhu AS production_runs_dhu, production_runs.line_efficiency AS production_runs_line_efficiency, production_runs.id AS production_runs_id, production_runs.created_at AS production_runs_created_at, production_runs.updated_at AS production_runs_updated_at 
FROM production_runs 
WHERE ? = production_runs.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT ai_decisions.data_source_id AS ai_decisions_data_source_id, ai_decisions.agent_type AS ai_decisions_agent_type, ai_decisions.model_used AS ai_decisions_model_used, ai_decisions.input_summary AS ai_decisions_input_summary, ai_decisions.output_summary AS ai_decisions_output_summary, ai_decisions.confidence AS ai_decisions_confidence, ai_decisions.reasoning AS ai_decisions_reasoning, ai_decisions.performance_metadata AS ai_decisions_performance_metadata, ai_decisions.id AS ai_decisions_id, ai_decisions.created_at AS ai_decisions_created_at, ai_decisions.updated_at AS ai_decisions_updated_at 
FROM ai_decisions 
WHERE ? = ai_decisions.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT data_sources.factory_id AS data_sources_factory_id, data_sources.name AS data_sources_name, data_sources.code AS data_sources_code, data_sources.target_operators AS data_sources_target_operators, data_sources.target_efficiency_pct AS data_sources_target_efficiency_pct, data_sources.settings AS data_sources_settings, data_sources.specialty AS data_sources_specialty, data_sources.supervisor_id AS data_sources_supervisor_id, data_sources.production_line_id AS data_sources_production_line_id, data_sources.source_name AS data_sources_source_name, data_sources.description AS data_sources_description, data_sources.time_column AS data_sources_time_column, data_sources.time_format AS data_sources_time_format, data_sources.schema_config AS data_sources_schema_config, data_sources.parent_data_source_id AS data_sources_parent_data_source_id, data_sources.is_segment AS data_sources_is_segment, data_sources.date_range_start AS data_sources_date_range_start, data_sources.date_range_end AS data_sources_date_range_end, data_sources.is_active AS data_sources_is_active, data_sources.id AS data_sources_id, data_sources.created_at AS data_sources_created_at, data_sources.updated_at AS data_sources_updated_at 
FROM data_sources 
WHERE ? = data_sources.parent_data_source_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.21s ago] ('5c9386e1-4b5c-433d-87b5-66c9431f5397',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO raw_imports (uploaded_by_id, factory_id, production_line_id, data_source_id, time_column_used, original_filename, file_path, file_size_bytes, file_hash, mime_type, encoding_detected, sheet_count, sheet_names, row_count, column_count, header_row_detected, raw_headers, sample_data, status, processing_error, processed_at, id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [generated in 0.00037s] (None, '4375dd64-16f4-4d37-9a35-cf6a9ed60e3d', '4944b7df-c058-4165-9584-5bf4c09cd83b', None, None, 'prod_jan.xlsx', '/tmp/prod_jan.xlsx', 1024, 'abc123', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', None, 1, None, 100, 10, None, '["Date", "Product", "Quantity"]', '[["2024-01-01", "Widget", 100]]', 'processed', None, None, '4a0d1c0a-bccb-45ea-9fe1-ad1dedf72f4c', '2026-02-16 09:47:07.449189', '2026-02-16 09:47:07.449195')
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT raw_imports.uploaded_by_id, raw_imports.factory_id, raw_imports.production_line_id, raw_imports.data_source_id, raw_imports.time_column_used, raw_imports.original_filename, raw_imports.file_path, raw_imports.file_size_bytes, raw_imports.file_hash, raw_imports.mime_type, raw_imports.encoding_detected, raw_imports.sheet_count, raw_imports.sheet_names, raw_imports.row_count, raw_imports.column_count, raw_imports.header_row_detected, raw_imports.raw_headers, raw_imports.sample_data, raw_imports.status, raw_imports.processing_error, raw_imports.processed_at, raw_imports.id, raw_imports.created_at, raw_imports.updated_at 
FROM raw_imports 
WHERE raw_imports.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 12.93s ago] ('4a0d1c0a-bccb-45ea-9fe1-ad1dedf72f4c',)
INFO     sqlalchemy.engine.Engine:base.py:1846 INSERT INTO users (organization_id, email, hashed_password, full_name, avatar_url, timezone, preferences, role, is_active, is_verified, last_login, id, created_at, updated_at, is_deleted, deleted_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.5s ago] ('c48235f3-1fc0-4094-91dc-5ff2cf18dcdd', 'test@example.com', '$2b$12$88rTe2YZvcubV0sB.m/1ZOpTeBziw5LYb9FvRhOLxetpkbydEqHU6', 'Test User', None, 'UTC', None, 'system_admin', 1, 1, None, '41897842-8cb3-44c4-8f3c-59b8e7a5f4f6', '2026-02-16 09:47:07.689099', '2026-02-16 09:47:07.689104', 0, None)
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT users.organization_id, users.email, users.hashed_password, users.full_name, users.avatar_url, users.timezone, users.preferences, users.role, users.is_active, users.is_verified, users.last_login, users.id, users.created_at, users.updated_at, users.is_deleted, users.deleted_at 
FROM users 
WHERE users.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.5s ago] ('41897842-8cb3-44c4-8f3c-59b8e7a5f4f6',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT dashboards.user_id AS dashboards_user_id, dashboards.name AS dashboards_name, dashboards.description AS dashboards_description, dashboards.data_source_id AS dashboards_data_source_id, dashboards.widget_config AS dashboards_widget_config, dashboards.layout_config AS dashboards_layout_config, dashboards.id AS dashboards_id, dashboards.created_at AS dashboards_created_at, dashboards.updated_at AS dashboards_updated_at 
FROM dashboards 
WHERE ? = dashboards.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.5s ago] ('41897842-8cb3-44c4-8f3c-59b8e7a5f4f6',)
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT user_scopes.user_id AS user_scopes_user_id, user_scopes.scope_type AS user_scopes_scope_type, user_scopes.organization_id AS user_scopes_organization_id, user_scopes.factory_id AS user_scopes_factory_id, user_scopes.data_source_id AS user_scopes_data_source_id, user_scopes.role AS user_scopes_role, user_scopes.id AS user_scopes_id, user_scopes.created_at AS user_scopes_created_at, user_scopes.updated_at AS user_scopes_updated_at 
FROM user_scopes 
WHERE ? = user_scopes.user_id
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.5s ago] ('41897842-8cb3-44c4-8f3c-59b8e7a5f4f6',)
----------------------------- Captured stdout call -----------------------------
{"timestamp": "2026-02-16T09:47:07.699880Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: PUT http://test/api/v1/datasources/5c9386e1-4b5c-433d-87b5-66c9431f5397 \"HTTP/1.1 404 Not Found\""}
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1740 HTTP Request: PUT http://test/api/v1/datasources/5c9386e1-4b5c-433d-87b5-66c9431f5397 "HTTP/1.1 404 Not Found"
--------------------------- Captured stdout teardown ---------------------------
2026-02-16 09:47:07,748 INFO sqlalchemy.engine.Engine ROLLBACK
{"timestamp": "2026-02-16T09:47:07.748837Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK"}
2026-02-16 09:47:07,749 INFO sqlalchemy.engine.Engine BEGIN (implicit)
{"timestamp": "2026-02-16T09:47:07.749794Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)"}
2026-02-16 09:47:07,750 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=OFF
{"timestamp": "2026-02-16T09:47:07.750114Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=OFF"}
2026-02-16 09:47:07,750 INFO sqlalchemy.engine.Engine [cached since 17.94s ago] ()
{"timestamp": "2026-02-16T09:47:07.750233Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.94s ago] ()"}
2026-02-16 09:47:07,751 INFO sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table'
{"timestamp": "2026-02-16T09:47:07.751261Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT name FROM sqlite_master WHERE type='table'"}
2026-02-16 09:47:07,751 INFO sqlalchemy.engine.Engine [cached since 17.47s ago] ()
{"timestamp": "2026-02-16T09:47:07.751363Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.47s ago] ()"}
2026-02-16 09:47:07,752 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "ai_decisions"
{"timestamp": "2026-02-16T09:47:07.752392Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"ai_decisions\""}
2026-02-16 09:47:07,752 INFO sqlalchemy.engine.Engine [cached since 17.47s ago] ()
{"timestamp": "2026-02-16T09:47:07.752478Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.47s ago] ()"}
2026-02-16 09:47:07,753 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "alias_mappings"
{"timestamp": "2026-02-16T09:47:07.753460Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"alias_mappings\""}
2026-02-16 09:47:07,753 INFO sqlalchemy.engine.Engine [cached since 17.47s ago] ()
{"timestamp": "2026-02-16T09:47:07.753555Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.47s ago] ()"}
2026-02-16 09:47:07,754 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "efficiency_metrics"
{"timestamp": "2026-02-16T09:47:07.754251Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"efficiency_metrics\""}
2026-02-16 09:47:07,754 INFO sqlalchemy.engine.Engine [cached since 17.47s ago] ()
{"timestamp": "2026-02-16T09:47:07.754339Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.47s ago] ()"}
2026-02-16 09:47:07,755 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dhu_reports"
{"timestamp": "2026-02-16T09:47:07.755361Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dhu_reports\""}
2026-02-16 09:47:07,755 INFO sqlalchemy.engine.Engine [cached since 17.47s ago] ()
{"timestamp": "2026-02-16T09:47:07.755578Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.47s ago] ()"}
2026-02-16 09:47:07,756 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "dashboards"
{"timestamp": "2026-02-16T09:47:07.756822Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"dashboards\""}
2026-02-16 09:47:07,756 INFO sqlalchemy.engine.Engine [cached since 17.47s ago] ()
{"timestamp": "2026-02-16T09:47:07.757007Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.47s ago] ()"}
2026-02-16 09:47:07,758 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_quality_issues"
{"timestamp": "2026-02-16T09:47:07.758450Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_quality_issues\""}
2026-02-16 09:47:07,758 INFO sqlalchemy.engine.Engine [cached since 17.47s ago] ()
{"timestamp": "2026-02-16T09:47:07.758577Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.47s ago] ()"}
2026-02-16 09:47:07,759 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "data_sources"
{"timestamp": "2026-02-16T09:47:07.760139Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"data_sources\""}
2026-02-16 09:47:07,760 INFO sqlalchemy.engine.Engine [cached since 17.47s ago] ()
{"timestamp": "2026-02-16T09:47:07.760308Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.47s ago] ()"}
2026-02-16 09:47:07,761 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "schema_mappings"
{"timestamp": "2026-02-16T09:47:07.761654Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"schema_mappings\""}
2026-02-16 09:47:07,761 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.761762Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,762 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_events"
{"timestamp": "2026-02-16T09:47:07.762398Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_events\""}
2026-02-16 09:47:07,762 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.762495Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,763 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "factories"
{"timestamp": "2026-02-16T09:47:07.763134Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"factories\""}
2026-02-16 09:47:07,763 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.763221Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,763 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "styles"
{"timestamp": "2026-02-16T09:47:07.763902Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"styles\""}
2026-02-16 09:47:07,763 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.763985Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,764 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "orders"
{"timestamp": "2026-02-16T09:47:07.764668Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"orders\""}
2026-02-16 09:47:07,764 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.764748Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,765 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_runs"
{"timestamp": "2026-02-16T09:47:07.765411Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_runs\""}
2026-02-16 09:47:07,765 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.765487Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,766 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "quality_inspections"
{"timestamp": "2026-02-16T09:47:07.766459Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"quality_inspections\""}
2026-02-16 09:47:07,766 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.766633Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,767 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "defects"
{"timestamp": "2026-02-16T09:47:07.767704Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"defects\""}
2026-02-16 09:47:07,767 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.767848Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,768 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "raw_imports"
{"timestamp": "2026-02-16T09:47:07.768696Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"raw_imports\""}
2026-02-16 09:47:07,768 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.768821Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,769 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "staging_records"
{"timestamp": "2026-02-16T09:47:07.769672Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"staging_records\""}
2026-02-16 09:47:07,769 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.769769Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,770 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "organizations"
{"timestamp": "2026-02-16T09:47:07.770621Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"organizations\""}
2026-02-16 09:47:07,770 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.770749Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,771 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "users"
{"timestamp": "2026-02-16T09:47:07.771549Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"users\""}
2026-02-16 09:47:07,771 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.771632Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,772 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "user_scopes"
{"timestamp": "2026-02-16T09:47:07.772618Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"user_scopes\""}
2026-02-16 09:47:07,772 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.772713Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,773 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "waitlist"
{"timestamp": "2026-02-16T09:47:07.773487Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"waitlist\""}
2026-02-16 09:47:07,773 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.773596Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,774 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "workers"
{"timestamp": "2026-02-16T09:47:07.774540Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"workers\""}
2026-02-16 09:47:07,774 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.774715Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,775 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_skills"
{"timestamp": "2026-02-16T09:47:07.775840Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_skills\""}
2026-02-16 09:47:07,775 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.775966Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,777 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "worker_attendances"
{"timestamp": "2026-02-16T09:47:07.777275Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"worker_attendances\""}
2026-02-16 09:47:07,777 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.777449Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,778 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "production_outputs"
{"timestamp": "2026-02-16T09:47:07.778476Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"production_outputs\""}
2026-02-16 09:47:07,778 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.778572Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,779 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "fabric_lots"
{"timestamp": "2026-02-16T09:47:07.779567Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"fabric_lots\""}
2026-02-16 09:47:07,779 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.779681Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,780 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cut_tickets"
{"timestamp": "2026-02-16T09:47:07.780674Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cut_tickets\""}
2026-02-16 09:47:07,780 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.780817Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,781 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "packing_lists"
{"timestamp": "2026-02-16T09:47:07.781671Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"packing_lists\""}
2026-02-16 09:47:07,781 INFO sqlalchemy.engine.Engine [cached since 17.48s ago] ()
{"timestamp": "2026-02-16T09:47:07.781758Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.48s ago] ()"}
2026-02-16 09:47:07,782 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "cartons"
{"timestamp": "2026-02-16T09:47:07.782561Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"cartons\""}
2026-02-16 09:47:07,782 INFO sqlalchemy.engine.Engine [cached since 17.49s ago] ()
{"timestamp": "2026-02-16T09:47:07.782650Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.49s ago] ()"}
2026-02-16 09:47:07,783 INFO sqlalchemy.engine.Engine DROP TABLE IF EXISTS "traceability_records"
{"timestamp": "2026-02-16T09:47:07.783325Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "DROP TABLE IF EXISTS \"traceability_records\""}
2026-02-16 09:47:07,783 INFO sqlalchemy.engine.Engine [cached since 17.49s ago] ()
{"timestamp": "2026-02-16T09:47:07.783405Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.49s ago] ()"}
2026-02-16 09:47:07,784 INFO sqlalchemy.engine.Engine PRAGMA foreign_keys=ON
{"timestamp": "2026-02-16T09:47:07.784409Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "PRAGMA foreign_keys=ON"}
2026-02-16 09:47:07,784 INFO sqlalchemy.engine.Engine [cached since 17.89s ago] ()
{"timestamp": "2026-02-16T09:47:07.784541Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 17.89s ago] ()"}
2026-02-16 09:47:07,785 INFO sqlalchemy.engine.Engine COMMIT
{"timestamp": "2026-02-16T09:47:07.785190Z", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT"}
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2713 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2710 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=OFF
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.94s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 SELECT name FROM sqlite_master WHERE type='table'
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.47s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "ai_decisions"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.47s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "alias_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.47s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "efficiency_metrics"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.47s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dhu_reports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.47s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "dashboards"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.47s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_quality_issues"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.47s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "data_sources"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.47s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "schema_mappings"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_events"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "factories"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "styles"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "orders"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_runs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "quality_inspections"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "defects"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "raw_imports"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "staging_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "organizations"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "users"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "user_scopes"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "waitlist"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "workers"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_skills"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "worker_attendances"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "production_outputs"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "fabric_lots"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cut_tickets"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "packing_lists"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.48s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "cartons"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.49s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 DROP TABLE IF EXISTS "traceability_records"
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.49s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:1846 PRAGMA foreign_keys=ON
INFO     sqlalchemy.engine.Engine:base.py:1846 [cached since 17.89s ago] ()
INFO     sqlalchemy.engine.Engine:base.py:2716 COMMIT
=========================== short test summary info ============================
FAILED tests/e2e/test_excel_to_dashboard.py::test_e2e_excel_ingestion_and_dashboard
FAILED tests/test_api/test_dashboard_flow.py::test_edit_configuration - asser...
============= 2 failed, 220 passed, 2 skipped in 83.89s (0:01:23) ==============
make: *** [Makefile:200: test] Error 1
