============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\19803\Projects\FactoryExcelManager\backend\venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\19803\Projects\FactoryExcelManager\backend
configfile: pytest.ini
plugins: anyio-4.12.1, Faker-40.1.0, langsmith-0.6.1, asyncio-1.3.0, cov-7.0.0, mock-3.15.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 4 items

backend\tests\test_api\test_analytics_real.py::test_get_overview_stats_real FAILED [ 25%]
backend\tests\test_api\test_analytics_real.py::test_get_production_chart_real PASSED [ 50%]
backend\tests\test_api\test_analytics_real.py::test_get_lowest_performers_real PASSED [ 75%]
backend\tests\test_api\test_analytics_real.py::test_get_discrepancies_real PASSED [100%]

================================== FAILURES ===================================
________________________ test_get_overview_stats_real _________________________
backend\tests\test_api\test_analytics_real.py:142: in test_get_overview_stats_real
    assert abs(float(data["avg_efficiency"]) - 9.38) < 0.1
E   AssertionError: assert 9.38 < 0.1
E    +  where 9.38 = abs((0.0 - 9.38))
E    +    where 0.0 = float('0.0')
---------------------------- Captured stdout call -----------------------------
{"timestamp": "2026-02-15T15:36:12.056395Z", "level": "INFO", "logger": "app.api.v1.endpoints.analytics", "message": "[DIAG] get_overview_stats called with line_id=None"}
{"timestamp": "2026-02-15T15:36:12.075445Z", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET http://test/api/v1/analytics/overview \"HTTP/1.1 200 OK\""}
------------------------------ Captured log call ------------------------------
INFO     app.api.v1.endpoints.analytics:analytics.py:73 [DIAG] get_overview_stats called with line_id=None
INFO     httpx:_client.py:1740 HTTP Request: GET http://test/api/v1/analytics/overview "HTTP/1.1 200 OK"
=========================== short test summary info ===========================
FAILED backend\tests\test_api\test_analytics_real.py::test_get_overview_stats_real - AssertionError: assert 9.38 < 0.1
 +  where 9.38 = abs((0.0 - 9.38))
 +    where 0.0 = float('0.0')
========================= 1 failed, 3 passed in 3.72s =========================
