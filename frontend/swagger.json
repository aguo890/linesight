{
  "openapi": "3.1.0",
  "info": {
    "title": "LineSight",
    "description": "LineSight: AI-driven Semantic ETL platform for SMB apparel manufacturing. Parse messy Excel files, track SAM/DHU metrics, and ensure UFLPA compliance.",
    "version": "0.1.0"
  },
  "paths": {
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login",
        "description": "Authenticate user and return JWT token.\n\n- **email**: User's email address\n- **password**: User's password (min 8 characters)",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Register",
        "description": "Register a new user and organization.\n\nCreates both an organization and an admin user for that organization.\nThis is typically for new company signups.",
        "operationId": "register_api_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/history": {
      "get": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Get Upload History",
        "description": "Fetch recent file uploads, optionally filtered by data source.",
        "operationId": "get_upload_history_api_v1_ingestion_history_get",
        "parameters": [
          {
            "name": "data_source_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Data Source Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/upload": {
      "post": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Upload File For Ingestion",
        "description": "Upload a file and create a RawImport record.\n\nThis is step 1 of the HITL flow. The file is saved and parsed.\nStorage structure: uploads/{factory_id}/{data_source_id}/{year}/{month}/{filename}\n\nREQUIRES: factory_id - Data must be uploaded to a specific factory.\nOPTIONAL: data_source_id - If provided, upload is associated with a specific data source.",
        "operationId": "upload_file_for_ingestion_api_v1_ingestion_upload_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "factory_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "REQUIRED: Factory to upload data to",
              "title": "Factory Id"
            },
            "description": "REQUIRED: Factory to upload data to"
          },
          {
            "name": "data_source_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Optional: Data source to upload data to",
              "title": "Data Source Id"
            },
            "description": "Optional: Data source to upload data to"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_file_for_ingestion_api_v1_ingestion_upload_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Upload File For Ingestion Api V1 Ingestion Upload Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/process/{raw_import_id}": {
      "post": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Process File",
        "description": "Process an uploaded file through the Hybrid Waterfall Matching Engine.\n\nThis is step 2 of the HITL flow. Returns column mappings with confidence scores.",
        "operationId": "process_file_api_v1_ingestion_process__raw_import_id__post",
        "parameters": [
          {
            "name": "raw_import_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Raw Import Id"
            }
          },
          {
            "name": "factory_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Factory Id"
            }
          },
          {
            "name": "llm_enabled",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Enable LLM fallback for ambiguous columns",
              "default": true,
              "title": "Llm Enabled"
            },
            "description": "Enable LLM fallback for ambiguous columns"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProcessingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/confirm-mapping": {
      "post": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Confirm Mapping",
        "description": "Confirm column mappings after user review.\n\nThis is step 3 of the HITL flow. Saves the mapping and optionally\nlearns from user corrections for future matching.",
        "operationId": "confirm_mapping_api_v1_ingestion_confirm_mapping_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmMappingRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConfirmMappingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/fields": {
      "get": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Get Available Fields",
        "description": "Get list of available canonical fields for UI dropdown.",
        "operationId": "get_available_fields_api_v1_ingestion_fields_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/AvailableField"
                  },
                  "type": "array",
                  "title": "Response Get Available Fields Api V1 Ingestion Fields Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/date-formats": {
      "get": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Get Date Formats",
        "description": "Get list of available date format options for UI dropdown.\n\nReturns list of {value, label} objects for select component.\nThe 'value' should be stored in DataSource.time_format.",
        "operationId": "get_date_formats_api_v1_ingestion_date_formats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/uploads": {
      "get": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "List Uploads",
        "description": "List uploaded files with optional filtering by production line or factory.\n\nReturns paginated list of uploads for display in UI.",
        "operationId": "list_uploads_api_v1_ingestion_uploads_get",
        "parameters": [
          {
            "name": "production_line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by production line",
              "title": "Production Line Id"
            },
            "description": "Filter by production line"
          },
          {
            "name": "factory_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by factory",
              "title": "Factory Id"
            },
            "description": "Filter by factory"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Delete Uploads",
        "description": "Delete upload history for a production line.\n\nThis is a destructive action that:\n1. Deletes RawImport records from the database\n2. Deletes physical files from disk",
        "operationId": "delete_uploads_api_v1_ingestion_uploads_delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "production_line_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "REQUIRED: Production line to clear history for",
              "title": "Production Line Id"
            },
            "description": "REQUIRED: Production line to clear history for"
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/files/{raw_import_id}/download": {
      "get": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Download File",
        "description": "Download the original uploaded file.\n\nReturns file for download or viewing.",
        "operationId": "download_file_api_v1_ingestion_files__raw_import_id__download_get",
        "parameters": [
          {
            "name": "raw_import_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Raw Import Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/preview/{raw_import_id}": {
      "get": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Get Import Preview",
        "description": "Fetches formatted preview data for the frontend TablePreview interface.",
        "operationId": "get_import_preview_api_v1_ingestion_preview__raw_import_id__get",
        "parameters": [
          {
            "name": "raw_import_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Raw Import Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/preview-dry-run/{raw_import_id}": {
      "get": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Get Dry Run Preview",
        "description": "HITL Preview: Show how data will look after import.\nReturns first 20 rows with before/after comparison.",
        "operationId": "get_dry_run_preview_api_v1_ingestion_preview_dry_run__raw_import_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "raw_import_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Raw Import Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/promote/{raw_import_id}": {
      "post": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Promote To Production",
        "description": "Step 4: Promote data from a confirmed RawImport to production tables.\nMatches records to Style/Order models and creates ProductionRuns.",
        "operationId": "promote_to_production_api_v1_ingestion_promote__raw_import_id__post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "raw_import_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Raw Import Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Promote To Production Api V1 Ingestion Promote  Raw Import Id  Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/mapping-state/{raw_import_id}": {
      "get": {
        "tags": [
          "Data Ingestion",
          "ingestion"
        ],
        "summary": "Get Mapping State",
        "description": "Retrieves the current mapping state for a file without re-running the matching engine.\nUsed when a user returns to a partially configured or already processed upload.",
        "operationId": "get_mapping_state_api_v1_ingestion_mapping_state__raw_import_id__get",
        "parameters": [
          {
            "name": "raw_import_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Raw Import Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProcessingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/dashboards/": {
      "post": {
        "tags": [
          "Dashboards"
        ],
        "summary": "Create Dashboard",
        "description": "Create a new dashboard with widget configuration.\n\n- **name**: Dashboard name (required)\n- **description**: Optional description\n- **data_source_id**: Optional link to DataSource\n- **widget_config**: Widget configuration (enabled widgets + settings)\n- **layout_config**: Grid layout configuration",
        "operationId": "create_dashboard_api_v1_dashboards__post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DashboardCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Dashboards"
        ],
        "summary": "List Dashboards",
        "description": "List all dashboards for the current user.\nReturns dashboards ordered by most recently updated.\nOptional filtering by factory_id.",
        "operationId": "list_dashboards_api_v1_dashboards__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "factory_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter dashboards by factory",
              "title": "Factory Id"
            },
            "description": "Filter dashboards by factory"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/dashboards/{dashboard_id}": {
      "get": {
        "tags": [
          "Dashboards"
        ],
        "summary": "Get Dashboard",
        "description": "Get a specific dashboard with widget data.\n\nReturns the dashboard configuration plus actual widget data\nfetched from the linked data source, including production line ID for filtering.",
        "operationId": "get_dashboard_api_v1_dashboards__dashboard_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "dashboard_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Dashboard Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Dashboards"
        ],
        "summary": "Update Dashboard",
        "description": "Update dashboard configuration.\n\nAllows updating name, description, data source, widget config, and layout.\nOnly provided fields will be updated.",
        "operationId": "update_dashboard_api_v1_dashboards__dashboard_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "dashboard_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Dashboard Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DashboardUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Dashboards"
        ],
        "summary": "Delete Dashboard",
        "description": "Delete a dashboard.\n\nThis will remove the dashboard but not the linked data source.",
        "operationId": "delete_dashboard_api_v1_dashboards__dashboard_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "dashboard_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Dashboard Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/factories": {
      "get": {
        "tags": [
          "Factories"
        ],
        "summary": "List Factories",
        "description": "Get all factories for the current user's organization.\n\nRBAC:\n- OWNER/ADMIN: See all active factories in organization.\n- MANAGER: Only see factories where they have assigned lines.",
        "operationId": "list_factories_api_v1_factories_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/FactoryRead"
                  },
                  "type": "array",
                  "title": "Response List Factories Api V1 Factories Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Factories"
        ],
        "summary": "Create Factory",
        "description": "Create a new factory with quota enforcement.",
        "operationId": "create_factory_api_v1_factories_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FactoryCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FactoryRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/factories/{factory_id}": {
      "get": {
        "tags": [
          "Factories"
        ],
        "summary": "Get Factory",
        "description": "Get a specific factory with its production lines.\n\nRBAC Filtering:\n- SYSTEM_ADMIN/OWNER: See all lines\n- MANAGER: Only see lines assigned via UserScope",
        "operationId": "get_factory_api_v1_factories__factory_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "factory_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Factory Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FactoryWithDataSources"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Factories"
        ],
        "summary": "Update Factory",
        "description": "Update an existing factory.",
        "operationId": "update_factory_api_v1_factories__factory_id__patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "factory_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Factory Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FactoryUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FactoryRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Factories"
        ],
        "summary": "Delete Factory",
        "description": "Soft-delete a factory.",
        "operationId": "delete_factory_api_v1_factories__factory_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "factory_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Factory Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/factories/{factory_id}/data-sources": {
      "get": {
        "tags": [
          "Factories"
        ],
        "summary": "List Data Sources",
        "description": "Get data sources for a factory.\n\nRBAC Filtering:\n- SYSTEM_ADMIN/OWNER: See all data sources in the factory\n- MANAGER: Only see data sources assigned via UserScope\n- ANALYST/VIEWER: See all data sources (read-only)",
        "operationId": "list_data_sources_api_v1_factories__factory_id__data_sources_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "factory_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Factory Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DataSourceRead"
                  },
                  "title": "Response List Data Sources Api V1 Factories  Factory Id  Data Sources Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Factories"
        ],
        "summary": "Create Data Source",
        "description": "Create a new data source with quota enforcement.",
        "operationId": "create_data_source_api_v1_factories__factory_id__data_sources_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "factory_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Factory Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DataSourceCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataSourceRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/factories/data-sources/{ds_id}": {
      "get": {
        "tags": [
          "Factories"
        ],
        "summary": "Get Data Source",
        "description": "Get a specific data source.\nPath: /factories/data-sources/{ds_id}",
        "operationId": "get_data_source_api_v1_factories_data_sources__ds_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "ds_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ds Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataSourceRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Factories"
        ],
        "summary": "Update Data Source",
        "description": "Update a data source.\nPath: /factories/data-sources/{ds_id}",
        "operationId": "update_data_source_api_v1_factories_data_sources__ds_id__patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "ds_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ds Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DataSourceUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataSourceRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Factories"
        ],
        "summary": "Delete Data Source",
        "description": "Soft-delete a data source.\nPath: /factories/data-sources/{ds_id}",
        "operationId": "delete_data_source_api_v1_factories_data_sources__ds_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "ds_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ds Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/overview": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Overview Stats",
        "description": "Get dashboard overview statistics.\nIf date range provided, calculates stats for that range vs previous period.\nOtherwise defaults to \"Effective Date\" (Today/Latest).",
        "operationId": "get_overview_stats_api_v1_analytics_overview_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OverviewStats"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/production-chart": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Production Chart",
        "description": "Get production vs target chart data for the last 7 days.\n\nOptionally filter by production line ID.",
        "operationId": "get_production_chart_api_v1_analytics_production_chart_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductionChartData"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/workers/lowest-performers": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Lowest Performers",
        "description": "Get workers with lowest efficiency for the current week.\n\nUsed for the \"Lowest Performers\" dashboard widget.\nThis is intended for coaching/improvement, not punitive purposes.",
        "operationId": "get_lowest_performers_api_v1_analytics_workers_lowest_performers_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 5,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LowestPerformersResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/discrepancies": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Discrepancies",
        "description": "Get detected data discrepancies based on TraceabilityRecords.",
        "operationId": "get_discrepancies_api_v1_analytics_discrepancies_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscrepanciesResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/production/styles": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Style Progress",
        "description": "Get progress of currently active production styles (Orders).\nIf date range provided, shows orders that were ACTIVE (had production) during that range.\nOptionally filter by production line ID.",
        "operationId": "get_style_progress_api_v1_analytics_production_styles_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StyleProgressResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/dhu": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Dhu Trend",
        "description": "Get daily DHU trend for the last N days (or specific range).\nOptionally filter by production line ID.\nRestored endpoint for Quality Widget.",
        "operationId": "get_dhu_trend_api_v1_analytics_dhu_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 7,
              "title": "Days"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          },
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DhuPoint"
                  },
                  "title": "Response Get Dhu Trend Api V1 Analytics Dhu Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/speed-quality": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Speed Quality Trend",
        "description": "Get daily trend of Efficiency vs Defects (DHU).\nRestored endpoint for Speed vs Quality Widget.",
        "operationId": "get_speed_quality_trend_api_v1_analytics_speed_quality_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 14,
              "title": "Days"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          },
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SpeedQualityResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/complexity-impact": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Complexity Stats",
        "description": "Get Scatter Plot data: SAM vs Efficiency for active styles.\nOptionally filter by production line ID.",
        "operationId": "get_complexity_stats_api_v1_analytics_complexity_impact_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ComplexityAnalysisResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/earned-minutes": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Earned Minutes Stats",
        "description": "Get Earned Minutes vs Available Minutes stats.\nDefaults to today if no dates provided.\nOptionally filter by production line ID.",
        "operationId": "get_earned_minutes_stats_api_v1_analytics_earned_minutes_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EarnedMinutesStats"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/downtime-reasons": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Downtime Reasons",
        "description": "Get top recurring downtime reasons.\nAggregates data from the 'downtime_reason' column.\nOptionally filter by production line ID.",
        "operationId": "get_downtime_reasons_api_v1_analytics_downtime_reasons_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DowntimeAnalysisResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/production/hourly": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Hourly Production",
        "description": "Get hourly production output for today (08:00 - 19:00).\nReturns a list of integer quantities per hour.",
        "operationId": "get_hourly_production_api_v1_analytics_production_hourly_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "integer"
                  },
                  "title": "Response Get Hourly Production Api V1 Analytics Production Hourly Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/sam-performance": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Sam Performance",
        "description": "Get SAM performance metrics for today or a specific range.",
        "operationId": "get_sam_performance_api_v1_analytics_sam_performance_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SamPerformanceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/target-realization": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Target Realization",
        "description": "Get target realization metrics (Actual vs Planned) for today.",
        "operationId": "get_target_realization_api_v1_analytics_target_realization_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TargetRealizationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/complexity": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Complexity Analysis",
        "description": "Analyze correlation between Style Complexity (SAM) and Efficiency.",
        "operationId": "get_complexity_analysis_api_v1_analytics_complexity_get",
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start Date"
            }
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End Date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ComplexityAnalysisResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/events": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Production Events",
        "description": "Get raw production events for the last N minutes.\nUsed for real-time charting or feeds.",
        "operationId": "get_production_events_api_v1_analytics_events_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          },
          {
            "name": "minutes",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 60,
              "title": "Minutes"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductionEventItem"
                  },
                  "title": "Response Get Production Events Api V1 Analytics Events Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/workforce": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get Workforce Stats",
        "description": "Get workforce attendance statistics for today.",
        "operationId": "get_workforce_stats_api_v1_analytics_workforce_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkforceStats"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/recalculate": {
      "post": {
        "tags": [
          "Analytics"
        ],
        "summary": "Recalculate Metrics",
        "description": "Trigger recalculation of missing metrics for existing production data.\nUseful for fixing 'No Data' issues on dashboards created before metric logic was added.",
        "operationId": "recalculate_metrics_api_v1_analytics_recalculate_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "days_back",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 30,
              "title": "Days Back"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/waitlist/": {
      "post": {
        "tags": [
          "Waitlist"
        ],
        "summary": "Join Waitlist",
        "description": "Join the waitlist.\nReturns the created entry with a unique referral code.",
        "operationId": "join_waitlist_api_v1_waitlist__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WaitlistCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WaitlistResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organizations/members": {
      "get": {
        "tags": [
          "Team Management"
        ],
        "summary": "List Organization Members",
        "description": "List all organization members with their scope assignments.\n\nOnly accessible by organization owners.\nReturns all users in the organization with their data source assignments.",
        "operationId": "list_organization_members_api_v1_organizations_members_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/MemberRead"
                  },
                  "type": "array",
                  "title": "Response List Organization Members Api V1 Organizations Members Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/organizations/members/{user_id}/scopes": {
      "post": {
        "tags": [
          "Team Management"
        ],
        "summary": "Assign User To Data Source",
        "description": "Assign a user to a data source.\n\nOnly accessible by organization owners.\nCreates a new UserScope entry linking the user to the specified data source.",
        "operationId": "assign_user_to_data_source_api_v1_organizations_members__user_id__scopes_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScopeAssign"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScopeRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organizations/members/{user_id}/scopes/{scope_id}": {
      "delete": {
        "tags": [
          "Team Management"
        ],
        "summary": "Remove User Scope",
        "description": "Remove a user's scope assignment.\n\nOnly accessible by organization owners.\nDeletes the UserScope entry, removing the user's access to that production line.",
        "operationId": "remove_user_scope_api_v1_organizations_members__user_id__scopes__scope_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "scope_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Scope Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organizations/me": {
      "get": {
        "tags": [
          "Organizations"
        ],
        "summary": "Get My Organization",
        "description": "Get the current user's organization.\n\nReturns the organization that the authenticated user belongs to.",
        "operationId": "get_my_organization_api_v1_organizations_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationRead"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "Organizations"
        ],
        "summary": "Update My Organization",
        "description": "Update the current user's organization.\n\nOnly admins can update organization details.\nUpdatable fields: name, code, primary_email, primary_phone, subscription_tier",
        "operationId": "update_my_organization_api_v1_organizations_me_patch",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrganizationUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/organizations/quota-status": {
      "get": {
        "tags": [
          "Organizations"
        ],
        "summary": "Get Quota Status",
        "description": "Get organization's quota status.\n\nReturns current usage and limits for factories and production lines.",
        "operationId": "get_quota_status_api_v1_organizations_quota_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/organizations/{organization_id}": {
      "get": {
        "tags": [
          "Organizations"
        ],
        "summary": "Get Organization",
        "description": "Get a specific organization by ID.\n\nUsers can only view their own organization.",
        "operationId": "get_organization_api_v1_organizations__organization_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "organization_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Organization Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/production/styles": {
      "get": {
        "tags": [
          "Production",
          "Styles"
        ],
        "summary": "List Styles",
        "description": "List styles.",
        "operationId": "list_styles_api_v1_production_styles_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "factory_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Factory Id"
            }
          },
          {
            "name": "buyer",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Buyer"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/StyleRead"
                  },
                  "title": "Response List Styles Api V1 Production Styles Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Production",
          "Styles"
        ],
        "summary": "Create Style",
        "description": "Create a new style.",
        "operationId": "create_style_api_v1_production_styles_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StyleCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StyleRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/production/styles/{style_id}": {
      "get": {
        "tags": [
          "Production",
          "Styles"
        ],
        "summary": "Get Style",
        "description": "Get style details.",
        "operationId": "get_style_api_v1_production_styles__style_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "style_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Style Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StyleRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Production",
          "Styles"
        ],
        "summary": "Update Style",
        "description": "Update a style.",
        "operationId": "update_style_api_v1_production_styles__style_id__patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "style_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Style Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StyleUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StyleRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Production",
          "Styles"
        ],
        "summary": "Delete Style",
        "description": "Delete a style.",
        "operationId": "delete_style_api_v1_production_styles__style_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "style_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Style Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/production/orders": {
      "get": {
        "tags": [
          "Production",
          "Orders"
        ],
        "summary": "List Orders",
        "description": "List orders.",
        "operationId": "list_orders_api_v1_production_orders_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "style_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Style Id"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/OrderRead"
                  },
                  "title": "Response List Orders Api V1 Production Orders Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Production",
          "Orders"
        ],
        "summary": "Create Order",
        "description": "Create a new order.",
        "operationId": "create_order_api_v1_production_orders_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/production/orders/{order_id}": {
      "get": {
        "tags": [
          "Production",
          "Orders"
        ],
        "summary": "Get Order",
        "description": "Get order details.",
        "operationId": "get_order_api_v1_production_orders__order_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Order Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Production",
          "Orders"
        ],
        "summary": "Update Order",
        "description": "Update an order.",
        "operationId": "update_order_api_v1_production_orders__order_id__patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Order Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OrderUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Production",
          "Orders"
        ],
        "summary": "Delete Order",
        "description": "Delete an order.",
        "operationId": "delete_order_api_v1_production_orders__order_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Order Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/production/runs": {
      "get": {
        "tags": [
          "Production",
          "Production Runs"
        ],
        "summary": "List Runs",
        "description": "List production runs.",
        "operationId": "list_runs_api_v1_production_runs_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "order_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Order Id"
            }
          },
          {
            "name": "line_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Line Id"
            }
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date From"
            }
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date To"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1000,
              "title": "Limit"
            }
          },
          {
            "name": "sort_asc",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Sort Asc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProductionRunRead"
                  },
                  "title": "Response List Runs Api V1 Production Runs Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Production",
          "Production Runs"
        ],
        "summary": "Create Run",
        "description": "Create a new production run.",
        "operationId": "create_run_api_v1_production_runs_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductionRunCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductionRunRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/production/runs/{run_id}": {
      "get": {
        "tags": [
          "Production",
          "Production Runs"
        ],
        "summary": "Get Run",
        "description": "Get production run details.",
        "operationId": "get_run_api_v1_production_runs__run_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductionRunRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Production",
          "Production Runs"
        ],
        "summary": "Update Run",
        "description": "Update a production run.",
        "operationId": "update_run_api_v1_production_runs__run_id__patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductionRunUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductionRunRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Production",
          "Production Runs"
        ],
        "summary": "Delete Run",
        "description": "Delete a production run.",
        "operationId": "delete_run_api_v1_production_runs__run_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/data-sources": {
      "post": {
        "tags": [
          "Data Sources"
        ],
        "summary": "Create Data Source",
        "description": "Create a new data source for a production line.",
        "operationId": "create_data_source_api_v1_data_sources_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__v1__endpoints__datasource__DataSourceCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataSourceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Data Sources"
        ],
        "summary": "List Data Sources",
        "description": "List all data sources with mappings loaded.",
        "operationId": "list_data_sources_api_v1_data_sources_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DataSourceResponse"
                  },
                  "title": "Response List Data Sources Api V1 Data Sources Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/data-sources/{data_source_id}": {
      "get": {
        "tags": [
          "Data Sources"
        ],
        "summary": "Get Data Source",
        "description": "Get data source by ID.",
        "operationId": "get_data_source_api_v1_data_sources__data_source_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "data_source_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Data Source Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataSourceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Data Sources"
        ],
        "summary": "Update Data Source",
        "description": "Update mappings or time column for a specific DataSource.",
        "operationId": "update_data_source_api_v1_data_sources__data_source_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "data_source_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Data Source Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__v1__endpoints__datasource__DataSourceUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataSourceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Data Sources"
        ],
        "summary": "Delete Data Source",
        "description": "Delete a data source and all its associated schema mappings.",
        "operationId": "delete_data_source_api_v1_data_sources__data_source_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "data_source_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Data Source Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/data-sources/line/{line_id}": {
      "get": {
        "tags": [
          "Data Sources"
        ],
        "summary": "Get Data Source By Line",
        "description": "Get data source by ID (line_id IS the DataSource.id after refactor).",
        "operationId": "get_data_source_by_line_api_v1_data_sources_line__line_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "line_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Line Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/DataSourceResponse"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "title": "Response Get Data Source By Line Api V1 Data Sources Line  Line Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/data-sources/by-line/{production_line_id}": {
      "get": {
        "tags": [
          "Data Sources"
        ],
        "summary": "Get Datasource By Line Explicit",
        "description": "Fetch DataSource config for a specific line.\nReturns 200 with null if not found (graceful init).\nAfter refactor: production_line_id IS the DataSource.id directly.",
        "operationId": "get_datasource_by_line_explicit_api_v1_data_sources_by_line__production_line_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "production_line_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Production Line Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/DataSourceResponse"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "title": "Response Get Datasource By Line Explicit Api V1 Data Sources By Line  Production Line Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/data-sources/{data_source_id}/mapping": {
      "put": {
        "tags": [
          "Data Sources"
        ],
        "summary": "Update Schema Mapping",
        "description": "Create a new version of the schema mapping after user validation.",
        "operationId": "update_schema_mapping_api_v1_data_sources__data_source_id__mapping_put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "data_source_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Data Source Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemaMappingCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemaMappingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-decisions": {
      "get": {
        "tags": [
          "AI Decisions"
        ],
        "summary": "List Ai Decisions",
        "description": "List AI decisions with optional filtering.\n\nUseful for:\n- Debugging: See why AI made specific decisions\n- Auditing: Track all AI usage\n- Cost tracking: Monitor token usage\n- Performance analysis: Compare model latencies",
        "operationId": "list_ai_decisions_api_v1_ai_decisions_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "data_source_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by data source ID",
              "title": "Data Source Id"
            },
            "description": "Filter by data source ID"
          },
          {
            "name": "agent_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/AgentType"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by agent type",
              "title": "Agent Type"
            },
            "description": "Filter by agent type"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by start date",
              "title": "Start Date"
            },
            "description": "Filter by start date"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by end date",
              "title": "End Date"
            },
            "description": "Filter by end date"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of results to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Number of results to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of results to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of results to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AIDecisionListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai-decisions/{decision_id}": {
      "get": {
        "tags": [
          "AI Decisions"
        ],
        "summary": "Get Ai Decision",
        "description": "Get a specific AI decision by ID with full details.",
        "operationId": "get_ai_decision_api_v1_ai_decisions__decision_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "decision_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Decision Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AIDecisionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/datasources/{data_source_id}/ai-decisions": {
      "get": {
        "tags": [
          "AI Decisions"
        ],
        "summary": "Get Data Source Ai Decisions",
        "description": "Get recent AI decisions for a specific data source.\n\nUseful for debugging a specific file's processing history.",
        "operationId": "get_data_source_ai_decisions_api_v1_datasources__data_source_id__ai_decisions_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "data_source_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Data Source Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 50,
              "minimum": 1,
              "description": "Number of recent decisions to return",
              "default": 10,
              "title": "Limit"
            },
            "description": "Number of recent decisions to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AIDecisionResponse"
                  },
                  "title": "Response Get Data Source Ai Decisions Api V1 Datasources  Data Source Id  Ai Decisions Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Read User Me",
        "description": "Get current user.",
        "operationId": "read_user_me_api_v1_users_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRead"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Update User Me",
        "description": "Update current user.",
        "operationId": "update_user_me_api_v1_users_me_patch",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRead"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/samples/sample-files": {
      "get": {
        "tags": [
          "Sample Data"
        ],
        "summary": "List Sample Files",
        "description": "List available sample Excel files for testing.",
        "operationId": "list_sample_files_api_v1_samples_sample_files_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/SampleFile"
                  },
                  "type": "array",
                  "title": "Response List Sample Files Api V1 Samples Sample Files Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/samples/sample-files/{filename}": {
      "get": {
        "tags": [
          "Sample Data"
        ],
        "summary": "Download Sample File",
        "description": "Download a specific sample file.",
        "operationId": "download_sample_file_api_v1_samples_sample_files__filename__get",
        "parameters": [
          {
            "name": "filename",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Filename"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/dev/seed": {
      "post": {
        "tags": [
          "Development"
        ],
        "summary": "Trigger Seed",
        "description": "Seed the database with development data.\nOnly available in non-production environments.",
        "operationId": "trigger_seed_api_v1_dev_seed_post",
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/dev/reset-state": {
      "delete": {
        "tags": [
          "Development"
        ],
        "summary": "Reset State",
        "description": "Nuclear option: Reset system state.\nDeletes all Factories, Production Lines, Data Sources, and Uploaded Files.\nKeeps Users.\nOnly available in non-production environments.",
        "operationId": "reset_state_api_v1_dev_reset_state_delete",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/dev/cleanup": {
      "delete": {
        "tags": [
          "Development"
        ],
        "summary": "Cleanup Test Data",
        "description": "Clean up development clutter without nuking everything.\n- Deletes test dashboards (names like 'asd', 'sdf', etc.)\n- Deduplicates alias_mappings\nOnly available in non-production environments.",
        "operationId": "cleanup_test_data_api_v1_dev_cleanup_delete",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/dev/update-limits": {
      "put": {
        "tags": [
          "Development"
        ],
        "summary": "Update Limits",
        "description": "Update organization limits for a specific user (email).\nUseful for testing quota enforcement.",
        "operationId": "update_limits_api_v1_dev_update_limits_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LimitUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/dev/aggregate-dhu": {
      "post": {
        "tags": [
          "Development"
        ],
        "summary": "Trigger Dhu Aggregation",
        "description": "Manually trigger DHU report aggregation.\n\nComputes DHUReport entries from QualityInspection data.\nUseful for testing and backfilling.\n\nArgs:\n    days_back: Number of days to process (default 7)\n    factory_id: Optional filter for specific factory",
        "operationId": "trigger_dhu_aggregation_api_v1_dev_aggregate_dhu_post",
        "parameters": [
          {
            "name": "days_back",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 7,
              "title": "Days Back"
            }
          },
          {
            "name": "factory_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Factory Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Root",
        "description": "Root endpoint - API health check.",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health Check",
        "description": "Health check endpoint for monitoring.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AIDecisionListResponse": {
        "properties": {
          "decisions": {
            "items": {
              "$ref": "#/components/schemas/AIDecisionResponse"
            },
            "type": "array",
            "title": "Decisions"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "decisions",
          "total",
          "limit",
          "offset"
        ],
        "title": "AIDecisionListResponse"
      },
      "AIDecisionResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "data_source_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Source Id"
          },
          "agent_type": {
            "type": "string",
            "title": "Agent Type"
          },
          "model_used": {
            "type": "string",
            "title": "Model Used"
          },
          "input_summary": {
            "type": "string",
            "title": "Input Summary"
          },
          "output_summary": {
            "type": "string",
            "title": "Output Summary"
          },
          "confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence"
          },
          "reasoning": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reasoning"
          },
          "performance_metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Performance Metadata"
          }
        },
        "type": "object",
        "required": [
          "id",
          "created_at",
          "data_source_id",
          "agent_type",
          "model_used",
          "input_summary",
          "output_summary",
          "confidence",
          "reasoning"
        ],
        "title": "AIDecisionResponse"
      },
      "AgentType": {
        "type": "string",
        "enum": [
          "schema_inference",
          "code_generation"
        ],
        "title": "AgentType",
        "description": "Type of AI agent that made the decision."
      },
      "AvailableField": {
        "properties": {
          "field": {
            "type": "string",
            "title": "Field",
            "description": "Canonical field name (e.g., 'actual_qty')"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Human-readable description"
          }
        },
        "type": "object",
        "required": [
          "field",
          "description"
        ],
        "title": "AvailableField",
        "description": "Available canonical field for UI dropdown."
      },
      "Body_upload_file_for_ingestion_api_v1_ingestion_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_file_for_ingestion_api_v1_ingestion_upload_post"
      },
      "ColumnMappingConfirmation": {
        "properties": {
          "source_column": {
            "type": "string",
            "title": "Source Column",
            "description": "Original column name from file"
          },
          "target_field": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Field",
            "description": "Canonical field to map to (None if ignored)"
          },
          "ignored": {
            "type": "boolean",
            "title": "Ignored",
            "description": "True if column should be skipped",
            "default": false
          },
          "user_corrected": {
            "type": "boolean",
            "title": "User Corrected",
            "description": "True if user changed the AI suggestion",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "source_column"
        ],
        "title": "ColumnMappingConfirmation",
        "description": "User's confirmed mapping for a single column.\n\nUsed when submitting final mappings after review."
      },
      "ColumnMappingResult": {
        "properties": {
          "source_column": {
            "type": "string",
            "title": "Source Column",
            "description": "Original column name from uploaded file"
          },
          "target_field": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Field",
            "description": "Canonical field name (e.g., 'actual_qty', 'production_date')"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Confidence score (0.0 to 1.0)"
          },
          "tier": {
            "$ref": "#/components/schemas/MatchTier",
            "description": "Matching tier used: 'hash', 'fuzzy', 'llm', 'manual', 'unmatched'"
          },
          "fuzzy_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fuzzy Score",
            "description": "RapidFuzz similarity score (0-100) if tier='fuzzy'"
          },
          "reasoning": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reasoning",
            "description": "Explanation from matching engine (especially for LLM tier)"
          },
          "sample_data": {
            "items": {},
            "type": "array",
            "title": "Sample Data",
            "description": "Sample values from this column (first 5 non-null)"
          },
          "needs_review": {
            "type": "boolean",
            "title": "Needs Review",
            "description": "True if confidence is medium (0.6-0.9)",
            "default": false
          },
          "ignored": {
            "type": "boolean",
            "title": "Ignored",
            "description": "True if column should be skipped during import",
            "default": false
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Status: 'auto_mapped', 'needs_review', 'needs_attention', 'ignored'"
          }
        },
        "type": "object",
        "required": [
          "source_column",
          "confidence",
          "tier",
          "status"
        ],
        "title": "ColumnMappingResult",
        "description": "API response for a single column mapping result.\n\nRepresents the engine's best guess for mapping a source column\nto a canonical target field, with confidence scoring."
      },
      "ComplexityAnalysisResponse": {
        "properties": {
          "data_points": {
            "items": {
              "$ref": "#/components/schemas/ComplexityPoint"
            },
            "type": "array",
            "title": "Data Points",
            "description": "Scatter plot data points"
          }
        },
        "type": "object",
        "required": [
          "data_points"
        ],
        "title": "ComplexityAnalysisResponse",
        "description": "Complexity vs Performance analysis."
      },
      "ComplexityPoint": {
        "properties": {
          "style_id": {
            "type": "string",
            "title": "Style Id",
            "description": "Style UUID"
          },
          "sam": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Sam",
            "description": "Standard Allowed Minute (Difficulty)"
          },
          "efficiency_pct": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Efficiency Pct",
            "description": "Performance efficiency on this style"
          },
          "style_code": {
            "type": "string",
            "title": "Style Code",
            "description": "Style code text for tooltip"
          }
        },
        "type": "object",
        "required": [
          "style_id",
          "sam",
          "efficiency_pct",
          "style_code"
        ],
        "title": "ComplexityPoint",
        "description": "Single point for Complexity Impact scatter plot."
      },
      "ConfirmMappingRequest": {
        "properties": {
          "raw_import_id": {
            "type": "string",
            "title": "Raw Import Id",
            "description": "UUID of the RawImport to confirm"
          },
          "mappings": {
            "items": {
              "$ref": "#/components/schemas/ColumnMappingConfirmation"
            },
            "type": "array",
            "title": "Mappings",
            "description": "List of confirmed column mappings"
          },
          "time_column": {
            "type": "string",
            "title": "Time Column",
            "description": "REQUIRED: Source column name for time/date data"
          },
          "time_format": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Format",
            "description": "Date format (e.g., 'YYYY-MM-DD', 'DD/MM/YYYY')"
          },
          "data_source_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Source Id",
            "description": "UUID of existing DataSource to associate with"
          },
          "production_line_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Production Line Id",
            "description": "UUID of ProductionLine (required if no data_source_id)"
          },
          "factory_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Factory Id",
            "description": "UUID of Factory for scoped alias learning"
          },
          "learn_corrections": {
            "type": "boolean",
            "title": "Learn Corrections",
            "description": "Whether to save corrections to alias database for future matching",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "raw_import_id",
          "mappings",
          "time_column"
        ],
        "title": "ConfirmMappingRequest",
        "description": "Request to confirm column mappings after user review.\n\nThis is step 3 of the HITL flow. Saves the mapping and optionally\nlearns from user corrections for future matching."
      },
      "ConfirmMappingResponse": {
        "properties": {
          "schema_mapping_id": {
            "type": "string",
            "title": "Schema Mapping Id",
            "description": "UUID of created/updated SchemaMapping"
          },
          "data_source_id": {
            "type": "string",
            "title": "Data Source Id",
            "description": "UUID of associated DataSource"
          },
          "learned_aliases": {
            "type": "integer",
            "title": "Learned Aliases",
            "description": "Number of new aliases learned from corrections"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable success message"
          }
        },
        "type": "object",
        "required": [
          "schema_mapping_id",
          "data_source_id",
          "learned_aliases",
          "message"
        ],
        "title": "ConfirmMappingResponse",
        "description": "Response after confirming mapping."
      },
      "DashboardCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name",
            "description": "Dashboard name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Dashboard description"
          },
          "data_source_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Source Id",
            "description": "UUID of the linked ExcelUpload"
          },
          "widget_config": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/WidgetConfig"
              },
              {
                "type": "null"
              }
            ],
            "description": "Widget configuration"
          },
          "layout_config": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/LayoutConfig"
              },
              {
                "type": "null"
              }
            ],
            "description": "Layout configuration"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "DashboardCreate",
        "description": "Schema for creating a new dashboard."
      },
      "DashboardDetailResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "data_source_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Source Id"
          },
          "widget_config": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Widget Config"
          },
          "layout_config": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Layout Config"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "widget_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Widget Data",
            "description": "Actual widget data fetched from data source"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "name",
          "created_at",
          "updated_at"
        ],
        "title": "DashboardDetailResponse",
        "description": "Detailed dashboard response with widget data."
      },
      "DashboardListResponse": {
        "properties": {
          "dashboards": {
            "items": {
              "$ref": "#/components/schemas/DashboardResponse"
            },
            "type": "array",
            "title": "Dashboards"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "dashboards",
          "count"
        ],
        "title": "DashboardListResponse",
        "description": "List of dashboards for a user."
      },
      "DashboardResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "data_source_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Source Id"
          },
          "widget_config": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Widget Config"
          },
          "layout_config": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Layout Config"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "name",
          "created_at",
          "updated_at"
        ],
        "title": "DashboardResponse",
        "description": "Basic dashboard response schema."
      },
      "DashboardUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "data_source_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Source Id"
          },
          "widget_config": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/WidgetConfig"
              },
              {
                "type": "null"
              }
            ]
          },
          "layout_config": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/LayoutConfig"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "title": "DashboardUpdate",
        "description": "Schema for updating an existing dashboard."
      },
      "DataSourceCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name"
          },
          "code": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "specialty": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Specialty"
          },
          "target_operators": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Operators"
          },
          "target_efficiency_pct": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Efficiency Pct"
          },
          "factory_id": {
            "type": "string",
            "title": "Factory Id",
            "description": "ID of the factory this data source belongs to"
          },
          "settings": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DataSourceSettings"
              },
              {
                "type": "null"
              }
            ]
          },
          "source_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "time_column": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Column"
          },
          "time_format": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Format"
          }
        },
        "type": "object",
        "required": [
          "name",
          "factory_id"
        ],
        "title": "DataSourceCreate",
        "description": "Schema for creating a data source."
      },
      "DataSourceRead": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name"
          },
          "code": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "specialty": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Specialty"
          },
          "target_operators": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Operators"
          },
          "target_efficiency_pct": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Efficiency Pct"
          },
          "id": {
            "type": "string",
            "title": "Id"
          },
          "factory_id": {
            "type": "string",
            "title": "Factory Id"
          },
          "supervisor_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Supervisor Id"
          },
          "source_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "time_column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Column"
          },
          "time_format": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Format"
          },
          "settings": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DataSourceSettings"
              },
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings"
          },
          "parent_data_source_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Data Source Id"
          },
          "is_segment": {
            "type": "boolean",
            "title": "Is Segment",
            "default": false
          },
          "date_range_start": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date Range Start"
          },
          "date_range_end": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date Range End"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "name",
          "id",
          "factory_id",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "DataSourceRead",
        "description": "Schema for reading a data source."
      },
      "DataSourceResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "production_line_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Production Line Id"
          },
          "source_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "time_column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Column"
          },
          "time_format": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Format"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "schema_mappings": {
            "items": {
              "$ref": "#/components/schemas/SchemaMappingResponse"
            },
            "type": "array",
            "title": "Schema Mappings",
            "default": []
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "description",
          "is_active",
          "created_at"
        ],
        "title": "DataSourceResponse"
      },
      "DataSourceSettings": {
        "properties": {
          "is_custom_schedule": {
            "type": "boolean",
            "title": "Is Custom Schedule",
            "description": "If false, uses factory defaults",
            "default": false
          },
          "shift_pattern": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shift Pattern"
          },
          "non_working_days": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Non Working Days"
          }
        },
        "additionalProperties": true,
        "type": "object",
        "title": "DataSourceSettings",
        "description": "Settings specific to a data source.\nCan be inherited from Factory defaults or overridden."
      },
      "DataSourceUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "specialty": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Specialty"
          },
          "target_operators": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Operators"
          },
          "target_efficiency_pct": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Efficiency Pct"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          },
          "settings": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DataSourceSettings"
              },
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings"
          },
          "source_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "time_column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Column"
          },
          "time_format": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Format"
          }
        },
        "type": "object",
        "title": "DataSourceUpdate",
        "description": "Schema for updating a data source."
      },
      "DhuPoint": {
        "properties": {
          "date": {
            "type": "string",
            "title": "Date",
            "description": "Report Date (YYYY-MM-DD)"
          },
          "dhu": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Dhu",
            "description": "Defects per Hundred Units (%)"
          }
        },
        "type": "object",
        "required": [
          "date",
          "dhu"
        ],
        "title": "DhuPoint",
        "description": "Single point for DHU (Quality) Trend."
      },
      "DiscrepanciesResponse": {
        "properties": {
          "discrepancies": {
            "items": {
              "$ref": "#/components/schemas/DiscrepancyItem"
            },
            "type": "array",
            "title": "Discrepancies",
            "description": "List of currently active discrepancies"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total count of active discrepancies"
          }
        },
        "type": "object",
        "required": [
          "discrepancies",
          "total_count"
        ],
        "title": "DiscrepanciesResponse",
        "description": "Discrepancies from AI analysis."
      },
      "DiscrepancyItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique discrepancy UUID"
          },
          "severity": {
            "type": "string",
            "title": "Severity",
            "description": "Severity level: 'High', 'Medium', 'Low'"
          },
          "issue_title": {
            "type": "string",
            "title": "Issue Title",
            "description": "Short title describing the data issue"
          },
          "issue_description": {
            "type": "string",
            "title": "Issue Description",
            "description": "Detailed explanation of what triggered the discrepancy"
          },
          "source_file": {
            "type": "string",
            "title": "Source File",
            "description": "Name of the source file or record where the issue originated"
          }
        },
        "type": "object",
        "required": [
          "id",
          "severity",
          "issue_title",
          "issue_description",
          "source_file"
        ],
        "title": "DiscrepancyItem",
        "description": "Single discrepancy alert."
      },
      "DowntimeAnalysisResponse": {
        "properties": {
          "reasons": {
            "items": {
              "$ref": "#/components/schemas/DowntimeReason"
            },
            "type": "array",
            "title": "Reasons",
            "description": "Top recurring downtime reasons"
          }
        },
        "type": "object",
        "required": [
          "reasons"
        ],
        "title": "DowntimeAnalysisResponse",
        "description": "Downtime/Blocker keyword analysis."
      },
      "DowntimeReason": {
        "properties": {
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Keyword or reason extracted from notes"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Frequency count of this reason"
          }
        },
        "type": "object",
        "required": [
          "reason",
          "count"
        ],
        "title": "DowntimeReason",
        "description": "Recurring downtime reason/keyword."
      },
      "EarnedMinutesStats": {
        "properties": {
          "earned_minutes": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Earned Minutes",
            "description": "Total Earned Minutes (Output * SAM)"
          },
          "total_available_minutes": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Total Available Minutes",
            "description": "Total Available Minutes (Workers * Shift Hours)"
          },
          "efficiency_pct_aggregate": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Efficiency Pct Aggregate",
            "description": "Aggregate Efficiency (Earned / Available)"
          }
        },
        "type": "object",
        "required": [
          "earned_minutes",
          "total_available_minutes",
          "efficiency_pct_aggregate"
        ],
        "title": "EarnedMinutesStats",
        "description": "Earned Minutes KPI stats."
      },
      "FactoryCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name"
          },
          "code": {
            "type": "string",
            "maxLength": 50,
            "title": "Code"
          },
          "location": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Location"
          },
          "country": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Country"
          },
          "timezone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Timezone"
          },
          "settings": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FactorySettings"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "name",
          "code"
        ],
        "title": "FactoryCreate",
        "description": "Schema for creating a factory."
      },
      "FactoryRead": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name"
          },
          "code": {
            "type": "string",
            "maxLength": 50,
            "title": "Code"
          },
          "location": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Location"
          },
          "country": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Country"
          },
          "timezone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Timezone"
          },
          "id": {
            "type": "string",
            "title": "Id"
          },
          "organization_id": {
            "type": "string",
            "title": "Organization Id"
          },
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "total_lines": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Lines"
          },
          "total_workers": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Workers"
          },
          "daily_capacity_units": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Daily Capacity Units"
          },
          "certifications": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Certifications"
          },
          "settings": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FactorySettings"
              },
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "name",
          "code",
          "id",
          "organization_id",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "FactoryRead",
        "description": "Schema for reading a factory."
      },
      "FactorySettings": {
        "properties": {
          "default_shift_pattern": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ShiftConfig"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Shift Pattern"
          },
          "standard_non_working_days": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Standard Non Working Days",
            "description": "0=Mon, 6=Sun",
            "default": [
              5,
              6
            ]
          },
          "timezone": {
            "type": "string",
            "title": "Timezone",
            "description": "e.g. 'America/New_York'",
            "default": "UTC"
          },
          "date_format": {
            "type": "string",
            "title": "Date Format",
            "description": "e.g. 'DD/MM/YYYY'",
            "default": "MM/DD/YYYY"
          },
          "number_format": {
            "type": "string",
            "title": "Number Format",
            "description": "Decimal separator style",
            "default": "1,000.00"
          },
          "measurement_system": {
            "type": "string",
            "title": "Measurement System",
            "description": "'metric' or 'imperial'",
            "default": "metric"
          },
          "fiscal_year_start_month": {
            "type": "integer",
            "maximum": 12.0,
            "minimum": 1.0,
            "title": "Fiscal Year Start Month",
            "description": "Month number (1-12)",
            "default": 1
          }
        },
        "additionalProperties": true,
        "type": "object",
        "title": "FactorySettings"
      },
      "FactoryUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Location"
          },
          "country": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country"
          },
          "timezone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timezone"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          },
          "settings": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FactorySettings"
              },
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings"
          }
        },
        "type": "object",
        "title": "FactoryUpdate",
        "description": "Schema for updating a factory."
      },
      "FactoryWithDataSources": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name"
          },
          "code": {
            "type": "string",
            "maxLength": 50,
            "title": "Code"
          },
          "location": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Location"
          },
          "country": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Country"
          },
          "timezone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Timezone"
          },
          "id": {
            "type": "string",
            "title": "Id"
          },
          "organization_id": {
            "type": "string",
            "title": "Organization Id"
          },
          "city": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "City"
          },
          "address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Address"
          },
          "total_lines": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Lines"
          },
          "total_workers": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Workers"
          },
          "daily_capacity_units": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Daily Capacity Units"
          },
          "certifications": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Certifications"
          },
          "settings": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FactorySettings"
              },
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "data_sources": {
            "items": {
              "$ref": "#/components/schemas/DataSourceRead"
            },
            "type": "array",
            "title": "Data Sources",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "name",
          "code",
          "id",
          "organization_id",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "FactoryWithDataSources",
        "description": "Factory with its data sources."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "LayoutConfig": {
        "properties": {
          "layouts": {
            "items": {
              "$ref": "#/components/schemas/LayoutItem"
            },
            "type": "array",
            "title": "Layouts",
            "description": "Widget layout items"
          }
        },
        "type": "object",
        "title": "LayoutConfig",
        "description": "Dashboard layout configuration."
      },
      "LayoutItem": {
        "properties": {
          "widget_id": {
            "type": "string",
            "title": "Widget Id",
            "description": "Unique identifier for the widget"
          },
          "x": {
            "type": "integer",
            "minimum": 0.0,
            "title": "X",
            "description": "X position in grid"
          },
          "y": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Y",
            "description": "Y position in grid"
          },
          "w": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "W",
            "description": "Width in grid units"
          },
          "h": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "H",
            "description": "Height in grid units"
          }
        },
        "type": "object",
        "required": [
          "widget_id",
          "x",
          "y",
          "w",
          "h"
        ],
        "title": "LayoutItem",
        "description": "Widget layout position and size in grid."
      },
      "LimitUpdate": {
        "properties": {
          "email": {
            "type": "string",
            "title": "Email",
            "default": "demo@linesight.io"
          },
          "max_factories": {
            "type": "integer",
            "title": "Max Factories"
          },
          "max_lines_per_factory": {
            "type": "integer",
            "title": "Max Lines Per Factory"
          },
          "subscription_tier": {
            "$ref": "#/components/schemas/SubscriptionTier",
            "default": "starter"
          }
        },
        "type": "object",
        "required": [
          "max_factories",
          "max_lines_per_factory"
        ],
        "title": "LimitUpdate"
      },
      "LoginRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "LoginRequest",
        "description": "Login request payload."
      },
      "LoginResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "user": {
            "$ref": "#/components/schemas/UserInfo"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "user"
        ],
        "title": "LoginResponse",
        "description": "Login response with JWT token."
      },
      "LowestPerformersResponse": {
        "properties": {
          "workers": {
            "items": {
              "$ref": "#/components/schemas/WorkerPerformance"
            },
            "type": "array",
            "title": "Workers",
            "description": "List of workers identified as requiring coaching/support"
          }
        },
        "type": "object",
        "required": [
          "workers"
        ],
        "title": "LowestPerformersResponse",
        "description": "List of lowest performing workers."
      },
      "MatchTier": {
        "type": "string",
        "enum": [
          "hash",
          "fuzzy",
          "llm",
          "manual",
          "unmatched"
        ],
        "title": "MatchTier",
        "description": "Column matching tier in waterfall engine."
      },
      "MemberRead": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url"
          },
          "role": {
            "type": "string",
            "title": "Role"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "last_login": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login"
          },
          "scopes": {
            "items": {
              "$ref": "#/components/schemas/ScopeRead"
            },
            "type": "array",
            "title": "Scopes",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "role",
          "is_active"
        ],
        "title": "MemberRead",
        "description": "Response schema for an organization member with their scopes."
      },
      "OrderCreate": {
        "properties": {
          "po_number": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Po Number",
            "description": "Purchase Order number from buyer (e.g., 'PO-2024-001')"
          },
          "quantity": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Quantity",
            "description": "Total order quantity in units"
          },
          "size_breakdown": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size Breakdown",
            "description": "Quantity per size (e.g., {'S': 100, 'M': 200, 'L': 150})"
          },
          "uom": {
            "type": "string",
            "maxLength": 20,
            "title": "Uom",
            "description": "Unit of measure (pcs, dozen, etc.)",
            "default": "pcs"
          },
          "color": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Color",
            "description": "Color/colorway (e.g., 'Navy Blue', 'Heather Grey')"
          },
          "order_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Date",
            "description": "Date order was received"
          },
          "planned_cut_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Planned Cut Date",
            "description": "Planned Cut Date (PCD) - when fabric cutting should start"
          },
          "planned_sew_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Planned Sew Date",
            "description": "Planned Sew Date (PSD) - when sewing should start"
          },
          "ex_factory_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ex Factory Date",
            "description": "Ex-Factory Date (EXD) - deadline for shipment from factory"
          },
          "status": {
            "$ref": "#/components/schemas/OrderStatus",
            "description": "Current order status in production lifecycle",
            "default": "pending"
          },
          "priority": {
            "$ref": "#/components/schemas/PriorityLevel",
            "description": "Order priority level",
            "default": "normal"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Additional notes or special instructions"
          },
          "style_id": {
            "type": "string",
            "title": "Style Id"
          }
        },
        "type": "object",
        "required": [
          "po_number",
          "quantity",
          "style_id"
        ],
        "title": "OrderCreate"
      },
      "OrderRead": {
        "properties": {
          "po_number": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Po Number",
            "description": "Purchase Order number from buyer (e.g., 'PO-2024-001')"
          },
          "quantity": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Quantity",
            "description": "Total order quantity in units"
          },
          "size_breakdown": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size Breakdown",
            "description": "Quantity per size (e.g., {'S': 100, 'M': 200, 'L': 150})"
          },
          "uom": {
            "type": "string",
            "maxLength": 20,
            "title": "Uom",
            "description": "Unit of measure (pcs, dozen, etc.)",
            "default": "pcs"
          },
          "color": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Color",
            "description": "Color/colorway (e.g., 'Navy Blue', 'Heather Grey')"
          },
          "order_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Date",
            "description": "Date order was received"
          },
          "planned_cut_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Planned Cut Date",
            "description": "Planned Cut Date (PCD) - when fabric cutting should start"
          },
          "planned_sew_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Planned Sew Date",
            "description": "Planned Sew Date (PSD) - when sewing should start"
          },
          "ex_factory_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ex Factory Date",
            "description": "Ex-Factory Date (EXD) - deadline for shipment from factory"
          },
          "status": {
            "$ref": "#/components/schemas/OrderStatus",
            "description": "Current order status in production lifecycle",
            "default": "pending"
          },
          "priority": {
            "$ref": "#/components/schemas/PriorityLevel",
            "description": "Order priority level",
            "default": "normal"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Additional notes or special instructions"
          },
          "id": {
            "type": "string",
            "title": "Id"
          },
          "style_id": {
            "type": "string",
            "title": "Style Id"
          },
          "qty_cut": {
            "type": "integer",
            "title": "Qty Cut"
          },
          "qty_sewn": {
            "type": "integer",
            "title": "Qty Sewn"
          },
          "qty_packed": {
            "type": "integer",
            "title": "Qty Packed"
          },
          "qty_shipped": {
            "type": "integer",
            "title": "Qty Shipped"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "po_number",
          "quantity",
          "id",
          "style_id",
          "qty_cut",
          "qty_sewn",
          "qty_packed",
          "qty_shipped",
          "created_at",
          "updated_at"
        ],
        "title": "OrderRead"
      },
      "OrderStatus": {
        "type": "string",
        "enum": [
          "pending",
          "confirmed",
          "cutting",
          "sewing",
          "finishing",
          "packing",
          "shipped",
          "cancelled"
        ],
        "title": "OrderStatus",
        "description": "Order lifecycle status tracking."
      },
      "OrderUpdate": {
        "properties": {
          "quantity": {
            "anyOf": [
              {
                "type": "integer",
                "exclusiveMinimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Quantity"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "priority": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority"
          },
          "size_breakdown": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size Breakdown"
          },
          "qty_cut": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Cut"
          },
          "qty_sewn": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Sewn"
          },
          "qty_packed": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Packed"
          },
          "qty_shipped": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Qty Shipped"
          },
          "actual_ship_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Ship Date"
          }
        },
        "type": "object",
        "title": "OrderUpdate"
      },
      "OrganizationRead": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name"
          },
          "code": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "primary_email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Email"
          },
          "primary_phone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Phone"
          },
          "id": {
            "type": "string",
            "title": "Id"
          },
          "subscription_tier": {
            "type": "string",
            "title": "Subscription Tier"
          },
          "settings": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "name",
          "id",
          "subscription_tier",
          "created_at",
          "updated_at"
        ],
        "title": "OrganizationRead",
        "description": "Schema for reading an organization."
      },
      "OrganizationUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "code": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "primary_email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Email"
          },
          "primary_phone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Phone"
          },
          "subscription_tier": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subscription Tier"
          }
        },
        "type": "object",
        "title": "OrganizationUpdate",
        "description": "Schema for updating an organization."
      },
      "OverviewStats": {
        "properties": {
          "total_output": {
            "type": "integer",
            "title": "Total Output",
            "description": "Total units produced across all lines today"
          },
          "output_change_pct": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Output Change Pct",
            "description": "Percentage change in output compared to yesterday"
          },
          "avg_efficiency": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Avg Efficiency",
            "description": "Average line efficiency percentage across the factory today"
          },
          "efficiency_change_pct": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Efficiency Change Pct",
            "description": "Percentage change in efficiency compared to yesterday"
          },
          "discrepancies_count": {
            "type": "integer",
            "title": "Discrepancies Count",
            "description": "Number of active data discrepancies or compliance flags"
          },
          "active_lines": {
            "type": "integer",
            "title": "Active Lines",
            "description": "Number of production lines currently running"
          },
          "total_lines": {
            "type": "integer",
            "title": "Total Lines",
            "description": "Total number of production lines in the factory"
          },
          "last_updated": {
            "type": "string",
            "title": "Last Updated",
            "description": "Timestamp or relative time of last data refresh"
          }
        },
        "type": "object",
        "required": [
          "total_output",
          "output_change_pct",
          "avg_efficiency",
          "efficiency_change_pct",
          "discrepancies_count",
          "active_lines",
          "total_lines",
          "last_updated"
        ],
        "title": "OverviewStats",
        "description": "Dashboard overview statistics."
      },
      "PriorityLevel": {
        "type": "string",
        "enum": [
          "low",
          "normal",
          "high",
          "urgent"
        ],
        "title": "PriorityLevel",
        "description": "General priority levels for various entities."
      },
      "ProcessingResponse": {
        "properties": {
          "raw_import_id": {
            "type": "string",
            "title": "Raw Import Id",
            "description": "UUID of the RawImport record"
          },
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "Original filename"
          },
          "columns": {
            "items": {
              "$ref": "#/components/schemas/ColumnMappingResult"
            },
            "type": "array",
            "title": "Columns",
            "description": "Mapping results for each column"
          },
          "stats": {
            "additionalProperties": true,
            "type": "object",
            "title": "Stats",
            "description": "Engine statistics (tier counts, processing time)"
          },
          "auto_mapped_count": {
            "type": "integer",
            "title": "Auto Mapped Count",
            "description": "Number of columns auto-mapped with high confidence"
          },
          "needs_review_count": {
            "type": "integer",
            "title": "Needs Review Count",
            "description": "Number of columns needing user review"
          },
          "needs_attention_count": {
            "type": "integer",
            "title": "Needs Attention Count",
            "description": "Number of columns that couldn't be mapped"
          }
        },
        "type": "object",
        "required": [
          "raw_import_id",
          "filename",
          "columns",
          "auto_mapped_count",
          "needs_review_count",
          "needs_attention_count"
        ],
        "title": "ProcessingResponse",
        "description": "Response from processing a file through the waterfall matching engine.\n\nContains all column mapping results with statistics."
      },
      "ProductionChartData": {
        "properties": {
          "data_points": {
            "items": {
              "$ref": "#/components/schemas/ProductionDataPoint"
            },
            "type": "array",
            "title": "Data Points",
            "description": "List of daily production metrics for the chart"
          },
          "line_filter": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line Filter",
            "description": "Active line filter ID, if any"
          }
        },
        "type": "object",
        "required": [
          "data_points"
        ],
        "title": "ProductionChartData",
        "description": "Production vs target chart data."
      },
      "ProductionDataPoint": {
        "properties": {
          "day": {
            "type": "string",
            "title": "Day",
            "description": "Day label (e.g., 'Mon', '2025-12-25')"
          },
          "actual": {
            "type": "integer",
            "title": "Actual",
            "description": "Actual units produced on this day"
          },
          "target": {
            "type": "integer",
            "title": "Target",
            "description": "Planned/target units for this day"
          }
        },
        "type": "object",
        "required": [
          "day",
          "actual",
          "target"
        ],
        "title": "ProductionDataPoint",
        "description": "Single point in production chart."
      },
      "ProductionEventItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Event UUID"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "When the event occurred"
          },
          "event_type": {
            "type": "string",
            "title": "Event Type",
            "description": "Type of event (e.g., SCAN, BATCH_UPLOAD)"
          },
          "quantity": {
            "type": "integer",
            "title": "Quantity",
            "description": "Quantity change"
          },
          "line_id": {
            "type": "string",
            "title": "Line Id",
            "description": "Production Line ID"
          },
          "style_id": {
            "type": "string",
            "title": "Style Id",
            "description": "Style ID"
          }
        },
        "type": "object",
        "required": [
          "id",
          "timestamp",
          "event_type",
          "quantity",
          "line_id",
          "style_id"
        ],
        "title": "ProductionEventItem",
        "description": "Single production event."
      },
      "ProductionRunCreate": {
        "properties": {
          "factory_id": {
            "type": "string",
            "title": "Factory Id",
            "description": "UUID of the factory"
          },
          "production_date": {
            "type": "string",
            "format": "date",
            "title": "Production Date",
            "description": "Date when production occurred"
          },
          "shift": {
            "type": "string",
            "pattern": "^(day|night|A|B|C)$",
            "title": "Shift",
            "description": "Shift identifier (day/night for 2-shift, A/B/C for 3-shift)",
            "default": "day"
          },
          "inspection_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Date",
            "description": "Date when quality inspection was performed"
          },
          "planned_qty": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Planned Qty",
            "description": "Target/planned output quantity for the shift",
            "default": 0
          },
          "actual_qty": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Actual Qty",
            "description": "Actual good pieces produced (passed QC)",
            "default": 0
          },
          "sam": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d{0,4}0*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sam",
            "description": "Standard Allowed Minute - time to produce one unit"
          },
          "operators_present": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Operators Present",
            "description": "Number of sewing operators present"
          },
          "helpers_present": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Helpers Present",
            "description": "Number of helpers/assistants present",
            "default": 0
          },
          "worked_minutes": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Worked Minutes",
            "description": "Total minutes the line worked (e.g., 480 for 8hr, 600 for 10hr shift)"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Additional notes or remarks"
          },
          "lot_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lot Number",
            "description": "Fabric lot number for traceability"
          },
          "shade_band": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 10,
                "pattern": "^[A-Z0-9]+$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shade Band",
            "description": "Shade band code (e.g., 'A1', 'B2') for color consistency"
          },
          "batch_number": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Number",
            "description": "Production batch identifier"
          },
          "order_id": {
            "type": "string",
            "title": "Order Id"
          },
          "line_id": {
            "type": "string",
            "title": "Line Id"
          }
        },
        "type": "object",
        "required": [
          "factory_id",
          "production_date",
          "operators_present",
          "worked_minutes",
          "order_id",
          "line_id"
        ],
        "title": "ProductionRunCreate"
      },
      "ProductionRunRead": {
        "properties": {
          "factory_id": {
            "type": "string",
            "title": "Factory Id",
            "description": "UUID of the factory"
          },
          "production_date": {
            "type": "string",
            "format": "date",
            "title": "Production Date",
            "description": "Date when production occurred"
          },
          "shift": {
            "type": "string",
            "pattern": "^(day|night|A|B|C)$",
            "title": "Shift",
            "description": "Shift identifier (day/night for 2-shift, A/B/C for 3-shift)",
            "default": "day"
          },
          "inspection_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Inspection Date",
            "description": "Date when quality inspection was performed"
          },
          "planned_qty": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Planned Qty",
            "description": "Target/planned output quantity for the shift",
            "default": 0
          },
          "actual_qty": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Actual Qty",
            "description": "Actual good pieces produced (passed QC)",
            "default": 0
          },
          "sam": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d{0,4}0*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sam",
            "description": "Standard Allowed Minute - time to produce one unit"
          },
          "operators_present": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Operators Present",
            "description": "Number of sewing operators present"
          },
          "helpers_present": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Helpers Present",
            "description": "Number of helpers/assistants present",
            "default": 0
          },
          "worked_minutes": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Worked Minutes",
            "description": "Total minutes the line worked (e.g., 480 for 8hr, 600 for 10hr shift)"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Additional notes or remarks"
          },
          "lot_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lot Number",
            "description": "Fabric lot number for traceability"
          },
          "shade_band": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 10,
                "pattern": "^[A-Z0-9]+$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shade Band",
            "description": "Shade band code (e.g., 'A1', 'B2') for color consistency"
          },
          "batch_number": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Batch Number",
            "description": "Production batch identifier"
          },
          "id": {
            "type": "string",
            "title": "Id"
          },
          "order_id": {
            "type": "string",
            "title": "Order Id"
          },
          "line_id": {
            "type": "string",
            "title": "Line Id"
          },
          "efficiency": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Efficiency",
            "description": "Computed: (Earned / Available) * 100"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "earned_minutes": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Earned Minutes",
            "description": "Computed: Actual Qty * SAM",
            "readOnly": true
          }
        },
        "type": "object",
        "required": [
          "factory_id",
          "production_date",
          "operators_present",
          "worked_minutes",
          "id",
          "order_id",
          "line_id",
          "created_at",
          "updated_at",
          "earned_minutes"
        ],
        "title": "ProductionRunRead"
      },
      "ProductionRunUpdate": {
        "properties": {
          "actual_qty": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Qty"
          },
          "worked_minutes": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Worked Minutes"
          },
          "operators_present": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Operators Present"
          },
          "sam": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sam"
          },
          "wip_end": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Wip End"
          }
        },
        "type": "object",
        "title": "ProductionRunUpdate"
      },
      "RegisterRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "title": "Password"
          },
          "full_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 2,
            "title": "Full Name"
          },
          "organization_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 2,
            "title": "Organization Name"
          },
          "organization_code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 2,
            "title": "Organization Code"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password",
          "full_name",
          "organization_name",
          "organization_code"
        ],
        "title": "RegisterRequest",
        "description": "Registration request payload."
      },
      "RegisterResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message"
          },
          "user_id": {
            "type": "string",
            "title": "User Id"
          }
        },
        "type": "object",
        "required": [
          "message",
          "user_id"
        ],
        "title": "RegisterResponse",
        "description": "Registration response."
      },
      "SamBreakdownItem": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Style name or number"
          },
          "actual": {
            "type": "integer",
            "title": "Actual",
            "description": "Actual earned minutes"
          },
          "standard": {
            "type": "integer",
            "title": "Standard",
            "description": "Standard/Target minutes"
          },
          "efficiency": {
            "type": "number",
            "title": "Efficiency",
            "description": "Efficiency percentage for this style"
          }
        },
        "type": "object",
        "required": [
          "name",
          "actual",
          "standard",
          "efficiency"
        ],
        "title": "SamBreakdownItem",
        "description": "Breakdown of SAM performance by style."
      },
      "SamPerformanceResponse": {
        "properties": {
          "efficiency": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Efficiency",
            "description": "Current efficiency percentage based on SAM"
          },
          "efficiency_change": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Efficiency Change",
            "description": "Change in efficiency vs equivalent previous period"
          },
          "avg_sam_per_hour": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Avg Sam Per Hour",
            "description": "Average SAM earned per hour"
          },
          "total_sam": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Total Sam",
            "description": "Total SAM accumulation"
          },
          "breakdown": {
            "items": {
              "$ref": "#/components/schemas/SamBreakdownItem"
            },
            "type": "array",
            "title": "Breakdown",
            "description": "Breakdown by style for charts",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "efficiency",
          "efficiency_change",
          "avg_sam_per_hour",
          "total_sam"
        ],
        "title": "SamPerformanceResponse",
        "description": "SAM performance metrics."
      },
      "SampleFile": {
        "properties": {
          "filename": {
            "type": "string",
            "title": "Filename"
          },
          "size": {
            "type": "integer",
            "title": "Size"
          },
          "description": {
            "type": "string",
            "title": "Description"
          }
        },
        "type": "object",
        "required": [
          "filename",
          "size",
          "description"
        ],
        "title": "SampleFile"
      },
      "SchemaMappingCreate": {
        "properties": {
          "column_map": {
            "additionalProperties": true,
            "type": "object",
            "title": "Column Map",
            "description": "Mapping from Excel columns to internal fields"
          },
          "extraction_rules": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extraction Rules",
            "description": "Parsing rules (skip_rows, header_row, etc.)"
          },
          "reviewed_by_user": {
            "type": "boolean",
            "title": "Reviewed By User",
            "description": "Whether user has validated this mapping",
            "default": false
          },
          "user_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Notes"
          }
        },
        "type": "object",
        "required": [
          "column_map"
        ],
        "title": "SchemaMappingCreate"
      },
      "SchemaMappingResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "version": {
            "type": "integer",
            "title": "Version"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "column_map": {
            "additionalProperties": true,
            "type": "object",
            "title": "Column Map"
          },
          "extraction_rules": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extraction Rules"
          },
          "reviewed_by_user": {
            "type": "boolean",
            "title": "Reviewed By User"
          },
          "user_notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Notes"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "version",
          "is_active",
          "column_map",
          "extraction_rules",
          "reviewed_by_user",
          "user_notes",
          "created_at"
        ],
        "title": "SchemaMappingResponse"
      },
      "ScopeAssign": {
        "properties": {
          "data_source_id": {
            "type": "string",
            "title": "Data Source Id"
          },
          "role": {
            "type": "string",
            "title": "Role",
            "default": "manager"
          }
        },
        "type": "object",
        "required": [
          "data_source_id"
        ],
        "title": "ScopeAssign",
        "description": "Request body for assigning a user to a data source."
      },
      "ScopeRead": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "scope_type": {
            "type": "string",
            "title": "Scope Type"
          },
          "organization_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Organization Id"
          },
          "factory_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Factory Id"
          },
          "data_source_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Source Id"
          },
          "role": {
            "type": "string",
            "title": "Role"
          }
        },
        "type": "object",
        "required": [
          "id",
          "scope_type",
          "role"
        ],
        "title": "ScopeRead",
        "description": "Response schema for a user scope assignment."
      },
      "ShiftConfig": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "description": "e.g., 'Morning Shift'"
          },
          "start_time": {
            "type": "string",
            "pattern": "^\\d{2}:\\d{2}$",
            "title": "Start Time",
            "description": "HH:MM format (24h)"
          },
          "end_time": {
            "type": "string",
            "pattern": "^\\d{2}:\\d{2}$",
            "title": "End Time",
            "description": "HH:MM format (24h)"
          }
        },
        "type": "object",
        "required": [
          "name",
          "start_time",
          "end_time"
        ],
        "title": "ShiftConfig"
      },
      "SpeedQualityPoint": {
        "properties": {
          "date": {
            "type": "string",
            "title": "Date",
            "description": "Date label (e.g., '2025-01-01')"
          },
          "efficiency_pct": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Efficiency Pct",
            "description": "Average efficiency percentage for this day"
          },
          "defects_per_hundred": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Defects Per Hundred",
            "description": "Defects per hundred units (DHU)"
          }
        },
        "type": "object",
        "required": [
          "date",
          "efficiency_pct",
          "defects_per_hundred"
        ],
        "title": "SpeedQualityPoint",
        "description": "Single point for Speed vs Quality chart."
      },
      "SpeedQualityResponse": {
        "properties": {
          "data_points": {
            "items": {
              "$ref": "#/components/schemas/SpeedQualityPoint"
            },
            "type": "array",
            "title": "Data Points",
            "description": "Daily trend of efficiency vs defects"
          }
        },
        "type": "object",
        "required": [
          "data_points"
        ],
        "title": "SpeedQualityResponse",
        "description": "Speed vs Quality trade-off analysis."
      },
      "StyleCreate": {
        "properties": {
          "style_number": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Style Number",
            "description": "Unique identifier for the style (e.g., 'ABC-123', 'POLO-001')"
          },
          "style_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Style Name",
            "description": "Human-readable name (e.g., 'Classic Polo Shirt')"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Detailed description of the garment"
          },
          "buyer": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Buyer",
            "description": "Brand/customer name (e.g., 'Nike', 'H&M')"
          },
          "season": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Season",
            "description": "Season code (e.g., 'SS24', 'FW25', 'AW2024')"
          },
          "category": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Category",
            "description": "Garment category (e.g., 'Tops', 'Bottoms', 'Outerwear')"
          },
          "base_sam": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d{0,4}0*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Sam",
            "description": "Standard Allowed Minute - time to produce one unit (e.g., 12.5 minutes)"
          },
          "complexity_rating": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PriorityLevel"
              },
              {
                "type": "null"
              }
            ],
            "description": "Complexity level affecting SAM adjustments"
          },
          "bom_summary": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bom Summary",
            "description": "Bill of Materials summary (fabric, trims, accessories)"
          },
          "tech_pack_url": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 1,
                "format": "uri"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tech Pack Url",
            "description": "URL to technical specification document"
          },
          "factory_id": {
            "type": "string",
            "title": "Factory Id"
          }
        },
        "type": "object",
        "required": [
          "style_number",
          "factory_id"
        ],
        "title": "StyleCreate"
      },
      "StyleProgressItem": {
        "properties": {
          "style_code": {
            "type": "string",
            "title": "Style Code",
            "description": "Style code (e.g., 'ST-2025-A')"
          },
          "target": {
            "type": "integer",
            "title": "Target",
            "description": "Target production quantity"
          },
          "actual": {
            "type": "integer",
            "title": "Actual",
            "description": "Actual production quantity so far"
          },
          "progress_pct": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Progress Pct",
            "description": "Percentage of target completed"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Status string: 'On Track', 'Behind', 'Completed'"
          }
        },
        "type": "object",
        "required": [
          "style_code",
          "target",
          "actual",
          "progress_pct",
          "status"
        ],
        "title": "StyleProgressItem",
        "description": "Progress of a single style in production."
      },
      "StyleProgressResponse": {
        "properties": {
          "active_styles": {
            "items": {
              "$ref": "#/components/schemas/StyleProgressItem"
            },
            "type": "array",
            "title": "Active Styles",
            "description": "List of active styles and their progress"
          }
        },
        "type": "object",
        "required": [
          "active_styles"
        ],
        "title": "StyleProgressResponse",
        "description": "List of style progress items."
      },
      "StyleRead": {
        "properties": {
          "style_number": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Style Number",
            "description": "Unique identifier for the style (e.g., 'ABC-123', 'POLO-001')"
          },
          "style_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Style Name",
            "description": "Human-readable name (e.g., 'Classic Polo Shirt')"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Detailed description of the garment"
          },
          "buyer": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Buyer",
            "description": "Brand/customer name (e.g., 'Nike', 'H&M')"
          },
          "season": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Season",
            "description": "Season code (e.g., 'SS24', 'FW25', 'AW2024')"
          },
          "category": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Category",
            "description": "Garment category (e.g., 'Tops', 'Bottoms', 'Outerwear')"
          },
          "base_sam": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d{0,4}0*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Sam",
            "description": "Standard Allowed Minute - time to produce one unit (e.g., 12.5 minutes)"
          },
          "complexity_rating": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PriorityLevel"
              },
              {
                "type": "null"
              }
            ],
            "description": "Complexity level affecting SAM adjustments"
          },
          "bom_summary": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bom Summary",
            "description": "Bill of Materials summary (fabric, trims, accessories)"
          },
          "tech_pack_url": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 1,
                "format": "uri"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tech Pack Url",
            "description": "URL to technical specification document"
          },
          "id": {
            "type": "string",
            "title": "Id"
          },
          "factory_id": {
            "type": "string",
            "title": "Factory Id"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "style_number",
          "id",
          "factory_id",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "StyleRead"
      },
      "StyleUpdate": {
        "properties": {
          "style_number": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Style Number"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "buyer": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Buyer"
          },
          "season": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Season"
          },
          "base_sam": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Base Sam"
          },
          "bom_summary": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bom Summary"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          }
        },
        "type": "object",
        "title": "StyleUpdate"
      },
      "SubscriptionTier": {
        "type": "string",
        "enum": [
          "starter",
          "pro",
          "enterprise"
        ],
        "title": "SubscriptionTier",
        "description": "Organization subscription tiers."
      },
      "TargetRealizationResponse": {
        "properties": {
          "actual": {
            "type": "integer",
            "title": "Actual",
            "description": "Actual units produced"
          },
          "target": {
            "type": "integer",
            "title": "Target",
            "description": "Target units expected"
          },
          "percentage": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Percentage",
            "description": "Percentage of target realized (Actual / Target * 100)"
          },
          "variance": {
            "type": "integer",
            "title": "Variance",
            "description": "Variance (Actual - Target)"
          }
        },
        "type": "object",
        "required": [
          "actual",
          "target",
          "percentage",
          "variance"
        ],
        "title": "TargetRealizationResponse",
        "description": "Target Realization metrics."
      },
      "UserInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "full_name": {
            "type": "string",
            "title": "Full Name"
          },
          "role": {
            "type": "string",
            "title": "Role"
          },
          "organization_id": {
            "type": "string",
            "title": "Organization Id"
          },
          "timezone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timezone"
          },
          "preferences": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferences"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "full_name",
          "role",
          "organization_id"
        ],
        "title": "UserInfo",
        "description": "User information returned after login."
      },
      "UserPreferences": {
        "properties": {
          "theme": {
            "type": "string",
            "title": "Theme",
            "default": "system"
          },
          "country_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country Code"
          },
          "notifications": {
            "type": "boolean",
            "title": "Notifications",
            "default": true
          },
          "locale": {
            "type": "string",
            "title": "Locale",
            "default": "en-US"
          }
        },
        "type": "object",
        "title": "UserPreferences",
        "description": "Schema for user preferences JSON structure."
      },
      "UserPreferencesUpdate": {
        "properties": {
          "theme": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Theme"
          },
          "country_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Country Code"
          },
          "notifications": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notifications"
          },
          "locale": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Locale"
          }
        },
        "type": "object",
        "title": "UserPreferencesUpdate",
        "description": "Schema for updating user preferences (all fields optional for merging)."
      },
      "UserRead": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "id": {
            "type": "string",
            "title": "Id"
          },
          "organization_id": {
            "type": "string",
            "title": "Organization Id"
          },
          "role": {
            "type": "string",
            "title": "Role"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "is_verified": {
            "type": "boolean",
            "title": "Is Verified"
          },
          "timezone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timezone"
          },
          "preferences": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UserPreferences"
              },
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferences"
          },
          "last_login": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "email",
          "id",
          "organization_id",
          "role",
          "is_active",
          "is_verified",
          "created_at",
          "updated_at"
        ],
        "title": "UserRead",
        "description": "Schema for reading a user."
      },
      "UserUpdate": {
        "properties": {
          "email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "role": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Role"
          },
          "timezone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Timezone"
          },
          "preferences": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UserPreferencesUpdate"
              },
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferences"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          }
        },
        "type": "object",
        "title": "UserUpdate",
        "description": "Schema for updating a user."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WaitlistCreate": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          }
        },
        "type": "object",
        "required": [
          "email"
        ],
        "title": "WaitlistCreate",
        "description": "Schema for creating a waitlist entry."
      },
      "WaitlistResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "referral_code": {
            "type": "string",
            "title": "Referral Code"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "referral_code",
          "created_at"
        ],
        "title": "WaitlistResponse",
        "description": "Schema for waitlist response."
      },
      "WidgetConfig": {
        "properties": {
          "enabled_widgets": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Enabled Widgets",
            "description": "List of enabled widget types"
          },
          "widget_settings": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Widget Settings",
            "description": "Per-widget custom settings"
          }
        },
        "type": "object",
        "title": "WidgetConfig",
        "description": "Dashboard widget configuration."
      },
      "WorkerPerformance": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique worker UUID"
          },
          "initials": {
            "type": "string",
            "title": "Initials",
            "description": "Worker initials for display (e.g., 'JS')"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Full display name of the worker"
          },
          "line_name": {
            "type": "string",
            "title": "Line Name",
            "description": "Name of the line the worker is assigned to"
          },
          "operation": {
            "type": "string",
            "title": "Operation",
            "description": "Primary operation performed by the worker (e.g., 'Hemming')"
          },
          "efficiency_pct": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Efficiency Pct",
            "description": "Current efficiency percentage for this week"
          }
        },
        "type": "object",
        "required": [
          "id",
          "initials",
          "name",
          "line_name",
          "operation",
          "efficiency_pct"
        ],
        "title": "WorkerPerformance",
        "description": "Worker efficiency ranking item."
      },
      "WorkforceStats": {
        "properties": {
          "present": {
            "type": "integer",
            "title": "Present",
            "description": "Number of workers currently present"
          },
          "target": {
            "type": "integer",
            "title": "Target",
            "description": "Target number of workers for the line/factory"
          },
          "absent": {
            "type": "integer",
            "title": "Absent",
            "description": "Number of workers absent"
          },
          "late": {
            "type": "integer",
            "title": "Late",
            "description": "Number of workers late"
          }
        },
        "type": "object",
        "required": [
          "present",
          "target",
          "absent",
          "late"
        ],
        "title": "WorkforceStats",
        "description": "Workforce attendance statistics."
      },
      "app__api__v1__endpoints__datasource__DataSourceCreate": {
        "properties": {
          "production_line_id": {
            "type": "string",
            "title": "Production Line Id"
          },
          "source_name": {
            "type": "string",
            "title": "Source Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "initial_mapping": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SchemaMappingCreate"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "production_line_id",
          "source_name"
        ],
        "title": "DataSourceCreate"
      },
      "app__api__v1__endpoints__datasource__DataSourceUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Code"
          },
          "specialty": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Specialty"
          },
          "target_operators": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Operators"
          },
          "target_efficiency_pct": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Efficiency Pct"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          },
          "settings": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings"
          },
          "time_column": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Column"
          },
          "time_format": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Format"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "source_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Name"
          }
        },
        "type": "object",
        "title": "DataSourceUpdate",
        "description": "Schema for updating DataSource configuration."
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}